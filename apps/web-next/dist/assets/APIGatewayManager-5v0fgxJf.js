import{r as o,j as e,c as i}from"./index-SfRm27bA.js";const l=[{id:"gw-prod",name:"Production Gateway",environment:"production",status:"active",upstreamUrl:"https://api-internal.openclawapp.com",requestsPerMin:4820,avgLatencyMs:42,errorRate:.3,rps:80.4,region:"us-east-1"},{id:"gw-staging",name:"Staging Gateway",environment:"staging",status:"active",upstreamUrl:"https://api-staging.openclawapp.com",requestsPerMin:240,avgLatencyMs:58,errorRate:1.2,rps:4,region:"us-east-1"},{id:"gw-eu",name:"EU Gateway",environment:"production",status:"degraded",upstreamUrl:"https://api-eu.openclawapp.com",requestsPerMin:1840,avgLatencyMs:124,errorRate:3.8,rps:30.7,region:"eu-west-1"},{id:"gw-dev",name:"Development Gateway",environment:"development",status:"active",upstreamUrl:"https://api-dev.openclawapp.com",requestsPerMin:42,avgLatencyMs:182,errorRate:8.4,rps:.7,region:"us-east-1"}],c=[{id:"rt1",gatewayId:"gw-prod",method:"GET",path:"/v1/users",upstreamPath:"/users",auth:"jwt",rateLimit:100,cacheTtl:30,enabled:!0,requestCount24h:48200,avgLatencyMs:38,errorRate:.1},{id:"rt2",gatewayId:"gw-prod",method:"POST",path:"/v1/users",upstreamPath:"/users",auth:"jwt",rateLimit:20,cacheTtl:0,enabled:!0,requestCount24h:12400,avgLatencyMs:62,errorRate:.4},{id:"rt3",gatewayId:"gw-prod",method:"GET",path:"/v1/agents",upstreamPath:"/agents",auth:"jwt",rateLimit:60,cacheTtl:10,enabled:!0,requestCount24h:82e3,avgLatencyMs:28,errorRate:.2},{id:"rt4",gatewayId:"gw-prod",method:"POST",path:"/v1/sessions/{id}/messages",upstreamPath:"/sessions/{id}/messages",auth:"jwt",rateLimit:10,cacheTtl:0,enabled:!0,requestCount24h:124e3,avgLatencyMs:1820,errorRate:.3},{id:"rt5",gatewayId:"gw-prod",method:"ANY",path:"/v1/webhooks/inbound",upstreamPath:"/webhooks/inbound",auth:"api-key",rateLimit:500,cacheTtl:0,enabled:!0,requestCount24h:28400,avgLatencyMs:18,errorRate:.8},{id:"rt6",gatewayId:"gw-prod",method:"GET",path:"/v1/billing/usage",upstreamPath:"/billing/usage",auth:"jwt",rateLimit:10,cacheTtl:300,enabled:!0,requestCount24h:4200,avgLatencyMs:220,errorRate:.1},{id:"rt7",gatewayId:"gw-prod",method:"GET",path:"/v1/audit/events",upstreamPath:"/audit/events",auth:"jwt",rateLimit:5,cacheTtl:60,enabled:!0,requestCount24h:1800,avgLatencyMs:340,errorRate:0},{id:"rt8",gatewayId:"gw-prod",method:"POST",path:"/v1/auth/token",upstreamPath:"/auth/token",auth:"none",rateLimit:30,cacheTtl:0,enabled:!0,requestCount24h:42e3,avgLatencyMs:88,errorRate:2.1},{id:"rt9",gatewayId:"gw-prod",method:"DELETE",path:"/v1/sessions/{id}",upstreamPath:"/sessions/{id}",auth:"jwt",rateLimit:20,cacheTtl:0,enabled:!0,requestCount24h:8400,avgLatencyMs:32,errorRate:.2},{id:"rt10",gatewayId:"gw-staging",method:"ANY",path:"/*",upstreamPath:"/*",auth:"api-key",rateLimit:1e3,cacheTtl:0,enabled:!0,requestCount24h:5800,avgLatencyMs:58,errorRate:1.2}],m=[{id:"pl1",name:"JWT Validator",type:"auth",enabled:!0,appliedTo:"All routes (jwt)",config:"issuer: openclawapp.com, algorithm: RS256"},{id:"pl2",name:"Rate Limiter",type:"traffic",enabled:!0,appliedTo:"All routes",config:"strategy: sliding-window, redis-backend"},{id:"pl3",name:"Request Logger",type:"logging",enabled:!0,appliedTo:"All routes",config:"format: json, destination: CloudWatch"},{id:"pl4",name:"Response Cache",type:"caching",enabled:!0,appliedTo:"Routes with cacheTtl > 0",config:"backend: redis, max-size: 500MB"},{id:"pl5",name:"IP Allowlist",type:"security",enabled:!1,appliedTo:"/v1/admin/*",config:"allowlist: 10.0.0.0/8, 172.16.0.0/12"},{id:"pl6",name:"Request Transform",type:"transform",enabled:!0,appliedTo:"/v1/webhooks/inbound",config:"add-header: X-Webhook-Source, strip-prefix: /v1"},{id:"pl7",name:"CORS Handler",type:"security",enabled:!0,appliedTo:"All routes",config:"origins: openclawapp.com, allow-credentials: true"},{id:"pl8",name:"API Key Auth",type:"auth",enabled:!0,appliedTo:"Routes (api-key)",config:"header: X-API-Key, lookup: dynamodb"}],x=[{hour:"00:00",requests:1240,errors:18,p99Ms:320},{hour:"02:00",requests:820,errors:12,p99Ms:280},{hour:"04:00",requests:640,errors:8,p99Ms:240},{hour:"06:00",requests:2840,errors:24,p99Ms:380},{hour:"08:00",requests:4820,errors:42,p99Ms:480},{hour:"10:00",requests:6200,errors:48,p99Ms:520},{hour:"12:00",requests:8400,errors:62,p99Ms:580},{hour:"14:00",requests:7800,errors:58,p99Ms:560},{hour:"16:00",requests:6800,errors:54,p99Ms:540},{hour:"18:00",requests:5400,errors:44,p99Ms:500},{hour:"20:00",requests:3800,errors:32,p99Ms:420},{hour:"22:00",requests:2200,errors:24,p99Ms:360}];function p(s){return s==="active"?"bg-emerald-400":s==="degraded"?"bg-amber-400":"bg-rose-500"}function b(s){return s==="active"?"text-emerald-400":s==="degraded"?"text-amber-400":"text-rose-400"}function h(s){return{GET:"bg-emerald-500/20 text-emerald-400 border-emerald-500/30",POST:"bg-indigo-500/20 text-indigo-400 border-indigo-500/30",PUT:"bg-amber-500/20 text-amber-400 border-amber-500/30",PATCH:"bg-blue-500/20 text-blue-400 border-blue-500/30",DELETE:"bg-rose-500/20 text-rose-400 border-rose-500/30",ANY:"bg-zinc-500/20 text-zinc-400 border-zinc-500/30"}[s]}function g(s){return{jwt:"text-indigo-400","api-key":"text-amber-400",oauth2:"text-blue-400",none:"text-zinc-500"}[s]}function v(s){return{auth:"bg-rose-500/20 text-rose-400 border-rose-500/30",transform:"bg-amber-500/20 text-amber-400 border-amber-500/30",logging:"bg-zinc-500/20 text-zinc-400 border-zinc-500/30",caching:"bg-emerald-500/20 text-emerald-400 border-emerald-500/30",security:"bg-blue-500/20 text-blue-400 border-blue-500/30",traffic:"bg-indigo-500/20 text-indigo-400 border-indigo-500/30"}[s]}function j(){const[s,r]=o.useState(null);return e.jsx("div",{className:"space-y-3",children:l.map(a=>e.jsxs("div",{className:i("rounded-xl border p-4 cursor-pointer transition-all",(s==null?void 0:s.id)===a.id?"border-indigo-500 bg-indigo-500/5":"border-zinc-800 bg-zinc-900 hover:border-zinc-600"),onClick:()=>r((s==null?void 0:s.id)===a.id?null:a),children:[e.jsxs("div",{className:"flex items-center gap-3",children:[e.jsx("span",{className:i("w-2.5 h-2.5 rounded-full shrink-0",p(a.status))}),e.jsxs("div",{className:"flex-1",children:[e.jsxs("div",{className:"flex items-center gap-2",children:[e.jsx("span",{className:"font-medium text-white",children:a.name}),e.jsx("span",{className:"text-xs bg-zinc-800 text-zinc-400 rounded px-2 py-0.5",children:a.environment}),e.jsx("span",{className:i("text-xs capitalize",b(a.status)),children:a.status})]}),e.jsxs("div",{className:"text-xs text-zinc-500 mt-0.5",children:[a.upstreamUrl," 路 ",a.region]})]}),e.jsxs("div",{className:"grid grid-cols-3 gap-4 text-center",children:[e.jsxs("div",{children:[e.jsx("div",{className:"text-sm font-semibold text-white",children:a.rps.toFixed(0)}),e.jsx("div",{className:"text-xs text-zinc-500",children:"RPS"})]}),e.jsxs("div",{children:[e.jsxs("div",{className:"text-sm font-semibold text-white",children:[a.avgLatencyMs,"ms"]}),e.jsx("div",{className:"text-xs text-zinc-500",children:"Latency"})]}),e.jsxs("div",{children:[e.jsxs("div",{className:i("text-sm font-semibold",a.errorRate>2?"text-rose-400":"text-emerald-400"),children:[a.errorRate,"%"]}),e.jsx("div",{className:"text-xs text-zinc-500",children:"Error"})]})]})]}),(s==null?void 0:s.id)===a.id&&e.jsxs("div",{className:"mt-4 border-t border-zinc-800 pt-4",children:[e.jsx("div",{className:"text-xs text-zinc-500 mb-1",children:"Upstream URL"}),e.jsx("div",{className:"font-mono text-xs text-indigo-300 bg-zinc-950 border border-zinc-700 rounded px-3 py-2",children:a.upstreamUrl}),e.jsxs("div",{className:"mt-3 grid grid-cols-2 gap-4 text-xs",children:[e.jsxs("div",{className:"flex justify-between",children:[e.jsx("span",{className:"text-zinc-500",children:"Req/min"}),e.jsx("span",{className:"text-zinc-300",children:a.requestsPerMin.toLocaleString()})]}),e.jsxs("div",{className:"flex justify-between",children:[e.jsx("span",{className:"text-zinc-500",children:"Routes"}),e.jsx("span",{className:"text-zinc-300",children:c.filter(n=>n.gatewayId===a.id).length})]})]})]})]},a.id))})}function f(){const[s,r]=o.useState("gw-prod"),[a,n]=o.useState(null),d=c.filter(t=>t.gatewayId===s);return e.jsxs("div",{className:"space-y-4",children:[e.jsx("div",{className:"flex gap-2",children:l.map(t=>e.jsx("button",{onClick:()=>r(t.id),className:i("px-3 py-1.5 rounded-lg text-xs font-medium transition-colors",s===t.id?"bg-indigo-600 text-white":"bg-zinc-800 text-zinc-400 hover:text-white"),children:t.name},t.id))}),e.jsx("div",{className:"space-y-2",children:d.map(t=>e.jsxs("div",{className:i("rounded-xl border p-3 cursor-pointer transition-all",!t.enabled&&"opacity-50",(a==null?void 0:a.id)===t.id?"border-indigo-500 bg-indigo-500/5":"border-zinc-800 bg-zinc-900 hover:border-zinc-600"),onClick:()=>n((a==null?void 0:a.id)===t.id?null:t),children:[e.jsxs("div",{className:"flex items-center gap-3",children:[e.jsx("span",{className:i("inline-block px-2 py-0.5 rounded text-xs font-mono font-bold border",h(t.method)),children:t.method}),e.jsx("span",{className:"font-mono text-sm text-white",children:t.path}),e.jsx("span",{className:i("text-xs ml-auto",g(t.auth)),children:t.auth}),e.jsxs("span",{className:"text-xs text-zinc-500",children:[(t.requestCount24h/1e3).toFixed(0),"K/day"]}),e.jsxs("span",{className:"text-xs text-zinc-400",children:[t.avgLatencyMs,"ms"]}),e.jsxs("span",{className:i("text-xs",t.errorRate>2?"text-rose-400":"text-zinc-500"),children:[t.errorRate,"%"]})]}),(a==null?void 0:a.id)===t.id&&e.jsxs("div",{className:"mt-3 grid grid-cols-2 gap-4 border-t border-zinc-800 pt-3 text-xs",children:[e.jsxs("div",{className:"space-y-1.5",children:[e.jsxs("div",{className:"flex justify-between",children:[e.jsx("span",{className:"text-zinc-500",children:"Upstream path"}),e.jsx("span",{className:"font-mono text-indigo-300",children:t.upstreamPath})]}),e.jsxs("div",{className:"flex justify-between",children:[e.jsx("span",{className:"text-zinc-500",children:"Rate limit"}),e.jsxs("span",{className:"text-zinc-300",children:[t.rateLimit," req/min"]})]})]}),e.jsxs("div",{className:"space-y-1.5",children:[e.jsxs("div",{className:"flex justify-between",children:[e.jsx("span",{className:"text-zinc-500",children:"Cache TTL"}),e.jsx("span",{className:"text-zinc-300",children:t.cacheTtl>0?t.cacheTtl+"s":"disabled"})]}),e.jsxs("div",{className:"flex justify-between",children:[e.jsx("span",{className:"text-zinc-500",children:"Status"}),e.jsx("span",{className:t.enabled?"text-emerald-400":"text-zinc-500",children:t.enabled?"active":"disabled"})]})]})]})]},t.id))})]})}function y(){return e.jsx("div",{className:"space-y-3",children:m.map(s=>e.jsxs("div",{className:"rounded-xl border border-zinc-800 bg-zinc-900 p-4 flex items-center gap-4",children:[e.jsx("div",{className:i("w-2 h-2 rounded-full shrink-0",s.enabled?"bg-emerald-400":"bg-zinc-600")}),e.jsxs("div",{className:"flex-1",children:[e.jsxs("div",{className:"flex items-center gap-2",children:[e.jsx("span",{className:"font-medium text-white text-sm",children:s.name}),e.jsx("span",{className:i("text-xs px-1.5 py-0.5 rounded border capitalize",v(s.type)),children:s.type})]}),e.jsx("div",{className:"text-xs text-zinc-500 mt-0.5",children:s.appliedTo})]}),e.jsx("div",{className:"text-xs font-mono text-zinc-400 max-w-xs truncate",children:s.config}),e.jsx("span",{className:i("text-xs font-medium shrink-0",s.enabled?"text-emerald-400":"text-zinc-500"),children:s.enabled?"active":"disabled"})]},s.id))})}function N(){const s=Math.max(...x.map(r=>r.requests));return e.jsxs("div",{className:"space-y-6",children:[e.jsxs("div",{className:"rounded-xl border border-zinc-800 bg-zinc-900 p-5",children:[e.jsx("h3",{className:"text-sm font-semibold text-white mb-4",children:"Traffic Volume (last 24h by 2h)"}),e.jsx("div",{className:"flex items-end gap-1.5 h-32",children:x.map(r=>e.jsxs("div",{className:"flex-1 flex flex-col items-center gap-1",children:[e.jsx("div",{className:"w-full flex flex-col justify-end",style:{height:"100px"},children:e.jsx("div",{className:"w-full rounded-t overflow-hidden",style:{height:r.requests/s*100+"%"},children:e.jsx("div",{className:"h-full bg-indigo-500"})})}),e.jsx("span",{className:"text-xs text-zinc-600",children:r.hour})]},r.hour))})]}),e.jsxs("div",{className:"rounded-xl border border-zinc-800 bg-zinc-900 p-5",children:[e.jsx("h3",{className:"text-sm font-semibold text-white mb-3",children:"Top Routes by Volume"}),e.jsx("div",{className:"space-y-2",children:c.filter(r=>r.gatewayId==="gw-prod").sort((r,a)=>a.requestCount24h-r.requestCount24h).slice(0,5).map(r=>{const a=c.filter(n=>n.gatewayId==="gw-prod").reduce((n,d)=>n+d.requestCount24h,0);return e.jsxs("div",{className:"flex items-center gap-3",children:[e.jsx("span",{className:i("text-xs px-1.5 py-0.5 rounded border font-mono font-bold w-16 text-center",h(r.method)),children:r.method}),e.jsx("span",{className:"font-mono text-xs text-zinc-300 flex-1 truncate",children:r.path}),e.jsx("div",{className:"w-32 bg-zinc-800 rounded-full h-1.5",children:e.jsx("div",{className:"h-1.5 rounded-full bg-indigo-500",style:{width:r.requestCount24h/a*100+"%"}})}),e.jsxs("span",{className:"text-xs text-zinc-400 w-16 text-right",children:[(r.requestCount24h/1e3).toFixed(0),"K"]})]},r.id)})})]})]})}const w=["Gateways","Routes","Plugins","Traffic"];function T(){const[s,r]=o.useState("Gateways"),a=l.filter(t=>t.status==="active").length,n=l.filter(t=>t.status==="degraded").length,d=l.reduce((t,u)=>t+u.rps,0);return e.jsxs("div",{className:"min-h-screen bg-zinc-950 text-white p-6",children:[e.jsxs("div",{className:"mb-6",children:[e.jsxs("div",{className:"flex items-center gap-3 mb-1",children:[e.jsx("h1",{className:"text-2xl font-bold",children:"API Gateway Manager"}),n>0&&e.jsxs("span",{className:"text-xs bg-amber-500/20 text-amber-400 border border-amber-500/30 rounded-full px-3 py-1",children:[n," degraded"]})]}),e.jsxs("p",{className:"text-zinc-400 text-sm",children:[l.length," gateways 路 ",a," active 路 ",c.length," routes 路 ",d.toFixed(0)," RPS total"]})]}),e.jsx("div",{className:"grid grid-cols-4 gap-4 mb-6",children:[{label:"Active Gateways",value:a,color:"text-emerald-400"},{label:"Total Routes",value:c.length,color:"text-white"},{label:"Active Plugins",value:m.filter(t=>t.enabled).length,color:"text-indigo-400"},{label:"Total RPS",value:d.toFixed(0),color:"text-white"}].map(t=>e.jsxs("div",{className:"rounded-xl border border-zinc-800 bg-zinc-900 p-4",children:[e.jsx("div",{className:i("text-3xl font-bold",t.color),children:t.value}),e.jsx("div",{className:"text-sm text-zinc-400 mt-1",children:t.label})]},t.label))}),e.jsx("div",{className:"flex gap-1 mb-6 border-b border-zinc-800",children:w.map(t=>e.jsx("button",{onClick:()=>r(t),className:i("px-4 py-2 text-sm font-medium border-b-2 transition-colors -mb-px",s===t?"border-indigo-500 text-indigo-400":"border-transparent text-zinc-400 hover:text-white"),children:t},t))}),s==="Gateways"&&e.jsx(j,{}),s==="Routes"&&e.jsx(f,{}),s==="Plugins"&&e.jsx(y,{}),s==="Traffic"&&e.jsx(N,{})]})}export{T as default};
