import{r as l,j as e,c as a}from"./index-C59JeFug.js";const d={GET:"bg-emerald-500/20 text-emerald-300 border border-emerald-500/30",POST:"bg-blue-500/20 text-blue-300 border border-blue-500/30",PUT:"bg-amber-500/20 text-amber-300 border border-amber-500/30",PATCH:"bg-orange-500/20 text-orange-300 border border-orange-500/30",DELETE:"bg-rose-500/20 text-rose-300 border border-rose-500/30"},h={active:"bg-emerald-500/20 text-emerald-300 border border-emerald-500/30",deprecated:"bg-amber-500/20 text-amber-300 border border-amber-500/30",disabled:"bg-zinc-600/30 text-zinc-400 border border-zinc-600/30",beta:"bg-indigo-500/20 text-indigo-300 border border-indigo-500/30"},y={api_key:"ðŸ”‘",jwt:"ðŸª™",oauth2:"ðŸ›¡ï¸",none:"ðŸ”“"},p={healthy:"bg-emerald-400",degraded:"bg-amber-400",down:"bg-rose-400"},M={healthy:"text-emerald-400",degraded:"text-amber-400",down:"text-rose-400"},i=[{id:"r-01",path:"/api/v2/users",method:"GET",upstream:"user-service",status:"active",auth:"jwt",rateLimit:1e3,version:"v2",metrics:{requestsPerMin:342,p50Ms:28,p95Ms:87,p99Ms:145,errorRate:.2,successRate:99.8,upstreamLatency:18},tags:["users","read"],createdAt:"2025-09-01"},{id:"r-02",path:"/api/v2/users/:id",method:"GET",upstream:"user-service",status:"active",auth:"jwt",rateLimit:500,version:"v2",metrics:{requestsPerMin:128,p50Ms:22,p95Ms:64,p99Ms:110,errorRate:.5,successRate:99.5,upstreamLatency:14},tags:["users","read"],createdAt:"2025-09-01"},{id:"r-03",path:"/api/v2/users/:id",method:"PATCH",upstream:"user-service",status:"active",auth:"jwt",rateLimit:100,version:"v2",metrics:{requestsPerMin:34,p50Ms:45,p95Ms:130,p99Ms:240,errorRate:1.2,successRate:98.8,upstreamLatency:32},tags:["users","write"],createdAt:"2025-09-01"},{id:"r-04",path:"/api/v2/auth/token",method:"POST",upstream:"auth-service",status:"active",auth:"api_key",rateLimit:60,version:"v2",metrics:{requestsPerMin:89,p50Ms:55,p95Ms:190,p99Ms:320,errorRate:3.1,successRate:96.9,upstreamLatency:45},tags:["auth"],createdAt:"2025-08-15"},{id:"r-05",path:"/api/v1/users",method:"GET",upstream:"user-service",status:"deprecated",auth:"api_key",rateLimit:200,version:"v1",metrics:{requestsPerMin:12,p50Ms:42,p95Ms:130,p99Ms:210,errorRate:.8,successRate:99.2,upstreamLatency:35},tags:["users","legacy"],createdAt:"2024-03-01"},{id:"r-06",path:"/api/v2/reports/generate",method:"POST",upstream:"report-service",status:"active",auth:"jwt",rateLimit:10,version:"v2",metrics:{requestsPerMin:4,p50Ms:2400,p95Ms:8200,p99Ms:14500,errorRate:5,successRate:95,upstreamLatency:2100},tags:["reports","async"],createdAt:"2025-11-01"},{id:"r-07",path:"/api/v2/webhooks",method:"POST",upstream:"webhook-service",status:"active",auth:"api_key",rateLimit:500,version:"v2",metrics:{requestsPerMin:67,p50Ms:18,p95Ms:52,p99Ms:88,errorRate:.3,successRate:99.7,upstreamLatency:10},tags:["webhooks"],createdAt:"2025-10-15"},{id:"r-08",path:"/api/v2/ai/completions",method:"POST",upstream:"ai-service",status:"beta",auth:"jwt",rateLimit:20,version:"v2",metrics:{requestsPerMin:15,p50Ms:1200,p95Ms:4800,p99Ms:8900,errorRate:2.5,successRate:97.5,upstreamLatency:1150},tags:["ai","beta"],createdAt:"2026-01-15"}],u=[{id:"u-01",name:"user-service",url:"http://127.0.0.1:3001",health:"healthy",latencyMs:18,requestsPerMin:514,errorRate:.6,lastCheck:"5s ago",routes:4},{id:"u-02",name:"auth-service",url:"http://127.0.0.1:3002",health:"degraded",latencyMs:145,requestsPerMin:89,errorRate:3.1,lastCheck:"5s ago",routes:1},{id:"u-03",name:"report-service",url:"http://127.0.0.1:3003",health:"healthy",latencyMs:2100,requestsPerMin:4,errorRate:5,lastCheck:"5s ago",routes:1},{id:"u-04",name:"webhook-service",url:"http://127.0.0.1:3004",health:"healthy",latencyMs:10,requestsPerMin:67,errorRate:.3,lastCheck:"5s ago",routes:1},{id:"u-05",name:"ai-service",url:"http://127.0.0.1:3005",health:"down",latencyMs:0,requestsPerMin:0,errorRate:100,lastCheck:"12s ago",routes:1}],m=[{time:"09:00",requests:580,errors:12,p95:88},{time:"09:05",requests:612,errors:8,p95:82},{time:"09:10",requests:590,errors:14,p95:96},{time:"09:15",requests:720,errors:22,p95:145},{time:"09:20",requests:680,errors:18,p95:120},{time:"09:25",requests:698,errors:15,p95:110},{time:"09:30",requests:730,errors:9,p95:90},{time:"09:35",requests:688,errors:11,p95:87},{time:"09:40",requests:710,errors:7,p95:80},{time:"09:45",requests:695,errors:13,p95:94},{time:"09:50",requests:742,errors:19,p95:112},{time:"09:55",requests:680,errors:10,p95:86}],b=[{id:"rl-01",route:"POST /api/v2/auth/token",ip:"203.0.113.42",count:84,limit:60,windowSec:60,blockedAt:"09:52:14"},{id:"rl-02",route:"GET /api/v2/users",ip:"198.51.100.17",count:1248,limit:1e3,windowSec:60,blockedAt:"09:48:33"},{id:"rl-03",route:"POST /api/v2/ai/completions",ip:"192.0.2.88",count:27,limit:20,windowSec:60,blockedAt:"09:41:02"},{id:"rl-04",route:"POST /api/v2/auth/token",ip:"203.0.113.55",count:73,limit:60,windowSec:60,blockedAt:"09:35:49"}],R=Math.max(...m.map(c=>c.requests));function P(){const[c,j]=l.useState("routes"),[t,v]=l.useState(i[0]),[r,f]=l.useState(u[0]),[o,N]=l.useState("ALL"),g=o==="ALL"?i:i.filter(s=>s.method===o),z=i.reduce((s,n)=>s+n.metrics.requestsPerMin,0),x=(i.reduce((s,n)=>s+n.metrics.errorRate,0)/i.length).toFixed(1);return e.jsxs("div",{className:"flex flex-col h-full bg-zinc-950 text-white",children:[e.jsxs("div",{className:"px-6 py-4 border-b border-zinc-800 flex items-center justify-between",children:[e.jsxs("div",{children:[e.jsx("h1",{className:"text-xl font-semibold",children:"API Gateway Monitor"}),e.jsx("p",{className:"text-sm text-zinc-400 mt-0.5",children:"Routes Â· Upstreams Â· Traffic Â· Rate Limiting"})]}),e.jsxs("div",{className:"flex items-center gap-6 text-sm",children:[e.jsxs("div",{className:"text-center",children:[e.jsx("div",{className:"text-lg font-bold font-mono text-white",children:z.toLocaleString()}),e.jsx("div",{className:"text-xs text-zinc-500",children:"req/min"})]}),e.jsxs("div",{className:"text-center",children:[e.jsxs("div",{className:a("text-lg font-bold font-mono",parseFloat(x)>2?"text-amber-400":"text-emerald-400"),children:[x,"%"]}),e.jsx("div",{className:"text-xs text-zinc-500",children:"error rate"})]}),e.jsxs("div",{className:"text-center",children:[e.jsx("div",{className:"text-lg font-bold font-mono text-white",children:i.filter(s=>s.status==="active").length}),e.jsx("div",{className:"text-xs text-zinc-500",children:"active routes"})]})]})]}),e.jsx("div",{className:"flex border-b border-zinc-800 px-6",children:["routes","upstreams","traffic","ratelimits"].map(s=>e.jsx("button",{onClick:()=>j(s),className:a("px-4 py-3 text-sm font-medium border-b-2 transition-colors",c===s?"border-indigo-500 text-white":"border-transparent text-zinc-400 hover:text-zinc-200"),children:s==="ratelimits"?"Rate Limits":s.charAt(0).toUpperCase()+s.slice(1)},s))}),c==="routes"&&e.jsxs("div",{className:"flex flex-1 overflow-hidden",children:[e.jsxs("div",{className:"w-80 border-r border-zinc-800 flex flex-col",children:[e.jsx("div",{className:"p-3 border-b border-zinc-800 flex gap-1.5 flex-wrap",children:["ALL","GET","POST","PUT","PATCH","DELETE"].map(s=>e.jsx("button",{onClick:()=>N(s),className:a("text-xs px-2 py-0.5 rounded border transition-colors font-mono",o===s?s==="ALL"?"bg-zinc-600 border-zinc-500 text-white":d[s]:"border-zinc-700 text-zinc-400 hover:border-zinc-500"),children:s},s))}),e.jsx("div",{className:"flex-1 overflow-y-auto",children:g.map(s=>e.jsxs("button",{onClick:()=>v(s),className:a("w-full text-left px-4 py-3 border-b border-zinc-800/60 hover:bg-zinc-800/40 transition-colors",t.id===s.id&&"bg-zinc-800/60"),children:[e.jsxs("div",{className:"flex items-center gap-2 mb-1",children:[e.jsx("span",{className:a("text-xs px-1.5 py-0.5 rounded font-mono font-bold",d[s.method]),children:s.method}),e.jsx("span",{className:a("text-xs px-1.5 py-0.5 rounded-full",h[s.status]),children:s.status})]}),e.jsx("div",{className:"font-mono text-xs text-zinc-300 mb-1.5 truncate",children:s.path}),e.jsxs("div",{className:"flex items-center gap-3 text-xs text-zinc-500",children:[e.jsxs("span",{className:"font-mono",children:[s.metrics.requestsPerMin," rpm"]}),e.jsxs("span",{className:s.metrics.errorRate>2?"text-amber-400":"text-zinc-500",children:[s.metrics.errorRate,"% err"]}),e.jsxs("span",{children:["p95:",s.metrics.p95Ms,"ms"]})]})]},s.id))})]}),e.jsxs("div",{className:"flex-1 overflow-y-auto p-6",children:[e.jsxs("div",{className:"flex items-start justify-between mb-6",children:[e.jsxs("div",{children:[e.jsxs("div",{className:"flex items-center gap-3 mb-1",children:[e.jsx("span",{className:a("text-sm px-2 py-1 rounded font-mono font-bold",d[t.method]),children:t.method}),e.jsx("span",{className:"font-mono text-lg text-white",children:t.path})]}),e.jsxs("div",{className:"flex items-center gap-2",children:[e.jsx("span",{className:a("text-xs px-2 py-0.5 rounded-full",h[t.status]),children:t.status}),e.jsxs("span",{className:"text-xs text-zinc-500",children:["â†’ ",t.upstream]}),e.jsxs("span",{className:"text-xs text-zinc-500",children:["Â· ",t.version]})]})]}),e.jsxs("div",{className:"flex items-center gap-2 text-sm",children:[e.jsx("span",{className:"text-zinc-400",children:y[t.auth]}),e.jsx("span",{className:"text-zinc-400",children:t.auth.replace("_"," ")})]})]}),e.jsxs("div",{className:"grid grid-cols-4 gap-3 mb-6",children:[e.jsxs("div",{className:"bg-zinc-900 rounded-lg p-3 text-center",children:[e.jsx("div",{className:"text-xl font-bold font-mono text-white mb-1",children:t.metrics.requestsPerMin}),e.jsx("div",{className:"text-xs text-zinc-500",children:"req/min"})]}),e.jsxs("div",{className:"bg-zinc-900 rounded-lg p-3 text-center",children:[e.jsxs("div",{className:a("text-xl font-bold font-mono mb-1",t.metrics.errorRate>2?"text-amber-400":"text-emerald-400"),children:[t.metrics.errorRate,"%"]}),e.jsx("div",{className:"text-xs text-zinc-500",children:"error rate"})]}),e.jsxs("div",{className:"bg-zinc-900 rounded-lg p-3 text-center",children:[e.jsxs("div",{className:"text-xl font-bold font-mono text-white mb-1",children:[t.metrics.p95Ms,"ms"]}),e.jsx("div",{className:"text-xs text-zinc-500",children:"p95 latency"})]}),e.jsxs("div",{className:"bg-zinc-900 rounded-lg p-3 text-center",children:[e.jsx("div",{className:"text-xl font-bold font-mono text-amber-400 mb-1",children:t.rateLimit}),e.jsx("div",{className:"text-xs text-zinc-500",children:"rate limit/min"})]})]}),e.jsxs("div",{className:"bg-zinc-900 rounded-lg p-4 mb-4",children:[e.jsx("div",{className:"text-sm font-medium mb-3 text-zinc-300",children:"Latency Percentiles"}),e.jsx("div",{className:"space-y-2",children:[{label:"p50",value:t.metrics.p50Ms},{label:"p95",value:t.metrics.p95Ms},{label:"p99",value:t.metrics.p99Ms}].map(({label:s,value:n})=>{const w=t.metrics.p99Ms;return e.jsxs("div",{className:"flex items-center gap-3",children:[e.jsx("span",{className:"text-xs font-mono text-zinc-400 w-6",children:s}),e.jsx("div",{className:"flex-1 bg-zinc-800 rounded-full h-1.5",children:e.jsx("div",{className:"bg-indigo-500 h-1.5 rounded-full",style:{width:`${n/w*100}%`}})}),e.jsxs("span",{className:"text-xs font-mono text-white w-14 text-right",children:[n,"ms"]})]},s)})})]}),e.jsxs("div",{className:"bg-zinc-900 rounded-lg p-4 mb-4",children:[e.jsx("div",{className:"text-sm font-medium mb-2 text-zinc-300",children:"Tags"}),e.jsx("div",{className:"flex flex-wrap gap-1.5",children:t.tags.map(s=>e.jsx("span",{className:"text-xs px-2 py-0.5 rounded bg-zinc-800 text-zinc-300 border border-zinc-700",children:s},s))})]}),e.jsxs("div",{className:"text-xs text-zinc-500",children:["Created ",t.createdAt," Â· Upstream latency ",t.metrics.upstreamLatency,"ms"]})]})]}),c==="upstreams"&&e.jsxs("div",{className:"flex flex-1 overflow-hidden",children:[e.jsx("div",{className:"w-72 border-r border-zinc-800 overflow-y-auto",children:u.map(s=>e.jsxs("button",{onClick:()=>f(s),className:a("w-full text-left px-4 py-3 border-b border-zinc-800/60 hover:bg-zinc-800/40 transition-colors",r.id===s.id&&"bg-zinc-800/60"),children:[e.jsxs("div",{className:"flex items-center gap-2 mb-1",children:[e.jsx("span",{className:a("w-2 h-2 rounded-full flex-shrink-0",p[s.health])}),e.jsx("span",{className:"text-sm font-medium",children:s.name})]}),e.jsx("div",{className:"text-xs font-mono text-zinc-500 mb-1.5",children:s.url}),e.jsxs("div",{className:"flex items-center gap-3 text-xs text-zinc-500",children:[e.jsxs("span",{children:[s.requestsPerMin," rpm"]}),e.jsxs("span",{className:s.errorRate>2?"text-amber-400":"text-zinc-500",children:[s.errorRate,"% err"]}),e.jsxs("span",{children:[s.latencyMs,"ms"]})]})]},s.id))}),e.jsxs("div",{className:"flex-1 overflow-y-auto p-6",children:[e.jsxs("div",{className:"flex items-start justify-between mb-6",children:[e.jsxs("div",{children:[e.jsx("h2",{className:"text-lg font-semibold mb-1",children:r.name}),e.jsxs("div",{className:"flex items-center gap-3",children:[e.jsxs("span",{className:a("flex items-center gap-1.5 text-sm font-medium",M[r.health]),children:[e.jsx("span",{className:a("w-2 h-2 rounded-full",p[r.health])}),r.health]}),e.jsx("span",{className:"font-mono text-sm text-zinc-400",children:r.url})]})]}),e.jsxs("div",{className:"text-right text-sm",children:[e.jsx("div",{className:"text-zinc-400",children:"Last check"}),e.jsx("div",{className:"text-white",children:r.lastCheck})]})]}),e.jsxs("div",{className:"grid grid-cols-3 gap-4 mb-6",children:[e.jsxs("div",{className:"bg-zinc-900 rounded-lg p-4 text-center",children:[e.jsx("div",{className:"text-2xl font-bold font-mono text-white mb-1",children:r.requestsPerMin}),e.jsx("div",{className:"text-xs text-zinc-500",children:"req/min"})]}),e.jsxs("div",{className:"bg-zinc-900 rounded-lg p-4 text-center",children:[e.jsxs("div",{className:a("text-2xl font-bold font-mono mb-1",r.errorRate>5?"text-rose-400":r.errorRate>2?"text-amber-400":"text-emerald-400"),children:[r.errorRate,"%"]}),e.jsx("div",{className:"text-xs text-zinc-500",children:"error rate"})]}),e.jsxs("div",{className:"bg-zinc-900 rounded-lg p-4 text-center",children:[e.jsxs("div",{className:a("text-2xl font-bold font-mono mb-1",r.latencyMs>1e3?"text-amber-400":"text-white"),children:[r.latencyMs,"ms"]}),e.jsx("div",{className:"text-xs text-zinc-500",children:"avg latency"})]})]}),e.jsxs("div",{className:"bg-zinc-900 rounded-lg p-4",children:[e.jsxs("div",{className:"text-sm font-medium mb-2 text-zinc-300",children:["Routes (",r.routes,")"]}),i.filter(s=>s.upstream===r.name).map(s=>e.jsxs("div",{className:"flex items-center gap-3 py-2 border-b border-zinc-800/40 last:border-0",children:[e.jsx("span",{className:a("text-xs px-1.5 py-0.5 rounded font-mono font-bold",d[s.method]),children:s.method}),e.jsx("span",{className:"font-mono text-xs text-zinc-300",children:s.path}),e.jsxs("span",{className:"ml-auto text-xs text-zinc-500",children:[s.metrics.requestsPerMin," rpm"]})]},s.id)),i.filter(s=>s.upstream===r.name).length===0&&e.jsx("div",{className:"text-sm text-zinc-500",children:"No routes for this upstream"})]})]})]}),c==="traffic"&&e.jsxs("div",{className:"flex-1 overflow-y-auto p-6",children:[e.jsx("h2",{className:"text-base font-semibold mb-1",children:"Traffic Overview"}),e.jsx("p",{className:"text-sm text-zinc-400 mb-6",children:"Requests and errors over the last hour"}),e.jsxs("div",{className:"bg-zinc-900 rounded-lg p-6 mb-6",children:[e.jsxs("div",{className:"flex items-center gap-4 mb-4 text-xs",children:[e.jsxs("span",{className:"flex items-center gap-1.5",children:[e.jsx("span",{className:"w-2.5 h-2.5 rounded-sm bg-indigo-500"}),e.jsx("span",{className:"text-zinc-400",children:"Requests"})]}),e.jsxs("span",{className:"flex items-center gap-1.5",children:[e.jsx("span",{className:"w-2.5 h-2.5 rounded-sm bg-rose-500"}),e.jsx("span",{className:"text-zinc-400",children:"Errors"})]})]}),e.jsx("div",{className:"flex items-end gap-1.5 h-40 mb-2",children:m.map(s=>e.jsx("div",{className:"flex-1 flex flex-col items-center gap-0.5 h-full justify-end",children:e.jsx("div",{className:"w-full bg-indigo-500/40 rounded-t relative",style:{height:`${s.requests/R*100}%`},children:e.jsx("div",{className:"absolute bottom-0 left-0 right-0 bg-rose-500 rounded-t",style:{height:`${s.errors/s.requests*100}%`}})})},s.time))}),e.jsx("div",{className:"flex items-center gap-1.5",children:m.map(s=>e.jsx("div",{className:"flex-1 text-center text-xs text-zinc-600",children:s.time.replace("09:","")},s.time))})]}),e.jsx("div",{className:"grid grid-cols-4 gap-4",children:m.slice(-4).map(s=>e.jsxs("div",{className:"bg-zinc-900 rounded-lg p-4",children:[e.jsx("div",{className:"text-xs text-zinc-500 mb-2",children:s.time}),e.jsx("div",{className:"text-lg font-bold font-mono text-white mb-1",children:s.requests.toLocaleString()}),e.jsx("div",{className:"text-xs text-zinc-400 mb-2",children:"requests"}),e.jsxs("div",{className:"flex items-center justify-between text-xs",children:[e.jsxs("span",{className:"text-rose-400",children:[s.errors," err"]}),e.jsxs("span",{className:"text-zinc-400",children:["p95:",s.p95,"ms"]})]})]},s.time))})]}),c==="ratelimits"&&e.jsxs("div",{className:"flex-1 overflow-y-auto p-6",children:[e.jsxs("div",{className:"flex items-center justify-between mb-4",children:[e.jsxs("div",{children:[e.jsx("h2",{className:"text-base font-semibold",children:"Rate Limit Events"}),e.jsx("p",{className:"text-sm text-zinc-400 mt-0.5",children:"Blocked requests in the last hour"})]}),e.jsxs("span",{className:"text-sm text-rose-400 font-medium",children:[b.length," events"]})]}),e.jsx("div",{className:"space-y-3",children:b.map(s=>e.jsxs("div",{className:"bg-zinc-900 rounded-lg p-4",children:[e.jsxs("div",{className:"flex items-start justify-between mb-2",children:[e.jsx("div",{className:"font-mono text-sm text-white",children:s.route}),e.jsx("div",{className:"text-xs text-zinc-500",children:s.blockedAt})]}),e.jsxs("div",{className:"flex items-center gap-4 text-sm mb-3",children:[e.jsx("span",{className:"font-mono text-zinc-300",children:s.ip}),e.jsxs("span",{className:"text-rose-400 font-medium",children:[s.count," / ",s.limit," rpm"]}),e.jsxs("span",{className:"text-zinc-500",children:[s.windowSec,"s window"]})]}),e.jsx("div",{className:"w-full bg-zinc-800 rounded-full h-1.5",children:e.jsx("div",{className:"bg-rose-500 h-1.5 rounded-full",style:{width:`${Math.min(s.count/s.limit*100,100)}%`}})}),e.jsxs("div",{className:"text-xs text-zinc-500 mt-1 text-right",children:[(s.count/s.limit*100).toFixed(0),"% of limit"]})]},s.id))})]})]})}export{P as default};
