import{r as v,j as e,a as l}from"./index-DPSUG5BZ.js";const T=[{id:"rule-001",name:"Free Tier Global",description:"Default rate limit for all free tier API consumers across all endpoints.",tier:"free",scope:"per-user",status:"active",requestsPerWindow:100,windowSeconds:3600,burstLimit:20,endpoint:"*",createdAt:"2025-09-01T10:00:00Z",updatedAt:"2026-01-15T08:30:00Z",violationsLast24h:134,throttledCount:23},{id:"rule-002",name:"Basic Tier Global",description:"Standard rate limit for basic plan subscribers. Covers all public endpoints.",tier:"basic",scope:"per-user",status:"active",requestsPerWindow:1e3,windowSeconds:3600,burstLimit:100,endpoint:"*",createdAt:"2025-09-01T10:00:00Z",updatedAt:"2026-01-20T14:00:00Z",violationsLast24h:47,throttledCount:8},{id:"rule-003",name:"Pro Tier Global",description:"Generous rate limit for pro plan subscribers with burst allowances.",tier:"pro",scope:"per-user",status:"active",requestsPerWindow:1e4,windowSeconds:3600,burstLimit:500,endpoint:"*",createdAt:"2025-09-01T10:00:00Z",updatedAt:"2026-02-01T09:15:00Z",violationsLast24h:12,throttledCount:2},{id:"rule-004",name:"Enterprise Tier Global",description:"High-volume rate limit for enterprise customers with dedicated quota.",tier:"enterprise",scope:"per-user",status:"active",requestsPerWindow:1e5,windowSeconds:3600,burstLimit:5e3,endpoint:"*",createdAt:"2025-09-01T10:00:00Z",updatedAt:"2026-02-10T11:00:00Z",violationsLast24h:3,throttledCount:0},{id:"rule-005",name:"Auth Endpoint Strict",description:"Strict rate limiting on authentication endpoints to prevent brute-force attacks.",tier:"free",scope:"per-ip",status:"active",requestsPerWindow:5,windowSeconds:300,burstLimit:2,endpoint:"/api/v1/auth/*",createdAt:"2025-10-15T10:00:00Z",updatedAt:"2026-01-30T16:45:00Z",violationsLast24h:89,throttledCount:31},{id:"rule-006",name:"Search Endpoint Throttle",description:"Rate limit on search to prevent expensive query abuse from all tiers.",tier:"basic",scope:"per-user",status:"active",requestsPerWindow:60,windowSeconds:60,burstLimit:10,endpoint:"/api/v1/search",createdAt:"2025-11-01T10:00:00Z",updatedAt:"2026-02-05T10:00:00Z",violationsLast24h:28,throttledCount:7},{id:"rule-007",name:"Webhook Delivery Limit",description:"Outbound webhook delivery rate limiting to protect downstream systems.",tier:"pro",scope:"per-endpoint",status:"active",requestsPerWindow:1e3,windowSeconds:60,burstLimit:50,endpoint:"/api/v1/webhooks/*",createdAt:"2025-11-10T10:00:00Z",updatedAt:"2026-01-28T12:00:00Z",violationsLast24h:5,throttledCount:1},{id:"rule-008",name:"Export Heavy Throttle",description:"Low limit on data export endpoints — CPU-intensive operations.",tier:"basic",scope:"per-user",status:"active",requestsPerWindow:10,windowSeconds:3600,burstLimit:3,endpoint:"/api/v1/exports/*",createdAt:"2025-12-01T10:00:00Z",updatedAt:"2026-02-12T09:00:00Z",violationsLast24h:19,throttledCount:6},{id:"rule-009",name:"Internal Services Unlimited",description:"No effective limit for internal service-to-service communication.",tier:"internal",scope:"global",status:"active",requestsPerWindow:9999999,windowSeconds:60,burstLimit:99999,endpoint:"/internal/*",createdAt:"2025-09-01T10:00:00Z",updatedAt:"2025-09-01T10:00:00Z",violationsLast24h:0,throttledCount:0},{id:"rule-010",name:"Legacy API Deprecation",description:"Tight limit on legacy v0 API to encourage migration. Will be removed Q3 2026.",tier:"basic",scope:"per-user",status:"active",requestsPerWindow:50,windowSeconds:3600,burstLimit:5,endpoint:"/api/v0/*",createdAt:"2025-08-01T10:00:00Z",updatedAt:"2026-01-10T10:00:00Z",violationsLast24h:62,throttledCount:18},{id:"rule-011",name:"GraphQL Query Depth Limit",description:"Rate limit applied to GraphQL queries with nested depth > 5 to prevent N+1 abuse.",tier:"pro",scope:"per-user",status:"disabled",requestsPerWindow:200,windowSeconds:3600,burstLimit:20,endpoint:"/api/graphql",createdAt:"2026-01-01T10:00:00Z",updatedAt:"2026-02-18T15:30:00Z",violationsLast24h:0,throttledCount:0},{id:"rule-012",name:"File Upload Bandwidth",description:"Limit concurrent upload operations per user — storage and memory consideration.",tier:"free",scope:"per-user",status:"draft",requestsPerWindow:5,windowSeconds:300,burstLimit:2,endpoint:"/api/v1/files/upload",createdAt:"2026-02-20T10:00:00Z",updatedAt:"2026-02-22T06:00:00Z",violationsLast24h:0,throttledCount:0}],q=[{id:"viol-001",consumerId:"cons-003",consumerName:"DataSync Corp",endpoint:"/api/v1/search",ruleId:"rule-006",ruleName:"Search Endpoint Throttle",count:847,severity:"critical",timestamp:"2026-02-22T06:31:00Z",ipAddress:"203.0.113.42",timelinePoints:[12,34,56,89,120,145,180,210,195,220,185,160]},{id:"viol-002",consumerId:"cons-007",consumerName:"BotNet Scanner",endpoint:"/api/v1/auth/login",ruleId:"rule-005",ruleName:"Auth Endpoint Strict",count:3204,severity:"critical",timestamp:"2026-02-22T06:28:00Z",ipAddress:"198.51.100.77",timelinePoints:[45,88,134,210,340,410,520,680,720,690,600,540]},{id:"viol-003",consumerId:"cons-011",consumerName:"Metrics Harvester",endpoint:"/api/v0/events",ruleId:"rule-010",ruleName:"Legacy API Deprecation",count:412,severity:"high",timestamp:"2026-02-22T06:15:00Z",ipAddress:"192.0.2.15",timelinePoints:[8,15,22,38,55,62,71,80,88,90,87,85]},{id:"viol-004",consumerId:"cons-002",consumerName:"QuickBuild SaaS",endpoint:"/api/v1/exports/csv",ruleId:"rule-008",ruleName:"Export Heavy Throttle",count:67,severity:"medium",timestamp:"2026-02-22T05:58:00Z",ipAddress:"203.0.113.99",timelinePoints:[2,5,8,10,12,14,16,14,12,11,10,9]},{id:"viol-005",consumerId:"cons-005",consumerName:"AutoReporter",endpoint:"/api/v1/search",ruleId:"rule-006",ruleName:"Search Endpoint Throttle",count:289,severity:"high",timestamp:"2026-02-22T05:44:00Z",ipAddress:"203.0.113.201",timelinePoints:[5,12,24,40,55,62,58,51,48,45,42,38]},{id:"viol-006",consumerId:"cons-009",consumerName:"FreeTier User #4482",endpoint:"/api/v1/users",ruleId:"rule-001",ruleName:"Free Tier Global",count:145,severity:"medium",timestamp:"2026-02-22T05:30:00Z",ipAddress:"198.51.100.33",timelinePoints:[3,8,14,22,30,35,33,28,25,22,18,15]},{id:"viol-007",consumerId:"cons-014",consumerName:"Legacy Integrator Pro",endpoint:"/api/v0/reports",ruleId:"rule-010",ruleName:"Legacy API Deprecation",count:201,severity:"medium",timestamp:"2026-02-22T05:12:00Z",ipAddress:"203.0.113.150",timelinePoints:[6,11,18,26,35,41,40,37,33,30,27,24]},{id:"viol-008",consumerId:"cons-003",consumerName:"DataSync Corp",endpoint:"/api/v1/webhooks/deliver",ruleId:"rule-007",ruleName:"Webhook Delivery Limit",count:98,severity:"low",timestamp:"2026-02-22T04:55:00Z",ipAddress:"203.0.113.42",timelinePoints:[2,4,7,10,13,15,14,13,12,11,10,9]},{id:"viol-009",consumerId:"cons-016",consumerName:"SecurityAudit Bot",endpoint:"/api/v1/auth/reset",ruleId:"rule-005",ruleName:"Auth Endpoint Strict",count:512,severity:"critical",timestamp:"2026-02-22T04:38:00Z",ipAddress:"198.51.100.88",timelinePoints:[10,22,45,80,110,130,125,120,105,95,88,80]},{id:"viol-010",consumerId:"cons-006",consumerName:"EcomPlatform Ltd",endpoint:"/api/v1/products",ruleId:"rule-002",ruleName:"Basic Tier Global",count:78,severity:"low",timestamp:"2026-02-22T04:20:00Z",ipAddress:"192.0.2.200",timelinePoints:[1,3,6,9,12,15,14,13,11,10,9,8]}],L=[{id:"cons-001",name:"Acme Analytics",tier:"enterprise",apiKey:"ent_ak_a1b2c3d4",currentRequests:72450,requestLimit:1e5,burstUsed:1820,burstLimit:5e3,windowResetAt:"2026-02-22T07:00:00Z",isThrottled:!1,lastActive:"2026-02-22T06:43:00Z",totalRequestsToday:812340,endpointBreakdown:[{endpoint:"/api/v1/analytics",requests:45200,limit:6e4},{endpoint:"/api/v1/reports",requests:18900,limit:25e3},{endpoint:"/api/v1/exports/*",requests:8350,limit:15e3}]},{id:"cons-002",name:"QuickBuild SaaS",tier:"pro",apiKey:"pro_ak_e5f6g7h8",currentRequests:9812,requestLimit:1e4,burstUsed:487,burstLimit:500,windowResetAt:"2026-02-22T07:00:00Z",isThrottled:!0,lastActive:"2026-02-22T06:44:00Z",totalRequestsToday:142800,endpointBreakdown:[{endpoint:"/api/v1/builds",requests:5600,limit:6e3},{endpoint:"/api/v1/deployments",requests:3100,limit:3e3},{endpoint:"/api/v1/exports/*",requests:1112,limit:1e3}]},{id:"cons-003",name:"DataSync Corp",tier:"pro",apiKey:"pro_ak_i9j0k1l2",currentRequests:8900,requestLimit:1e4,burstUsed:320,burstLimit:500,windowResetAt:"2026-02-22T07:00:00Z",isThrottled:!1,lastActive:"2026-02-22T06:42:00Z",totalRequestsToday:98500,endpointBreakdown:[{endpoint:"/api/v1/search",requests:4400,limit:3600},{endpoint:"/api/v1/sync",requests:3200,limit:5e3},{endpoint:"/api/v1/webhooks/*",requests:1300,limit:1400}]},{id:"cons-004",name:"FinTrack Pro",tier:"enterprise",apiKey:"ent_ak_m3n4o5p6",currentRequests:41200,requestLimit:1e5,burstUsed:900,burstLimit:5e3,windowResetAt:"2026-02-22T07:00:00Z",isThrottled:!1,lastActive:"2026-02-22T06:40:00Z",totalRequestsToday:521e3,endpointBreakdown:[{endpoint:"/api/v1/transactions",requests:28e3,limit:6e4},{endpoint:"/api/v1/ledger",requests:9200,limit:25e3},{endpoint:"/api/v1/reports",requests:4e3,limit:15e3}]},{id:"cons-005",name:"AutoReporter",tier:"basic",apiKey:"bas_ak_q7r8s9t0",currentRequests:940,requestLimit:1e3,burstUsed:98,burstLimit:100,windowResetAt:"2026-02-22T07:00:00Z",isThrottled:!0,lastActive:"2026-02-22T06:44:00Z",totalRequestsToday:22800,endpointBreakdown:[{endpoint:"/api/v1/search",requests:610,limit:600},{endpoint:"/api/v1/reports",requests:240,limit:300},{endpoint:"/api/v1/exports/*",requests:90,limit:100}]},{id:"cons-006",name:"EcomPlatform Ltd",tier:"basic",apiKey:"bas_ak_u1v2w3x4",currentRequests:780,requestLimit:1e3,burstUsed:45,burstLimit:100,windowResetAt:"2026-02-22T07:00:00Z",isThrottled:!1,lastActive:"2026-02-22T06:38:00Z",totalRequestsToday:18900,endpointBreakdown:[{endpoint:"/api/v1/products",requests:480,limit:600},{endpoint:"/api/v1/orders",requests:220,limit:300},{endpoint:"/api/v1/inventory",requests:80,limit:100}]},{id:"cons-007",name:"BotNet Scanner",tier:"free",apiKey:"fre_ak_y5z6a7b8",currentRequests:98,requestLimit:100,burstUsed:20,burstLimit:20,windowResetAt:"2026-02-22T07:00:00Z",isThrottled:!0,lastActive:"2026-02-22T06:28:00Z",totalRequestsToday:4100,endpointBreakdown:[{endpoint:"/api/v1/auth/login",requests:80,limit:30},{endpoint:"/api/v1/users",requests:18,limit:50}]},{id:"cons-008",name:"InsightDash",tier:"pro",apiKey:"pro_ak_c9d0e1f2",currentRequests:4230,requestLimit:1e4,burstUsed:100,burstLimit:500,windowResetAt:"2026-02-22T07:00:00Z",isThrottled:!1,lastActive:"2026-02-22T06:35:00Z",totalRequestsToday:55e3,endpointBreakdown:[{endpoint:"/api/v1/analytics",requests:2800,limit:6e3},{endpoint:"/api/v1/search",requests:900,limit:3600},{endpoint:"/api/v1/dashboard",requests:530,limit:400}]},{id:"cons-009",name:"FreeTier User #4482",tier:"free",apiKey:"fre_ak_g3h4i5j6",currentRequests:145,requestLimit:100,burstUsed:20,burstLimit:20,windowResetAt:"2026-02-22T07:00:00Z",isThrottled:!0,lastActive:"2026-02-22T06:30:00Z",totalRequestsToday:3800,endpointBreakdown:[{endpoint:"/api/v1/users",requests:95,limit:60},{endpoint:"/api/v1/posts",requests:50,limit:40}]},{id:"cons-010",name:"CloudBridge API",tier:"enterprise",apiKey:"ent_ak_k7l8m9n0",currentRequests:55e3,requestLimit:1e5,burstUsed:2100,burstLimit:5e3,windowResetAt:"2026-02-22T07:00:00Z",isThrottled:!1,lastActive:"2026-02-22T06:44:00Z",totalRequestsToday:631200,endpointBreakdown:[{endpoint:"/api/v1/bridge",requests:38e3,limit:6e4},{endpoint:"/api/v1/sync",requests:12e3,limit:25e3},{endpoint:"/api/v1/webhooks/*",requests:5e3,limit:15e3}]}];function h(s){return s>=1e6?(s/1e6).toFixed(1)+"M":s>=1e3?(s/1e3).toFixed(1)+"K":s.toString()}function S(s){return s<60?`${s}s`:s<3600?`${s/60}m`:s<86400?`${s/3600}h`:`${s/86400}d`}function y(s){const n=new Date(s),o=n.getUTCHours().toString().padStart(2,"0"),r=n.getUTCMinutes().toString().padStart(2,"0");return`${n.getUTCMonth()+1}/${n.getUTCDate()} ${o}:${r} UTC`}function N(s,n){return Math.min(Math.round(s/n*100),100)}function A(s){const n=s.split("_");if(n.length<3)return s.slice(0,4)+"••••••••";const o=n.slice(0,2).join("_"),r=n[2].slice(-4);return`${o}_••••${r}`}function z({tier:s}){const n={free:"bg-zinc-700 text-zinc-300",basic:"bg-sky-900 text-sky-300",pro:"bg-indigo-900 text-indigo-300",enterprise:"bg-violet-900 text-violet-300",internal:"bg-emerald-900 text-emerald-300"};return e.jsx("span",{className:l("inline-flex items-center px-2 py-0.5 rounded text-xs font-medium uppercase tracking-wide",n[s]),children:s})}function C({scope:s}){const n={global:"bg-amber-900 text-amber-300","per-user":"bg-blue-900 text-blue-300","per-ip":"bg-orange-900 text-orange-300","per-endpoint":"bg-teal-900 text-teal-300"};return e.jsx("span",{className:l("inline-flex items-center px-2 py-0.5 rounded text-xs font-medium",n[s]),children:s})}function Z({status:s}){const n={active:"bg-emerald-900 text-emerald-400",disabled:"bg-zinc-800 text-zinc-500",draft:"bg-amber-900 text-amber-400"},o={active:"bg-emerald-400",disabled:"bg-zinc-500",draft:"bg-amber-400"};return e.jsxs("span",{className:l("inline-flex items-center gap-1.5 px-2 py-0.5 rounded text-xs font-medium",n[s]),children:[e.jsx("span",{className:l("w-1.5 h-1.5 rounded-full",o[s])}),s]})}function P({severity:s}){const n={low:"bg-zinc-800 text-zinc-400",medium:"bg-amber-900 text-amber-400",high:"bg-orange-900 text-orange-400",critical:"bg-rose-900 text-rose-400"};return e.jsx("span",{className:l("inline-flex items-center px-2 py-0.5 rounded text-xs font-semibold uppercase",n[s]),children:s})}function k({current:s,limit:n,showLabel:o=!0}){const r=N(s,n),m=s>n,c=r>=100?"bg-rose-500":r>=85?"bg-amber-400":r>=60?"bg-indigo-400":"bg-emerald-400";return e.jsxs("div",{className:"w-full",children:[o&&e.jsxs("div",{className:"flex justify-between text-xs mb-1",children:[e.jsxs("span",{className:l("font-mono",m?"text-rose-400":"text-zinc-300"),children:[h(s)," / ",h(n)]}),e.jsxs("span",{className:l("font-semibold",r>=100?"text-rose-400":r>=85?"text-amber-400":"text-zinc-400"),children:[r,"%"]})]}),e.jsx("div",{className:"h-2 bg-zinc-800 rounded-full overflow-hidden",children:e.jsx("div",{className:l("h-full rounded-full transition-all duration-500",c),style:{width:`${Math.min(r,100)}%`}})})]})}function U({points:s,severity:n,width:o=120,height:r=32}){const m=Math.max(...s,1),c={low:"bg-zinc-500",medium:"bg-amber-400",high:"bg-orange-400",critical:"bg-rose-400"};return e.jsx("div",{className:"flex items-end gap-px",style:{width:o,height:r},"aria-label":"Violation timeline chart",children:s.map((b,p)=>e.jsx("div",{className:l("flex-1 rounded-sm opacity-80",c[n]),style:{height:`${Math.max(4,b/m*r)}px`}},p))})}function M({consumers:s}){const n=[...s].sort((r,m)=>m.currentRequests-r.currentRequests).slice(0,8),o=Math.max(...n.map(r=>r.currentRequests),1);return e.jsx("div",{className:"space-y-3",children:n.map(r=>{const m=r.currentRequests/o*100,c=N(r.currentRequests,r.requestLimit),b=c>=100?"bg-rose-500":c>=85?"bg-amber-400":c>=60?"bg-indigo-500":"bg-emerald-500";return e.jsxs("div",{className:"flex items-center gap-3",children:[e.jsx("div",{className:"w-28 shrink-0 truncate text-xs text-zinc-300",children:r.name}),e.jsx("div",{className:"flex-1 bg-zinc-800 rounded-full h-4 overflow-hidden",children:e.jsx("div",{className:l("h-full rounded-full transition-all duration-700",b),style:{width:`${m}%`}})}),e.jsx("div",{className:"w-16 shrink-0 text-right text-xs font-mono text-zinc-400",children:h(r.currentRequests)}),e.jsx(z,{tier:r.tier})]},r.id)})})}function B({enabled:s,onToggle:n}){return e.jsx("button",{type:"button",role:"switch","aria-checked":s,onClick:n,className:l("relative inline-flex h-5 w-9 shrink-0 cursor-pointer rounded-full border-2 border-transparent transition-colors duration-200 focus:outline-none focus-visible:ring-2 focus-visible:ring-indigo-500",s?"bg-indigo-500":"bg-zinc-700"),children:e.jsx("span",{className:l("pointer-events-none inline-block h-4 w-4 transform rounded-full bg-white shadow ring-0 transition duration-200",s?"translate-x-4":"translate-x-0")})})}function D({rule:s,onClose:n,onToggle:o}){return e.jsxs("div",{className:"fixed inset-0 z-50 flex items-center justify-center p-4",onClick:n,children:[e.jsx("div",{className:"absolute inset-0 bg-black/60 backdrop-blur-sm"}),e.jsxs("div",{className:"relative z-10 w-full max-w-xl bg-zinc-900 border border-zinc-700 rounded-2xl shadow-2xl",onClick:r=>r.stopPropagation(),children:[e.jsxs("div",{className:"flex items-start justify-between p-6 border-b border-zinc-800",children:[e.jsxs("div",{children:[e.jsx("h3",{className:"text-lg font-semibold text-white",children:s.name}),e.jsx("p",{className:"text-sm text-zinc-400 mt-1",children:s.description})]}),e.jsx("button",{onClick:n,className:"text-zinc-500 hover:text-white transition-colors ml-4 mt-0.5",children:e.jsx("svg",{width:"20",height:"20",viewBox:"0 0 20 20",fill:"currentColor",children:e.jsx("path",{fillRule:"evenodd",d:"M4.293 4.293a1 1 0 011.414 0L10 8.586l4.293-4.293a1 1 0 111.414 1.414L11.414 10l4.293 4.293a1 1 0 01-1.414 1.414L10 11.414l-4.293 4.293a1 1 0 01-1.414-1.414L8.586 10 4.293 5.707a1 1 0 010-1.414z",clipRule:"evenodd"})})})]}),e.jsxs("div",{className:"p-6 space-y-5",children:[e.jsxs("div",{className:"flex flex-wrap gap-2",children:[e.jsx(z,{tier:s.tier}),e.jsx(C,{scope:s.scope}),e.jsx(Z,{status:s.status})]}),e.jsx("div",{className:"grid grid-cols-3 gap-3",children:[{label:"Requests",value:h(s.requestsPerWindow),sub:`per ${S(s.windowSeconds)}`},{label:"Window",value:S(s.windowSeconds),sub:`${s.windowSeconds.toLocaleString()} seconds`},{label:"Burst",value:h(s.burstLimit),sub:"max burst"}].map(r=>e.jsxs("div",{className:"bg-zinc-800 rounded-xl p-4 text-center",children:[e.jsx("div",{className:"text-2xl font-bold text-white",children:r.value}),e.jsx("div",{className:"text-xs text-indigo-400 font-medium mt-0.5",children:r.label}),e.jsx("div",{className:"text-xs text-zinc-500 mt-1",children:r.sub})]},r.label))}),e.jsxs("div",{className:"bg-zinc-800 rounded-xl p-4",children:[e.jsx("div",{className:"text-xs text-zinc-500 mb-1 uppercase tracking-wider",children:"Endpoint Pattern"}),e.jsx("code",{className:"text-sm text-indigo-300 font-mono",children:s.endpoint})]}),e.jsxs("div",{className:"grid grid-cols-2 gap-3",children:[e.jsxs("div",{className:"bg-zinc-800 rounded-xl p-4",children:[e.jsx("div",{className:"text-xs text-zinc-500 mb-1 uppercase tracking-wider",children:"Violations (24h)"}),e.jsx("div",{className:l("text-xl font-bold",s.violationsLast24h>50?"text-rose-400":s.violationsLast24h>10?"text-amber-400":"text-emerald-400"),children:s.violationsLast24h})]}),e.jsxs("div",{className:"bg-zinc-800 rounded-xl p-4",children:[e.jsx("div",{className:"text-xs text-zinc-500 mb-1 uppercase tracking-wider",children:"Throttled Now"}),e.jsx("div",{className:l("text-xl font-bold",s.throttledCount>0?"text-rose-400":"text-emerald-400"),children:s.throttledCount})]})]}),e.jsxs("div",{className:"text-xs text-zinc-600 space-y-1",children:[e.jsxs("div",{children:["Created: ",y(s.createdAt)]}),e.jsxs("div",{children:["Updated: ",y(s.updatedAt)]})]}),e.jsxs("div",{className:"flex items-center justify-between bg-zinc-800 rounded-xl px-4 py-3",children:[e.jsxs("div",{children:[e.jsx("div",{className:"text-sm font-medium text-white",children:"Rule Active"}),e.jsx("div",{className:"text-xs text-zinc-500",children:"Toggle to enable or disable enforcement"})]}),e.jsx(B,{enabled:s.status==="active",onToggle:()=>o(s.id)})]})]})]})]})}function _({rules:s,violations:n,consumers:o}){const r=s.filter(i=>i.status==="active").length,m=n.filter(i=>{const u=new Date(i.timestamp).getTime();return new Date("2026-02-22T07:00:00Z").getTime()-u<36e5}).length,c=o.filter(i=>i.isThrottled).length,b=s.length,p=[{label:"Total Rules",value:b,delta:"+2 this week",positive:!0,accent:"indigo"},{label:"Active Rules",value:r,delta:`${b-r} inactive`,positive:!0,accent:"emerald"},{label:"Violations (1h)",value:m,delta:"+12 vs last hour",positive:!1,accent:"rose"},{label:"Throttled Now",value:c,delta:`of ${o.length} consumers`,positive:c===0,accent:c>3?"rose":"amber"}],g={indigo:"border-indigo-500/40",emerald:"border-emerald-500/40",rose:"border-rose-500/40",amber:"border-amber-500/40"};return e.jsxs("div",{className:"space-y-6",children:[e.jsx("div",{className:"grid grid-cols-2 lg:grid-cols-4 gap-4",children:p.map(i=>e.jsxs("div",{className:l("bg-zinc-900 border rounded-xl p-5",g[i.accent]),children:[e.jsx("div",{className:"text-xs text-zinc-500 uppercase tracking-wider mb-2",children:i.label}),e.jsx("div",{className:"text-3xl font-bold text-white",children:i.value}),e.jsx("div",{className:l("text-xs mt-2",i.positive?"text-emerald-400":"text-rose-400"),children:i.delta})]},i.label))}),e.jsxs("div",{className:"bg-zinc-900 border border-zinc-800 rounded-xl p-6",children:[e.jsxs("div",{className:"flex items-center justify-between mb-5",children:[e.jsxs("div",{children:[e.jsx("h3",{className:"text-base font-semibold text-white",children:"Top Consumers by Usage"}),e.jsx("p",{className:"text-xs text-zinc-500 mt-0.5",children:"Current window requests vs. limit"})]}),e.jsxs("div",{className:"flex items-center gap-4 text-xs text-zinc-500",children:[e.jsxs("span",{className:"flex items-center gap-1.5",children:[e.jsx("span",{className:"w-2 h-2 bg-emerald-500 rounded-full inline-block"}),"Normal"]}),e.jsxs("span",{className:"flex items-center gap-1.5",children:[e.jsx("span",{className:"w-2 h-2 bg-amber-400 rounded-full inline-block"}),"High"]}),e.jsxs("span",{className:"flex items-center gap-1.5",children:[e.jsx("span",{className:"w-2 h-2 bg-rose-500 rounded-full inline-block"}),"Over Limit"]})]})]}),e.jsx(M,{consumers:o})]}),e.jsxs("div",{className:"grid grid-cols-1 lg:grid-cols-2 gap-4",children:[e.jsxs("div",{className:"bg-zinc-900 border border-zinc-800 rounded-xl p-6",children:[e.jsx("h3",{className:"text-sm font-semibold text-white mb-4",children:"Recent Critical Violations"}),e.jsx("div",{className:"space-y-3",children:n.filter(i=>i.severity==="critical"||i.severity==="high").slice(0,4).map(i=>e.jsxs("div",{className:"flex items-center justify-between",children:[e.jsxs("div",{className:"min-w-0",children:[e.jsx("div",{className:"text-sm text-white truncate",children:i.consumerName}),e.jsx("div",{className:"text-xs text-zinc-500 font-mono truncate",children:i.endpoint})]}),e.jsxs("div",{className:"flex items-center gap-3 ml-3 shrink-0",children:[e.jsx("span",{className:"text-sm font-mono font-semibold text-rose-400",children:h(i.count)}),e.jsx(P,{severity:i.severity})]})]},i.id))})]}),e.jsxs("div",{className:"bg-zinc-900 border border-zinc-800 rounded-xl p-6",children:[e.jsx("h3",{className:"text-sm font-semibold text-white mb-4",children:"Currently Throttled Consumers"}),e.jsx("div",{className:"space-y-4",children:o.filter(i=>i.isThrottled).map(i=>e.jsxs("div",{children:[e.jsxs("div",{className:"flex items-center justify-between mb-1.5",children:[e.jsx("div",{className:"text-sm text-white",children:i.name}),e.jsx(z,{tier:i.tier})]}),e.jsx(k,{current:i.currentRequests,limit:i.requestLimit})]},i.id))})]})]}),e.jsxs("div",{className:"bg-zinc-900 border border-zinc-800 rounded-xl p-6",children:[e.jsx("h3",{className:"text-sm font-semibold text-white mb-4",children:"Rule Violation Heat Map (Last 24h)"}),e.jsx("div",{className:"grid grid-cols-2 md:grid-cols-3 lg:grid-cols-4 gap-3",children:s.filter(i=>i.violationsLast24h>0).map(i=>{const u=i.violationsLast24h,t=u>100?"bg-rose-900/60 border-rose-700":u>50?"bg-amber-900/60 border-amber-700":u>10?"bg-yellow-900/60 border-yellow-800":"bg-zinc-800 border-zinc-700",d=u>100?"text-rose-300":u>50?"text-amber-300":u>10?"text-yellow-300":"text-zinc-400";return e.jsxs("div",{className:l("border rounded-lg p-3",t),children:[e.jsx("div",{className:"text-xs font-medium text-white truncate",children:i.name}),e.jsx("div",{className:l("text-lg font-bold mt-1",d),children:i.violationsLast24h}),e.jsx("div",{className:"text-xs text-zinc-500",children:"violations"})]},i.id)})})]})]})}function W({rules:s,ruleStatuses:n,onToggleRule:o}){const[r,m]=v.useState(null),[c,b]=v.useState("all"),[p,g]=v.useState("all"),[i,u]=v.useState("all"),t=["all","free","basic","pro","enterprise","internal"],d=["all","global","per-user","per-ip","per-endpoint"],x=["all","active","disabled","draft"],j=s.filter(a=>{const f=n[a.id]??a.status;return!(c!=="all"&&a.tier!==c||p!=="all"&&f!==p||i!=="all"&&a.scope!==i)}),w=a=>({...a,status:n[a.id]??a.status});return e.jsxs("div",{className:"space-y-4",children:[e.jsxs("div",{className:"bg-zinc-900 border border-zinc-800 rounded-xl p-4",children:[e.jsxs("div",{className:"flex flex-wrap gap-4",children:[e.jsxs("div",{children:[e.jsx("label",{className:"text-xs text-zinc-500 uppercase tracking-wider block mb-1.5",children:"Tier"}),e.jsx("div",{className:"flex gap-1 flex-wrap",children:t.map(a=>e.jsx("button",{onClick:()=>b(a),className:l("px-2.5 py-1 rounded text-xs font-medium transition-colors",c===a?"bg-indigo-600 text-white":"bg-zinc-800 text-zinc-400 hover:bg-zinc-700"),children:a},a))})]}),e.jsxs("div",{children:[e.jsx("label",{className:"text-xs text-zinc-500 uppercase tracking-wider block mb-1.5",children:"Status"}),e.jsx("div",{className:"flex gap-1",children:x.map(a=>e.jsx("button",{onClick:()=>g(a),className:l("px-2.5 py-1 rounded text-xs font-medium transition-colors",p===a?"bg-indigo-600 text-white":"bg-zinc-800 text-zinc-400 hover:bg-zinc-700"),children:a},a))})]}),e.jsxs("div",{children:[e.jsx("label",{className:"text-xs text-zinc-500 uppercase tracking-wider block mb-1.5",children:"Scope"}),e.jsx("div",{className:"flex gap-1 flex-wrap",children:d.map(a=>e.jsx("button",{onClick:()=>u(a),className:l("px-2.5 py-1 rounded text-xs font-medium transition-colors",i===a?"bg-indigo-600 text-white":"bg-zinc-800 text-zinc-400 hover:bg-zinc-700"),children:a},a))})]})]}),e.jsxs("div",{className:"text-xs text-zinc-500 mt-3",children:["Showing ",j.length," of ",s.length," rules"]})]}),e.jsxs("div",{className:"bg-zinc-900 border border-zinc-800 rounded-xl overflow-hidden",children:[e.jsx("div",{className:"overflow-x-auto",children:e.jsxs("table",{className:"w-full text-sm",children:[e.jsx("thead",{children:e.jsxs("tr",{className:"border-b border-zinc-800",children:[e.jsx("th",{className:"px-4 py-3 text-left text-xs font-semibold text-zinc-400 uppercase tracking-wider",children:"Rule"}),e.jsx("th",{className:"px-4 py-3 text-left text-xs font-semibold text-zinc-400 uppercase tracking-wider",children:"Tier"}),e.jsx("th",{className:"px-4 py-3 text-left text-xs font-semibold text-zinc-400 uppercase tracking-wider",children:"Scope"}),e.jsx("th",{className:"px-4 py-3 text-left text-xs font-semibold text-zinc-400 uppercase tracking-wider",children:"Limit"}),e.jsx("th",{className:"px-4 py-3 text-left text-xs font-semibold text-zinc-400 uppercase tracking-wider",children:"Burst"}),e.jsx("th",{className:"px-4 py-3 text-left text-xs font-semibold text-zinc-400 uppercase tracking-wider",children:"Violations 24h"}),e.jsx("th",{className:"px-4 py-3 text-left text-xs font-semibold text-zinc-400 uppercase tracking-wider",children:"Status"}),e.jsx("th",{className:"px-4 py-3 text-left text-xs font-semibold text-zinc-400 uppercase tracking-wider",children:"Toggle"})]})}),e.jsx("tbody",{children:j.map((a,f)=>{const R=w(a);return e.jsxs("tr",{onClick:()=>m(R),className:l("border-b border-zinc-800/50 hover:bg-zinc-800/50 cursor-pointer transition-colors",f%2===0?"bg-transparent":"bg-zinc-900/50"),children:[e.jsxs("td",{className:"px-4 py-3",children:[e.jsx("div",{className:"font-medium text-white",children:a.name}),e.jsx("div",{className:"text-xs text-zinc-500 font-mono mt-0.5 truncate max-w-xs",children:a.endpoint})]}),e.jsx("td",{className:"px-4 py-3",children:e.jsx(z,{tier:a.tier})}),e.jsx("td",{className:"px-4 py-3",children:e.jsx(C,{scope:a.scope})}),e.jsxs("td",{className:"px-4 py-3",children:[e.jsx("span",{className:"text-white font-mono font-medium",children:h(a.requestsPerWindow)}),e.jsxs("span",{className:"text-zinc-500 text-xs ml-1",children:["/ ",S(a.windowSeconds)]})]}),e.jsx("td",{className:"px-4 py-3",children:e.jsx("span",{className:"text-indigo-400 font-mono font-medium",children:h(a.burstLimit)})}),e.jsx("td",{className:"px-4 py-3",children:e.jsx("span",{className:l("font-mono font-semibold",a.violationsLast24h>100?"text-rose-400":a.violationsLast24h>20?"text-amber-400":"text-emerald-400"),children:a.violationsLast24h})}),e.jsx("td",{className:"px-4 py-3",children:e.jsx(Z,{status:R.status})}),e.jsx("td",{className:"px-4 py-3",onClick:I=>I.stopPropagation(),children:e.jsx(B,{enabled:R.status==="active",onToggle:()=>o(a.id)})})]},a.id)})})]})}),j.length===0&&e.jsx("div",{className:"py-12 text-center text-zinc-500",children:"No rules match the current filters."})]}),r&&e.jsx(D,{rule:w(r),onClose:()=>m(null),onToggle:a=>{o(a),m(f=>f?{...f,status:(n[a]??f.status)==="active"?"disabled":"active"}:null)}})]})}function E({violations:s}){const[n,o]=v.useState("all"),[r,m]=v.useState("timestamp"),[c,b]=v.useState(null),p=["all","critical","high","medium","low"],g={critical:4,high:3,medium:2,low:1},i=s.filter(t=>n==="all"||t.severity===n).sort((t,d)=>r==="count"?d.count-t.count:r==="severity"?g[d.severity]-g[t.severity]:new Date(d.timestamp).getTime()-new Date(t.timestamp).getTime()),u=i.reduce((t,d)=>t+d.count,0);return e.jsxs("div",{className:"space-y-4",children:[e.jsx("div",{className:"grid grid-cols-4 gap-3",children:["critical","high","medium","low"].map(t=>{const d=s.filter(a=>a.severity===t).length,x=s.filter(a=>a.severity===t).reduce((a,f)=>a+f.count,0),j={critical:"border-rose-700 bg-rose-950/30",high:"border-orange-700 bg-orange-950/30",medium:"border-amber-700 bg-amber-950/30",low:"border-zinc-700 bg-zinc-800/30"},w={critical:"text-rose-400",high:"text-orange-400",medium:"text-amber-400",low:"text-zinc-400"};return e.jsxs("div",{className:l("border rounded-xl p-4 cursor-pointer transition-all",j[t],n===t?"ring-1 ring-white/20":""),onClick:()=>o(n===t?"all":t),children:[e.jsx("div",{className:"text-xs text-zinc-500 capitalize",children:t}),e.jsx("div",{className:l("text-2xl font-bold mt-1",w[t]),children:d}),e.jsxs("div",{className:"text-xs text-zinc-600 mt-0.5",children:[h(x)," hits"]})]},t)})}),e.jsxs("div",{className:"flex items-center justify-between",children:[e.jsx("div",{className:"flex gap-1",children:p.map(t=>e.jsx("button",{onClick:()=>o(t),className:l("px-2.5 py-1 rounded text-xs font-medium transition-colors",n===t?"bg-indigo-600 text-white":"bg-zinc-800 text-zinc-400 hover:bg-zinc-700"),children:t},t))}),e.jsxs("div",{className:"flex gap-2 items-center",children:[e.jsx("span",{className:"text-xs text-zinc-500",children:"Sort:"}),["timestamp","count","severity"].map(t=>e.jsx("button",{onClick:()=>m(t),className:l("px-2.5 py-1 rounded text-xs font-medium transition-colors capitalize",r===t?"bg-zinc-700 text-white":"bg-zinc-800 text-zinc-400 hover:bg-zinc-700"),children:t},t))]})]}),e.jsxs("div",{className:"text-xs text-zinc-500",children:[i.length," violation events · ",h(u)," total hits"]}),e.jsx("div",{className:"space-y-2",children:i.map(t=>e.jsxs("div",{className:"bg-zinc-900 border border-zinc-800 rounded-xl overflow-hidden",children:[e.jsxs("div",{className:"flex items-center gap-4 p-4 cursor-pointer hover:bg-zinc-800/40 transition-colors",onClick:()=>b(c===t.id?null:t.id),children:[e.jsxs("div",{className:"flex-1 min-w-0",children:[e.jsxs("div",{className:"flex items-center gap-2 flex-wrap",children:[e.jsx("span",{className:"text-sm font-semibold text-white",children:t.consumerName}),e.jsx(P,{severity:t.severity})]}),e.jsx("div",{className:"text-xs text-zinc-400 font-mono mt-1 truncate",children:t.endpoint}),e.jsx("div",{className:"text-xs text-zinc-600 mt-0.5",children:t.ruleName})]}),e.jsx("div",{className:"shrink-0 hidden sm:block",children:e.jsx(U,{points:t.timelinePoints,severity:t.severity})}),e.jsxs("div",{className:"shrink-0 text-right",children:[e.jsx("div",{className:l("text-xl font-bold font-mono",t.severity==="critical"?"text-rose-400":t.severity==="high"?"text-orange-400":t.severity==="medium"?"text-amber-400":"text-zinc-400"),children:h(t.count)}),e.jsx("div",{className:"text-xs text-zinc-500",children:"hits"})]}),e.jsx("div",{className:"shrink-0 hidden md:block text-right",children:e.jsx("div",{className:"text-xs text-zinc-400",children:y(t.timestamp)})}),e.jsx("div",{className:"shrink-0 text-zinc-600",children:e.jsx("svg",{width:"16",height:"16",viewBox:"0 0 16 16",fill:"currentColor",className:l("transition-transform",c===t.id?"rotate-180":""),children:e.jsx("path",{d:"M4 6l4 4 4-4",stroke:"currentColor",strokeWidth:"1.5",fill:"none"})})})]}),c===t.id&&e.jsxs("div",{className:"border-t border-zinc-800 px-4 py-4 bg-zinc-950/40",children:[e.jsxs("div",{className:"grid grid-cols-2 md:grid-cols-4 gap-4 text-sm",children:[e.jsxs("div",{children:[e.jsx("div",{className:"text-xs text-zinc-500 uppercase tracking-wider mb-1",children:"Consumer ID"}),e.jsx("div",{className:"font-mono text-zinc-300 text-xs",children:t.consumerId})]}),e.jsxs("div",{children:[e.jsx("div",{className:"text-xs text-zinc-500 uppercase tracking-wider mb-1",children:"IP Address"}),e.jsx("div",{className:"font-mono text-zinc-300 text-xs",children:t.ipAddress})]}),e.jsxs("div",{children:[e.jsx("div",{className:"text-xs text-zinc-500 uppercase tracking-wider mb-1",children:"Rule ID"}),e.jsx("div",{className:"font-mono text-zinc-300 text-xs",children:t.ruleId})]}),e.jsxs("div",{children:[e.jsx("div",{className:"text-xs text-zinc-500 uppercase tracking-wider mb-1",children:"Timestamp"}),e.jsx("div",{className:"text-zinc-300 text-xs",children:y(t.timestamp)})]})]}),e.jsxs("div",{className:"mt-4",children:[e.jsx("div",{className:"text-xs text-zinc-500 mb-2",children:"Activity Timeline (last 12 intervals)"}),e.jsx("div",{className:"flex items-end gap-1",style:{height:60},children:t.timelinePoints.map((d,x)=>{const j=Math.max(...t.timelinePoints,1),w=Math.max(4,d/j*60),a=t.severity==="critical"?"bg-rose-500":t.severity==="high"?"bg-orange-400":t.severity==="medium"?"bg-amber-400":"bg-zinc-500";return e.jsx("div",{className:l("flex-1 rounded-sm",a),style:{height:w},title:`${d} hits`},x)})}),e.jsxs("div",{className:"flex justify-between text-xs text-zinc-600 mt-1",children:[e.jsx("span",{children:"-12 intervals"}),e.jsx("span",{children:"now"})]})]})]})]},t.id))})]})}function $({consumers:s}){const[n,o]=v.useState(null),[r,m]=v.useState("all"),[c,b]=v.useState("all"),[p,g]=v.useState("usage"),i=["all","free","basic","pro","enterprise","internal"],u=s.filter(t=>!(r!=="all"&&t.tier!==r||c==="throttled"&&!t.isThrottled||c==="healthy"&&t.isThrottled)).sort((t,d)=>p==="usage"?N(d.currentRequests,d.requestLimit)-N(t.currentRequests,t.requestLimit):p==="requests"?d.currentRequests-t.currentRequests:t.name.localeCompare(d.name));return e.jsxs("div",{className:"space-y-4",children:[e.jsx("div",{className:"grid grid-cols-2 md:grid-cols-4 gap-3",children:[{label:"Total Consumers",value:s.length,color:"text-white"},{label:"Throttled",value:s.filter(t=>t.isThrottled).length,color:"text-rose-400"},{label:"Near Limit (>85%)",value:s.filter(t=>N(t.currentRequests,t.requestLimit)>=85).length,color:"text-amber-400"},{label:"Healthy (<60%)",value:s.filter(t=>N(t.currentRequests,t.requestLimit)<60).length,color:"text-emerald-400"}].map(t=>e.jsxs("div",{className:"bg-zinc-900 border border-zinc-800 rounded-xl p-4",children:[e.jsx("div",{className:"text-xs text-zinc-500 uppercase tracking-wider",children:t.label}),e.jsx("div",{className:l("text-2xl font-bold mt-1",t.color),children:t.value})]},t.label))}),e.jsxs("div",{className:"bg-zinc-900 border border-zinc-800 rounded-xl p-4",children:[e.jsxs("div",{className:"flex flex-wrap gap-4 items-end",children:[e.jsxs("div",{children:[e.jsx("label",{className:"text-xs text-zinc-500 uppercase tracking-wider block mb-1.5",children:"Tier"}),e.jsx("div",{className:"flex gap-1 flex-wrap",children:i.map(t=>e.jsx("button",{onClick:()=>m(t),className:l("px-2.5 py-1 rounded text-xs font-medium transition-colors",r===t?"bg-indigo-600 text-white":"bg-zinc-800 text-zinc-400 hover:bg-zinc-700"),children:t},t))})]}),e.jsxs("div",{children:[e.jsx("label",{className:"text-xs text-zinc-500 uppercase tracking-wider block mb-1.5",children:"Status"}),e.jsx("div",{className:"flex gap-1",children:["all","throttled","healthy"].map(t=>e.jsx("button",{onClick:()=>b(t),className:l("px-2.5 py-1 rounded text-xs font-medium transition-colors capitalize",c===t?"bg-indigo-600 text-white":"bg-zinc-800 text-zinc-400 hover:bg-zinc-700"),children:t},t))})]}),e.jsxs("div",{children:[e.jsx("label",{className:"text-xs text-zinc-500 uppercase tracking-wider block mb-1.5",children:"Sort"}),e.jsx("div",{className:"flex gap-1",children:["usage","requests","name"].map(t=>e.jsx("button",{onClick:()=>g(t),className:l("px-2.5 py-1 rounded text-xs font-medium transition-colors capitalize",p===t?"bg-zinc-700 text-white":"bg-zinc-800 text-zinc-400 hover:bg-zinc-700"),children:t},t))})]})]}),e.jsxs("div",{className:"text-xs text-zinc-500 mt-3",children:["Showing ",u.length," of ",s.length," consumers"]})]}),e.jsx("div",{className:"grid grid-cols-1 md:grid-cols-2 gap-4",children:u.map(t=>{const d=N(t.currentRequests,t.requestLimit),x=N(t.burstUsed,t.burstLimit);return e.jsxs("div",{className:l("bg-zinc-900 border rounded-xl p-5 cursor-pointer hover:bg-zinc-800/40 transition-all",t.isThrottled?"border-rose-800":d>=85?"border-amber-800":"border-zinc-800"),onClick:()=>o(t),children:[e.jsxs("div",{className:"flex items-start justify-between mb-4",children:[e.jsxs("div",{children:[e.jsxs("div",{className:"flex items-center gap-2",children:[e.jsx("span",{className:"text-sm font-semibold text-white",children:t.name}),t.isThrottled&&e.jsxs("span",{className:"inline-flex items-center gap-1 px-1.5 py-0.5 rounded text-xs bg-rose-900 text-rose-400 font-semibold",children:[e.jsx("span",{className:"w-1.5 h-1.5 rounded-full bg-rose-400 animate-pulse inline-block"}),"THROTTLED"]})]}),e.jsx("div",{className:"text-xs text-zinc-500 font-mono mt-0.5",children:A(t.apiKey)})]}),e.jsx(z,{tier:t.tier})]}),e.jsxs("div",{className:"mb-3",children:[e.jsx("div",{className:"text-xs text-zinc-500 uppercase tracking-wider mb-1.5",children:"Request Usage"}),e.jsx(k,{current:t.currentRequests,limit:t.requestLimit})]}),e.jsxs("div",{className:"mb-4",children:[e.jsx("div",{className:"text-xs text-zinc-500 uppercase tracking-wider mb-1.5",children:"Burst Usage"}),e.jsxs("div",{children:[e.jsxs("div",{className:"flex justify-between text-xs mb-1",children:[e.jsxs("span",{className:"font-mono text-zinc-400",children:[h(t.burstUsed)," / ",h(t.burstLimit)]}),e.jsxs("span",{className:l("font-semibold",x>=100?"text-rose-400":x>=85?"text-amber-400":"text-zinc-400"),children:[x,"%"]})]}),e.jsx("div",{className:"h-1.5 bg-zinc-800 rounded-full overflow-hidden",children:e.jsx("div",{className:l("h-full rounded-full",x>=100?"bg-rose-500":x>=85?"bg-amber-400":"bg-indigo-500"),style:{width:`${Math.min(x,100)}%`}})})]})]}),e.jsxs("div",{className:"flex items-center justify-between text-xs text-zinc-500",children:[e.jsxs("span",{children:["Today: ",e.jsx("span",{className:"text-white font-mono",children:h(t.totalRequestsToday)})]}),e.jsxs("span",{children:["Last active: ",e.jsx("span",{className:"text-zinc-400",children:y(t.lastActive)})]})]})]},t.id)})}),n&&e.jsxs("div",{className:"fixed inset-0 z-50 flex items-center justify-center p-4",onClick:()=>o(null),children:[e.jsx("div",{className:"absolute inset-0 bg-black/60 backdrop-blur-sm"}),e.jsxs("div",{className:"relative z-10 w-full max-w-2xl bg-zinc-900 border border-zinc-700 rounded-2xl shadow-2xl max-h-[90vh] overflow-y-auto",onClick:t=>t.stopPropagation(),children:[e.jsxs("div",{className:"flex items-start justify-between p-6 border-b border-zinc-800 sticky top-0 bg-zinc-900 z-10",children:[e.jsxs("div",{children:[e.jsxs("div",{className:"flex items-center gap-3",children:[e.jsx("h3",{className:"text-lg font-semibold text-white",children:n.name}),n.isThrottled&&e.jsx("span",{className:"px-2 py-0.5 rounded text-xs bg-rose-900 text-rose-400 font-semibold",children:"THROTTLED"})]}),e.jsxs("div",{className:"flex items-center gap-2 mt-1.5",children:[e.jsx(z,{tier:n.tier}),e.jsx("span",{className:"text-xs text-zinc-500 font-mono",children:A(n.apiKey)})]})]}),e.jsx("button",{onClick:()=>o(null),className:"text-zinc-500 hover:text-white transition-colors",children:e.jsx("svg",{width:"20",height:"20",viewBox:"0 0 20 20",fill:"currentColor",children:e.jsx("path",{fillRule:"evenodd",d:"M4.293 4.293a1 1 0 011.414 0L10 8.586l4.293-4.293a1 1 0 111.414 1.414L11.414 10l4.293 4.293a1 1 0 01-1.414 1.414L10 11.414l-4.293 4.293a1 1 0 01-1.414-1.414L8.586 10 4.293 5.707a1 1 0 010-1.414z",clipRule:"evenodd"})})})]}),e.jsxs("div",{className:"p-6 space-y-6",children:[e.jsxs("div",{className:"grid grid-cols-2 gap-4",children:[e.jsxs("div",{className:"bg-zinc-800 rounded-xl p-4",children:[e.jsx("div",{className:"text-xs text-zinc-500 uppercase tracking-wider mb-2",children:"Request Quota"}),e.jsx(k,{current:n.currentRequests,limit:n.requestLimit})]}),e.jsxs("div",{className:"bg-zinc-800 rounded-xl p-4",children:[e.jsx("div",{className:"text-xs text-zinc-500 uppercase tracking-wider mb-2",children:"Burst Quota"}),e.jsx(k,{current:n.burstUsed,limit:n.burstLimit})]})]}),e.jsx("div",{className:"grid grid-cols-3 gap-3",children:[{label:"Requests Today",value:h(n.totalRequestsToday),color:"text-white"},{label:"Window Resets",value:y(n.windowResetAt),color:"text-indigo-300"},{label:"Last Active",value:y(n.lastActive),color:"text-zinc-300"}].map(t=>e.jsxs("div",{className:"bg-zinc-800 rounded-xl p-4",children:[e.jsx("div",{className:"text-xs text-zinc-500 uppercase tracking-wider mb-1",children:t.label}),e.jsx("div",{className:l("text-sm font-semibold",t.color),children:t.value})]},t.label))}),e.jsxs("div",{children:[e.jsx("h4",{className:"text-sm font-semibold text-white mb-3",children:"Endpoint Breakdown"}),e.jsx("div",{className:"space-y-4",children:n.endpointBreakdown.map(t=>{const d=N(t.requests,t.limit),x=t.requests>t.limit;return e.jsxs("div",{children:[e.jsxs("div",{className:"flex items-center justify-between mb-1.5",children:[e.jsx("code",{className:l("text-xs font-mono",x?"text-rose-400":"text-zinc-300"),children:t.endpoint}),e.jsxs("span",{className:l("text-xs font-semibold",x?"text-rose-400":d>=85?"text-amber-400":"text-zinc-500"),children:[d,"%"]})]}),e.jsx(k,{current:t.requests,limit:t.limit})]},t.endpoint)})})]}),e.jsxs("div",{children:[e.jsx("h4",{className:"text-sm font-semibold text-white mb-3",children:"Relative Usage by Endpoint"}),e.jsx("div",{className:"space-y-2",children:n.endpointBreakdown.map(t=>{const d=Math.max(...n.endpointBreakdown.map(w=>w.requests),1),x=t.requests/d*100,j=t.requests>t.limit;return e.jsxs("div",{className:"flex items-center gap-3",children:[e.jsx("code",{className:"text-xs font-mono text-zinc-400 w-40 shrink-0 truncate",children:t.endpoint}),e.jsx("div",{className:"flex-1 h-5 bg-zinc-800 rounded overflow-hidden",children:e.jsx("div",{className:l("h-full rounded transition-all",j?"bg-rose-500":"bg-indigo-500"),style:{width:`${x}%`}})}),e.jsx("span",{className:"text-xs font-mono text-zinc-300 w-12 text-right shrink-0",children:h(t.requests)})]},t.endpoint+"-bar")})})]})]})]})]})]})}function K(){const[s,n]=v.useState("overview"),[o,r]=v.useState({}),m=i=>{r(u=>{var x;const d=(u[i]??((x=T.find(j=>j.id===i))==null?void 0:x.status)??"active")==="active"?"disabled":"active";return{...u,[i]:d}})},c=[{id:"overview",label:"Overview"},{id:"rules",label:"Rules",count:T.filter(i=>(o[i.id]??i.status)==="active").length},{id:"violations",label:"Violations",count:q.filter(i=>i.severity==="critical"||i.severity==="high").length},{id:"consumers",label:"Consumers",count:L.length}],b=T.filter(i=>(o[i.id]??i.status)==="active").length,p=L.filter(i=>i.isThrottled).length,g=q.filter(i=>i.severity==="critical").length;return e.jsxs("div",{className:"min-h-screen bg-zinc-950 text-white",children:[e.jsx("div",{className:"bg-zinc-900 border-b border-zinc-800 px-6 py-4",children:e.jsxs("div",{className:"max-w-7xl mx-auto flex items-center justify-between",children:[e.jsx("div",{children:e.jsxs("div",{className:"flex items-center gap-3",children:[e.jsx("div",{className:"w-8 h-8 rounded-lg bg-indigo-600 flex items-center justify-center",children:e.jsx("svg",{width:"18",height:"18",viewBox:"0 0 24 24",fill:"none",stroke:"white",strokeWidth:"2",strokeLinecap:"round",strokeLinejoin:"round",children:e.jsx("path",{d:"M12 22s8-4 8-10V5l-8-3-8 3v7c0 6 8 10 8 10z"})})}),e.jsxs("div",{children:[e.jsx("h1",{className:"text-lg font-bold text-white",children:"API Rate Limit Manager"}),e.jsx("p",{className:"text-xs text-zinc-500",children:"Manage rate limiting rules, violations, and consumer quotas"})]})]})}),e.jsxs("div",{className:"flex items-center gap-4",children:[p>0&&e.jsxs("div",{className:"flex items-center gap-1.5 px-3 py-1.5 bg-rose-900/50 border border-rose-800 rounded-lg",children:[e.jsx("span",{className:"w-2 h-2 bg-rose-400 rounded-full animate-pulse"}),e.jsxs("span",{className:"text-xs text-rose-300 font-semibold",children:[p," throttled"]})]}),g>0&&e.jsxs("div",{className:"flex items-center gap-1.5 px-3 py-1.5 bg-orange-900/50 border border-orange-800 rounded-lg",children:[e.jsx("span",{className:"w-2 h-2 bg-orange-400 rounded-full"}),e.jsxs("span",{className:"text-xs text-orange-300 font-semibold",children:[g," critical"]})]}),e.jsxs("div",{className:"text-xs text-zinc-500",children:[e.jsx("span",{className:"text-emerald-400 font-semibold",children:b}),e.jsx("span",{children:" active rules"})]})]})]})}),e.jsx("div",{className:"bg-zinc-900 border-b border-zinc-800 px-6",children:e.jsx("div",{className:"max-w-7xl mx-auto",children:e.jsx("nav",{className:"flex gap-1",role:"tablist",children:c.map(i=>e.jsxs("button",{role:"tab","aria-selected":s===i.id,onClick:()=>n(i.id),className:l("flex items-center gap-2 px-4 py-3 text-sm font-medium border-b-2 transition-colors",s===i.id?"border-indigo-500 text-indigo-400":"border-transparent text-zinc-400 hover:text-zinc-200 hover:border-zinc-600"),children:[i.label,i.count!==void 0&&e.jsx("span",{className:l("px-1.5 py-0.5 rounded text-xs font-semibold",s===i.id?"bg-indigo-900 text-indigo-300":"bg-zinc-800 text-zinc-400"),children:i.count})]},i.id))})})}),e.jsxs("div",{className:"max-w-7xl mx-auto px-6 py-6",children:[s==="overview"&&e.jsx(_,{rules:T,violations:q,consumers:L}),s==="rules"&&e.jsx(W,{rules:T,ruleStatuses:o,onToggleRule:m}),s==="violations"&&e.jsx(E,{violations:q}),s==="consumers"&&e.jsx($,{consumers:L})]}),e.jsx("div",{className:"border-t border-zinc-800 mt-8 px-6 py-4",children:e.jsxs("div",{className:"max-w-7xl mx-auto flex items-center justify-between text-xs text-zinc-600",children:[e.jsx("span",{children:"API Rate Limit Manager · Product & UI Squad"}),e.jsx("span",{children:"Data refreshes every 30s in production · All times UTC"})]})})]})}export{K as default};
