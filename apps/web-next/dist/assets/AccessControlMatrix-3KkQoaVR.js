import{r as p,j as e,c as g,R as W}from"./index-D0lUTUSu.js";const w=[{name:"Admin",description:"Full system access. Can manage all resources, users, and configuration.",memberCount:3,inheritsFrom:null},{name:"Principal",description:"Senior operator with broad access. Can manage most resources except billing and system config.",memberCount:8,inheritsFrom:"Admin"},{name:"Lead",description:"Team lead with elevated permissions. Can manage agents, sessions, and files within their scope.",memberCount:14,inheritsFrom:"Principal"},{name:"Worker",description:"Standard operator. Can read and execute agents, manage own sessions and files.",memberCount:42,inheritsFrom:"Lead"},{name:"Viewer",description:"Read-only access to most resources. Cannot modify or execute.",memberCount:67,inheritsFrom:null},{name:"External",description:"External collaborator with minimal access. Restricted to specific shared resources.",memberCount:23,inheritsFrom:null}],I=["Agents","Sessions","Files","Config","Billing","Logs","API","Models"],q=["Read","Write","Delete","Execute","Admin"],m=I.flatMap(a=>q.map(l=>({resource:a,action:l})));function P(){const a={level:"granted"},l={level:"denied"},c=t=>({level:"conditional",condition:t});return[m.map(()=>({...a})),m.map(({resource:t,action:r})=>t==="Billing"&&r==="Admin"?{...l}:t==="Config"&&r==="Admin"?{...l}:t==="Config"&&r==="Delete"?{...l}:t==="Billing"&&r==="Delete"?c("Requires Admin approval for billing deletions"):t==="Models"&&r==="Admin"?c("Can admin models within assigned projects only"):{...a}),m.map(({resource:t,action:r})=>r==="Admin"&&!["Agents","Sessions"].includes(t)?{...l}:t==="Billing"?{...l}:t==="Config"&&r!=="Read"?{...l}:t==="Models"&&r==="Delete"?c("Can delete models only in own team scope"):r==="Delete"&&t==="Logs"?{...l}:{...a}),m.map(({resource:t,action:r})=>r==="Admin"?{...l}:t==="Billing"?{...l}:t==="Config"?r==="Read"?c("Read config for assigned projects only"):{...l}:r==="Delete"&&!["Files"].includes(t)?{...l}:r==="Delete"&&t==="Files"?c("Can delete own files only"):t==="Agents"&&r==="Write"?c("Can modify agents assigned to them"):r==="Execute"?["Agents","API"].includes(t)?{...a}:{...l}:{...a}),m.map(({resource:t,action:r})=>r==="Read"?t==="Billing"?{...l}:t==="Config"?{...l}:{...a}:{...l}),m.map(({resource:t,action:r})=>r==="Read"&&["Agents","Files","API"].includes(t)?c("Only shared resources visible"):r==="Execute"&&t==="API"?c("Rate-limited to 100 req/min"):{...l})]}function k(a){return a.map(l=>l.map(c=>({...c})))}const F=["granted","denied","conditional"];function _(){const[a,l]=p.useState(P),[c,R]=p.useState(P),[t,r]=p.useState(null),[z,L]=p.useState("all"),[C,M]=p.useState("all"),[y,A]=p.useState(!1),[b,S]=p.useState(null),v=m.reduce((s,n,o)=>(z!=="all"&&n.resource!==z||s.push(o),s),[]),$=a.some((s,n)=>s.some((o,i)=>o.level!==c[n][i].level)),j=[];a.forEach((s,n)=>{s.forEach((o,i)=>{o.level!==c[n][i].level&&j.push({roleIndex:n,colIndex:i,from:c[n][i].level,to:o.level})})});function B(s,n){l(o=>{const i=k(o),d=i[s][n],x=F.indexOf(d.level),h=F[(x+1)%F.length];return i[s][n]={level:h,condition:h==="conditional"?"Custom conditional access":void 0},i})}function G(){R(k(a)),A(!1)}function O(){l(k(c)),A(!1)}function D(s){return C==="all"?!0:s===C}function H(s){return v.some(n=>D(a[s][n].level))}const U=w.map((s,n)=>n).filter(s=>H(s)),f=[];let E=null;for(const s of v){const n=m[s].resource;n!==E?(f.push({resource:n,cols:[s]}),E=n):f[f.length-1].cols.push(s)}return e.jsxs("div",{className:"min-h-screen bg-zinc-950 text-white p-6",children:[e.jsxs("div",{className:"mb-6",children:[e.jsx("h1",{className:"text-2xl font-bold mb-1",children:"Access Control Matrix"}),e.jsx("p",{className:"text-zinc-400 text-sm",children:"Manage role-based permissions across resources and actions"})]}),e.jsxs("div",{className:"flex flex-wrap items-center gap-3 mb-5",children:[e.jsxs("div",{className:"flex items-center gap-2",children:[e.jsx("label",{className:"text-xs text-zinc-400 uppercase tracking-wide",children:"Resource"}),e.jsxs("select",{value:z,onChange:s=>L(s.target.value),className:"bg-zinc-900 border border-zinc-800 rounded px-2 py-1.5 text-sm text-white focus:outline-none focus:border-indigo-500",children:[e.jsx("option",{value:"all",children:"All Resources"}),I.map(s=>e.jsx("option",{value:s,children:s},s))]})]}),e.jsxs("div",{className:"flex items-center gap-2",children:[e.jsx("label",{className:"text-xs text-zinc-400 uppercase tracking-wide",children:"Access"}),e.jsxs("select",{value:C,onChange:s=>M(s.target.value),className:"bg-zinc-900 border border-zinc-800 rounded px-2 py-1.5 text-sm text-white focus:outline-none focus:border-indigo-500",children:[e.jsx("option",{value:"all",children:"All Levels"}),e.jsx("option",{value:"granted",children:"Granted"}),e.jsx("option",{value:"denied",children:"Denied"}),e.jsx("option",{value:"conditional",children:"Conditional"})]})]}),e.jsx("div",{className:"flex-1"}),$&&e.jsxs("div",{className:"flex items-center gap-2",children:[e.jsxs("span",{className:"text-xs text-amber-400 font-medium",children:[j.length," unsaved change",j.length!==1?"s":""]}),e.jsx("button",{onClick:()=>A(!y),className:"px-3 py-1.5 text-xs bg-zinc-800 hover:bg-zinc-700 border border-zinc-700 rounded transition-colors",children:y?"Hide Diff":"View Diff"}),e.jsx("button",{onClick:O,className:"px-3 py-1.5 text-xs bg-zinc-800 hover:bg-zinc-700 border border-zinc-700 rounded transition-colors text-rose-400",children:"Discard"}),e.jsx("button",{onClick:G,className:"px-3 py-1.5 text-xs bg-indigo-600 hover:bg-indigo-500 rounded font-medium transition-colors",children:"Save Changes"})]})]}),y&&j.length>0&&e.jsxs("div",{className:"mb-5 bg-zinc-900 border border-zinc-800 rounded-lg p-4",children:[e.jsx("h3",{className:"text-sm font-semibold mb-3 text-zinc-300",children:"Permission Changes"}),e.jsx("div",{className:"space-y-1.5 max-h-48 overflow-y-auto",children:j.map((s,n)=>{const o=m[s.colIndex];return e.jsxs("div",{className:"flex items-center gap-2 text-xs",children:[e.jsx("span",{className:"text-zinc-400 w-20 shrink-0",children:w[s.roleIndex].name}),e.jsxs("span",{className:"text-zinc-500 w-28 shrink-0",children:[o.resource," / ",o.action]}),e.jsx("span",{className:g("w-20 shrink-0",s.from==="granted"?"text-emerald-400":s.from==="denied"?"text-rose-400":"text-amber-400"),children:s.from}),e.jsx("span",{className:"text-zinc-600",children:"→"}),e.jsx("span",{className:g("w-20 shrink-0",s.to==="granted"?"text-emerald-400":s.to==="denied"?"text-rose-400":"text-amber-400"),children:s.to})]},n)})})]}),e.jsx("div",{className:"bg-zinc-900 border border-zinc-800 rounded-lg overflow-hidden",children:e.jsx("div",{className:"overflow-x-auto",children:e.jsxs("table",{className:"w-full border-collapse text-xs",children:[e.jsxs("thead",{children:[e.jsxs("tr",{className:"border-b border-zinc-800",children:[e.jsx("th",{className:"sticky left-0 z-10 bg-zinc-900 p-2 w-28 min-w-[7rem]"}),f.map(s=>e.jsx("th",{colSpan:s.cols.length,className:"p-2 text-center text-indigo-400 font-semibold border-l border-zinc-800 uppercase tracking-wider",children:s.resource},s.resource))]}),e.jsxs("tr",{className:"border-b border-zinc-700",children:[e.jsx("th",{className:"sticky left-0 z-10 bg-zinc-900 p-2 text-left text-zinc-400 font-medium",children:"Role"}),v.map(s=>{const n=m[s],o=f.some(i=>i.cols[0]===s);return e.jsx("th",{className:g("p-2 text-center text-zinc-500 font-normal whitespace-nowrap",o&&"border-l border-zinc-800"),children:n.action},s)})]})]}),e.jsx("tbody",{children:U.map(s=>{const n=w[s],o=t===s;return e.jsxs(W.Fragment,{children:[e.jsxs("tr",{className:g("border-b border-zinc-800/50 hover:bg-zinc-800/30 transition-colors",o&&"bg-zinc-800/20"),children:[e.jsx("td",{className:"sticky left-0 z-10 bg-zinc-900 p-2 cursor-pointer select-none group",onClick:()=>r(o?null:s),children:e.jsxs("div",{className:"flex items-center gap-1.5",children:[e.jsx("span",{className:g("inline-block w-4 text-center text-zinc-500 transition-transform text-[10px]",o&&"rotate-90"),children:"▶"}),e.jsx("span",{className:"font-semibold text-white group-hover:text-indigo-400 transition-colors",children:n.name}),e.jsx("span",{className:"text-zinc-600 text-[10px] ml-1",children:n.memberCount})]})}),v.map(i=>{const d=a[s][i],x=d.level!==c[s][i].level,h=(b==null?void 0:b.row)===s&&(b==null?void 0:b.col)===i,u=f.some(V=>V.cols[0]===i),N=!D(d.level);return e.jsxs("td",{className:g("p-0 text-center relative",u&&"border-l border-zinc-800"),children:[e.jsxs("button",{onClick:()=>B(s,i),onMouseEnter:()=>S({row:s,col:i}),onMouseLeave:()=>S(null),className:g("w-full h-full p-2 transition-all cursor-pointer",N&&"opacity-20",!N&&d.level==="granted"&&"text-emerald-400 hover:bg-emerald-500/10",!N&&d.level==="denied"&&"text-rose-400 hover:bg-rose-500/10",!N&&d.level==="conditional"&&"text-amber-400 hover:bg-amber-500/10",x&&"ring-1 ring-inset ring-indigo-500/50"),title:d.level==="conditional"&&d.condition?d.condition:`${w[s].name}: ${m[i].resource} ${m[i].action} — ${d.level}`,children:[e.jsx("span",{className:"text-sm font-bold",children:d.level==="granted"?"✓":d.level==="denied"?"✗":"⚠"}),x&&e.jsx("div",{className:"absolute top-0.5 right-0.5 w-1.5 h-1.5 rounded-full bg-indigo-500"})]}),h&&d.level==="conditional"&&d.condition&&e.jsxs("div",{className:"absolute z-20 bottom-full left-1/2 -translate-x-1/2 mb-2 px-3 py-2 bg-zinc-800 border border-zinc-700 rounded-lg shadow-xl text-[11px] text-zinc-200 whitespace-nowrap pointer-events-none",children:[e.jsx("div",{className:"absolute bottom-0 left-1/2 -translate-x-1/2 translate-y-1/2 rotate-45 w-2 h-2 bg-zinc-800 border-r border-b border-zinc-700"}),d.condition]})]},i)})]}),o&&e.jsx("tr",{className:"border-b border-zinc-800/50",children:e.jsx("td",{colSpan:v.length+1,className:"p-0",children:e.jsxs("div",{className:"bg-zinc-800/40 border-t border-zinc-800 px-4 py-3",children:[e.jsxs("div",{className:"grid grid-cols-3 gap-6 max-w-2xl",children:[e.jsxs("div",{children:[e.jsx("div",{className:"text-[10px] uppercase tracking-wider text-zinc-500 mb-1",children:"Description"}),e.jsx("div",{className:"text-xs text-zinc-300 leading-relaxed",children:n.description})]}),e.jsxs("div",{children:[e.jsx("div",{className:"text-[10px] uppercase tracking-wider text-zinc-500 mb-1",children:"Members"}),e.jsx("div",{className:"text-xl font-bold text-white",children:n.memberCount}),e.jsx("div",{className:"mt-1.5 h-1.5 w-full bg-zinc-700 rounded-full overflow-hidden",children:e.jsx("div",{className:"h-full bg-indigo-500 rounded-full transition-all",style:{width:`${Math.min(100,n.memberCount/70*100)}%`}})})]}),e.jsxs("div",{children:[e.jsx("div",{className:"text-[10px] uppercase tracking-wider text-zinc-500 mb-1",children:"Inherits From"}),e.jsx("div",{className:"text-xs",children:n.inheritsFrom?e.jsx("span",{className:"inline-flex items-center gap-1 px-2 py-0.5 bg-indigo-500/15 text-indigo-400 rounded border border-indigo-500/20",children:n.inheritsFrom}):e.jsx("span",{className:"text-zinc-600",children:"None — standalone role"})})]})]}),e.jsxs("div",{className:"mt-3 pt-3 border-t border-zinc-700/50",children:[e.jsx("div",{className:"text-[10px] uppercase tracking-wider text-zinc-500 mb-2",children:"Permission Distribution"}),e.jsx("div",{className:"flex gap-1 items-end h-6",children:(()=>{const i=a[s].length,d=a[s].filter(u=>u.level==="granted").length,x=a[s].filter(u=>u.level==="denied").length,h=a[s].filter(u=>u.level==="conditional").length;return e.jsxs(e.Fragment,{children:[e.jsxs("div",{className:"flex items-center gap-4 text-[10px]",children:[e.jsxs("div",{className:"flex items-center gap-1.5",children:[e.jsx("div",{className:"w-2.5 h-2.5 rounded-sm bg-emerald-500"}),e.jsxs("span",{className:"text-zinc-400",children:["Granted: ",d,"/",i]})]}),e.jsxs("div",{className:"flex items-center gap-1.5",children:[e.jsx("div",{className:"w-2.5 h-2.5 rounded-sm bg-rose-500"}),e.jsxs("span",{className:"text-zinc-400",children:["Denied: ",x,"/",i]})]}),e.jsxs("div",{className:"flex items-center gap-1.5",children:[e.jsx("div",{className:"w-2.5 h-2.5 rounded-sm bg-amber-500"}),e.jsxs("span",{className:"text-zinc-400",children:["Conditional: ",h,"/",i]})]})]}),e.jsxs("div",{className:"flex-1 flex h-2 rounded-full overflow-hidden ml-4",children:[e.jsx("div",{className:"bg-emerald-500 transition-all",style:{width:`${d/i*100}%`}}),e.jsx("div",{className:"bg-amber-500 transition-all",style:{width:`${h/i*100}%`}}),e.jsx("div",{className:"bg-rose-500 transition-all",style:{width:`${x/i*100}%`}})]})]})})()})]})]})})})]},s)})})]})})}),e.jsxs("div",{className:"mt-5 bg-zinc-900 border border-zinc-800 rounded-lg p-4",children:[e.jsx("h3",{className:"text-xs font-semibold text-zinc-400 uppercase tracking-wider mb-3",children:"Permission Legend"}),e.jsxs("div",{className:"flex flex-wrap gap-6",children:[e.jsxs("div",{className:"flex items-center gap-2",children:[e.jsx("div",{className:"w-8 h-8 rounded-md bg-emerald-500/10 border border-emerald-500/30 flex items-center justify-center text-emerald-400 font-bold text-sm",children:"✓"}),e.jsxs("div",{children:[e.jsx("div",{className:"text-xs font-medium text-white",children:"Granted"}),e.jsx("div",{className:"text-[10px] text-zinc-500",children:"Full access to this action"})]})]}),e.jsxs("div",{className:"flex items-center gap-2",children:[e.jsx("div",{className:"w-8 h-8 rounded-md bg-rose-500/10 border border-rose-500/30 flex items-center justify-center text-rose-400 font-bold text-sm",children:"✗"}),e.jsxs("div",{children:[e.jsx("div",{className:"text-xs font-medium text-white",children:"Denied"}),e.jsx("div",{className:"text-[10px] text-zinc-500",children:"No access to this action"})]})]}),e.jsxs("div",{className:"flex items-center gap-2",children:[e.jsx("div",{className:"w-8 h-8 rounded-md bg-amber-500/10 border border-amber-500/30 flex items-center justify-center text-amber-400 font-bold text-sm",children:"⚠"}),e.jsxs("div",{children:[e.jsx("div",{className:"text-xs font-medium text-white",children:"Conditional"}),e.jsx("div",{className:"text-[10px] text-zinc-500",children:"Access granted with restrictions — hover for details"})]})]}),e.jsxs("div",{className:"flex items-center gap-2",children:[e.jsxs("div",{className:"w-8 h-8 rounded-md bg-zinc-800 border border-indigo-500/50 flex items-center justify-center relative",children:[e.jsx("span",{className:"text-zinc-500 text-sm",children:"·"}),e.jsx("div",{className:"absolute top-0.5 right-0.5 w-1.5 h-1.5 rounded-full bg-indigo-500"})]}),e.jsxs("div",{children:[e.jsx("div",{className:"text-xs font-medium text-white",children:"Modified"}),e.jsx("div",{className:"text-[10px] text-zinc-500",children:"Unsaved change — blue dot indicator"})]})]})]}),e.jsx("div",{className:"mt-3 pt-3 border-t border-zinc-800 text-[10px] text-zinc-600",children:"Click any cell to cycle through access levels. Click a role name to expand details. Use filters above to narrow the view."})]})]})}export{_ as default};
