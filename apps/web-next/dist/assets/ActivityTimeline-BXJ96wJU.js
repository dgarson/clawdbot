import{r as p,j as e,c as d}from"./index-4yfaAu2f.js";const N={commit:{dot:"bg-emerald-500",badge:"bg-emerald-500/20 text-emerald-400",bar:"bg-emerald-500"},pr:{dot:"bg-blue-500",badge:"bg-blue-500/20 text-blue-400",bar:"bg-blue-500"},deploy:{dot:"bg-indigo-500",badge:"bg-indigo-500/20 text-indigo-400",bar:"bg-indigo-500"},alert:{dot:"bg-rose-500",badge:"bg-rose-500/20 text-rose-400",bar:"bg-rose-500"},message:{dot:"bg-purple-500",badge:"bg-purple-500/20 text-purple-400",bar:"bg-purple-500"},spawn:{dot:"bg-amber-500",badge:"bg-amber-500/20 text-amber-400",bar:"bg-amber-500"},task:{dot:"bg-zinc-500",badge:"bg-zinc-500/20 text-zinc-400",bar:"bg-zinc-500"},"config-change":{dot:"bg-orange-500",badge:"bg-orange-500/20 text-orange-400",bar:"bg-orange-500"},error:{dot:"bg-red-500",badge:"bg-red-500/20 text-red-400",bar:"bg-red-500"}},z={commit:"Commit",pr:"PR",deploy:"Deploy",alert:"Alert",message:"Message",spawn:"Spawn",task:"Task","config-change":"Config",error:"Error"},T=["commit","pr","deploy","alert","message","spawn","task","config-change","error"],S={"product-ui":"Product & UI","platform-core":"Platform Core","feature-dev":"Feature Dev",ops:"Ops",leadership:"Leadership"},P=["product-ui","platform-core","feature-dev","ops","leadership"],_=[{label:"1h",value:"1h"},{label:"6h",value:"6h"},{label:"24h",value:"24h"},{label:"7d",value:"7d"}],f=[{id:"e01",timestamp:"2026-02-22T09:42:00Z",actor:"Piper",actorEmoji:"ðŸ”§",kind:"commit",title:"feat: add ActivityTimeline view scaffold",description:"Initial layout with sidebar filters, timeline rail, and density bar.",metadata:{branch:"piper/activity-timeline",repo:"clawdbot",files:"1"},squad:"product-ui"},{id:"e02",timestamp:"2026-02-22T09:38:00Z",actor:"Xavier",actorEmoji:"ðŸ§ ",kind:"message",title:"Horizon dashboard scope locked",description:"Confirmed six core views for MVP: Agents, Squads, Timeline, Metrics, Cost, Settings.",metadata:{channel:"#cb-product"},squad:"leadership"},{id:"e03",timestamp:"2026-02-22T09:31:00Z",actor:"Roman",actorEmoji:"âš™ï¸",kind:"deploy",title:"Gateway v2.14.0 â†’ production",description:"Rolling deploy across 3 regions. Zero-downtime verified.",metadata:{version:"2.14.0",regions:"us-west,eu-west,ap-south",rollback:"v2.13.2"},squad:"platform-core"},{id:"e04",timestamp:"2026-02-22T09:24:00Z",actor:"Nadia",actorEmoji:"ðŸ”",kind:"alert",title:"Memory pressure on worker pool",description:"Worker RSS exceeding 1.2 GB threshold on 2 nodes.",metadata:{severity:"warning",nodes:"w-07,w-12",threshold:"1.2GB"},squad:"ops"},{id:"e05",timestamp:"2026-02-22T09:18:00Z",actor:"Claire",actorEmoji:"ðŸš€",kind:"pr",title:"PR #482: Streaming response chunking",description:"Implements backpressure-aware chunked transfer for large tool outputs.",metadata:{branch:"claire/stream-chunk",repo:"clawdbot",lines:"+342 / -89"},squad:"feature-dev"},{id:"e06",timestamp:"2026-02-22T09:10:00Z",actor:"Luis",actorEmoji:"ðŸŽ¨",kind:"task",title:"Assign Horizon view components",description:"Distributed 6 dashboard views across Product & UI squad workers.",metadata:{assignees:"Piper,Quinn,Reed,Wes,Sam",views:"6"},squad:"product-ui"},{id:"e07",timestamp:"2026-02-22T08:55:00Z",actor:"Joey",actorEmoji:"ðŸ“‹",kind:"spawn",title:"Spawned daily standup aggregator",description:"Collecting status from all squads for the 09:00 digest.",metadata:{target:"all-squads",timeout:"300s"},squad:"leadership"},{id:"e08",timestamp:"2026-02-22T08:47:00Z",actor:"Tim",actorEmoji:"ðŸ—ï¸",kind:"config-change",title:"Updated ESLint strict-mode rules",description:"Enabled no-explicit-any and strict-boolean-expressions across monorepo.",metadata:{scope:"monorepo",rules:"no-explicit-any,strict-boolean-expressions"},squad:"platform-core"},{id:"e09",timestamp:"2026-02-22T08:30:00Z",actor:"Sam",actorEmoji:"ðŸ”Œ",kind:"commit",title:"fix: API client retry backoff",description:"Exponential backoff now respects Retry-After headers from gateway.",metadata:{branch:"sam/retry-fix",repo:"clawdbot",files:"3"},squad:"product-ui"},{id:"e10",timestamp:"2026-02-22T08:12:00Z",actor:"Wes",actorEmoji:"âš¡",kind:"commit",title:"perf: virtualize agent list rendering",description:"Replaced naive map with windowed list; 60fps on 500+ agents.",metadata:{branch:"wes/virtual-list",repo:"clawdbot",fps:"60"},squad:"product-ui"},{id:"e11",timestamp:"2026-02-22T07:58:00Z",actor:"Roman",actorEmoji:"âš™ï¸",kind:"error",title:"Redis connection pool exhaustion",description:"Pool max reached during burst. Auto-scaled from 20â†’40 connections.",metadata:{severity:"critical",pool_before:"20",pool_after:"40"},squad:"platform-core"},{id:"e12",timestamp:"2026-02-22T07:45:00Z",actor:"Reed",actorEmoji:"â™¿",kind:"pr",title:"PR #479: ARIA landmarks for dashboard",description:"Added role attributes and skip-nav links across all Horizon views.",metadata:{branch:"reed/aria-landmarks",repo:"clawdbot",lines:"+128 / -14"},squad:"product-ui"},{id:"e13",timestamp:"2026-02-22T07:30:00Z",actor:"Quinn",actorEmoji:"ðŸ§©",kind:"commit",title:"feat: squad detail drill-down view",description:"Added expandable squad cards with member roster and recent activity.",metadata:{branch:"quinn/squad-detail",repo:"clawdbot",files:"2"},squad:"product-ui"},{id:"e14",timestamp:"2026-02-22T07:02:00Z",actor:"Nadia",actorEmoji:"ðŸ”",kind:"deploy",title:"Monitoring stack upgrade â†’ Grafana 11",description:"Upgraded observability dashboards with new service-map topology view.",metadata:{version:"11.0.1",downtime:"0s"},squad:"ops"},{id:"e15",timestamp:"2026-02-22T06:45:00Z",actor:"Amadeus",actorEmoji:"ðŸ‘‘",kind:"message",title:"Q1 OKR checkpoint reminder",description:"All squad leads: submit OKR progress by EOD Friday.",metadata:{channel:"#cb-leadership",deadline:"2026-02-27"},squad:"leadership"},{id:"e16",timestamp:"2026-02-21T22:15:00Z",actor:"Claire",actorEmoji:"ðŸš€",kind:"commit",title:"feat: tool-call batching engine",description:"Batch up to 8 independent tool calls into a single parallel dispatch.",metadata:{branch:"claire/batch-tools",repo:"clawdbot",files:"5"},squad:"feature-dev"},{id:"e17",timestamp:"2026-02-21T21:40:00Z",actor:"Roman",actorEmoji:"âš™ï¸",kind:"config-change",title:"Rate limiter thresholds adjusted",description:"Increased per-agent burst from 30â†’60 req/s after capacity review.",metadata:{before:"30 req/s",after:"60 req/s",scope:"per-agent"},squad:"platform-core"},{id:"e18",timestamp:"2026-02-21T20:30:00Z",actor:"Sam",actorEmoji:"ðŸ”Œ",kind:"pr",title:"PR #476: WebSocket reconnect logic",description:"Graceful reconnect with jittered backoff and session resume.",metadata:{branch:"sam/ws-reconnect",repo:"clawdbot",lines:"+210 / -45"},squad:"product-ui"},{id:"e19",timestamp:"2026-02-21T19:50:00Z",actor:"Piper",actorEmoji:"ðŸ”§",kind:"task",title:"Design system color audit complete",description:"Verified all 9 kind-colors meet WCAG AA contrast on zinc-950 background.",metadata:{colors_checked:"9",pass_rate:"100%"},squad:"product-ui"},{id:"e20",timestamp:"2026-02-21T18:20:00Z",actor:"Tim",actorEmoji:"ðŸ—ï¸",kind:"spawn",title:"Spawned dependency audit agent",description:"Scanning for outdated/vulnerable packages across monorepo.",metadata:{packages:"347",scope:"monorepo"},squad:"platform-core"},{id:"e21",timestamp:"2026-02-21T17:00:00Z",actor:"Nadia",actorEmoji:"ðŸ”",kind:"alert",title:"Disk usage > 85% on log volume",description:"Log rotation triggered; archiving logs older than 7 days to cold storage.",metadata:{severity:"warning",usage:"87%",volume:"/var/log/openclaw"},squad:"ops"},{id:"e22",timestamp:"2026-02-21T15:30:00Z",actor:"Wes",actorEmoji:"âš¡",kind:"pr",title:"PR #474: Lazy-load dashboard panels",description:"Code-split each Horizon view into async chunks; initial load âˆ’38%.",metadata:{branch:"wes/lazy-panels",repo:"clawdbot",lines:"+95 / -22",improvement:"âˆ’38% bundle"},squad:"product-ui"},{id:"e23",timestamp:"2026-02-21T14:10:00Z",actor:"Xavier",actorEmoji:"ðŸ§ ",kind:"task",title:"Horizon MVP scope finalized",description:"Six views confirmed. Stretch: 7th view for cost breakdown if time permits.",metadata:{views:"6+1 stretch",deadline:"2026-03-07"},squad:"leadership"},{id:"e24",timestamp:"2026-02-21T12:45:00Z",actor:"Claire",actorEmoji:"ðŸš€",kind:"error",title:"Flaky test: tool-dispatch timeout",description:"Intermittent 2s timeout in CI. Root cause: mock clock drift. Fixed.",metadata:{test:"tool-dispatch.spec.ts",ci_run:"14209",fix:"mock clock pinned"},squad:"feature-dev"},{id:"e25",timestamp:"2026-02-21T11:00:00Z",actor:"Quinn",actorEmoji:"ðŸ§©",kind:"deploy",title:"Storybook v8 deployed to preview",description:"Updated component docs with new Horizon design tokens and examples.",metadata:{url:"preview.openclaw.dev/storybook",version:"8.4.2"},squad:"product-ui"},{id:"e26",timestamp:"2026-02-21T09:30:00Z",actor:"Joey",actorEmoji:"ðŸ“‹",kind:"message",title:"Sprint velocity report posted",description:"Team completed 48/52 story points. Two carry-overs from Platform Core.",metadata:{channel:"#cb-standups",points_done:"48",points_planned:"52"},squad:"leadership"},{id:"e27",timestamp:"2026-02-20T16:20:00Z",actor:"Roman",actorEmoji:"âš™ï¸",kind:"deploy",title:"Database migration: add agent_metrics table",description:"Online migration completed in 4.2s. No locks held during write.",metadata:{migration:"20260220_agent_metrics",duration:"4.2s"},squad:"platform-core"},{id:"e28",timestamp:"2026-02-20T14:00:00Z",actor:"Reed",actorEmoji:"â™¿",kind:"commit",title:"fix: focus trap in modal dialogs",description:"Tab cycling now correctly wraps inside modals; escape key dismisses.",metadata:{branch:"reed/focus-trap",repo:"clawdbot",files:"4"},squad:"product-ui"}];function H(n){const i=new Date(n),r=i.getUTCHours().toString().padStart(2,"0"),o=i.getUTCMinutes().toString().padStart(2,"0");return`${r}:${o} UTC`}function M(n){const i=new Date(n),r=new Date("2026-02-22T00:00:00Z"),o=new Date("2026-02-21T00:00:00Z"),c=new Date(Date.UTC(i.getUTCFullYear(),i.getUTCMonth(),i.getUTCDate()));return c.getTime()===r.getTime()?"Today":c.getTime()===o.getTime()?"Yesterday":i.toLocaleDateString("en-US",{month:"short",day:"numeric",year:"numeric",timeZone:"UTC"})}function O(n){const i=[];let r="";for(const o of n){const c=M(o.timestamp);c!==r&&(r=c,i.push({label:c,events:[]})),i[i.length-1].events.push(o)}return i}function K(n){const i=new Array(24).fill(0);for(const r of n){const o=new Date(r.timestamp).getUTCHours();i[o]++}return i}function q(n){return Array.from(new Set(n.map(i=>i.actor))).sort()}function B(){const[n,i]=p.useState(""),[r,o]=p.useState("7d"),[c,E]=p.useState(new Set(T)),[x,w]=p.useState("all"),[v,A]=p.useState(new Set(q(f))),[C,Z]=p.useState(null),[h,l]=p.useState(15),m=f.filter(t=>{if(!c.has(t.kind)||x!=="all"&&t.squad!==x||!v.has(t.actor))return!1;if(n.trim()){const b=n.toLowerCase();if(!`${t.title} ${t.description} ${t.actor} ${t.kind}`.toLowerCase().includes(b))return!1}const a=new Date("2026-02-22T10:00:00Z").getTime(),s=new Date(t.timestamp).getTime();return!((a-s)/36e5>{"1h":1,"6h":6,"24h":24,"7d":168}[r])}),D=m.slice(0,h),j=h<m.length,y=O(D),k=K(m),R=Math.max(...k,1),L=q(f),U=t=>{E(a=>{const s=new Set(a);return s.has(t)?s.delete(t):s.add(t),s}),l(15)},I=t=>{A(a=>{const s=new Set(a);return s.has(t)?s.delete(t):s.add(t),s}),l(15)};return e.jsxs("div",{className:"min-h-screen bg-zinc-950 text-white",children:[e.jsxs("div",{className:"border-b border-zinc-800 px-6 py-4 flex items-center gap-4 flex-wrap",children:[e.jsx("h1",{className:"text-xl font-semibold tracking-tight",children:"Activity Timeline"}),e.jsx("input",{type:"text",placeholder:"Search eventsâ€¦",value:n,onChange:t=>{i(t.target.value),l(15)},className:"bg-zinc-800 border border-zinc-700 text-white rounded px-3 py-2 text-sm w-64 placeholder:text-zinc-500 focus:outline-none focus:border-indigo-500"}),e.jsx("div",{className:"flex items-center gap-1 ml-auto",children:_.map(t=>e.jsx("button",{onClick:()=>{o(t.value),l(15)},className:d("px-3 py-1.5 rounded text-sm transition-colors",r===t.value?"bg-indigo-600 text-white":"bg-zinc-800 text-zinc-400 hover:bg-zinc-700 hover:text-white"),children:t.label},t.value))})]}),e.jsxs("div",{className:"flex",children:[e.jsxs("aside",{className:"w-[200px] shrink-0 border-r border-zinc-800 p-4 space-y-6 overflow-y-auto max-h-[calc(100vh-64px)]",children:[e.jsxs("div",{children:[e.jsx("h3",{className:"text-xs font-medium text-zinc-500 uppercase tracking-wider mb-2",children:"Event Kind"}),e.jsx("div",{className:"space-y-1",children:T.map(t=>e.jsxs("button",{onClick:()=>U(t),className:d("flex items-center gap-2 w-full text-left px-2 py-1 rounded text-sm transition-colors",c.has(t)?"bg-zinc-800 text-white":"text-zinc-600 hover:text-zinc-400"),children:[e.jsx("span",{className:d("w-2 h-2 rounded-full shrink-0",N[t].dot,!c.has(t)&&"opacity-30")}),e.jsx("span",{children:z[t]})]},t))})]}),e.jsxs("div",{children:[e.jsx("h3",{className:"text-xs font-medium text-zinc-500 uppercase tracking-wider mb-2",children:"Squad"}),e.jsxs("div",{className:"space-y-1",children:[e.jsx("button",{onClick:()=>{w("all"),l(15)},className:d("w-full text-left px-2 py-1 rounded text-sm transition-colors",x==="all"?"bg-zinc-800 text-white":"text-zinc-500 hover:text-zinc-400"),children:"All Squads"}),P.map(t=>e.jsx("button",{onClick:()=>{w(t),l(15)},className:d("w-full text-left px-2 py-1 rounded text-sm transition-colors",x===t?"bg-zinc-800 text-white":"text-zinc-500 hover:text-zinc-400"),children:S[t]},t))]})]}),e.jsxs("div",{children:[e.jsx("h3",{className:"text-xs font-medium text-zinc-500 uppercase tracking-wider mb-2",children:"Agent"}),e.jsx("div",{className:"space-y-1",children:L.map(t=>e.jsx("button",{onClick:()=>I(t),className:d("w-full text-left px-2 py-1 rounded text-sm transition-colors",v.has(t)?"bg-zinc-800 text-white":"text-zinc-600 hover:text-zinc-400"),children:t},t))})]})]}),e.jsxs("main",{className:"flex-1 min-w-0 p-6 space-y-6 overflow-y-auto max-h-[calc(100vh-64px)]",children:[e.jsxs("div",{className:"bg-zinc-900 border border-zinc-800 rounded-lg p-4",children:[e.jsxs("div",{className:"flex items-center justify-between mb-2",children:[e.jsx("span",{className:"text-xs text-zinc-500 font-medium uppercase tracking-wider",children:"24h Activity Density"}),e.jsxs("span",{className:"text-xs text-zinc-500",children:[m.length," events"]})]}),e.jsx("div",{className:"flex items-end gap-[3px] h-10",children:k.map((t,a)=>e.jsx("div",{className:"flex-1 flex flex-col items-center justify-end",title:`${a.toString().padStart(2,"0")}:00 UTC â€” ${t} events`,children:e.jsx("div",{className:d("w-full rounded-sm transition-all",t>0?"bg-indigo-500":"bg-zinc-800"),style:{height:`${Math.max(t>0?10:2,t/R*100)}%`}})},a))}),e.jsxs("div",{className:"flex justify-between mt-1",children:[e.jsx("span",{className:"text-[10px] text-zinc-600",children:"00:00"}),e.jsx("span",{className:"text-[10px] text-zinc-600",children:"06:00"}),e.jsx("span",{className:"text-[10px] text-zinc-600",children:"12:00"}),e.jsx("span",{className:"text-[10px] text-zinc-600",children:"18:00"}),e.jsx("span",{className:"text-[10px] text-zinc-600",children:"23:00"})]})]}),y.length===0&&e.jsx("div",{className:"text-center py-16 text-zinc-500",children:"No events match the current filters."}),y.map(t=>e.jsxs("div",{children:[e.jsxs("div",{className:"flex items-center gap-3 mb-4",children:[e.jsx("span",{className:"text-sm font-semibold text-zinc-400",children:t.label}),e.jsx("div",{className:"flex-1 h-px bg-zinc-800"}),e.jsxs("span",{className:"text-xs text-zinc-600",children:[t.events.length," events"]})]}),e.jsxs("div",{className:"relative ml-4",children:[e.jsx("div",{className:"absolute left-[5px] top-0 bottom-0 w-px bg-zinc-800"}),e.jsx("div",{className:"space-y-3",children:t.events.map(a=>{const s=N[a.kind],u=C===a.id;return e.jsxs("div",{className:"relative flex gap-4",children:[e.jsx("div",{className:"relative z-10 mt-3 shrink-0",children:e.jsx("div",{className:d("w-[11px] h-[11px] rounded-full border-2 border-zinc-950",s.dot)})}),e.jsxs("button",{onClick:()=>Z(u?null:a.id),className:d("flex-1 text-left bg-zinc-900 border rounded-lg p-3 transition-colors hover:border-zinc-700 cursor-pointer",u?"border-zinc-700":"border-zinc-800"),children:[e.jsxs("div",{className:"flex items-center gap-2 flex-wrap",children:[e.jsxs("span",{className:"text-sm",children:[a.actorEmoji," ",a.actor]}),e.jsx("span",{className:d("text-[11px] px-1.5 py-0.5 rounded font-medium",s.badge),children:z[a.kind]}),e.jsx("span",{className:"text-xs text-zinc-600 ml-auto shrink-0",children:H(a.timestamp)})]}),e.jsx("p",{className:"text-sm text-white mt-1 font-medium",children:a.title}),e.jsx("p",{className:"text-xs text-zinc-400 mt-0.5 leading-relaxed",children:a.description}),e.jsxs("div",{className:"flex flex-wrap gap-1.5 mt-2",children:[Object.entries(a.metadata).slice(0,u?void 0:3).map(([g,b])=>e.jsxs("span",{className:"inline-flex text-[10px] bg-zinc-800 text-zinc-400 rounded px-1.5 py-0.5",children:[e.jsxs("span",{className:"text-zinc-600",children:[g,":"]}),e.jsx("span",{className:"ml-0.5",children:b})]},g)),!u&&Object.keys(a.metadata).length>3&&e.jsxs("span",{className:"text-[10px] text-zinc-600",children:["+",Object.keys(a.metadata).length-3," more"]})]}),u&&e.jsxs("div",{className:"mt-3 pt-3 border-t border-zinc-800 text-xs text-zinc-500 space-y-1",children:[e.jsxs("div",{className:"flex gap-4",children:[e.jsxs("span",{children:["Squad: ",e.jsx("span",{className:"text-zinc-300",children:S[a.squad]})]}),e.jsxs("span",{children:["ID: ",e.jsx("span",{className:"text-zinc-300 font-mono",children:a.id})]})]}),e.jsxs("div",{children:["Full timestamp: ",e.jsx("span",{className:"text-zinc-300 font-mono",children:a.timestamp})]})]})]})]},a.id)})})]})]},t.label)),j&&e.jsx("div",{className:"flex justify-center pt-4",children:e.jsxs("button",{onClick:()=>l(t=>t+10),className:"bg-indigo-600 hover:bg-indigo-500 text-white px-3 py-1.5 rounded text-sm transition-colors",children:["Load more (",m.length-h," remaining)"]})}),!j&&m.length>0&&e.jsxs("div",{className:"text-center text-xs text-zinc-600 pt-4 pb-8",children:["End of timeline â€” ",m.length," events shown"]})]})]})]})}export{B as default};
