import{r as f,j as e,c as o}from"./index-rWtyeRSA.js";const g=[{id:"xavier",name:"Xavier",emoji:"ðŸ—ï¸",role:"CTO",status:"active",model:"claude-opus-4-6",tier:0},{id:"tim",name:"Tim",emoji:"âš™ï¸",role:"VP Architecture",status:"busy",model:"claude-opus-4-6",tier:0},{id:"luis",name:"Luis",emoji:"ðŸŽ¨",role:"Principal UX Engineer",status:"active",model:"claude-sonnet-4-6",tier:1},{id:"piper",name:"Piper",emoji:"ðŸ”§",role:"Component Architecture",status:"active",model:"claude-sonnet-4-6",tier:2},{id:"quinn",name:"Quinn",emoji:"âš¡",role:"State Management",status:"busy",model:"claude-sonnet-4-6",tier:2},{id:"reed",name:"Reed",emoji:"â™¿",role:"Accessibility",status:"active",model:"claude-sonnet-4-6",tier:2},{id:"wes",name:"Wes",emoji:"ðŸš€",role:"Performance",status:"idle",model:"claude-sonnet-4-6",tier:2},{id:"sam",name:"Sam",emoji:"ðŸŒ",role:"Animation",status:"active",model:"claude-sonnet-4-6",tier:2}],A={id:"root",agentId:"xavier",sessionId:"sess_root_00",parentId:null,edgeKind:null,task:"Orchestrate Horizon UI sprint â€” ship 50+ dashboard views by sprint close",startedAt:"4 hr ago",duration:null,messages:12,toolCalls:8,children:[{id:"luis-main",agentId:"luis",sessionId:"sess_luis_main",parentId:"root",edgeKind:"delegate",task:"Lead Product & UI squad â€” implement all Horizon view components",startedAt:"4 hr ago",duration:null,messages:48,toolCalls:127,children:[{id:"quinn-1",agentId:"quinn",sessionId:"sess_quinn_collab",parentId:"luis-main",edgeKind:"spawn",task:"Build AgentCollaborationGraph component (bs-ux-1)",startedAt:"25 min ago",duration:"12 min",messages:3,toolCalls:2,children:[]},{id:"quinn-2",agentId:"quinn",sessionId:"sess_quinn_topo",parentId:"luis-main",edgeKind:"spawn",task:"Build AgentRelationshipTopology component (bs-ux-2)",startedAt:"2 min ago",duration:null,messages:1,toolCalls:0,children:[]},{id:"piper-1",agentId:"piper",sessionId:"sess_piper_team",parentId:"luis-main",edgeKind:"spawn",task:"Build TeamManagement + AgentComparison + ThemeEditor",startedAt:"2 hr ago",duration:"~45 min",messages:22,toolCalls:31,children:[]},{id:"wes-1",agentId:"wes",sessionId:"sess_wes_export",parentId:"luis-main",edgeKind:"spawn",task:"Build DataExportManager + CrashReporter + WebhookManager",startedAt:"3 hr ago",duration:"~55 min",messages:19,toolCalls:28,children:[{id:"wes-2",agentId:"wes",sessionId:"sess_wes_bundle",parentId:"wes-1",edgeKind:"spawn",task:"Sub-task: Analyze bundle size + optimize export chunk",startedAt:"3 hr ago",duration:"8 min",messages:5,toolCalls:4,children:[]}]},{id:"reed-1",agentId:"reed",sessionId:"sess_reed_dev",parentId:"luis-main",edgeKind:"spawn",task:"Build DeveloperConsole + ChangelogView + PermissionsManager",startedAt:"2.5 hr ago",duration:"~1 hr",messages:28,toolCalls:40,children:[]}]},{id:"tim-main",agentId:"tim",sessionId:"sess_tim_arch",parentId:"root",edgeKind:"delegate",task:"Architecture review â€” Horizon megabranch PRs and frontend constraints",startedAt:"3.5 hr ago",duration:null,messages:15,toolCalls:22,children:[{id:"tim-sub",agentId:"tim",sessionId:"sess_tim_diff",parentId:"tim-main",edgeKind:"spawn",task:"Sub-task: Analyze megabranch diff for type safety regressions",startedAt:"1 hr ago",duration:"22 min",messages:8,toolCalls:12,children:[]}]}]},p=[{fromId:"xavier",toId:"luis",kind:"delegate",label:"Horizon sprint",active:!0},{fromId:"xavier",toId:"tim",kind:"delegate",label:"Arch review",active:!0},{fromId:"tim",toId:"luis",kind:"report",label:"PR coordination",active:!0},{fromId:"luis",toId:"piper",kind:"spawn",label:"TeamMgmt suite",active:!1},{fromId:"luis",toId:"quinn",kind:"spawn",label:"bs-ux-1 + bs-ux-2",active:!0},{fromId:"luis",toId:"reed",kind:"spawn",label:"DevConsole suite",active:!1},{fromId:"luis",toId:"wes",kind:"spawn",label:"DataExport suite",active:!1},{fromId:"luis",toId:"sam",kind:"spawn",label:"Animation tokens",active:!1}],h={xavier:{x:200,y:52},tim:{x:410,y:52},luis:{x:200,y:190},piper:{x:52,y:330},quinn:{x:160,y:330},reed:{x:268,y:330},wes:{x:376,y:330},sam:{x:484,y:330}},_=[{id:"chain-horizon",title:"Horizon Dashboard Sprint",startedAt:"4 hr ago",status:"active",steps:[{agentId:"xavier",sessionId:"sess_root_00",task:"Orchestrate sprint",kind:"root",messages:12},{agentId:"luis",sessionId:"sess_luis_main",task:"Lead Product & UI squad",kind:"delegate",messages:48},{agentId:"quinn",sessionId:"sess_quinn_topo",task:"Build AgentRelationshipTopology",kind:"spawn",messages:1}]},{id:"chain-arch",title:"Architecture Review",startedAt:"3.5 hr ago",status:"active",steps:[{agentId:"xavier",sessionId:"sess_root_00",task:"Request arch review",kind:"root",messages:5},{agentId:"tim",sessionId:"sess_tim_arch",task:"Review megabranch PRs",kind:"delegate",messages:15},{agentId:"tim",sessionId:"sess_tim_diff",task:"Analyze megabranch diff",kind:"spawn",messages:8}]},{id:"chain-theme",title:"ThemeEditor Handoff",startedAt:"2 hr ago",status:"done",steps:[{agentId:"luis",sessionId:"sess_theme_scope",task:"Scope ThemeEditor requirements",kind:"root",messages:6},{agentId:"piper",sessionId:"sess_piper_theme",task:"Implement ThemeEditor component",kind:"spawn",messages:22}]},{id:"chain-bundle",title:"Bundle Optimization",startedAt:"3 hr ago",status:"done",steps:[{agentId:"luis",sessionId:"sess_perf_flag",task:"Flag performance concern",kind:"root",messages:4},{agentId:"wes",sessionId:"sess_wes_export",task:"Audit bundle + DataExport suite",kind:"spawn",messages:19},{agentId:"wes",sessionId:"sess_wes_bundle",task:"Deep-dive bundle analysis",kind:"spawn",messages:5}]}],m=[{id:"e1",kind:"spawn",fromAgentId:"luis",toAgentId:"quinn",description:"Spawned subagent: bs-ux-2 AgentRelationshipTopology component",timestamp:"2 min ago",sessionId:"sess_quinn_topo"},{id:"e2",kind:"message",fromAgentId:"quinn",toAgentId:"luis",description:"Reported: AgentCollaborationGraph complete â€” 902 lines, 0 errors",timestamp:"8 min ago",sessionId:"sess_quinn_collab"},{id:"e3",kind:"spawn",fromAgentId:"luis",toAgentId:"quinn",description:"Spawned subagent: bs-ux-1 AgentCollaborationGraph component",timestamp:"25 min ago",sessionId:"sess_quinn_collab"},{id:"e4",kind:"message",fromAgentId:"tim",toAgentId:"xavier",description:"Architecture review complete â€” megabranch looks clean, no blockers",timestamp:"45 min ago",sessionId:"sess_tim_arch"},{id:"e5",kind:"complete",fromAgentId:"piper",toAgentId:null,description:"Session complete: ThemeEditor + AgentComparison + TeamManagement",timestamp:"1 hr ago",sessionId:"sess_piper_team"},{id:"e6",kind:"complete",fromAgentId:"reed",toAgentId:null,description:"Session complete: DeveloperConsole + ChangelogView + Permissions",timestamp:"1.5 hr ago",sessionId:"sess_reed_dev"},{id:"e7",kind:"complete",fromAgentId:"wes",toAgentId:null,description:"Session complete: DataExportManager + CrashReporter + Webhook",timestamp:"2 hr ago",sessionId:"sess_wes_export"},{id:"e8",kind:"spawn",fromAgentId:"wes",toAgentId:"wes",description:"Self-spawned sub-session: bundle size analysis",timestamp:"3 hr ago",sessionId:"sess_wes_bundle"},{id:"e9",kind:"spawn",fromAgentId:"luis",toAgentId:"piper",description:"Spawned subagent: TeamManagement + AgentComparison + ThemeEditor",timestamp:"2 hr ago",sessionId:"sess_piper_team"},{id:"e10",kind:"spawn",fromAgentId:"luis",toAgentId:"wes",description:"Spawned subagent: DataExportManager + CrashReporter + Webhook",timestamp:"3 hr ago",sessionId:"sess_wes_export"},{id:"e11",kind:"spawn",fromAgentId:"luis",toAgentId:"reed",description:"Spawned subagent: DeveloperConsole + ChangelogView + Permissions",timestamp:"2.5 hr ago",sessionId:"sess_reed_dev"},{id:"e12",kind:"delegate",fromAgentId:"xavier",toAgentId:"luis",description:"Delegated: Build all Horizon UI views â€” Product & UI squad lead",timestamp:"4 hr ago",sessionId:"sess_luis_main"},{id:"e13",kind:"delegate",fromAgentId:"xavier",toAgentId:"tim",description:"Delegated: Architecture review for Horizon megabranch",timestamp:"3.5 hr ago",sessionId:"sess_tim_arch"},{id:"e14",kind:"spawn",fromAgentId:"tim",toAgentId:"tim",description:"Self-spawned sub-session: diff analysis for type safety",timestamp:"1 hr ago",sessionId:"sess_tim_diff"}];function x(s){return g.find(d=>d.id===s)??g[0]}function w(s){return s==="active"?"bg-emerald-400":s==="busy"?"bg-amber-400":s==="error"?"bg-rose-400":s==="done"?"bg-zinc-500":"bg-zinc-600"}function C(s){return s==="active"?"text-emerald-400 border-emerald-500/30 bg-emerald-500/10":s==="busy"?"text-amber-400 border-amber-500/30 bg-amber-500/10":s==="error"?"text-rose-400 border-rose-500/30 bg-rose-500/10":s==="done"?"text-zinc-400 border-zinc-600 bg-zinc-700":"text-zinc-400 border-zinc-700 bg-zinc-800"}function S(s){return s==="active"?"Active":s==="busy"?"Busy":s==="error"?"Error":s==="done"?"Done":"Idle"}function I(s){return s==="spawn"?"rgba(99,102,241,0.75)":s==="delegate"?"rgba(251,191,36,0.75)":"rgba(113,113,122,0.45)"}function b(s){return s==="spawn"?"bg-indigo-500/20 text-indigo-400 border border-indigo-500/30":s==="delegate"?"bg-amber-500/20 text-amber-400 border border-amber-500/30":"bg-zinc-700 text-zinc-400 border border-zinc-600"}function v(s){return s==="spawn"?"Spawned":s==="delegate"?"Delegated":"Reports To"}function T(s){return s==="spawn"?"bg-indigo-400":s==="delegate"?"bg-amber-400":s==="complete"?"bg-emerald-400":s==="error"?"bg-rose-400":"bg-zinc-500"}function N(s){return s==="spawn"?"bg-indigo-500/20 text-indigo-400":s==="delegate"?"bg-amber-500/20 text-amber-400":s==="complete"?"bg-emerald-500/20 text-emerald-400":s==="error"?"bg-rose-500/20 text-rose-400":"bg-zinc-700 text-zinc-400"}function E(s){return s==="spawn"?"Spawned":s==="delegate"?"Delegated":s==="complete"?"Completed":s==="error"?"Error":"Message"}function M({x1:s,y1:d,x2:a,y2:l,kind:r,highlighted:t}){const n=a-s,i=l-d,c=Math.sqrt(n*n+i*i),u=Math.atan2(i,n)*(180/Math.PI),j=I(r),k=t?1:.35,y=t?2:1;return e.jsx("div",{style:{position:"absolute",left:s,top:d,width:c,height:y,backgroundColor:j,opacity:k,transformOrigin:"0 50%",transform:`rotate(${u}deg)`,pointerEvents:"none",transition:"opacity 0.2s ease"}})}function R({agent:s,x:d,y:a,selected:l,connected:r,onClick:t}){return e.jsxs("div",{onClick:t,style:{position:"absolute",left:d-84/2,top:a-58/2,width:84,height:58,cursor:"pointer",zIndex:l?10:5},className:o("rounded-xl border flex flex-col items-center justify-center gap-0.5 transition-all duration-200",l?"border-indigo-500 bg-indigo-900/60 shadow-lg shadow-indigo-500/30":r?"border-zinc-600 bg-zinc-800":"border-zinc-800 bg-zinc-900 hover:border-zinc-600 hover:bg-zinc-800"),children:[e.jsx("span",{className:"text-lg leading-none",children:s.emoji}),e.jsx("span",{className:o("text-xs font-semibold leading-none",l?"text-white":"text-zinc-300"),children:s.name}),e.jsx("div",{className:o("w-1.5 h-1.5 rounded-full mt-0.5",w(s.status))})]})}function D({agentId:s,onClose:d}){const a=x(s),l=p.filter(n=>n.toId===s),r=p.filter(n=>n.fromId===s),t=m.filter(n=>n.fromAgentId===s&&n.kind==="spawn").slice(0,3);return e.jsxs("div",{className:"rounded-xl border border-zinc-800 bg-zinc-900 p-4 space-y-4",children:[e.jsxs("div",{className:"flex items-center gap-3",children:[e.jsx("span",{className:"text-2xl",children:a.emoji}),e.jsxs("div",{className:"flex-1 min-w-0",children:[e.jsx("div",{className:"text-white font-semibold",children:a.name}),e.jsx("div",{className:"text-zinc-400 text-xs",children:a.role})]}),e.jsx("span",{className:o("text-xs px-2 py-0.5 rounded-full border",C(a.status)),children:S(a.status)}),e.jsx("button",{onClick:d,className:"text-zinc-600 hover:text-zinc-300 transition-colors ml-1 text-lg leading-none",children:"Ã—"})]}),e.jsxs("div",{className:"flex gap-3",children:[e.jsxs("div",{className:"rounded-lg bg-zinc-800 px-3 py-2 flex-1 text-center",children:[e.jsx("div",{className:"text-zinc-300 text-xs font-medium",children:a.model}),e.jsx("div",{className:"text-zinc-600 text-xs",children:"model"})]}),e.jsxs("div",{className:"rounded-lg bg-zinc-800 px-3 py-2 flex-1 text-center",children:[e.jsx("div",{className:"text-zinc-300 text-xs font-medium",children:a.tier===0?"Executive":a.tier===1?"Lead":"Worker"}),e.jsx("div",{className:"text-zinc-600 text-xs",children:"tier"})]}),e.jsxs("div",{className:"rounded-lg bg-zinc-800 px-3 py-2 flex-1 text-center",children:[e.jsx("div",{className:"text-indigo-400 text-xs font-bold",children:r.filter(n=>n.kind==="spawn").length}),e.jsx("div",{className:"text-zinc-600 text-xs",children:"spawns"})]})]}),e.jsxs("div",{className:"grid grid-cols-2 gap-3",children:[l.length>0&&e.jsxs("div",{children:[e.jsx("div",{className:"text-zinc-500 text-xs font-semibold uppercase tracking-wider mb-2",children:"Reports To"}),e.jsx("div",{className:"space-y-1.5",children:l.map(n=>{const i=x(n.fromId);return e.jsxs("div",{className:"flex items-center gap-2 text-xs",children:[e.jsx("span",{className:"text-base",children:i.emoji}),e.jsx("span",{className:"text-zinc-300",children:i.name}),e.jsx("span",{className:o("px-1.5 py-0.5 rounded text-xs ml-auto",b(n.kind)),children:v(n.kind)})]},n.fromId+n.kind)})})]}),r.length>0&&e.jsxs("div",{children:[e.jsx("div",{className:"text-zinc-500 text-xs font-semibold uppercase tracking-wider mb-2",children:"Delegates To"}),e.jsx("div",{className:"space-y-1.5",children:r.map(n=>{const i=x(n.toId);return e.jsxs("div",{className:"flex items-center gap-2 text-xs",children:[e.jsx("span",{className:"text-base",children:i.emoji}),e.jsx("span",{className:"text-zinc-300",children:i.name}),e.jsx("span",{className:o("px-1.5 py-0.5 rounded text-xs ml-auto",b(n.kind)),children:v(n.kind)})]},n.toId+n.kind)})})]})]}),t.length>0&&e.jsxs("div",{children:[e.jsx("div",{className:"text-zinc-500 text-xs font-semibold uppercase tracking-wider mb-2",children:"Recent Spawns"}),e.jsx("div",{className:"space-y-1",children:t.map(n=>e.jsxs("div",{className:"text-xs text-zinc-400 flex items-start gap-1.5",children:[e.jsx("span",{className:"text-indigo-500 mt-0.5 flex-shrink-0",children:"â†³"}),e.jsx("span",{className:"leading-relaxed",children:n.description})]},n.id))})]})]})}function z({node:s,depth:d}){const[a,l]=f.useState(!0),r=x(s.agentId),t=s.children.length>0,n=s.edgeKind==="spawn"?"border-indigo-800/50 bg-indigo-950/30":s.edgeKind==="delegate"?"border-amber-800/50  bg-amber-950/20":"border-zinc-800 bg-zinc-900";return e.jsxs("div",{children:[e.jsxs("div",{className:"flex items-start gap-2",children:[e.jsx("button",{onClick:()=>l(!a),disabled:!t,className:o("mt-3.5 w-5 h-5 rounded flex items-center justify-center text-sm flex-shrink-0 transition-colors",t?"text-zinc-400 hover:text-zinc-100 hover:bg-zinc-800":"text-zinc-700 cursor-default"),children:t?a?"â–¾":"â–¸":"Â·"}),e.jsxs("div",{className:o("flex-1 rounded-xl border p-3.5 transition-colors",n),children:[e.jsxs("div",{className:"flex items-center gap-3",children:[e.jsx("span",{className:"text-xl flex-shrink-0",children:r.emoji}),e.jsxs("div",{className:"flex-1 min-w-0",children:[e.jsxs("div",{className:"flex items-center gap-2 flex-wrap",children:[e.jsx("span",{className:"text-white font-semibold text-sm",children:r.name}),s.edgeKind&&e.jsx("span",{className:o("px-1.5 py-0.5 rounded text-xs",b(s.edgeKind)),children:v(s.edgeKind)}),d===0&&e.jsx("span",{className:"px-1.5 py-0.5 rounded text-xs bg-zinc-700 text-zinc-300 border border-zinc-600",children:"Root"}),e.jsx("div",{className:o("w-2 h-2 rounded-full ml-auto flex-shrink-0",w(r.status))})]}),e.jsx("div",{className:"text-zinc-400 text-xs mt-0.5 leading-relaxed",children:s.task})]})]}),e.jsxs("div",{className:"flex items-center gap-4 mt-2.5 pt-2.5 border-t border-zinc-800/60 flex-wrap",children:[e.jsxs("span",{className:"text-zinc-500 text-xs flex items-center gap-1",children:[e.jsx("span",{className:"text-zinc-600",children:"ðŸ“¨"})," ",s.messages," msg"]}),e.jsxs("span",{className:"text-zinc-500 text-xs flex items-center gap-1",children:[e.jsx("span",{className:"text-zinc-600",children:"ðŸ”§"})," ",s.toolCalls," tools"]}),e.jsxs("span",{className:"text-zinc-500 text-xs",children:["â± ",s.startedAt]}),s.duration&&e.jsxs("span",{className:"text-zinc-500 text-xs",children:["âŒ› ",s.duration]}),!s.duration&&s.edgeKind&&e.jsx("span",{className:"text-emerald-500 text-xs font-medium",children:"â— live"}),e.jsx("span",{className:"text-zinc-700 text-xs font-mono ml-auto",children:s.sessionId})]})]})]}),a&&t&&e.jsx("div",{className:"ml-3 mt-2 pl-4 border-l border-dashed border-zinc-700/40 space-y-2",children:s.children.map(i=>e.jsx(z,{node:i,depth:d+1},i.id))})]})}function P(){const s=m.filter(l=>l.kind==="message").length,d=g.filter(l=>l.status==="active"||l.status==="busy").length,a=m.filter(l=>l.kind==="complete").length;return e.jsxs("div",{className:"space-y-4",children:[e.jsxs("div",{className:"flex items-start justify-between gap-4",children:[e.jsxs("div",{children:[e.jsx("h3",{className:"text-white font-semibold",children:"Agent Spawn Tree"}),e.jsx("p",{className:"text-zinc-500 text-xs mt-0.5",children:"Hierarchical view of agent spawning and delegation â€” root orchestrator down to leaf workers"})]}),e.jsx("div",{className:"flex gap-3 text-xs flex-shrink-0",children:[["spawn","Spawned"],["delegate","Delegated"],["report","Reports To"]].map(([l,r])=>e.jsx("div",{className:"flex items-center gap-1.5",children:e.jsx("span",{className:o("px-1.5 py-0.5 rounded",b(l)),children:r})},l))})]}),e.jsx("div",{className:"space-y-2",children:e.jsx(z,{node:A,depth:0})}),e.jsx("div",{className:"rounded-xl border border-zinc-800 bg-zinc-900/50 p-4 grid grid-cols-4 gap-4 text-center",children:[{label:"Total Agents",value:g.length.toString(),color:"text-white"},{label:"Active / Busy",value:`${d}`,color:"text-emerald-400"},{label:"Completed",value:`${a}`,color:"text-zinc-400"},{label:"Messages",value:`${s}`,color:"text-indigo-400"}].map(l=>e.jsxs("div",{children:[e.jsx("div",{className:o("text-2xl font-bold",l.color),children:l.value}),e.jsx("div",{className:"text-zinc-500 text-xs",children:l.label})]},l.label))})]})}function q(){const[s,d]=f.useState(null),a=580,l=400,r=s?new Set(p.filter(t=>t.fromId===s||t.toId===s).flatMap(t=>[t.fromId,t.toId]).filter(t=>t!==s)):new Set;return e.jsxs("div",{className:"space-y-4",children:[e.jsxs("div",{className:"flex items-center justify-between",children:[e.jsxs("div",{children:[e.jsx("h3",{className:"text-white font-semibold",children:"Topology Map"}),e.jsx("p",{className:"text-zinc-500 text-xs mt-0.5",children:"Structural relationship map â€” command chain, delegations, spawn graph"})]}),e.jsx("div",{className:"flex items-center gap-4 text-xs",children:[["spawn","Spawn"],["delegate","Delegate"],["report","Report"]].map(([t,n])=>e.jsxs("div",{className:"flex items-center gap-1.5",children:[e.jsx("div",{className:"w-5 h-0.5",style:{backgroundColor:I(t)}}),e.jsx("span",{className:"text-zinc-500",children:n})]},t))})]}),e.jsxs("div",{className:"relative rounded-xl border border-zinc-800 bg-zinc-950 overflow-hidden",style:{width:a,height:l},children:[[{top:0,h:122,label:"Executive Tier"},{top:122,h:136,label:"Lead Tier"},{top:258,h:142,label:"Worker Tier"}].map(t=>e.jsx("div",{style:{position:"absolute",left:0,top:t.top,width:"100%",height:t.h},className:"border-b border-zinc-800/40 flex items-end pb-1 pl-2",children:e.jsx("span",{className:"text-zinc-800 text-xs select-none",children:t.label})},t.label)),p.map((t,n)=>{const i=h[t.fromId],c=h[t.toId];if(!i||!c)return null;const u=s===null?t.active:t.fromId===s||t.toId===s;return e.jsx(M,{x1:i.x,y1:i.y,x2:c.x,y2:c.y,kind:t.kind,highlighted:u},n)}),p.filter(t=>s===null?t.active:t.fromId===s||t.toId===s).map((t,n)=>{const i=h[t.fromId],c=h[t.toId];if(!i||!c)return null;const u=(i.x+c.x)/2,j=(i.y+c.y)/2;return e.jsx("div",{style:{position:"absolute",left:u,top:j,transform:"translate(-50%,-50%)",zIndex:3,pointerEvents:"none"},className:"bg-zinc-950 px-1.5 py-0.5 rounded text-xs border border-zinc-800 text-zinc-500 whitespace-nowrap",children:t.label},`lbl-${n}`)}),g.map(t=>{const n=h[t.id];return n?e.jsx(R,{agent:t,x:n.x,y:n.y,selected:s===t.id,connected:r.has(t.id),onClick:()=>d(s===t.id?null:t.id)},t.id):null}),!s&&e.jsxs("div",{style:{position:"absolute",left:"50%",top:"50%",transform:"translate(-50%,-50%)",pointerEvents:"none"},className:"text-zinc-800 text-xs text-center select-none",children:["Click a node to",e.jsx("br",{}),"explore relationships"]})]}),s&&e.jsx(D,{agentId:s,onClose:()=>d(null)})]})}function K(){const[s,d]=f.useState("chain-horizon");return e.jsxs("div",{className:"space-y-4",children:[e.jsxs("div",{children:[e.jsx("h3",{className:"text-white font-semibold",children:"Session Chains"}),e.jsx("p",{className:"text-zinc-500 text-xs mt-0.5",children:"Multi-agent session chains â€” root orchestration task through to leaf execution"})]}),e.jsx("div",{className:"space-y-3",children:_.map(a=>{const l=s===a.id;return e.jsxs("div",{className:o("rounded-xl border transition-all",l?"border-indigo-500/40 bg-zinc-900":"border-zinc-800 bg-zinc-900/50 hover:border-zinc-700"),children:[e.jsxs("div",{className:"p-4 flex items-center gap-3 cursor-pointer",onClick:()=>d(l?null:a.id),children:[e.jsx("div",{className:o("w-2.5 h-2.5 rounded-full flex-shrink-0",a.status==="active"?"bg-emerald-400":a.status==="error"?"bg-rose-400":"bg-zinc-500")}),e.jsxs("div",{className:"flex-1 min-w-0",children:[e.jsx("div",{className:"text-white font-medium text-sm",children:a.title}),e.jsxs("div",{className:"text-zinc-500 text-xs",children:[a.startedAt," Â· ",a.steps.length," agent",a.steps.length!==1?"s":"",a.status==="active"?" Â· running":" Â· complete"]})]}),e.jsx("span",{className:"text-zinc-600 text-sm",children:l?"â–¾":"â–¸"})]}),l&&e.jsx("div",{className:"px-4 pb-5 border-t border-zinc-800",children:e.jsx("div",{className:"pt-4 overflow-x-auto",children:e.jsx("div",{className:"flex items-center gap-0 min-w-max",children:a.steps.map((r,t)=>{const n=x(r.agentId),i=t===a.steps.length-1,c=r.kind==="spawn"?"border-indigo-800/50 bg-indigo-950/30":r.kind==="delegate"?"border-amber-800/50  bg-amber-950/20":"border-zinc-700 bg-zinc-800/60";return e.jsxs("div",{className:"flex items-center",children:[e.jsxs("div",{className:o("rounded-xl border p-3 text-center w-40 flex-shrink-0",c),children:[r.kind!=="root"&&e.jsx("div",{className:o("text-xs rounded px-1.5 py-0.5 mb-2 inline-block",b(r.kind)),children:v(r.kind)}),r.kind==="root"&&e.jsx("div",{className:"text-xs rounded px-1.5 py-0.5 mb-2 inline-block bg-zinc-700 text-zinc-300 border border-zinc-600",children:"Root"}),e.jsx("div",{className:"text-2xl mb-1",children:n.emoji}),e.jsx("div",{className:"text-white text-xs font-semibold",children:n.name}),e.jsx("div",{className:"text-zinc-400 text-xs mt-1 leading-snug",children:r.task}),e.jsxs("div",{className:"text-zinc-600 text-xs mt-2",children:["ðŸ“¨ ",r.messages]}),e.jsx("div",{className:"text-zinc-700 text-xs font-mono mt-0.5 truncate",children:r.sessionId})]}),!i&&e.jsxs("div",{className:"flex items-center flex-shrink-0 px-1",children:[e.jsx("div",{className:"w-5 h-px bg-zinc-700"}),e.jsx("span",{className:"text-zinc-600 text-xs",children:"â–¶"})]})]},r.sessionId+t)})})})})]},a.id)})})]})}function O(){const[s,d]=f.useState("all"),a=s==="all"?m:m.filter(t=>t.kind===s),l=[{value:"all",label:"All"},{value:"spawn",label:"Spawn"},{value:"delegate",label:"Delegate"},{value:"complete",label:"Complete"},{value:"message",label:"Message"},{value:"error",label:"Error"}],r={};for(const t of m)r[t.kind]=(r[t.kind]??0)+1;return e.jsxs("div",{className:"space-y-4",children:[e.jsxs("div",{className:"flex items-start justify-between gap-4",children:[e.jsxs("div",{children:[e.jsx("h3",{className:"text-white font-semibold",children:"Topology Event Stream"}),e.jsx("p",{className:"text-zinc-500 text-xs mt-0.5",children:"Chronological log of agent spawn, delegation, and lifecycle events"})]}),e.jsx("div",{className:"flex gap-1.5 flex-wrap flex-shrink-0",children:l.map(t=>e.jsxs("button",{onClick:()=>d(t.value),className:o("px-2.5 py-1 rounded-lg text-xs font-medium transition-colors whitespace-nowrap",s===t.value?"bg-indigo-600 text-white":"bg-zinc-800 text-zinc-400 hover:bg-zinc-700 hover:text-zinc-200"),children:[t.label,t.value!=="all"&&r[t.value]!=null&&e.jsxs("span",{className:"ml-1 opacity-60",children:["(",r[t.value],")"]})]},t.value))})]}),e.jsx("div",{className:"flex gap-2 flex-wrap",children:[{kind:"spawn",label:"Spawns",count:r.spawn??0},{kind:"delegate",label:"Delegations",count:r.delegate??0},{kind:"complete",label:"Completions",count:r.complete??0},{kind:"message",label:"Messages",count:r.message??0}].map(t=>e.jsxs("div",{className:o("flex items-center gap-1.5 px-3 py-1.5 rounded-lg text-xs",N(t.kind)),children:[e.jsx("span",{className:"font-bold",children:t.count}),e.jsx("span",{className:"opacity-70",children:t.label})]},t.kind))}),e.jsxs("div",{className:"relative",children:[e.jsx("div",{className:"absolute left-5 top-0 bottom-0 w-px bg-zinc-800"}),e.jsxs("div",{className:"space-y-3",children:[a.map(t=>{const n=x(t.fromAgentId),i=t.toAgentId?x(t.toAgentId):null;return e.jsxs("div",{className:"flex gap-3 items-start",children:[e.jsx("div",{className:"w-10 flex-shrink-0 flex justify-center pt-3.5",children:e.jsx("div",{className:o("w-3 h-3 rounded-full border-2 border-zinc-950 z-10",T(t.kind))})}),e.jsxs("div",{className:"flex-1 rounded-xl border border-zinc-800 bg-zinc-900 p-3.5 hover:border-zinc-700 transition-colors",children:[e.jsxs("div",{className:"flex items-center gap-2 flex-wrap mb-1",children:[e.jsx("span",{className:"text-base leading-none",children:n.emoji}),e.jsx("span",{className:"text-white text-sm font-semibold",children:n.name}),e.jsx("span",{className:o("px-2 py-0.5 rounded-full text-xs font-medium",N(t.kind)),children:E(t.kind)}),i&&i.id!==n.id&&e.jsxs(e.Fragment,{children:[e.jsx("span",{className:"text-zinc-600 text-xs",children:"â†’"}),e.jsx("span",{className:"text-base leading-none",children:i.emoji}),e.jsx("span",{className:"text-white text-sm font-semibold",children:i.name})]}),e.jsx("span",{className:"text-zinc-600 text-xs ml-auto",children:t.timestamp})]}),e.jsx("p",{className:"text-zinc-400 text-xs leading-relaxed",children:t.description}),e.jsx("span",{className:"text-indigo-500/70 text-xs font-mono mt-1.5 block hover:text-indigo-400 cursor-pointer transition-colors",children:t.sessionId})]})]},t.id)}),a.length===0&&e.jsxs("div",{className:"rounded-xl border border-zinc-800 bg-zinc-900 p-8 text-center ml-10",children:[e.jsx("div",{className:"text-2xl mb-2",children:"ðŸ“­"}),e.jsx("div",{className:"text-zinc-500 text-sm",children:"No events match this filter"})]})]})]})]})}function H(){const[s,d]=f.useState("tree"),a=[{id:"tree",label:"Spawn Tree",icon:"ðŸŒ²"},{id:"map",label:"Topology Map",icon:"ðŸ—ºï¸"},{id:"chains",label:"Session Chains",icon:"ðŸ”—"},{id:"events",label:"Event Stream",icon:"ðŸ“¡"}],l=g.filter(i=>i.status==="active"||i.status==="busy").length,r=m.filter(i=>i.kind==="spawn").length,t=p.length,n=[{label:"Online",value:l,color:"text-emerald-400"},{label:"Spawns",value:r,color:"text-indigo-400"},{label:"Edges",value:t,color:"text-amber-400"}];return e.jsx("div",{className:"min-h-screen bg-zinc-950 p-6",children:e.jsxs("div",{className:"max-w-5xl mx-auto space-y-6",children:[e.jsxs("div",{className:"flex items-start justify-between gap-6",children:[e.jsxs("div",{children:[e.jsx("h1",{className:"text-2xl font-bold text-white",children:"Agent Relationship Topology"}),e.jsx("p",{className:"text-zinc-400 text-sm mt-1",children:"Visualize how agents spawn, delegate, and coordinate â€” the living structure of your multi-agent system"})]}),e.jsx("div",{className:"flex gap-3 flex-shrink-0",children:n.map(i=>e.jsxs("div",{className:"rounded-xl border border-zinc-800 bg-zinc-900 px-4 py-3 text-center",children:[e.jsx("div",{className:o("text-xl font-bold",i.color),children:i.value}),e.jsx("div",{className:"text-zinc-500 text-xs",children:i.label})]},i.label))})]}),e.jsxs("div",{className:"flex items-center gap-2",children:[e.jsx("div",{className:"w-2 h-2 rounded-full bg-emerald-400 animate-pulse"}),e.jsx("span",{className:"text-emerald-400 text-xs font-medium",children:"Live"}),e.jsx("span",{className:"text-zinc-600 text-xs",children:"â€” topology reflects current sprint session state"})]}),e.jsx("div",{className:"flex gap-1 p-1 bg-zinc-900 rounded-xl border border-zinc-800",children:a.map(i=>e.jsxs("button",{onClick:()=>d(i.id),className:o("flex-1 flex items-center justify-center gap-2 px-4 py-2.5 rounded-lg text-sm font-medium transition-all duration-200",s===i.id?"bg-indigo-600 text-white shadow-lg shadow-indigo-900/50":"text-zinc-400 hover:text-zinc-200 hover:bg-zinc-800"),children:[e.jsx("span",{className:"text-base leading-none",children:i.icon}),e.jsx("span",{className:"hidden sm:inline",children:i.label})]},i.id))}),e.jsxs("div",{className:"rounded-xl border border-zinc-800 bg-zinc-900 p-6",children:[s==="tree"&&e.jsx(P,{}),s==="map"&&e.jsx(q,{}),s==="chains"&&e.jsx(K,{}),s==="events"&&e.jsx(O,{})]})]})})}export{H as default};
