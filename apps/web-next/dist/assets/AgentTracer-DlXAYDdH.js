import{r as f,j as e,c as a}from"./index-BQpNVrtO.js";const h=[{id:"t-001",name:"Morning heartbeat — Luis",agent:"Luis",startedAt:"2026-02-22 02:05:00",totalMs:14320,status:"ok",spanCount:12},{id:"t-002",name:"PR review dispatch",agent:"Xavier",startedAt:"2026-02-22 01:48:22",totalMs:3850,status:"ok",spanCount:6},{id:"t-003",name:"Cron: daily digest",agent:"Stephan",startedAt:"2026-02-22 01:00:05",totalMs:8710,status:"error",spanCount:9},{id:"t-004",name:"Webhook delivery — GitHub",agent:"Sam",startedAt:"2026-02-22 00:55:14",totalMs:1240,status:"ok",spanCount:4},{id:"t-005",name:"Build verification",agent:"Tim",startedAt:"2026-02-21 23:40:00",totalMs:22100,status:"ok",spanCount:15},{id:"t-006",name:"Sub-agent: horizon-analytics",agent:"Wes",startedAt:"2026-02-21 23:15:30",totalMs:181941,status:"ok",spanCount:22},{id:"t-007",name:"Knowledge base sync",agent:"Quinn",startedAt:"2026-02-21 22:58:11",totalMs:4520,status:"timeout",spanCount:7},{id:"t-008",name:"Token audit sweep",agent:"Reed",startedAt:"2026-02-21 22:30:00",totalMs:2110,status:"ok",spanCount:5}],z={"t-001":[{id:"s-001-root",traceId:"t-001",parentId:null,name:"session:luis:cron",kind:"session",status:"ok",startMs:0,durationMs:14320,agent:"Luis",tags:{trigger:"cron",channel:"slack"},events:[{offsetMs:12,name:"session.start",level:"info",message:"Heartbeat session started"},{offsetMs:14300,name:"session.end",level:"info",message:"Session completed successfully"}]},{id:"s-001-llm1",traceId:"t-001",parentId:"s-001-root",name:"llm:claude-sonnet:plan",kind:"llm",status:"ok",startMs:180,durationMs:2100,agent:"Luis",model:"claude-sonnet-4-6",tokens:1840,tags:{"llm.temperature":"1","llm.stream":"true"},events:[{offsetMs:50,name:"llm.request",level:"info",message:"Sending planning prompt (1.2k tokens)"},{offsetMs:2080,name:"llm.response",level:"info",message:"Received plan (640 tokens)"}]},{id:"s-001-tool1",traceId:"t-001",parentId:"s-001-root",name:"tool:read:CONTEXT.md",kind:"tool",status:"ok",startMs:320,durationMs:45,agent:"Luis",tags:{"tool.name":"read","fs.path":"CONTEXT.md"},events:[{offsetMs:44,name:"tool.result",level:"info",message:"File read: 4.2 kB"}]},{id:"s-001-subagent1",traceId:"t-001",parentId:"s-001-root",name:"subagent:piper:api-playground",kind:"subagent",status:"ok",startMs:3100,durationMs:152771,agent:"Piper",tags:{model:"MiniMax-M2.5",label:"horizon-api-playground"},events:[{offsetMs:0,name:"spawn",level:"info",message:"Spawning horizon-api-playground"},{offsetMs:152771,name:"done",level:"info",message:"Agent completed in 3m"}]},{id:"s-001-llm2",traceId:"t-001",parentId:"s-001-root",name:"llm:claude-sonnet:AgentTracer",kind:"llm",status:"ok",startMs:5200,durationMs:3800,agent:"Luis",model:"claude-sonnet-4-6",tokens:4120,tags:{"llm.temperature":"1",purpose:"code-generation"},events:[{offsetMs:100,name:"llm.request",level:"info",message:"Sending code gen prompt (2.1k tokens)"},{offsetMs:3750,name:"llm.response",level:"info",message:"Received component code (2.0k tokens)"}]},{id:"s-001-tool2",traceId:"t-001",parentId:"s-001-root",name:"tool:write:AgentTracer.tsx",kind:"tool",status:"ok",startMs:9100,durationMs:88,agent:"Luis",tags:{"tool.name":"write","fs.bytes":"19824"},events:[{offsetMs:87,name:"tool.result",level:"info",message:"File written: 19.8 kB"}]},{id:"s-001-tool3",traceId:"t-001",parentId:"s-001-root",name:"tool:exec:pnpm build",kind:"tool",status:"ok",startMs:10200,durationMs:1640,agent:"Luis",tags:{"tool.name":"exec",cmd:"pnpm build"},events:[{offsetMs:1620,name:"tool.result",level:"info",message:"Build succeeded in 1.64s, 0 errors"}]},{id:"s-001-tool4",traceId:"t-001",parentId:"s-001-root",name:"tool:exec:git commit",kind:"tool",status:"ok",startMs:12100,durationMs:420,agent:"Luis",tags:{"tool.name":"exec",cmd:"git commit"},events:[{offsetMs:418,name:"tool.result",level:"info",message:"Committed: 81a5453"}]}],"t-003":[{id:"s-003-root",traceId:"t-003",parentId:null,name:"session:stephan:cron-digest",kind:"session",status:"error",startMs:0,durationMs:8710,agent:"Stephan",tags:{trigger:"cron",channel:"slack"},events:[{offsetMs:10,name:"session.start",level:"info",message:"Daily digest cron triggered"},{offsetMs:8700,name:"session.error",level:"error",message:"Unhandled exception in digest generation"}]},{id:"s-003-llm1",traceId:"t-003",parentId:"s-003-root",name:"llm:gpt-4o:digest-gen",kind:"llm",status:"error",startMs:200,durationMs:7900,agent:"Stephan",model:"gpt-4o",tokens:0,tags:{"llm.temperature":"0.7"},events:[{offsetMs:150,name:"llm.request",level:"info",message:"Sending digest prompt"},{offsetMs:7890,name:"llm.error",level:"error",message:"API timeout after 7.9s (rate limit)"}]},{id:"s-003-webhook",traceId:"t-003",parentId:"s-003-root",name:"webhook:slack:failed",kind:"webhook",status:"error",startMs:8100,durationMs:590,agent:"Stephan",tags:{destination:"slack",event:"digest"},events:[{offsetMs:580,name:"webhook.failed",level:"error",message:"Slack API 429 — rate limited"}]}]},p={session:"bg-indigo-500",llm:"bg-violet-500",tool:"bg-emerald-500",subagent:"bg-amber-500",webhook:"bg-sky-500",cron:"bg-rose-500"},b={ok:"text-emerald-400",error:"text-rose-400",timeout:"text-amber-400"},j={ok:"bg-emerald-500/10 text-emerald-400 ring-emerald-500/20",error:"bg-rose-500/10 text-rose-400 ring-rose-500/20",timeout:"bg-amber-500/10 text-amber-400 ring-amber-500/20"};function l(t){return t>=6e4?`${(t/6e4).toFixed(1)}m`:t>=1e3?`${(t/1e3).toFixed(2)}s`:`${t}ms`}function y({span:t,depth:c,totalMs:r,selected:m,onSelect:o}){const x=t.startMs/r*100,i=Math.max(t.durationMs/r*100,.5);return e.jsxs("button",{onClick:o,className:a("w-full text-left flex items-center gap-2 px-3 py-1.5 hover:bg-zinc-800/60 transition-colors focus-visible:outline-none focus-visible:ring-2 focus-visible:ring-indigo-500",m&&"bg-zinc-800"),children:[e.jsx("div",{style:{width:c*16},className:"shrink-0"}),e.jsx("span",{className:a("w-2 h-2 rounded-full shrink-0",p[t.kind])}),e.jsx("span",{className:"text-xs text-zinc-300 truncate shrink-0 w-44",children:t.name}),e.jsx("div",{className:"flex-1 relative h-4 bg-zinc-800 rounded overflow-hidden",children:e.jsx("div",{className:a("absolute h-full rounded opacity-80",p[t.kind]),style:{left:`${x}%`,width:`${i}%`}})}),e.jsx("span",{className:a("text-xs shrink-0 w-16 text-right",b[t.status]),children:l(t.durationMs)})]})}function S(t){const c=[],r=(m,o)=>{const x=t.filter(i=>i.parentId===m);for(const i of x)c.push({span:i,depth:o}),r(i.id,o+1)};return r(null,0),c}function A(){const[t,c]=f.useState("t-001"),[r,m]=f.useState("s-001-root"),[o,x]=f.useState("all"),[i,N]=f.useState("all"),k=Array.from(new Set(h.map(s=>s.agent))),M=h.filter(s=>!(o!=="all"&&s.agent!==o||i!=="all"&&s.status!==i)),d=h.find(s=>s.id===t)??h[0],v=z[t]??[],w=S(v),u=d.totalMs,n=v.find(s=>s.id===r)??null;return e.jsxs("div",{className:"h-full flex flex-col bg-zinc-950 overflow-hidden",children:[e.jsxs("div",{className:"shrink-0 border-b border-zinc-800 px-6 py-4",children:[e.jsx("h1",{className:"text-lg font-semibold text-white",children:"Agent Tracer"}),e.jsx("p",{className:"text-xs text-zinc-500 mt-0.5",children:"Distributed trace viewer — spans, events, timing"})]}),e.jsxs("div",{className:"flex-1 flex overflow-hidden",children:[e.jsxs("aside",{className:"w-72 shrink-0 border-r border-zinc-800 flex flex-col overflow-hidden",children:[e.jsxs("div",{className:"shrink-0 p-3 border-b border-zinc-800 space-y-2",children:[e.jsxs("select",{value:o,onChange:s=>x(s.target.value),className:"w-full bg-zinc-800 border border-zinc-700 text-zinc-200 text-xs rounded px-2 py-1.5 focus:outline-none focus:ring-2 focus:ring-indigo-500","aria-label":"Filter by agent",children:[e.jsx("option",{value:"all",children:"All agents"}),k.map(s=>e.jsx("option",{value:s,children:s},s))]}),e.jsx("div",{className:"flex gap-1.5",children:["all","ok","error","timeout"].map(s=>e.jsx("button",{onClick:()=>N(s),className:a("px-2 py-1 rounded text-xs font-medium transition-colors focus-visible:outline-none focus-visible:ring-2 focus-visible:ring-indigo-500",i===s?"bg-indigo-600 text-white":"bg-zinc-800 text-zinc-400 hover:text-zinc-200"),children:s==="all"?"All":s.charAt(0).toUpperCase()+s.slice(1)},s))})]}),e.jsx("ul",{className:"flex-1 overflow-y-auto divide-y divide-zinc-800/50",role:"listbox","aria-label":"Traces",children:M.map(s=>e.jsx("li",{children:e.jsxs("button",{role:"option","aria-selected":s.id===t,onClick:()=>{c(s.id),m(null)},className:a("w-full text-left px-4 py-3 hover:bg-zinc-800/60 transition-colors focus-visible:outline-none focus-visible:ring-2 focus-visible:ring-inset focus-visible:ring-indigo-500",s.id===t&&"bg-zinc-800 border-l-2 border-indigo-500"),children:[e.jsxs("div",{className:"flex items-start justify-between gap-2",children:[e.jsx("span",{className:"text-xs font-medium text-zinc-200 leading-tight",children:s.name}),e.jsx("span",{className:a("shrink-0 text-xs font-medium",b[s.status]),children:s.status})]}),e.jsxs("div",{className:"mt-1 flex items-center gap-2 text-xs text-zinc-500",children:[e.jsx("span",{children:s.agent}),e.jsx("span",{children:"·"}),e.jsx("span",{children:l(s.totalMs)}),e.jsx("span",{children:"·"}),e.jsxs("span",{children:[s.spanCount," spans"]})]}),e.jsx("div",{className:"mt-0.5 text-xs text-zinc-600",children:s.startedAt})]})},s.id))})]}),e.jsxs("div",{className:"flex-1 flex flex-col overflow-hidden",children:[e.jsxs("div",{className:"shrink-0 border-b border-zinc-800 px-5 py-3 flex items-center gap-6",children:[e.jsxs("div",{children:[e.jsx("div",{className:"text-sm font-semibold text-white",children:d.name}),e.jsxs("div",{className:"text-xs text-zinc-500",children:[d.startedAt," · ",d.agent]})]}),e.jsxs("div",{className:"flex items-center gap-4 ml-auto",children:[e.jsxs("div",{className:"text-center",children:[e.jsx("div",{className:"text-lg font-bold text-white",children:l(d.totalMs)}),e.jsx("div",{className:"text-xs text-zinc-500",children:"Duration"})]}),e.jsxs("div",{className:"text-center",children:[e.jsx("div",{className:"text-lg font-bold text-white",children:d.spanCount}),e.jsx("div",{className:"text-xs text-zinc-500",children:"Spans"})]}),e.jsx("span",{className:a("px-2 py-0.5 rounded text-xs font-medium ring-1",j[d.status]),children:d.status})]})]}),e.jsxs("div",{className:"flex-1 flex overflow-hidden",children:[e.jsxs("div",{className:"flex-1 overflow-y-auto",children:[e.jsxs("div",{className:"flex items-center gap-2 px-3 py-1 border-b border-zinc-800/50 sticky top-0 bg-zinc-950 z-10",children:[e.jsx("div",{className:"w-2 shrink-0"}),e.jsx("div",{className:"w-44 shrink-0"}),e.jsxs("div",{className:"flex-1 flex justify-between text-xs text-zinc-600 px-1",children:[e.jsx("span",{children:"0"}),e.jsx("span",{children:l(u/4)}),e.jsx("span",{children:l(u/2)}),e.jsx("span",{children:l(u*3/4)}),e.jsx("span",{children:l(u)})]}),e.jsx("div",{className:"w-16"})]}),w.map(({span:s,depth:g})=>e.jsx(y,{span:s,depth:g,totalMs:u,selected:s.id===r,onSelect:()=>m(s.id===r?null:s.id)},s.id))]}),n&&e.jsxs("aside",{className:"w-72 shrink-0 border-l border-zinc-800 overflow-y-auto",children:[e.jsxs("div",{className:"p-4 border-b border-zinc-800",children:[e.jsxs("div",{className:"flex items-center gap-2",children:[e.jsx("span",{className:a("w-2.5 h-2.5 rounded-full",p[n.kind])}),e.jsx("span",{className:"text-xs font-semibold text-white truncate",children:n.name})]}),e.jsxs("div",{className:"mt-2 flex items-center gap-2",children:[e.jsx("span",{className:a("text-xs px-1.5 py-0.5 rounded ring-1",j[n.status]),children:n.status}),e.jsx("span",{className:"text-xs text-zinc-400",children:n.kind})]})]}),e.jsxs("div",{className:"p-4 space-y-4",children:[e.jsxs("div",{children:[e.jsx("div",{className:"text-xs font-medium text-zinc-400 mb-2 uppercase tracking-wide",children:"Timing"}),e.jsxs("div",{className:"space-y-1",children:[e.jsxs("div",{className:"flex justify-between text-xs",children:[e.jsx("span",{className:"text-zinc-500",children:"Start"}),e.jsx("span",{className:"text-zinc-300",children:l(n.startMs)})]}),e.jsxs("div",{className:"flex justify-between text-xs",children:[e.jsx("span",{className:"text-zinc-500",children:"Duration"}),e.jsx("span",{className:"text-zinc-300 font-medium",children:l(n.durationMs)})]}),n.tokens!==void 0&&e.jsxs("div",{className:"flex justify-between text-xs",children:[e.jsx("span",{className:"text-zinc-500",children:"Tokens"}),e.jsx("span",{className:"text-zinc-300",children:n.tokens.toLocaleString()})]}),n.model&&e.jsxs("div",{className:"flex justify-between text-xs",children:[e.jsx("span",{className:"text-zinc-500",children:"Model"}),e.jsx("span",{className:"text-zinc-300",children:n.model})]})]})]}),Object.keys(n.tags).length>0&&e.jsxs("div",{children:[e.jsx("div",{className:"text-xs font-medium text-zinc-400 mb-2 uppercase tracking-wide",children:"Tags"}),e.jsx("div",{className:"space-y-1",children:Object.entries(n.tags).map(([s,g])=>e.jsxs("div",{className:"flex justify-between text-xs gap-2",children:[e.jsx("span",{className:"text-zinc-500 truncate",children:s}),e.jsx("span",{className:"text-zinc-300 truncate font-mono",children:g})]},s))})]}),n.events.length>0&&e.jsxs("div",{children:[e.jsx("div",{className:"text-xs font-medium text-zinc-400 mb-2 uppercase tracking-wide",children:"Events"}),e.jsx("ul",{className:"space-y-2",children:n.events.map((s,g)=>e.jsxs("li",{className:"text-xs",children:[e.jsxs("div",{className:"flex items-center gap-1.5",children:[e.jsx("span",{className:a("w-1.5 h-1.5 rounded-full shrink-0",s.level==="error"?"bg-rose-400":s.level==="warn"?"bg-amber-400":"bg-emerald-400")}),e.jsx("span",{className:"text-zinc-400 font-medium",children:s.name}),e.jsxs("span",{className:"text-zinc-600 ml-auto",children:["+",l(s.offsetMs)]})]}),e.jsx("p",{className:"text-zinc-500 mt-0.5 pl-3",children:s.message})]},g))})]})]})]})]}),e.jsx("div",{className:"shrink-0 border-t border-zinc-800 px-5 py-2 flex items-center gap-4 flex-wrap",children:Object.keys(p).map(s=>e.jsxs("div",{className:"flex items-center gap-1.5",children:[e.jsx("span",{className:a("w-2 h-2 rounded-full",p[s])}),e.jsx("span",{className:"text-xs text-zinc-500 capitalize",children:s})]},s))})]})]})]})}export{A as default};
