import{r as n,j as e,c as a}from"./index-BvekFnzL.js";const c=[{id:"ev1",timestamp:"2026-02-22 15:42:18",category:"payment",status:"success",description:"Monthly subscription payment",amount:499,currency:"USD",customerId:"cust_001",customerName:"TechFlow Inc",invoiceId:"inv_2026_002_001",paymentMethod:"card",metadata:{last4:"4242",brand:"visa"},actorType:"stripe",actor:"Stripe Webhook",idempotencyKey:"idem_abc123"},{id:"ev2",timestamp:"2026-02-22 14:30:05",category:"invoice",status:"success",description:"Invoice INV-2026-002 generated",amount:499,currency:"USD",customerId:"cust_001",customerName:"TechFlow Inc",invoiceId:"inv_2026_002_001",paymentMethod:null,metadata:{line_items:"3",period:"Feb 2026"},actorType:"system",actor:"Billing Engine",idempotencyKey:null},{id:"ev3",timestamp:"2026-02-22 12:10:44",category:"subscription",status:"success",description:"Plan upgraded from Growth to Enterprise",amount:0,currency:"USD",customerId:"cust_002",customerName:"GlobalRetail Co",invoiceId:null,paymentMethod:null,metadata:{from_plan:"growth",to_plan:"enterprise"},actorType:"user",actor:"elena.v@globalretail.com",idempotencyKey:null},{id:"ev4",timestamp:"2026-02-22 11:55:02",category:"refund",status:"success",description:"Partial refund for service downtime credit",amount:-150,currency:"USD",customerId:"cust_003",customerName:"StartupXYZ",invoiceId:"inv_2026_001_003",paymentMethod:"card",metadata:{reason:"SLA credit",incident:"INC-4421"},actorType:"user",actor:"billing-admin@co.com",idempotencyKey:"ref_idem_001"},{id:"ev5",timestamp:"2026-02-22 10:00:00",category:"usage",status:"success",description:"Usage overage charge: API calls",amount:48.5,currency:"USD",customerId:"cust_004",customerName:"Acme Corporation",invoiceId:"inv_2026_002_004",paymentMethod:null,metadata:{calls_used:"1284000",included:"1000000",overage:"284000"},actorType:"system",actor:"Usage Meter",idempotencyKey:null},{id:"ev6",timestamp:"2026-02-21 18:30:15",category:"payment",status:"failed",description:"Card payment declined",amount:99,currency:"USD",customerId:"cust_005",customerName:"DevStudio LLC",invoiceId:"inv_2026_002_005",paymentMethod:"card",metadata:{decline_code:"insufficient_funds",last4:"1234"},actorType:"stripe",actor:"Stripe Webhook",idempotencyKey:"idem_xyz789"},{id:"ev7",timestamp:"2026-02-21 09:14:33",category:"credit",status:"success",description:"Account credit applied: referral bonus",amount:-50,currency:"USD",customerId:"cust_006",customerName:"CloudApp Co",invoiceId:null,paymentMethod:"credit",metadata:{credit_type:"referral",referrer:"cust_001"},actorType:"system",actor:"Referral Engine",idempotencyKey:null},{id:"ev8",timestamp:"2026-02-20 16:45:00",category:"promo",status:"success",description:"Promo code LAUNCH25 applied: 25% off",amount:-124.75,currency:"USD",customerId:"cust_007",customerName:"NewBrand Inc",invoiceId:"inv_2026_002_007",paymentMethod:null,metadata:{code:"LAUNCH25",discount_pct:"25"},actorType:"user",actor:"m.chen@newbrand.com",idempotencyKey:null},{id:"ev9",timestamp:"2026-02-20 14:00:00",category:"tax",status:"success",description:"California sales tax collected",amount:41.17,currency:"USD",customerId:"cust_008",customerName:"WestCoast SaaS",invoiceId:"inv_2026_002_008",paymentMethod:null,metadata:{jurisdiction:"CA",rate:"8.25%",taxable_amount:"499"},actorType:"system",actor:"Tax Engine",idempotencyKey:null},{id:"ev10",timestamp:"2026-02-19 11:20:00",category:"subscription",status:"cancelled",description:"Subscription cancelled by user",amount:0,currency:"USD",customerId:"cust_009",customerName:"SpindownCo",invoiceId:null,paymentMethod:null,metadata:{reason:"too_expensive",cancellation_type:"at_period_end"},actorType:"user",actor:"cfo@spindownco.com",idempotencyKey:null}],j=[{id:"sc1",customerId:"cust_002",customerName:"GlobalRetail Co",timestamp:"2026-02-22 12:10:44",fromPlan:"Growth ($499/mo)",toPlan:"Enterprise (Custom)",reason:"User-initiated upgrade",mrr_delta:2001,actor:"elena.v@globalretail.com"},{id:"sc2",customerId:"cust_009",customerName:"SpindownCo",timestamp:"2026-02-19 11:20:00",fromPlan:"Starter ($99/mo)",toPlan:"Cancelled",reason:"too_expensive",mrr_delta:-99,actor:"cfo@spindownco.com"},{id:"sc3",customerId:"cust_010",customerName:"GrowthHQ",timestamp:"2026-02-15 09:00:00",fromPlan:"Starter ($99/mo)",toPlan:"Growth ($499/mo)",reason:"User-initiated upgrade",mrr_delta:400,actor:"admin@growthhq.com"}],x=[{id:"rf1",customerId:"cust_003",customerName:"StartupXYZ",originalAmount:99,refundAmount:150,reason:"SLA credit for INC-4421 outage (47 min downtime). Credit exceeds monthly fee — balance carried over.",status:"approved",requestedAt:"2026-02-22 10:30",processedAt:"2026-02-22 11:55",reviewer:"billing-admin@co.com",invoiceId:"inv_2026_001_003"},{id:"rf2",customerId:"cust_011",customerName:"BetaTest Corp",originalAmount:499,refundAmount:499,reason:"Duplicate charge — payment processor error.",status:"pending",requestedAt:"2026-02-21 14:00",processedAt:null,reviewer:null,invoiceId:"inv_2026_002_011"},{id:"rf3",customerId:"cust_012",customerName:"OldClient LLC",originalAmount:99,refundAmount:33,reason:"Pro-rated refund for mid-cycle downgrade.",status:"approved",requestedAt:"2026-02-10 09:00",processedAt:"2026-02-10 16:00",reviewer:"finance@co.com",invoiceId:"inv_2026_002_012"}],z=[{id:"tx1",customerId:"cust_008",customerName:"WestCoast SaaS",period:"Feb 2026",jurisdiction:"California, US",taxType:"Sales Tax",amount:41.17,status:"pending",filedAt:null},{id:"tx2",customerId:"cust_013",customerName:"EuroTech GmbH",period:"Feb 2026",jurisdiction:"Germany",taxType:"VAT (19%)",amount:94.81,status:"pending",filedAt:null},{id:"tx3",customerId:"cust_008",customerName:"WestCoast SaaS",period:"Jan 2026",jurisdiction:"California, US",taxType:"Sales Tax",amount:41.17,status:"filed",filedAt:"2026-02-10"}];function _(s){return{payment:"bg-emerald-500/10 text-emerald-400",subscription:"bg-indigo-500/10 text-indigo-400",invoice:"bg-blue-500/10 text-blue-400",refund:"bg-amber-500/10 text-amber-400",credit:"bg-purple-500/10 text-purple-400",usage:"bg-orange-500/10 text-orange-400",promo:"bg-pink-500/10 text-pink-400",tax:"bg-zinc-500/10 text-zinc-400"}[s]}function S(s){return s==="success"?"bg-emerald-400/10 text-emerald-400":s==="failed"?"bg-rose-400/10 text-rose-400":s==="pending"?"bg-amber-400/10 text-amber-400":"bg-zinc-600 text-zinc-400"}function w(s){return s<0?"text-rose-400":s===0?"text-zinc-500":"text-emerald-400"}function C(s,r){const o=Math.abs(s).toFixed(2);return s<0?`-$${o} ${r}`:s===0?"—":`+$${o} ${r}`}function T(){const[s,r]=n.useState("events"),[d,o]=n.useState("all"),[l,p]=n.useState("all"),[m,b]=n.useState(""),[I,h]=n.useState("csv"),g=c.filter(t=>{if(d!=="all"&&t.category!==d||l!=="all"&&t.status!==l)return!1;if(m){const i=m.toLowerCase();return t.customerName.toLowerCase().includes(i)||t.description.toLowerCase().includes(i)||t.id.toLowerCase().includes(i)}return!0}),y=c.filter(t=>t.category==="payment"&&t.status==="success").reduce((t,i)=>t+i.amount,0),v=c.filter(t=>t.category==="refund").reduce((t,i)=>t+Math.abs(i.amount),0),u=c.filter(t=>t.category==="payment"&&t.status==="failed").length,N=x.filter(t=>t.status==="pending").length,f=[{id:"events",label:"All Events"},{id:"subscriptions",label:"Subscriptions"},{id:"refunds",label:`Refunds (${N} pending)`},{id:"tax",label:"Tax Records"}];return e.jsxs("div",{className:"min-h-screen bg-zinc-950 text-white p-6",children:[e.jsxs("div",{className:"flex items-start justify-between mb-6",children:[e.jsxs("div",{children:[e.jsx("h1",{className:"text-2xl font-bold text-white",children:"Billing Audit Log"}),e.jsx("p",{className:"text-zinc-400 text-sm mt-1",children:"Immutable record of all billing events, subscription changes, and financial transactions"})]}),e.jsxs("div",{className:"flex gap-2",children:[e.jsxs("select",{onChange:t=>h(t.target.value),className:"bg-zinc-800 border border-zinc-700 rounded-lg px-3 py-1.5 text-sm text-zinc-300",children:[e.jsx("option",{value:"csv",children:"Export CSV"}),e.jsx("option",{value:"pdf",children:"Export PDF"}),e.jsx("option",{value:"json",children:"Export JSON"})]}),e.jsx("button",{className:"px-3 py-1.5 text-sm bg-indigo-600 hover:bg-indigo-500 rounded-lg text-white transition-colors",children:"Download"})]})]}),e.jsxs("div",{className:"grid grid-cols-2 md:grid-cols-4 gap-4 mb-6",children:[e.jsxs("div",{className:"bg-zinc-900 rounded-xl p-4 border border-zinc-800",children:[e.jsx("div",{className:"text-xs text-zinc-500 mb-1",children:"Revenue (Feb)"}),e.jsxs("div",{className:"text-2xl font-bold text-emerald-400",children:["$",y.toLocaleString()]})]}),e.jsxs("div",{className:"bg-zinc-900 rounded-xl p-4 border border-zinc-800",children:[e.jsx("div",{className:"text-xs text-zinc-500 mb-1",children:"Refunds Issued"}),e.jsxs("div",{className:"text-2xl font-bold text-amber-400",children:["$",v.toFixed(0)]})]}),e.jsxs("div",{className:"bg-zinc-900 rounded-xl p-4 border border-zinc-800",children:[e.jsx("div",{className:"text-xs text-zinc-500 mb-1",children:"Failed Payments"}),e.jsx("div",{className:a("text-2xl font-bold",u>0?"text-rose-400":"text-emerald-400"),children:u})]}),e.jsxs("div",{className:"bg-zinc-900 rounded-xl p-4 border border-zinc-800",children:[e.jsx("div",{className:"text-xs text-zinc-500 mb-1",children:"Total Events"}),e.jsx("div",{className:"text-2xl font-bold text-white",children:c.length})]})]}),e.jsx("div",{className:"flex gap-1 border-b border-zinc-800 mb-6",children:f.map(t=>e.jsx("button",{onClick:()=>r(t.id),className:a("px-4 py-2 text-sm font-medium transition-colors border-b-2 -mb-px",s===t.id?"border-indigo-500 text-white":"border-transparent text-zinc-400 hover:text-zinc-200"),children:t.label},t.id))}),s==="events"&&e.jsxs("div",{children:[e.jsxs("div",{className:"flex flex-wrap gap-3 mb-4",children:[e.jsx("input",{type:"text",value:m,onChange:t=>b(t.target.value),placeholder:"Search events...",className:"bg-zinc-800 border border-zinc-700 rounded-lg px-3 py-1.5 text-sm text-zinc-200 placeholder-zinc-500 w-48"}),e.jsxs("select",{value:d,onChange:t=>o(t.target.value),className:"bg-zinc-800 border border-zinc-700 rounded-lg px-3 py-1.5 text-sm text-zinc-200",children:[e.jsx("option",{value:"all",children:"All Categories"}),["subscription","payment","invoice","refund","credit","usage","promo","tax"].map(t=>e.jsx("option",{value:t,className:"capitalize",children:t},t))]}),e.jsxs("select",{value:l,onChange:t=>p(t.target.value),className:"bg-zinc-800 border border-zinc-700 rounded-lg px-3 py-1.5 text-sm text-zinc-200",children:[e.jsx("option",{value:"all",children:"All Status"}),e.jsx("option",{value:"success",children:"Success"}),e.jsx("option",{value:"failed",children:"Failed"}),e.jsx("option",{value:"pending",children:"Pending"}),e.jsx("option",{value:"cancelled",children:"Cancelled"})]})]}),e.jsx("div",{className:"bg-zinc-900 rounded-xl border border-zinc-800 overflow-hidden",children:e.jsxs("table",{className:"w-full text-sm",children:[e.jsx("thead",{children:e.jsx("tr",{className:"border-b border-zinc-700",children:["Timestamp","Customer","Event","Amount","Status","Actor"].map(t=>e.jsx("th",{className:"px-4 py-3 text-left text-xs text-zinc-500 font-medium",children:t},t))})}),e.jsx("tbody",{className:"divide-y divide-zinc-800",children:g.map(t=>e.jsxs("tr",{className:"hover:bg-zinc-800/50 transition-colors",children:[e.jsx("td",{className:"px-4 py-3 text-xs text-zinc-400 whitespace-nowrap",children:t.timestamp}),e.jsx("td",{className:"px-4 py-3 text-sm text-zinc-200",children:t.customerName}),e.jsx("td",{className:"px-4 py-3",children:e.jsxs("div",{className:"flex items-center gap-2",children:[e.jsx("span",{className:a("text-xs px-2 py-0.5 rounded-full capitalize",_(t.category)),children:t.category}),e.jsx("span",{className:"text-xs text-zinc-400 truncate max-w-48",children:t.description})]})}),e.jsx("td",{className:a("px-4 py-3 text-sm font-medium whitespace-nowrap",w(t.amount)),children:C(t.amount,t.currency)}),e.jsx("td",{className:"px-4 py-3",children:e.jsx("span",{className:a("text-xs px-2 py-0.5 rounded-full capitalize",S(t.status)),children:t.status})}),e.jsx("td",{className:"px-4 py-3 text-xs text-zinc-500",children:t.actor})]},t.id))})]})})]}),s==="subscriptions"&&e.jsx("div",{className:"space-y-3",children:j.map(t=>e.jsxs("div",{className:"bg-zinc-900 rounded-xl p-4 border border-zinc-800",children:[e.jsxs("div",{className:"flex items-start justify-between mb-2",children:[e.jsxs("div",{children:[e.jsx("div",{className:"font-medium text-zinc-100",children:t.customerName}),e.jsxs("div",{className:"text-xs text-zinc-500 mt-0.5",children:[t.timestamp," · by ",t.actor]})]}),e.jsxs("div",{className:a("text-sm font-bold",t.mrr_delta>0?"text-emerald-400":"text-rose-400"),children:[t.mrr_delta>0?"+":"","$",t.mrr_delta,"/mo MRR"]})]}),e.jsxs("div",{className:"flex items-center gap-2 text-sm",children:[e.jsx("span",{className:"text-zinc-400",children:t.fromPlan}),e.jsx("span",{className:"text-zinc-600",children:"→"}),e.jsx("span",{className:"text-zinc-200",children:t.toPlan})]}),e.jsxs("div",{className:"text-xs text-zinc-500 mt-1",children:["Reason: ",t.reason]})]},t.id))}),s==="refunds"&&e.jsx("div",{className:"space-y-3",children:x.map(t=>e.jsxs("div",{className:a("bg-zinc-900 rounded-xl p-4 border",t.status==="pending"?"border-amber-500/30":"border-zinc-800"),children:[e.jsxs("div",{className:"flex items-start justify-between mb-2",children:[e.jsxs("div",{children:[e.jsxs("div",{className:"flex items-center gap-2 mb-1",children:[e.jsx("span",{className:"font-medium text-zinc-100",children:t.customerName}),e.jsx("span",{className:a("text-xs px-2 py-0.5 rounded-full capitalize",t.status==="approved"?"bg-emerald-400/10 text-emerald-400":t.status==="pending"?"bg-amber-400/10 text-amber-400":"bg-rose-400/10 text-rose-400"),children:t.status})]}),e.jsxs("div",{className:"text-xs text-zinc-500",children:["Invoice: ",t.invoiceId," · Requested: ",t.requestedAt]})]}),e.jsxs("div",{className:"text-right",children:[e.jsxs("div",{className:"text-lg font-bold text-rose-400",children:["-$",t.refundAmount.toFixed(2)]}),e.jsxs("div",{className:"text-xs text-zinc-500",children:["of $",t.originalAmount.toFixed(2)," charged"]})]})]}),e.jsx("div",{className:"text-sm text-zinc-300 bg-zinc-800 rounded-lg p-3 mt-2",children:t.reason}),e.jsxs("div",{className:"mt-2 flex justify-between text-xs text-zinc-500",children:[t.reviewer&&e.jsxs("span",{children:["Reviewed by: ",t.reviewer]}),t.processedAt&&e.jsxs("span",{children:["Processed: ",t.processedAt]})]}),t.status==="pending"&&e.jsxs("div",{className:"flex gap-2 mt-3",children:[e.jsx("button",{className:"px-3 py-1.5 text-xs bg-emerald-600 hover:bg-emerald-500 rounded-lg text-white transition-colors",children:"Approve Refund"}),e.jsx("button",{className:"px-3 py-1.5 text-xs bg-rose-700 hover:bg-rose-600 rounded-lg text-white transition-colors",children:"Deny"})]})]},t.id))}),s==="tax"&&e.jsx("div",{children:e.jsx("div",{className:"bg-zinc-900 rounded-xl border border-zinc-800 overflow-hidden",children:e.jsxs("table",{className:"w-full text-sm",children:[e.jsx("thead",{children:e.jsx("tr",{className:"border-b border-zinc-700",children:["Customer","Period","Jurisdiction","Tax Type","Amount","Status","Filed"].map(t=>e.jsx("th",{className:"px-4 py-3 text-left text-xs text-zinc-500 font-medium",children:t},t))})}),e.jsx("tbody",{className:"divide-y divide-zinc-800",children:z.map(t=>e.jsxs("tr",{className:"hover:bg-zinc-800/50 transition-colors",children:[e.jsx("td",{className:"px-4 py-3 text-sm text-zinc-200",children:t.customerName}),e.jsx("td",{className:"px-4 py-3 text-xs text-zinc-400",children:t.period}),e.jsx("td",{className:"px-4 py-3 text-xs text-zinc-400",children:t.jurisdiction}),e.jsx("td",{className:"px-4 py-3 text-xs text-zinc-300",children:t.taxType}),e.jsxs("td",{className:"px-4 py-3 text-sm font-medium text-zinc-200",children:["$",t.amount.toFixed(2)]}),e.jsx("td",{className:"px-4 py-3",children:e.jsx("span",{className:a("text-xs px-2 py-0.5 rounded-full capitalize",t.status==="filed"?"bg-emerald-400/10 text-emerald-400":t.status==="pending"?"bg-amber-400/10 text-amber-400":"bg-indigo-400/10 text-indigo-400"),children:t.status})}),e.jsx("td",{className:"px-4 py-3 text-xs text-zinc-500",children:t.filedAt??"—"})]},t.id))})]})})})]})}export{T as default};
