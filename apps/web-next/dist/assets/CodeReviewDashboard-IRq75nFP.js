import{r as x,j as e,c as i}from"./index-CDIa1lci.js";const h={open:"bg-emerald-500/20 text-emerald-400 border border-emerald-500/30",draft:"bg-zinc-500/20 text-zinc-400 border border-zinc-500/30",merged:"bg-violet-500/20 text-violet-400 border border-violet-500/30",closed:"bg-rose-500/20 text-rose-400 border border-rose-500/30","needs-review":"bg-amber-500/20 text-amber-400 border border-amber-500/30"},p={approved:{icon:"âœ“",color:"text-emerald-400"},"changes-requested":{icon:"âœ—",color:"text-rose-400"},commented:{icon:"ðŸ’¬",color:"text-amber-400"},pending:{icon:"â‹¯",color:"text-zinc-500"}},g={xs:"bg-emerald-500/20 text-emerald-400",s:"bg-sky-500/20 text-sky-400",m:"bg-amber-500/20 text-amber-400",l:"bg-orange-500/20 text-orange-400",xl:"bg-rose-500/20 text-rose-400"},w={bug:"bg-rose-500/20 text-rose-400",feature:"bg-indigo-500/20 text-indigo-400",refactor:"bg-sky-500/20 text-sky-400",perf:"bg-amber-500/20 text-amber-400",security:"bg-orange-500/20 text-orange-400",docs:"bg-zinc-500/20 text-zinc-400",breaking:"bg-red-700/30 text-red-400",chore:"bg-zinc-600/20 text-zinc-400"},l=[{id:1482,title:"feat: add rate limiting middleware with Redis backend",author:"alice",authorAvatar:"A",repo:"api-gateway",branch:"feat/rate-limit-redis",base:"main",status:"needs-review",size:"m",additions:342,deletions:18,filesChanged:12,comments:4,reviewers:[{name:"bob",avatar:"B",decision:"pending"},{name:"carol",avatar:"C",decision:"commented"}],labels:["feature","perf"],createdAt:"2025-02-20",updatedAt:"2h ago",description:"Implements a Redis-backed rate limiter using token bucket algorithm. Supports per-user and per-IP limits.",checks:[{name:"CI / tests",status:"passing"},{name:"CI / lint",status:"passing"},{name:"Security scan",status:"pending"}],conflicts:!1},{id:1479,title:"fix: resolve memory leak in websocket connection pool",author:"bob",authorAvatar:"B",repo:"realtime-service",branch:"fix/ws-pool-leak",base:"main",status:"open",size:"s",additions:87,deletions:64,filesChanged:5,comments:2,reviewers:[{name:"alice",avatar:"A",decision:"approved"},{name:"dave",avatar:"D",decision:"pending"}],labels:["bug"],createdAt:"2025-02-21",updatedAt:"45m ago",description:"Fixes a leak where disconnected WebSocket clients were not removed from the pool.",checks:[{name:"CI / tests",status:"passing"},{name:"CI / lint",status:"passing"}],conflicts:!1},{id:1475,title:"refactor: migrate auth service to Zod validation schemas",author:"carol",authorAvatar:"C",repo:"auth-service",branch:"refactor/zod-schemas",base:"main",status:"needs-review",size:"l",additions:1240,deletions:890,filesChanged:34,comments:9,reviewers:[{name:"alice",avatar:"A",decision:"changes-requested"},{name:"eve",avatar:"E",decision:"commented"},{name:"frank",avatar:"F",decision:"pending"}],labels:["refactor","breaking"],createdAt:"2025-02-18",updatedAt:"1d ago",description:"Replaces manual validation with Zod schemas across all auth endpoints. Includes migration guide.",checks:[{name:"CI / tests",status:"failing"},{name:"CI / lint",status:"passing"}],conflicts:!0},{id:1468,title:"perf: lazy-load dashboard charts with IntersectionObserver",author:"dave",authorAvatar:"D",repo:"web-app",branch:"perf/lazy-charts",base:"main",status:"open",size:"s",additions:210,deletions:45,filesChanged:8,comments:1,reviewers:[{name:"alice",avatar:"A",decision:"approved"},{name:"carol",avatar:"C",decision:"approved"}],labels:["perf"],createdAt:"2025-02-19",updatedAt:"3h ago",description:"Defers chart rendering until the user scrolls them into view, improving initial load time by ~30%.",checks:[{name:"CI / tests",status:"passing"},{name:"Lighthouse",status:"passing"}],conflicts:!1},{id:1461,title:"security: rotate JWT signing algorithm from HS256 to RS256",author:"eve",authorAvatar:"E",repo:"auth-service",branch:"security/rs256-rotation",base:"main",status:"needs-review",size:"m",additions:445,deletions:112,filesChanged:18,comments:6,reviewers:[{name:"alice",avatar:"A",decision:"commented"},{name:"frank",avatar:"F",decision:"pending"}],labels:["security","breaking"],createdAt:"2025-02-17",updatedAt:"4h ago",description:"Switches JWT signing to RS256 using asymmetric keys. Requires key rotation runbook.",checks:[{name:"CI / tests",status:"passing"},{name:"Security scan",status:"passing"},{name:"CI / lint",status:"passing"}],conflicts:!1},{id:1458,title:"docs: add ADR for event-driven architecture decision",author:"frank",authorAvatar:"F",repo:"docs",branch:"docs/adr-events",base:"main",status:"open",size:"xs",additions:120,deletions:0,filesChanged:2,comments:0,reviewers:[{name:"alice",avatar:"A",decision:"approved"}],labels:["docs"],createdAt:"2025-02-21",updatedAt:"1h ago",description:"Adds ADR-007 documenting the decision to use event-driven architecture for notifications.",checks:[{name:"CI / lint",status:"passing"}],conflicts:!1},{id:1450,title:"feat: implement OAuth2 PKCE flow for mobile clients",author:"grace",authorAvatar:"G",repo:"auth-service",branch:"feat/pkce-mobile",base:"main",status:"draft",size:"xl",additions:2100,deletions:300,filesChanged:52,comments:0,reviewers:[],labels:["feature"],createdAt:"2025-02-15",updatedAt:"2d ago",description:"Draft: PKCE flow implementation. Not ready for review yet â€” tests pending.",checks:[{name:"CI / tests",status:"failing"}],conflicts:!1},{id:1445,title:"chore: upgrade TypeScript 5.3 â†’ 5.7 and fix type errors",author:"henry",authorAvatar:"H",repo:"web-app",branch:"chore/ts-upgrade",base:"main",status:"open",size:"m",additions:560,deletions:430,filesChanged:28,comments:3,reviewers:[{name:"carol",avatar:"C",decision:"changes-requested"}],labels:["chore"],createdAt:"2025-02-16",updatedAt:"6h ago",description:"Upgrades TypeScript to 5.7 and resolves all new strict mode errors.",checks:[{name:"CI / tests",status:"passing"},{name:"CI / lint",status:"passing"}],conflicts:!1}],y=[{label:"Open PRs",value:l.filter(n=>n.status==="open"||n.status==="needs-review").length,delta:"+2 today"},{label:"Avg Review Time",value:"4.2h",delta:"âˆ’0.8h",positive:!0},{label:"Merge Rate (7d)",value:"82%",delta:"+5%",positive:!0},{label:"Blocked by CI",value:l.filter(n=>n.checks.some(c=>c.status==="failing")).length,delta:"0 today"}],v=[{day:"Mon",merged:5,opened:3},{day:"Tue",merged:8,opened:6},{day:"Wed",merged:4,opened:7},{day:"Thu",merged:9,opened:4},{day:"Fri",merged:11,opened:8},{day:"Sat",merged:2,opened:1},{day:"Sun",merged:1,opened:2}],b=Math.max(...v.flatMap(n=>[n.merged,n.opened]));function k(){const[n,c]=x.useState("queue"),[a,r]=x.useState(null),[o,f]=x.useState("all"),j=o==="all"?l:l.filter(s=>s.status===o),u=l.filter(s=>s.reviewers.some(t=>t.name==="alice")),N=[{id:"queue",label:"Review Queue"},{id:"my-reviews",label:"My Reviews"},{id:"analytics",label:"Analytics"}];return e.jsx("div",{className:"min-h-screen bg-zinc-950 text-white p-6",children:e.jsxs("div",{className:"max-w-6xl mx-auto space-y-6",children:[e.jsxs("div",{className:"flex items-center justify-between",children:[e.jsxs("div",{children:[e.jsx("h1",{className:"text-2xl font-bold text-white",children:"Code Review Dashboard"}),e.jsx("p",{className:"text-zinc-400 text-sm mt-1",children:"Pull requests, review queue, and team velocity"})]}),e.jsx("button",{className:"px-4 py-2 rounded-lg bg-indigo-600 hover:bg-indigo-500 text-sm font-medium transition-colors",children:"+ New PR"})]}),e.jsx("div",{className:"grid grid-cols-2 md:grid-cols-4 gap-4",children:y.map(s=>e.jsxs("div",{className:"bg-zinc-900 border border-zinc-800 rounded-xl p-4",children:[e.jsx("p",{className:"text-xs text-zinc-500 uppercase tracking-wider",children:s.label}),e.jsx("p",{className:"text-3xl font-bold text-white mt-1",children:s.value}),s.delta&&e.jsx("p",{className:i("text-xs mt-1",s.positive===!0?"text-emerald-400":s.positive===!1?"text-rose-400":"text-zinc-500"),children:s.delta})]},s.label))}),e.jsx("div",{className:"flex gap-1 border-b border-zinc-800",children:N.map(s=>e.jsx("button",{onClick:()=>{c(s.id),r(null)},className:i("px-4 py-2 text-sm font-medium border-b-2 transition-colors",n===s.id?"border-indigo-500 text-white":"border-transparent text-zinc-400 hover:text-zinc-200"),children:s.label},s.id))}),n==="queue"&&e.jsxs("div",{className:"space-y-4",children:[e.jsx("div",{className:"flex gap-2 flex-wrap",children:["all","needs-review","open","draft"].map(s=>e.jsxs("button",{onClick:()=>{f(s==="all"?"all":s),r(null)},className:i("px-3 py-1.5 rounded-lg text-xs font-medium transition-colors",o===s?"bg-indigo-600 text-white":"bg-zinc-800 text-zinc-400 hover:text-zinc-200"),children:[s==="all"?"All":s==="needs-review"?"Needs Review":s.charAt(0).toUpperCase()+s.slice(1),e.jsx("span",{className:"ml-1.5 text-zinc-500",children:s==="all"?l.length:l.filter(t=>t.status===s).length})]},s))}),a?e.jsxs("div",{className:"bg-zinc-900 border border-zinc-800 rounded-xl p-5 space-y-5",children:[e.jsx("button",{onClick:()=>r(null),className:"text-zinc-400 hover:text-white text-sm",children:"â† Back"}),e.jsxs("div",{children:[e.jsxs("div",{className:"flex items-center gap-3 mb-2",children:[e.jsx("span",{className:i("text-xs px-2 py-0.5 rounded-full font-medium",h[a.status]),children:a.status}),e.jsxs("span",{className:"text-xs text-zinc-500",children:["#",a.id," in ",a.repo]})]}),e.jsx("h2",{className:"text-xl font-bold text-white",children:a.title}),e.jsx("p",{className:"text-sm text-zinc-400 mt-1",children:a.description})]}),e.jsxs("div",{className:"flex items-center gap-4 text-sm text-zinc-400",children:[e.jsxs("div",{className:"flex items-center gap-2",children:[e.jsx("div",{className:"w-6 h-6 rounded-full bg-indigo-600 flex items-center justify-center text-xs font-bold text-white",children:a.authorAvatar}),e.jsx("span",{children:a.author})]}),e.jsxs("span",{className:"text-zinc-600",children:[a.branch," â†’ ",a.base]})]}),e.jsxs("div",{className:"grid grid-cols-4 gap-3",children:[e.jsxs("div",{className:"bg-zinc-800/50 rounded-lg p-3 text-center",children:[e.jsx("p",{className:"text-xs text-zinc-500",children:"Files"}),e.jsx("p",{className:"text-lg font-bold text-white",children:a.filesChanged})]}),e.jsxs("div",{className:"bg-zinc-800/50 rounded-lg p-3 text-center",children:[e.jsx("p",{className:"text-xs text-zinc-500",children:"Added"}),e.jsxs("p",{className:"text-lg font-bold text-emerald-400",children:["+",a.additions]})]}),e.jsxs("div",{className:"bg-zinc-800/50 rounded-lg p-3 text-center",children:[e.jsx("p",{className:"text-xs text-zinc-500",children:"Removed"}),e.jsxs("p",{className:"text-lg font-bold text-rose-400",children:["-",a.deletions]})]}),e.jsxs("div",{className:"bg-zinc-800/50 rounded-lg p-3 text-center",children:[e.jsx("p",{className:"text-xs text-zinc-500",children:"Comments"}),e.jsx("p",{className:"text-lg font-bold text-zinc-300",children:a.comments})]})]}),e.jsxs("div",{children:[e.jsx("h3",{className:"text-sm font-semibold text-zinc-300 mb-3",children:"CI Checks"}),e.jsx("div",{className:"space-y-2",children:a.checks.map(s=>e.jsxs("div",{className:"flex items-center gap-3",children:[e.jsx("span",{className:i("w-2 h-2 rounded-full flex-shrink-0",s.status==="passing"?"bg-emerald-400":s.status==="failing"?"bg-rose-400":"bg-amber-400")}),e.jsx("span",{className:"text-sm text-zinc-300",children:s.name}),e.jsx("span",{className:i("text-xs ml-auto",s.status==="passing"?"text-emerald-400":s.status==="failing"?"text-rose-400":"text-amber-400"),children:s.status})]},s.name))})]}),a.conflicts&&e.jsx("div",{className:"bg-amber-500/10 border border-amber-500/20 rounded-lg p-3 text-sm text-amber-400",children:"âš  Merge conflicts detected â€” resolve before merging"}),e.jsxs("div",{children:[e.jsx("h3",{className:"text-sm font-semibold text-zinc-300 mb-3",children:"Reviewers"}),e.jsx("div",{className:"space-y-2",children:a.reviewers.map(s=>{const t=p[s.decision];return e.jsxs("div",{className:"flex items-center gap-3",children:[e.jsx("div",{className:"w-7 h-7 rounded-full bg-zinc-700 flex items-center justify-center text-xs font-bold",children:s.avatar}),e.jsx("span",{className:"text-sm text-zinc-300 flex-1",children:s.name}),e.jsxs("span",{className:i("text-sm font-medium",t.color),children:[t.icon," ",s.decision.split("-").join(" ")]})]},s.name)})})]}),e.jsxs("div",{className:"flex gap-3",children:[e.jsx("button",{className:"px-4 py-2 bg-emerald-600 hover:bg-emerald-500 rounded-lg text-sm font-medium transition-colors",children:"Approve"}),e.jsx("button",{className:"px-4 py-2 bg-zinc-700 hover:bg-zinc-600 rounded-lg text-sm font-medium transition-colors",children:"Request Changes"}),e.jsx("button",{className:"px-4 py-2 bg-zinc-700 hover:bg-zinc-600 rounded-lg text-sm font-medium transition-colors",children:"Comment"})]})]}):e.jsx("div",{className:"space-y-3",children:j.map(s=>e.jsxs("button",{onClick:()=>r(s),className:"w-full text-left bg-zinc-900 border border-zinc-800 hover:border-zinc-600 rounded-xl p-4 transition-colors",children:[e.jsxs("div",{className:"flex items-start justify-between gap-4 mb-2",children:[e.jsxs("div",{className:"flex-1 min-w-0",children:[e.jsxs("div",{className:"flex items-center gap-2 mb-1",children:[e.jsx("span",{className:i("text-xs px-2 py-0.5 rounded-full font-medium",h[s.status]),children:s.status}),e.jsxs("span",{className:i("text-xs px-1.5 py-0.5 rounded font-medium",g[s.size]),children:["SIZE-",s.size.toUpperCase()]}),s.conflicts&&e.jsx("span",{className:"text-xs bg-amber-500/20 text-amber-400 px-1.5 py-0.5 rounded",children:"âš  conflicts"}),s.labels.map(t=>e.jsx("span",{className:i("text-xs px-1.5 py-0.5 rounded",w[t]??"bg-zinc-500/20 text-zinc-400"),children:t},t))]}),e.jsx("p",{className:"text-sm font-semibold text-white truncate",children:s.title}),e.jsxs("p",{className:"text-xs text-zinc-500 mt-0.5",children:["#",s.id," Â· ",s.repo," Â· ",s.author," Â· Updated ",s.updatedAt]})]}),e.jsx("div",{className:"text-right flex-shrink-0",children:e.jsx("div",{className:"flex gap-1 justify-end",children:s.reviewers.map(t=>{const d=p[t.decision];return e.jsxs("div",{className:"relative",children:[e.jsx("div",{className:"w-6 h-6 rounded-full bg-zinc-700 flex items-center justify-center text-xs font-bold",children:t.avatar}),e.jsx("span",{className:i("absolute -bottom-0.5 -right-0.5 text-xs leading-none",d.color),children:d.icon})]},t.name)})})})]}),e.jsxs("div",{className:"flex items-center gap-4 text-xs text-zinc-500",children:[e.jsxs("span",{className:"text-emerald-400",children:["+",s.additions]}),e.jsxs("span",{className:"text-rose-400",children:["-",s.deletions]}),e.jsxs("span",{children:[s.filesChanged," files"]}),s.comments>0&&e.jsxs("span",{children:["ðŸ’¬ ",s.comments]}),e.jsx("div",{className:"flex gap-1 ml-auto",children:s.checks.map(t=>e.jsx("div",{className:i("w-1.5 h-1.5 rounded-full",t.status==="passing"?"bg-emerald-400":t.status==="failing"?"bg-rose-400":"bg-amber-400"),title:`${t.name}: ${t.status}`},t.name))})]})]},s.id))})]}),n==="my-reviews"&&e.jsxs("div",{className:"space-y-3",children:[e.jsxs("p",{className:"text-sm text-zinc-400",children:[u.length," PRs waiting for your review or action"]}),u.map(s=>{const t=s.reviewers.find(m=>m.name==="alice"),d=p[t.decision];return e.jsxs("div",{className:"bg-zinc-900 border border-zinc-800 rounded-xl p-4",children:[e.jsxs("div",{className:"flex items-start justify-between gap-4 mb-2",children:[e.jsxs("div",{className:"flex-1 min-w-0",children:[e.jsxs("div",{className:"flex items-center gap-2 mb-1",children:[e.jsx("span",{className:i("text-xs px-2 py-0.5 rounded-full font-medium",h[s.status]),children:s.status}),e.jsxs("span",{className:i("text-sm font-medium",d.color),children:[d.icon," ",t.decision.split("-").join(" ")]})]}),e.jsx("p",{className:"text-sm font-semibold text-white",children:s.title}),e.jsxs("p",{className:"text-xs text-zinc-500 mt-0.5",children:["#",s.id," Â· ",s.repo," Â· by ",s.author," Â· ",s.updatedAt]})]}),t.decision==="pending"&&e.jsx("button",{className:"px-3 py-1.5 bg-indigo-600 hover:bg-indigo-500 rounded-lg text-xs font-medium flex-shrink-0 transition-colors",children:"Review"})]}),e.jsxs("div",{className:"flex gap-3 text-xs text-zinc-500",children:[e.jsxs("span",{className:"text-emerald-400",children:["+",s.additions]}),e.jsxs("span",{className:"text-rose-400",children:["-",s.deletions]}),e.jsxs("span",{children:[s.filesChanged," files"]})]})]},s.id)})]}),n==="analytics"&&e.jsxs("div",{className:"space-y-6",children:[e.jsxs("div",{className:"bg-zinc-900 border border-zinc-800 rounded-xl p-5",children:[e.jsx("h2",{className:"text-sm font-semibold text-zinc-300 mb-4",children:"Weekly Activity"}),e.jsx("div",{className:"flex items-end gap-3 h-32",children:v.map(s=>e.jsxs("div",{className:"flex-1 flex flex-col items-center gap-1",children:[e.jsxs("div",{className:"flex gap-0.5 items-end w-full",children:[e.jsx("div",{className:"flex-1 bg-violet-500/70 rounded-t",style:{height:`${s.merged/b*100}px`},title:`Merged: ${s.merged}`}),e.jsx("div",{className:"flex-1 bg-indigo-500/50 rounded-t",style:{height:`${s.opened/b*100}px`},title:`Opened: ${s.opened}`})]}),e.jsx("span",{className:"text-xs text-zinc-500",children:s.day})]},s.day))}),e.jsxs("div",{className:"flex gap-4 mt-2",children:[e.jsxs("div",{className:"flex items-center gap-2",children:[e.jsx("div",{className:"w-3 h-3 rounded bg-violet-500/70"}),e.jsx("span",{className:"text-xs text-zinc-400",children:"Merged"})]}),e.jsxs("div",{className:"flex items-center gap-2",children:[e.jsx("div",{className:"w-3 h-3 rounded bg-indigo-500/50"}),e.jsx("span",{className:"text-xs text-zinc-400",children:"Opened"})]})]})]}),e.jsxs("div",{className:"bg-zinc-900 border border-zinc-800 rounded-xl p-5",children:[e.jsx("h2",{className:"text-sm font-semibold text-zinc-300 mb-4",children:"PR Size Distribution"}),e.jsx("div",{className:"space-y-3",children:["xs","s","m","l","xl"].map(s=>{const t=l.filter(m=>m.size===s).length,d=Math.round(t/l.length*100);return e.jsxs("div",{className:"flex items-center gap-3",children:[e.jsxs("span",{className:i("text-xs px-2 py-0.5 rounded font-medium w-16",g[s]),children:["SIZE-",s.toUpperCase()]}),e.jsx("div",{className:"flex-1 bg-zinc-800 rounded-full h-2",children:e.jsx("div",{className:i("h-2 rounded-full",s==="xs"?"bg-emerald-500":s==="s"?"bg-sky-500":s==="m"?"bg-amber-500":s==="l"?"bg-orange-500":"bg-rose-500"),style:{width:`${d}%`}})}),e.jsx("span",{className:"text-xs text-zinc-400 w-8 text-right",children:t})]},s)})})]}),e.jsxs("div",{className:"bg-zinc-900 border border-zinc-800 rounded-xl p-5",children:[e.jsx("h2",{className:"text-sm font-semibold text-zinc-300 mb-4",children:"Top Reviewers (7d)"}),e.jsx("div",{className:"space-y-2",children:[{name:"alice",reviews:14,approved:9,changes:3},{name:"carol",reviews:11,approved:6,changes:4},{name:"bob",reviews:8,approved:7,changes:1},{name:"frank",reviews:6,approved:3,changes:2}].map(s=>e.jsxs("div",{className:"flex items-center gap-3",children:[e.jsx("div",{className:"w-7 h-7 rounded-full bg-zinc-700 flex items-center justify-center text-xs font-bold",children:s.name[0].toUpperCase()}),e.jsx("span",{className:"text-sm text-zinc-300 flex-1",children:s.name}),e.jsxs("span",{className:"text-xs text-zinc-500",children:[s.reviews," reviews"]}),e.jsxs("span",{className:"text-xs text-emerald-400",children:[s.approved," âœ“"]}),e.jsxs("span",{className:"text-xs text-rose-400",children:[s.changes," âœ—"]})]},s.name))})]})]})]})})}export{k as default};
