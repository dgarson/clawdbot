import{r as m,j as e,c as l}from"./index-BWIhEZ8Z.js";const C=[{label:"Aug 2025",month:"2025-08",size:1243,retention:[100,68,54,45,38,31,26,22],channels:{organic:42,paid:31,referral:18,direct:9},plans:{starter:58,pro:32,enterprise:10},avgApiUsage:12400},{label:"Sep 2025",month:"2025-09",size:1387,retention:[100,71,58,49,42,35,29,24],channels:{organic:38,paid:35,referral:16,direct:11},plans:{starter:54,pro:34,enterprise:12},avgApiUsage:14200},{label:"Oct 2025",month:"2025-10",size:1562,retention:[100,74,61,52,44,37,32,27],channels:{organic:45,paid:28,referral:19,direct:8},plans:{starter:51,pro:36,enterprise:13},avgApiUsage:15800},{label:"Nov 2025",month:"2025-11",size:1198,retention:[100,65,51,42,35,28,23,19],channels:{organic:36,paid:38,referral:14,direct:12},plans:{starter:62,pro:28,enterprise:10},avgApiUsage:10900},{label:"Dec 2025",month:"2025-12",size:982,retention:[100,62,48,39,32,26,21,17],channels:{organic:30,paid:42,referral:15,direct:13},plans:{starter:64,pro:27,enterprise:9},avgApiUsage:9500},{label:"Jan 2026",month:"2026-01",size:1721,retention:[100,76,64,55,47,40,34,29],channels:{organic:48,paid:26,referral:17,direct:9},plans:{starter:47,pro:38,enterprise:15},avgApiUsage:18300},{label:"Feb 2026",month:"2026-02",size:1654,retention:[100,73,60,51,43,36,30,25],channels:{organic:44,paid:30,referral:18,direct:8},plans:{starter:49,pro:37,enterprise:14},avgApiUsage:16700},{label:"Mar 2026",month:"2026-03",size:1489,retention:[100,70,57,47,40,33,27,23],channels:{organic:41,paid:33,referral:16,direct:10},plans:{starter:53,pro:34,enterprise:13},avgApiUsage:14800}],w=["W0","W1","W2","W3","W4","W5","W6","W7"],f=["organic","paid","referral","direct"],h=["starter","pro","enterprise"];function A(s){return s>60?"bg-emerald-500/80 text-emerald-50":s>=40?"bg-indigo-500/80 text-indigo-50":s>=20?"bg-amber-500/80 text-amber-50":"bg-rose-500/80 text-rose-50"}function y(s){return s>60?"bg-emerald-500":s>=40?"bg-indigo-500":s>=20?"bg-amber-500":"bg-rose-500"}function W(s){return{organic:"bg-emerald-500",paid:"bg-indigo-500",referral:"bg-amber-500",direct:"bg-rose-400"}[s]}function u(s){return{starter:"bg-zinc-500",pro:"bg-indigo-500",enterprise:"bg-emerald-500"}[s]}function k(s){return s>=1e3?`${(s/1e3).toFixed(1)}k`:String(s)}function S(s,t,i){return s.filter(n=>!(t!=="all"&&n.channels[t]<15||i!=="all"&&n.plans[i]<10))}function o({label:s,value:t,sub:i,accent:n}){return e.jsxs("div",{className:"bg-zinc-900 border border-zinc-800 rounded-xl p-5 flex flex-col gap-1",children:[e.jsx("span",{className:"text-zinc-400 text-xs uppercase tracking-wider font-medium",children:s}),e.jsx("span",{className:l("text-2xl font-bold",n??"text-white"),children:t}),i&&e.jsx("span",{className:"text-zinc-500 text-xs",children:i})]})}function U({cohorts:s,selectedIndex:t,onSelect:i}){return e.jsxs("div",{className:"bg-zinc-900 border border-zinc-800 rounded-xl p-5 overflow-x-auto",children:[e.jsx("h3",{className:"text-white font-semibold text-sm mb-4",children:"ðŸ“Š Retention Matrix"}),e.jsxs("div",{className:"min-w-[640px]",children:[e.jsxs("div",{className:"grid grid-cols-[140px_repeat(8,1fr)] gap-1 mb-1",children:[e.jsx("div",{className:"text-zinc-500 text-xs font-medium px-2 py-1",children:"Cohort"}),w.map(n=>e.jsx("div",{className:"text-zinc-500 text-xs font-medium text-center py-1",children:n},n))]}),s.map((n,r)=>e.jsxs("div",{onClick:()=>i(r),className:l("grid grid-cols-[140px_repeat(8,1fr)] gap-1 mb-1 cursor-pointer rounded-lg transition-all",t===r?"ring-1 ring-indigo-500 bg-zinc-800/50":"hover:bg-zinc-800/30"),children:[e.jsxs("div",{className:"flex items-center gap-2 px-2 py-1",children:[e.jsx("span",{className:"text-white text-xs font-medium",children:n.label}),e.jsxs("span",{className:"text-zinc-500 text-[10px]",children:["(",k(n.size),")"]})]}),n.retention.map((d,a)=>e.jsxs("div",{className:l("rounded text-center py-1.5 text-xs font-semibold transition-all",A(d)),children:[d,"%"]},a))]},n.month))]}),e.jsxs("div",{className:"flex items-center gap-4 mt-4 pt-3 border-t border-zinc-800",children:[e.jsx("span",{className:"text-zinc-500 text-[10px] uppercase tracking-wider",children:"Legend:"}),[{label:">60%",cls:"bg-emerald-500/80"},{label:"40-60%",cls:"bg-indigo-500/80"},{label:"20-40%",cls:"bg-amber-500/80"},{label:"<20%",cls:"bg-rose-500/80"}].map(n=>e.jsxs("div",{className:"flex items-center gap-1.5",children:[e.jsx("div",{className:l("w-3 h-3 rounded-sm",n.cls)}),e.jsx("span",{className:"text-zinc-400 text-[10px]",children:n.label})]},n.label))]})]})}function $({cohorts:s}){const t=[{label:"Week 1",idx:1},{label:"Week 4",idx:4},{label:"Week 7",idx:7}],i=100;return e.jsxs("div",{className:"bg-zinc-900 border border-zinc-800 rounded-xl p-5",children:[e.jsx("h3",{className:"text-white font-semibold text-sm mb-4",children:"ðŸ“ˆ Cohort Comparison"}),e.jsx("div",{className:"space-y-6",children:t.map(n=>e.jsxs("div",{children:[e.jsxs("div",{className:"text-zinc-400 text-xs font-medium mb-2",children:[n.label," Retention"]}),e.jsx("div",{className:"space-y-1.5",children:s.map(r=>{const d=r.retention[n.idx]??0,a=d/i*100;return e.jsxs("div",{className:"flex items-center gap-2",children:[e.jsx("span",{className:"text-zinc-500 text-[10px] w-16 text-right shrink-0",children:r.label}),e.jsx("div",{className:"flex-1 h-5 bg-zinc-800 rounded-full overflow-hidden relative",children:e.jsx("div",{className:l("h-full rounded-full transition-all",y(d)),style:{width:`${a}%`}})}),e.jsxs("span",{className:"text-zinc-300 text-[10px] w-8 shrink-0",children:[d,"%"]})]},r.month)})})]},n.label))})]})}function P({cohort:s}){return e.jsxs("div",{className:"bg-zinc-900 border border-zinc-800 rounded-xl p-5",children:[e.jsxs("h3",{className:"text-white font-semibold text-sm mb-1",children:["ðŸ” ",s.label," Details"]}),e.jsxs("p",{className:"text-zinc-500 text-xs mb-4",children:["Cohort size: ",s.size.toLocaleString()," users"]}),e.jsxs("div",{className:"mb-5",children:[e.jsx("span",{className:"text-zinc-400 text-xs font-medium uppercase tracking-wider",children:"Acquisition Channels"}),e.jsx("div",{className:"mt-2 space-y-2",children:f.map(t=>e.jsxs("div",{className:"flex items-center gap-2",children:[e.jsx("span",{className:"text-zinc-400 text-xs w-16 capitalize shrink-0",children:t}),e.jsx("div",{className:"flex-1 h-4 bg-zinc-800 rounded-full overflow-hidden",children:e.jsx("div",{className:l("h-full rounded-full",W(t)),style:{width:`${s.channels[t]}%`}})}),e.jsxs("span",{className:"text-zinc-300 text-xs w-8 shrink-0",children:[s.channels[t],"%"]})]},t))})]}),e.jsxs("div",{className:"mb-5",children:[e.jsx("span",{className:"text-zinc-400 text-xs font-medium uppercase tracking-wider",children:"Plan Distribution"}),e.jsx("div",{className:"mt-2 flex gap-1 h-6 rounded-full overflow-hidden",children:h.map(t=>e.jsx("div",{className:l("h-full flex items-center justify-center text-[10px] font-medium text-white",u(t)),style:{width:`${s.plans[t]}%`},title:`${t}: ${s.plans[t]}%`,children:s.plans[t]>12?`${t} ${s.plans[t]}%`:""},t))}),e.jsx("div",{className:"flex gap-3 mt-2",children:h.map(t=>e.jsxs("div",{className:"flex items-center gap-1.5",children:[e.jsx("div",{className:l("w-2.5 h-2.5 rounded-sm",u(t))}),e.jsxs("span",{className:"text-zinc-500 text-[10px] capitalize",children:[t," (",s.plans[t],"%)"]})]},t))})]}),e.jsxs("div",{children:[e.jsx("span",{className:"text-zinc-400 text-xs font-medium uppercase tracking-wider",children:"Avg API Usage"}),e.jsxs("div",{className:"mt-1 text-white text-lg font-bold",children:[s.avgApiUsage.toLocaleString()," ",e.jsx("span",{className:"text-zinc-500 text-xs font-normal",children:"calls / user / month"})]})]})]})}function D({channelFilter:s,planFilter:t,onChannelChange:i,onPlanChange:n}){return e.jsxs("div",{className:"flex flex-wrap items-center gap-3",children:[e.jsxs("div",{className:"flex items-center gap-2",children:[e.jsx("span",{className:"text-zinc-500 text-xs",children:"Channel:"}),e.jsx("div",{className:"flex gap-1",children:["all",...f].map(r=>e.jsx("button",{onClick:()=>i(r),className:l("px-2.5 py-1 rounded-md text-xs font-medium transition-colors",s===r?"bg-indigo-500 text-white":"bg-zinc-800 text-zinc-400 hover:bg-zinc-700 hover:text-zinc-300"),children:r==="all"?"All":r.charAt(0).toUpperCase()+r.slice(1)},r))})]}),e.jsxs("div",{className:"flex items-center gap-2",children:[e.jsx("span",{className:"text-zinc-500 text-xs",children:"Plan:"}),e.jsx("div",{className:"flex gap-1",children:["all",...h].map(r=>e.jsx("button",{onClick:()=>n(r),className:l("px-2.5 py-1 rounded-md text-xs font-medium transition-colors",t===r?"bg-indigo-500 text-white":"bg-zinc-800 text-zinc-400 hover:bg-zinc-700 hover:text-zinc-300"),children:r==="all"?"All":r.charAt(0).toUpperCase()+r.slice(1)},r))})]})]})}function M(){const[s,t]=m.useState(null),[i,n]=m.useState("all"),[r,d]=m.useState("all"),a=S(C,i,r),j=a.length>0?Math.round(a.reduce((c,x)=>c+x.retention[1],0)/a.length):0,N=a.length>0?Math.round(a.reduce((c,x)=>c+(x.retention[3]??0),0)/a.length):0,v=a.length>0?Math.round(a.reduce((c,x)=>c+(x.retention[7]??0),0)/a.length):0;let p="",g="";if(a.length>0){const c=[...a].sort((x,z)=>z.retention[4]-x.retention[4]);p=c[0].label,g=c[c.length-1].label}const b=s!==null&&s<a.length?a[s]:null;return e.jsx("div",{className:"min-h-screen bg-zinc-950 p-6 md:p-8",children:e.jsxs("div",{className:"max-w-7xl mx-auto space-y-6",children:[e.jsxs("div",{className:"flex flex-col sm:flex-row sm:items-center sm:justify-between gap-4",children:[e.jsxs("div",{children:[e.jsx("h1",{className:"text-white text-2xl font-bold",children:"Cohort Analysis"}),e.jsx("p",{className:"text-zinc-400 text-sm mt-1",children:"User retention and cohort performance Â· Aug 2025 â€“ Mar 2026"})]}),e.jsx(D,{channelFilter:i,planFilter:r,onChannelChange:n,onPlanChange:d})]}),e.jsxs("div",{className:"grid grid-cols-2 md:grid-cols-5 gap-3",children:[e.jsx(o,{label:"Avg W1 Retention",value:`${j}%`,accent:"text-emerald-400"}),e.jsx(o,{label:"Avg W3 Retention",value:`${N}%`,accent:"text-indigo-400"}),e.jsx(o,{label:"Avg W7 Retention",value:`${v}%`,accent:"text-amber-400"}),e.jsx(o,{label:"Best Cohort",value:p||"â€”",sub:"Highest W4 retention",accent:"text-emerald-400"}),e.jsx(o,{label:"Worst Cohort",value:g||"â€”",sub:"Lowest W4 retention",accent:"text-rose-400"})]}),e.jsx(U,{cohorts:a,selectedIndex:s,onSelect:t}),e.jsxs("div",{className:"grid grid-cols-1 lg:grid-cols-2 gap-4",children:[e.jsx($,{cohorts:a}),b?e.jsx(P,{cohort:b}):e.jsx("div",{className:"bg-zinc-900 border border-zinc-800 rounded-xl p-5 flex items-center justify-center",children:e.jsxs("div",{className:"text-center",children:[e.jsx("span",{className:"text-3xl mb-2 block",children:"ðŸ‘†"}),e.jsx("p",{className:"text-zinc-400 text-sm",children:"Click a cohort row to view details"})]})})]})]})})}export{M as default};
