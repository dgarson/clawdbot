import{r as m,j as e,c as r}from"./index-CleR6dBN.js";const o=[{id:"cf-001",path:"workspace/luis/AGENTS.md",kind:"agent",validatedAt:"2026-02-22 02:21",results:[{id:"r1",name:"Schema Validation",description:"Validate required AGENTS.md fields",status:"pass",duration:12,issues:[]},{id:"r2",name:"Memory Protocol",description:"Check memory file references",status:"warning",duration:8,issues:[{id:"i1",severity:"warning",category:"schema",path:"memory/YYYY-MM-DD.md",message:"Memory path references date pattern but no validation rule enforces format",suggestion:"Add a memory format validator or document expected structure",ruleId:"MEM-001"}]},{id:"r3",name:"Security Scan",description:"Check for exposed secrets or unsafe patterns",status:"pass",duration:5,issues:[]},{id:"r4",name:"Heartbeat Config",description:"Validate heartbeat step ordering",status:"pass",duration:4,issues:[]}]},{id:"cf-002",path:"workspace/_shared/cron.yaml",kind:"cron",validatedAt:"2026-02-22 02:00",results:[{id:"r1",name:"Cron Syntax Check",description:"Validate all cron expressions",status:"fail",duration:15,issues:[{id:"i1",severity:"error",category:"schema",path:"jobs[3].schedule",message:"Invalid cron expression: '0 */25 * * *' — hour value 25 out of range 0-23",suggestion:"Use '0 */1 * * *' for hourly or specify a valid hour (0-23)",ruleId:"CRON-002"}]},{id:"r2",name:"Agent Reference Check",description:"All referenced agents must exist",status:"warning",duration:22,issues:[{id:"i2",severity:"warning",category:"compatibility",path:"jobs[7].agent",message:"Agent 'sam' is referenced but not in active roster",suggestion:"Remove job or update agent reference to an active agent",ruleId:"CRON-005"}]},{id:"r3",name:"Overlap Detection",description:"Check for jobs that may conflict",status:"pass",duration:18,issues:[]}]},{id:"cf-003",path:"openclaw.gateway.config.json",kind:"gateway",validatedAt:"2026-02-22 01:55",results:[{id:"r1",name:"Port Availability",description:"Check configured port is not already in use",status:"pass",duration:30,issues:[]},{id:"r2",name:"TLS Configuration",description:"Validate TLS cert and key paths",status:"fail",duration:8,issues:[{id:"i1",severity:"error",category:"security",path:"tls.certPath",message:"TLS certificate file not found: /etc/openclaw/tls/cert.pem",suggestion:"Generate a self-signed cert or point to a valid certificate file",ruleId:"SEC-004"},{id:"i2",severity:"error",category:"security",path:"tls.keyPath",message:"TLS key file not found: /etc/openclaw/tls/key.pem",suggestion:"Ensure private key exists at the configured path",ruleId:"SEC-005"}]},{id:"r3",name:"Rate Limit Config",description:"Validate rate limit configuration",status:"warning",duration:6,issues:[{id:"i3",severity:"warning",category:"performance",path:"rateLimits.global.burst",message:"Burst limit (500) is unusually high for a gateway config — may allow traffic spikes",suggestion:"Consider reducing burst to 100-200 for more predictable behavior",ruleId:"PERF-002"}]},{id:"r4",name:"Deprecation Check",description:"Check for deprecated config fields",status:"warning",duration:4,issues:[{id:"i4",severity:"info",category:"deprecation",path:"legacyAuth.enabled",message:"legacyAuth is deprecated and will be removed in v2.0",suggestion:"Migrate to OAuth2 authentication: see docs/auth-migration.md",ruleId:"DEP-003"}]}]},{id:"cf-004",path:"workspace/_shared/tool-policy.json",kind:"tool",validatedAt:"2026-02-22 01:50",results:[{id:"r1",name:"Policy Schema",description:"Validate tool policy JSON schema",status:"pass",duration:9,issues:[]},{id:"r2",name:"Permission Consistency",description:"Check for conflicting allow/deny rules",status:"pass",duration:14,issues:[]},{id:"r3",name:"Required Fields",description:"All tool entries must have description and version",status:"warning",duration:11,issues:[{id:"i1",severity:"warning",category:"schema",path:"tools[12].description",message:"Tool 'voice_call' is missing a description field",suggestion:"Add a description explaining the tool's purpose and capabilities",ruleId:"SCHEMA-007"}]}]}],N={error:"bg-rose-500/10 text-rose-400 ring-1 ring-rose-500/20",warning:"bg-amber-500/10 text-amber-400 ring-1 ring-amber-500/20",info:"bg-sky-500/10 text-sky-400 ring-1 ring-sky-500/20"},w={error:"bg-rose-400",warning:"bg-amber-400",info:"bg-sky-400"},h={pass:"text-emerald-400",fail:"text-rose-400",warning:"text-amber-400",skipped:"text-zinc-500"},f={pass:"✓",fail:"✗",warning:"⚠",skipped:"–"},k={agent:"bg-indigo-500/10 text-indigo-400",cron:"bg-amber-500/10 text-amber-400",gateway:"bg-emerald-500/10 text-emerald-400",tool:"bg-violet-500/10 text-violet-400",integration:"bg-sky-500/10 text-sky-400"},S={schema:"text-violet-400",security:"text-rose-400",performance:"text-amber-400",compatibility:"text-sky-400",deprecation:"text-zinc-400"};function z(l){const c=l.results.flatMap(t=>t.issues);return c.some(t=>t.severity==="error")?"fail":c.some(t=>t.severity==="warning")?"warning":"pass"}function A(){const[l,c]=m.useState("cf-001"),[t,v]=m.useState("all"),[b,y]=m.useState(new Set(["r2"])),d=o.find(s=>s.id===l)??o[0],x=d.results.flatMap(s=>s.issues);t==="all"||x.filter(s=>s.severity===t);const u=o.flatMap(s=>s.results.flatMap(i=>i.issues)).filter(s=>s.severity==="error").length,g=o.flatMap(s=>s.results.flatMap(i=>i.issues)).filter(s=>s.severity==="warning").length;function j(s){y(i=>{const a=new Set(i);return a.has(s)?a.delete(s):a.add(s),a})}return e.jsxs("div",{className:"h-full flex flex-col bg-zinc-950 overflow-hidden",children:[e.jsxs("div",{className:"shrink-0 border-b border-zinc-800 px-5 py-3 flex items-center gap-4",children:[e.jsxs("div",{children:[e.jsx("h1",{className:"text-sm font-semibold text-white",children:"Config Validator"}),e.jsxs("p",{className:"text-xs text-zinc-500 mt-0.5",children:[o.length," files · ",u," errors · ",g," warnings"]})]}),e.jsxs("div",{className:"ml-auto flex gap-2",children:[e.jsxs("span",{className:"text-xs px-2 py-1 bg-rose-500/10 text-rose-400 ring-1 ring-rose-500/20 rounded font-medium",children:[u," errors"]}),e.jsxs("span",{className:"text-xs px-2 py-1 bg-amber-500/10 text-amber-400 ring-1 ring-amber-500/20 rounded font-medium",children:[g," warnings"]})]})]}),e.jsxs("div",{className:"flex-1 flex overflow-hidden",children:[e.jsx("ul",{className:"w-64 shrink-0 border-r border-zinc-800 overflow-y-auto divide-y divide-zinc-800/50",role:"listbox","aria-label":"Config files",children:o.map(s=>{const i=z(s),a=s.results.flatMap(p=>p.issues).length;return e.jsx("li",{children:e.jsxs("button",{role:"option","aria-selected":s.id===l,onClick:()=>c(s.id),className:r("w-full text-left px-4 py-3 hover:bg-zinc-800/60 transition-colors focus-visible:outline-none focus-visible:ring-2 focus-visible:ring-inset focus-visible:ring-indigo-500",s.id===l&&"bg-zinc-800 border-l-2 border-indigo-500"),children:[e.jsxs("div",{className:"flex items-start justify-between gap-2",children:[e.jsx("span",{className:"text-xs font-medium text-zinc-200 leading-tight break-all",children:s.path.split("/").pop()}),e.jsx("span",{className:r("shrink-0 font-bold",h[i]),children:f[i]})]}),e.jsxs("div",{className:"mt-1 flex items-center gap-2",children:[e.jsx("span",{className:r("text-xs px-1.5 py-0.5 rounded",k[s.kind]),children:s.kind}),a>0&&e.jsxs("span",{className:"text-xs text-zinc-500",children:[a," issue",a!==1?"s":""]})]}),e.jsx("div",{className:"mt-1 text-xs text-zinc-600",children:s.validatedAt})]})},s.id)})}),e.jsxs("div",{className:"flex-1 overflow-y-auto",children:[e.jsxs("div",{className:"sticky top-0 bg-zinc-950 border-b border-zinc-800 px-5 py-3 flex items-center justify-between z-10",children:[e.jsxs("div",{children:[e.jsx("div",{className:"text-sm font-semibold text-white",children:d.path}),e.jsxs("div",{className:"text-xs text-zinc-500 mt-0.5",children:[d.results.length," validators · ",x.length," issues · ",d.validatedAt]})]}),e.jsx("div",{className:"flex gap-1.5",children:["all","error","warning","info"].map(s=>e.jsx("button",{onClick:()=>v(s),className:r("px-2 py-1 rounded text-xs font-medium transition-colors focus-visible:outline-none focus-visible:ring-2 focus-visible:ring-indigo-500",t===s?"bg-indigo-600 text-white":"bg-zinc-800 text-zinc-400 hover:text-zinc-200"),children:s==="all"?"All":s.charAt(0).toUpperCase()+s.slice(1)},s))})]}),e.jsx("div",{className:"p-5 space-y-3",children:d.results.map(s=>{const i=b.has(s.id),a=s.issues.filter(n=>t==="all"||n.severity===t);return t==="all"||a.length>0?e.jsxs("div",{className:"bg-zinc-900 rounded-lg border border-zinc-800 overflow-hidden",children:[e.jsxs("button",{onClick:()=>j(s.id),className:"w-full flex items-center gap-3 px-4 py-3 hover:bg-zinc-800/40 transition-colors focus-visible:outline-none focus-visible:ring-2 focus-visible:ring-inset focus-visible:ring-indigo-500","aria-expanded":i,children:[e.jsx("span",{className:r("text-sm font-bold w-4",h[s.status]),children:f[s.status]}),e.jsxs("div",{className:"flex-1 text-left",children:[e.jsx("div",{className:"text-xs font-semibold text-zinc-200",children:s.name}),e.jsx("div",{className:"text-xs text-zinc-500",children:s.description})]}),e.jsxs("div",{className:"flex items-center gap-2 shrink-0",children:[s.issues.length>0&&e.jsxs("span",{className:"text-xs text-zinc-500",children:[s.issues.length," issue",s.issues.length!==1?"s":""]}),e.jsxs("span",{className:"text-xs text-zinc-600",children:[s.duration,"ms"]}),e.jsx("span",{className:"text-zinc-500 text-xs",children:i?"▲":"▼"})]})]}),i&&e.jsx("div",{className:"border-t border-zinc-800",children:a.length===0?e.jsxs("div",{className:"px-4 py-3 text-xs text-emerald-400 flex items-center gap-2",children:[e.jsx("span",{children:"✓"})," All checks passed"]}):e.jsx("div",{className:"divide-y divide-zinc-800/50",children:a.map(n=>e.jsx("div",{className:"px-4 py-3",children:e.jsxs("div",{className:"flex items-start gap-2",children:[e.jsx("span",{className:r("shrink-0 w-1.5 h-1.5 rounded-full mt-1.5",w[n.severity])}),e.jsxs("div",{className:"flex-1 min-w-0",children:[e.jsxs("div",{className:"flex items-center gap-2 flex-wrap",children:[e.jsx("span",{className:r("text-xs px-1.5 py-0.5 rounded font-medium",N[n.severity]),children:n.severity}),e.jsx("code",{className:"text-xs text-zinc-400 font-mono",children:n.path}),e.jsxs("span",{className:r("text-xs font-mono",S[n.category]),children:["[",n.ruleId,"]"]})]}),e.jsx("p",{className:"text-xs text-zinc-200 mt-1.5 leading-relaxed",children:n.message}),e.jsxs("div",{className:"mt-1.5 flex items-start gap-1.5",children:[e.jsx("span",{className:"text-xs text-indigo-400 shrink-0",children:"→"}),e.jsx("p",{className:"text-xs text-zinc-400 leading-relaxed",children:n.suggestion})]})]})]})},n.id))})})]},s.id):null})})]})]})]})}export{A as default};
