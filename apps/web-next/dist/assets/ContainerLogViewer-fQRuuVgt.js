import{r as a,j as e,c as r}from"./index-4yfaAu2f.js";const d=[{name:"api-server-7d8f9b-xkj2p",namespace:"production",containers:["api","envoy"],status:"running",restarts:0,age:"3d",errorRate:.2},{name:"api-server-7d8f9b-m3n4q",namespace:"production",containers:["api","envoy"],status:"running",restarts:1,age:"3d",errorRate:.4},{name:"worker-5c6d7e-abcxy",namespace:"production",containers:["worker"],status:"running",restarts:0,age:"1d",errorRate:0},{name:"ml-inference-9a8b7c-pqrs1",namespace:"production",containers:["inference","sidecar"],status:"running",restarts:2,age:"6h",errorRate:1.2},{name:"migration-job-20260222",namespace:"production",containers:["migrate"],status:"completed",restarts:0,age:"2h",errorRate:0},{name:"scheduler-4f5g6h-ijk3l",namespace:"production",containers:["scheduler"],status:"running",restarts:0,age:"5d",errorRate:.1},{name:"redis-0",namespace:"production",containers:["redis","metrics"],status:"running",restarts:0,age:"7d",errorRate:0},{name:"postgres-primary-0",namespace:"production",containers:["postgres","metrics"],status:"running",restarts:0,age:"30d",errorRate:0},{name:"ingress-nginx-controller-xyz9",namespace:"ingress",containers:["nginx"],status:"running",restarts:0,age:"14d",errorRate:0},{name:"cert-manager-abc12-qwe34",namespace:"cert-manager",containers:["controller"],status:"running",restarts:0,age:"30d",errorRate:0}],v=[{id:"l1",ts:"14:32:01.234",level:"info",pod:"api-server-7d8f9b-xkj2p",container:"api",namespace:"production",message:"POST /api/v2/payments 200 OK (142ms)",fields:{req_id:"req_8k3j2",user_id:"u_1234",amount:"99.00"}},{id:"l2",ts:"14:32:01.891",level:"error",pod:"ml-inference-9a8b7c-pqrs1",container:"inference",namespace:"production",message:"Model prediction timeout after 5000ms, falling back to cache",fields:{model:"fraud-v3",request_id:"inf_7723"}},{id:"l3",ts:"14:32:02.103",level:"info",pod:"api-server-7d8f9b-m3n4q",container:"api",namespace:"production",message:"GET /api/v2/users/profile 200 OK (23ms)",fields:{req_id:"req_9l4k3",user_id:"u_5678"}},{id:"l4",ts:"14:32:02.445",level:"warn",pod:"worker-5c6d7e-abcxy",container:"worker",namespace:"production",message:"Job queue depth exceeding threshold: 847 pending jobs",fields:{queue:"email",threshold:"500"}},{id:"l5",ts:"14:32:02.789",level:"debug",pod:"scheduler-4f5g6h-ijk3l",container:"scheduler",namespace:"production",message:"Scheduled job churn-predictor-nightly will run in 127s",fields:{job_id:"job_chn_002",cron:"0 2 * * *"}},{id:"l6",ts:"14:32:03.012",level:"error",pod:"ml-inference-9a8b7c-pqrs1",container:"inference",namespace:"production",message:"CUDA device out of memory: tried to allocate 512MB",fields:{device:"cuda:0",free_mb:"312",total_gb:"40"}},{id:"l7",ts:"14:32:03.334",level:"info",pod:"redis-0",container:"redis",namespace:"production",message:"Keyspace notification: expired key user:session:u_9012",fields:{key:"user:session:u_9012",ttl_was:"3600"}},{id:"l8",ts:"14:32:03.677",level:"info",pod:"api-server-7d8f9b-xkj2p",container:"api",namespace:"production",message:"POST /api/v2/auth/login 200 OK (89ms)",fields:{req_id:"req_2m5n6",user_id:"u_3456"}},{id:"l9",ts:"14:32:04.001",level:"warn",pod:"postgres-primary-0",container:"postgres",namespace:"production",message:"Slow query detected: 2342ms (threshold: 1000ms)",fields:{query_hash:"qh_b7c4d2",table:"transactions",rows:"4.2M"}},{id:"l10",ts:"14:32:04.289",level:"fatal",pod:"ml-inference-9a8b7c-pqrs1",container:"inference",namespace:"production",message:"Process exiting: unhandled exception in inference loop",fields:{exit_code:"1",signal:"SIGABRT"}},{id:"l11",ts:"14:32:04.556",level:"info",pod:"api-server-7d8f9b-m3n4q",container:"envoy",namespace:"production",message:"Health check passed: upstream api:8080 is healthy",fields:{upstream:"api:8080"}},{id:"l12",ts:"14:32:04.891",level:"info",pod:"worker-5c6d7e-abcxy",container:"worker",namespace:"production",message:"Processed email job job_email_3421 in 234ms",fields:{job_id:"job_email_3421",recipient:"user@example.com"}},{id:"l13",ts:"14:32:05.123",level:"warn",pod:"ingress-nginx-controller-xyz9",container:"nginx",namespace:"ingress",message:"Rate limit triggered for IP 192.168.45.23 on /api/v2/",fields:{ip:"192.168.45.23",limit:"100/min",current:"142/min"}},{id:"l14",ts:"14:32:05.445",level:"debug",pod:"scheduler-4f5g6h-ijk3l",container:"scheduler",namespace:"production",message:"Lock acquired for job weekly-report-generator",fields:{job_id:"job_rpt_007",ttl:"300s"}},{id:"l15",ts:"14:32:05.889",level:"error",pod:"api-server-7d8f9b-xkj2p",container:"api",namespace:"production",message:"Database connection pool exhausted: 50/50 connections in use",fields:{pool:"primary",max_conn:"50",waiting:"3"}}],u=[{id:"a1",name:"Fatal errors",pattern:"level:fatal",level:"fatal",count:5,window:"5m",lastFired:"1m ago",enabled:!0},{id:"a2",name:"DB connection exhausted",pattern:"connection pool exhausted",level:"error",count:3,window:"10m",lastFired:"1m ago",enabled:!0},{id:"a3",name:"OOM events",pattern:"out of memory",level:"error",count:2,window:"5m",lastFired:"2m ago",enabled:!0},{id:"a4",name:"High queue depth",pattern:"queue depth exceeding",level:"warn",count:10,window:"15m",lastFired:"2m ago",enabled:!0},{id:"a5",name:"Slow queries",pattern:"Slow query detected",level:"warn",count:5,window:"5m",lastFired:"30m ago",enabled:!0},{id:"a6",name:"Rate limit triggers",pattern:"Rate limit triggered",level:"warn",count:20,window:"1m",lastFired:"30s ago",enabled:!1}],N={debug:"text-zinc-500",info:"text-sky-400",warn:"text-amber-400",error:"text-rose-400",fatal:"text-purple-400"},O={debug:"bg-zinc-700/30",info:"bg-sky-500/5",warn:"bg-amber-500/5",error:"bg-rose-500/8",fatal:"bg-purple-500/10 border-l-2 border-purple-500"},z={debug:"bg-zinc-700/40 text-zinc-500",info:"bg-sky-500/10 text-sky-400",warn:"bg-amber-500/10 text-amber-400",error:"bg-rose-500/10 text-rose-400",fatal:"bg-purple-500/15 text-purple-400 font-bold"},F={running:"bg-emerald-400",pending:"bg-amber-400 animate-pulse",failed:"bg-rose-400",completed:"bg-zinc-500"};function A(){const[t,h]=a.useState("live"),[o,b]=a.useState("all"),[c,w]=a.useState("all"),[i,y]=a.useState(""),[m,k]=a.useState(null),[x,_]=a.useState("all"),[g,q]=a.useState(!1),[f,S]=a.useState(!0),p=v.filter(s=>{if(o!=="all"&&s.pod!==o||c!=="all"&&s.level!==c||x!=="all"&&s.namespace!==x)return!1;if(i){const n=i.toLowerCase();return s.message.toLowerCase().includes(n)||s.pod.toLowerCase().includes(n)||Object.values(s.fields).some(l=>l.toLowerCase().includes(n))}return!0}),L=v.reduce((s,n)=>(s[n.level]=(s[n.level]||0)+1,s),{}),C=[{id:"live",label:"Live Logs",emoji:"ðŸ“¡"},{id:"search",label:"Search",emoji:"ðŸ”"},{id:"pods",label:"Pods",emoji:"ðŸ“¦"},{id:"alerts",label:"Alerts",emoji:"ðŸ””"}],R=[...new Set(d.map(s=>s.namespace))],j=s=>e.jsxs("div",{children:[e.jsxs("div",{className:r("flex items-start gap-0 px-3 py-1 font-mono text-xs cursor-pointer hover:brightness-125 transition-all",O[s.level],m===s.id&&"border-b border-zinc-700"),onClick:()=>k(m===s.id?null:s.id),children:[e.jsx("span",{className:"text-zinc-600 w-20 shrink-0 pt-0.5",children:s.ts}),e.jsx("span",{className:r("w-12 shrink-0 text-center mr-2 rounded px-1 pt-0.5",z[s.level]),children:s.level}),e.jsx("span",{className:"text-indigo-400 w-44 shrink-0 truncate pt-0.5",title:s.pod,children:s.pod.split("-").slice(0,2).join("-")}),e.jsx("span",{className:"text-zinc-500 w-20 shrink-0 pt-0.5",children:s.container}),e.jsx("span",{className:r(N[s.level],g?"break-all":"truncate","flex-1 pt-0.5"),children:s.message}),f&&Object.keys(s.fields).length>0&&e.jsx("span",{className:"text-zinc-600 ml-2 shrink-0 pt-0.5 text-xs",children:Object.entries(s.fields).slice(0,2).map(([n,l])=>e.jsxs("span",{className:"mr-2",children:[e.jsxs("span",{className:"text-zinc-700",children:[n,"="]}),e.jsx("span",{className:"text-zinc-500",children:l})]},n))})]}),m===s.id&&e.jsxs("div",{className:"px-4 py-3 bg-zinc-900/80 border-b border-zinc-800 font-mono text-xs",children:[e.jsxs("div",{className:"grid grid-cols-2 gap-x-8 gap-y-1 mb-2",children:[e.jsxs("div",{children:[e.jsx("span",{className:"text-zinc-600",children:"pod: "}),e.jsx("span",{className:"text-zinc-300",children:s.pod})]}),e.jsxs("div",{children:[e.jsx("span",{className:"text-zinc-600",children:"namespace: "}),e.jsx("span",{className:"text-zinc-300",children:s.namespace})]}),e.jsxs("div",{children:[e.jsx("span",{className:"text-zinc-600",children:"container: "}),e.jsx("span",{className:"text-zinc-300",children:s.container})]}),e.jsxs("div",{children:[e.jsx("span",{className:"text-zinc-600",children:"timestamp: "}),e.jsx("span",{className:"text-zinc-300",children:s.ts})]})]}),Object.keys(s.fields).length>0&&e.jsxs("div",{children:[e.jsx("div",{className:"text-zinc-600 mb-1",children:"fields:"}),e.jsx("div",{className:"grid grid-cols-2 gap-x-8 gap-y-1 ml-2",children:Object.entries(s.fields).map(([n,l])=>e.jsxs("div",{children:[e.jsxs("span",{className:"text-sky-600",children:[n,": "]}),e.jsx("span",{className:"text-zinc-300",children:l})]},n))})]})]})]},s.id);return e.jsxs("div",{className:"flex flex-col h-full bg-zinc-950 text-white",children:[e.jsxs("div",{className:"flex items-center justify-between px-6 py-4 border-b border-zinc-800",children:[e.jsxs("div",{children:[e.jsx("h1",{className:"text-xl font-semibold tracking-tight",children:"Container Log Viewer"}),e.jsxs("p",{className:"text-xs text-zinc-500 mt-0.5",children:["Kubernetes Â· production cluster Â· ",d.length," pods"]})]}),e.jsx("div",{className:"flex items-center gap-2",children:e.jsxs("div",{className:"flex items-center gap-1.5 px-2 py-1 rounded bg-emerald-500/10 border border-emerald-500/30",children:[e.jsx("div",{className:"w-1.5 h-1.5 rounded-full bg-emerald-400 animate-pulse"}),e.jsx("span",{className:"text-xs text-emerald-400 font-medium",children:"Streaming"})]})})]}),e.jsx("div",{className:"flex gap-0 border-b border-zinc-800",children:["fatal","error","warn","info","debug"].map(s=>e.jsxs("button",{onClick:()=>w(c===s?"all":s),className:r("flex-1 py-2 text-xs font-medium transition-colors border-b-2",c===s?"border-indigo-500 bg-indigo-500/5":"border-transparent hover:bg-zinc-900"),children:[e.jsx("span",{className:N[s],children:s.toUpperCase()}),e.jsxs("span",{className:"text-zinc-600 ml-1",children:["(",L[s]||0,")"]})]},s))}),e.jsx("div",{className:"flex border-b border-zinc-800 px-6",children:C.map(s=>e.jsxs("button",{onClick:()=>h(s.id),className:r("flex items-center gap-1.5 px-4 py-3 text-sm font-medium border-b-2 transition-colors",t===s.id?"border-indigo-500 text-white":"border-transparent text-zinc-500 hover:text-zinc-300"),children:[e.jsx("span",{children:s.emoji}),s.label]},s.id))}),e.jsxs("div",{className:"flex-1 overflow-auto",children:[t==="live"&&e.jsxs("div",{className:"flex flex-col h-full",children:[e.jsxs("div",{className:"flex items-center gap-2 px-4 py-2 border-b border-zinc-800 bg-zinc-900/40",children:[e.jsxs("select",{value:o,onChange:s=>b(s.target.value),className:"bg-zinc-900 border border-zinc-700 rounded px-2 py-1 text-xs text-zinc-300 w-48",children:[e.jsx("option",{value:"all",children:"All pods"}),d.map(s=>e.jsx("option",{value:s.name,children:s.name.split("-").slice(0,2).join("-")},s.name))]}),e.jsxs("select",{value:x,onChange:s=>_(s.target.value),className:"bg-zinc-900 border border-zinc-700 rounded px-2 py-1 text-xs text-zinc-300",children:[e.jsx("option",{value:"all",children:"All namespaces"}),R.map(s=>e.jsx("option",{value:s,children:s},s))]}),e.jsxs("div",{className:"flex items-center gap-3 ml-auto text-xs text-zinc-500",children:[e.jsxs("label",{className:"flex items-center gap-1.5 cursor-pointer",children:[e.jsx("input",{type:"checkbox",checked:g,onChange:s=>q(s.target.checked),className:"w-3 h-3"}),"Wrap"]}),e.jsxs("label",{className:"flex items-center gap-1.5 cursor-pointer",children:[e.jsx("input",{type:"checkbox",checked:f,onChange:s=>S(s.target.checked),className:"w-3 h-3"}),"Show fields"]}),e.jsx("button",{className:"px-2 py-1 bg-zinc-800 hover:bg-zinc-700 rounded border border-zinc-700 transition-colors",children:"â¬‡ Download"})]})]}),e.jsx("div",{className:"flex-1 overflow-y-auto",children:e.jsx("div",{className:"divide-y divide-zinc-800/30",children:p.map(j)})})]}),t==="search"&&e.jsxs("div",{className:"flex flex-col h-full",children:[e.jsxs("div",{className:"p-4 border-b border-zinc-800",children:[e.jsx("input",{type:"text",placeholder:'Search logs... (e.g. "error", pod:api-server, "timeout")',value:i,onChange:s=>y(s.target.value),className:"w-full bg-zinc-900 border border-zinc-700 rounded px-4 py-2.5 text-sm text-zinc-300 placeholder-zinc-600 outline-none focus:border-indigo-500 font-mono"}),e.jsxs("div",{className:"flex items-center gap-2 mt-2 text-xs text-zinc-500",children:[e.jsx("span",{className:"px-2 py-0.5 bg-zinc-800 rounded font-mono",children:"level:error"}),e.jsx("span",{className:"px-2 py-0.5 bg-zinc-800 rounded font-mono",children:"pod:api-server*"}),e.jsx("span",{className:"px-2 py-0.5 bg-zinc-800 rounded font-mono",children:'"connection refused"'}),e.jsx("span",{className:"px-2 py-0.5 bg-zinc-800 rounded font-mono",children:"container:envoy"})]})]}),e.jsx("div",{className:"flex-1 overflow-y-auto",children:i?e.jsxs("div",{children:[e.jsxs("div",{className:"px-4 py-2 text-xs text-zinc-500 border-b border-zinc-800",children:[p.length,' results for "',i,'"']}),e.jsx("div",{className:"divide-y divide-zinc-800/30",children:p.map(j)})]}):e.jsx("div",{className:"flex items-center justify-center h-full text-zinc-600 text-sm",children:"Enter a search query to filter logs"})})]}),t==="pods"&&e.jsx("div",{className:"p-6",children:e.jsx("div",{className:"space-y-2",children:d.map(s=>e.jsxs("div",{className:"bg-zinc-900 rounded-lg border border-zinc-800 px-5 py-4 cursor-pointer hover:border-zinc-700 transition-colors",onClick:()=>{h("live"),b(s.name)},children:[e.jsxs("div",{className:"flex items-center justify-between mb-2",children:[e.jsxs("div",{className:"flex items-center gap-3",children:[e.jsx("div",{className:r("w-2 h-2 rounded-full shrink-0",F[s.status])}),e.jsxs("div",{children:[e.jsx("span",{className:"font-mono text-sm text-white",children:s.name}),e.jsx("span",{className:"text-xs text-zinc-500 ml-2",children:s.namespace})]})]}),e.jsxs("div",{className:"flex items-center gap-4 text-xs text-zinc-500",children:[s.restarts>0&&e.jsxs("span",{className:r("font-medium",s.restarts>1?"text-amber-400":"text-zinc-400"),children:[s.restarts," restarts"]}),e.jsxs("span",{children:["age: ",s.age]}),s.errorRate>0&&e.jsxs("span",{className:r("font-medium",s.errorRate>1?"text-rose-400":"text-amber-400"),children:[s.errorRate.toFixed(1)," err/s"]}),e.jsx("span",{className:r("px-2 py-0.5 rounded text-xs",s.status==="running"?"bg-emerald-500/10 text-emerald-400":s.status==="failed"?"bg-rose-500/10 text-rose-400":s.status==="pending"?"bg-amber-500/10 text-amber-400":"bg-zinc-700/30 text-zinc-500"),children:s.status})]})]}),e.jsx("div",{className:"flex gap-2",children:s.containers.map(n=>e.jsx("span",{className:"text-xs px-2 py-0.5 bg-zinc-800 rounded font-mono text-zinc-400",children:n},n))})]},s.name))})}),t==="alerts"&&e.jsxs("div",{className:"p-6 space-y-4",children:[e.jsxs("div",{className:"flex items-center justify-between mb-2",children:[e.jsx("h2",{className:"text-sm font-semibold text-zinc-300",children:"Log Alerts"}),e.jsx("button",{className:"px-3 py-1.5 text-xs bg-indigo-600 hover:bg-indigo-500 rounded text-white transition-colors",children:"+ New Alert"})]}),u.filter(s=>s.enabled).length>0&&e.jsxs("div",{className:"bg-rose-500/10 border border-rose-500/30 rounded-lg px-4 py-3 flex items-center gap-3",children:[e.jsxs("span",{className:"text-rose-400 font-medium text-sm",children:["ðŸ”” ",u.filter(s=>s.enabled&&s.lastFired.includes("m ago")).length," alerts firing"]}),e.jsx("span",{className:"text-xs text-rose-300/60",children:"ml-inference OOM, DB connection exhaustion, high queue depth"})]}),e.jsx("div",{className:"space-y-2",children:u.map(s=>e.jsxs("div",{className:r("bg-zinc-900 rounded-lg border px-5 py-4",s.enabled?"border-zinc-700":"border-zinc-800 opacity-60"),children:[e.jsxs("div",{className:"flex items-center justify-between",children:[e.jsxs("div",{className:"flex items-center gap-3",children:[e.jsx("span",{className:r("text-xs px-2 py-0.5 rounded font-medium",z[s.level]),children:s.level}),e.jsx("span",{className:"font-medium text-sm text-zinc-200",children:s.name})]}),e.jsxs("div",{className:"flex items-center gap-3",children:[e.jsxs("span",{className:"text-xs text-zinc-500",children:["last: ",s.lastFired]}),e.jsx("label",{className:"flex items-center gap-1.5 cursor-pointer",children:e.jsx("div",{className:r("w-8 h-4 rounded-full transition-colors relative",s.enabled?"bg-indigo-600":"bg-zinc-700"),children:e.jsx("div",{className:r("absolute top-0.5 w-3 h-3 rounded-full bg-white transition-transform",s.enabled?"translate-x-4":"translate-x-0.5")})})})]})]}),e.jsxs("div",{className:"mt-2 flex items-center gap-4 text-xs text-zinc-500",children:[e.jsxs("span",{children:["Pattern: ",e.jsx("span",{className:"font-mono text-zinc-400",children:s.pattern})]}),e.jsxs("span",{children:["Threshold: ",s.count," occurrences in ",s.window]})]})]},s.id))})]})]})]})}export{A as default};
