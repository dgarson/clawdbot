import{r as g,j as e,c as d}from"./index-SfRm27bA.js";function h(o,u,v,w,f,b){return{id:o,agentName:u,model:v,tokenCount:w,maxTokens:2e5,status:f,segments:b}}const U=[h("sess-001","Luis","claude-sonnet-4-6",142300,"active",{systemPrompt:{sizeTokens:4200,preview:"You are Luis, Principal UX Engineer. You lead the Product & UI Squad which owns the user interface, design system..."},projectFiles:[{name:"AGENTS.md",sizeTokens:3800,preview:`# AGENTS.md — Luis (Principal UX Engineer)

## Role
**Principal UX Engineer** — bridge between design...`},{name:"TOOLS.md",sizeTokens:5100,preview:`# TOOLS.md — Luis, Principal UX Engineer

## Who You Are
**Luis** — Principal UX Engineer...`},{name:"CONTEXT.md",sizeTokens:2400,preview:`# CONTEXT.md — Current product context and priorities.

## Active Workstreams...`},{name:"UX_ROADMAP.md",sizeTokens:1800,preview:`# UX Roadmap — 4-6 Week Forward View

## Week 1-2: Foundation
- Design system tokens finalized...`}],conversationHistory:{messageCount:47,sizeTokens:98200,preview:`[user]: Build the ContextBrowser view.
[assistant]: Creating the component now...`},toolResults:[{name:"read(AGENTS.md)",resultTokens:3800,preview:"# AGENTS.md — Luis (Principal UX Engineer)..."},{name:"exec(pnpm check)",resultTokens:420,preview:`$ pnpm check
> clawdbot@0.1.0 check
> tsc --noEmit && eslint...`},{name:"write(ContextBrowser.tsx)",resultTokens:180,preview:"File written: ContextBrowser.tsx (487 lines)"}],injectedContext:[{label:"Current Date",sizeTokens:45,preview:"Today's date is 2026-02-22."},{label:"Memory (today)",sizeTokens:1200,preview:`## 2026-02-22
- Started Horizon UI view buildout...`},{label:"Runtime Config",sizeTokens:380,preview:"agent=luis | host=David's MacBook Pro | repo=/Users/openclaw..."}]}),h("sess-002","Piper","MiniMax-M2.5",38400,"active",{systemPrompt:{sizeTokens:3100,preview:"You are Piper, a worker agent on the Product & UI Squad..."},projectFiles:[{name:"AGENTS.md",sizeTokens:3800,preview:"# AGENTS.md — Luis (Principal UX Engineer)..."}],conversationHistory:{messageCount:12,sizeTokens:24500,preview:`[system]: You are Piper...
[user]: Build ContextBrowser.tsx...`},toolResults:[{name:"write(ContextBrowser.tsx)",resultTokens:200,preview:"File written successfully."}],injectedContext:[{label:"Current Date",sizeTokens:45,preview:"Today's date is 2026-02-22."},{label:"Subagent Context",sizeTokens:600,preview:"You are a subagent spawned by the main agent..."}]}),h("sess-003","Xavier","claude-opus-4-6",189500,"idle",{systemPrompt:{sizeTokens:5800,preview:"You are Xavier, the CTO. You oversee all engineering and product direction..."},projectFiles:[{name:"SOUL.md",sizeTokens:2200,preview:"# Soul — Organization identity, values, mission..."},{name:"CONTEXT.md",sizeTokens:2400,preview:"# CONTEXT.md — Current product context..."},{name:"BACKLOG.md",sizeTokens:4100,preview:`# BACKLOG.md — Prioritized work items

## P0 — Critical...`}],conversationHistory:{messageCount:134,sizeTokens:156800,preview:`[user]: Review the architecture for the new dashboard...
[assistant]: Looking at current state...`},toolResults:[{name:"exec(git log)",resultTokens:1200,preview:"commit abc123 — feat: add dashboard layout..."},{name:"read(BACKLOG.md)",resultTokens:4100,preview:"# BACKLOG.md — Prioritized work items..."},{name:"sessions_list()",resultTokens:800,preview:"Active sessions: luis, piper, quinn, tim..."}],injectedContext:[{label:"Current Date",sizeTokens:45,preview:"Today's date is 2026-02-22."},{label:"Memory (today)",sizeTokens:2800,preview:`## 2026-02-22
- Reviewed Horizon UI progress...`},{label:"Runtime Config",sizeTokens:420,preview:"agent=xavier | model=claude-opus-4-6..."}]}),h("sess-004","Tim","claude-sonnet-4-6",67200,"done",{systemPrompt:{sizeTokens:4600,preview:"You are Tim, VP of Architecture. You oversee all engineering architecture decisions..."},projectFiles:[{name:"TOOLS.md",sizeTokens:4800,preview:"# TOOLS.md — Tim, VP Architecture..."}],conversationHistory:{messageCount:28,sizeTokens:41200,preview:`[user]: Review the PR from Luis's squad...
[assistant]: Reviewing PR #247...`},toolResults:[{name:"gh pr review",resultTokens:350,preview:"PR #247 reviewed — approved with comments."}],injectedContext:[{label:"Current Date",sizeTokens:45,preview:"Today's date is 2026-02-22."}]}),h("sess-005","Quinn","MiniMax-M2.5",8100,"idle",{systemPrompt:{sizeTokens:2900,preview:"You are Quinn, a worker on the Product & UI Squad. User flows and interaction design..."},projectFiles:[],conversationHistory:{messageCount:4,sizeTokens:3200,preview:`[system]: You are Quinn...
[user]: Stand by for task assignment.`},toolResults:[],injectedContext:[{label:"Current Date",sizeTokens:45,preview:"Today's date is 2026-02-22."}]})];function m(o){return o>=1e3?`${(o/1e3).toFixed(1)}k`:String(o)}function T(o,u){return Math.round(o/u*100)}function N(o){return o>=95?"bg-red-500":o>=80?"bg-orange-500":o>=50?"bg-yellow-500":"bg-green-500"}function M(o){return o>=95?"text-red-400":o>=80?"text-orange-400":o>=50?"text-yellow-400":"text-green-400"}function A(o){return o==="active"?"bg-green-400":o==="idle"?"bg-yellow-400":"bg-zinc-500"}function B(o){return o==="active"?"Active":o==="idle"?"Idle":"Done"}function $(){const[o,u]=g.useState(U),[v,w]=g.useState(null),[f,b]=g.useState({}),[y,C]=g.useState({}),[x,S]=g.useState(""),n=o.find(t=>t.id===v)??null;function P(t){b(s=>({...s,[t]:!s[t]}))}function R(t){C(s=>({...s,[t]:!s[t]}))}function O(){n&&u(t=>t.map(s=>{if(s.id!==n.id)return s;const r=Math.round(s.segments.conversationHistory.sizeTokens*.3),l=Math.round(s.segments.conversationHistory.messageCount*.3);return{...s,tokenCount:s.tokenCount-r,segments:{...s.segments,conversationHistory:{...s.segments.conversationHistory,messageCount:s.segments.conversationHistory.messageCount-l,sizeTokens:s.segments.conversationHistory.sizeTokens-r}}}}))}function j(t){return x.trim()?t.toLowerCase().includes(x.toLowerCase()):!0}function z(t){const s=t.projectFiles.reduce((i,a)=>i+a.sizeTokens,0),r=t.toolResults.reduce((i,a)=>i+a.resultTokens,0),l=t.injectedContext.reduce((i,a)=>i+a.sizeTokens,0);return t.systemPrompt.sizeTokens+s+t.conversationHistory.sizeTokens+r+l}function H(t){const s=T(t.tokenCount,t.maxTokens),r=N(s),l=M(s);return e.jsxs("div",{className:"mb-6",children:[e.jsxs("div",{className:"flex items-center justify-between mb-2",children:[e.jsx("span",{className:"text-sm text-zinc-400",children:"Context Window Usage"}),e.jsxs("span",{className:d("text-sm font-mono font-semibold",l),children:[m(t.tokenCount)," / ",m(t.maxTokens)," tokens (",s,"%)"]})]}),e.jsx("div",{className:"h-3 w-full rounded-full bg-zinc-800 overflow-hidden",children:e.jsx("div",{className:d("h-full rounded-full transition-all duration-500",r),style:{width:`${Math.min(s,100)}%`}})})]})}function p(t,s,r,l){const i=f[r]??!1;return j(t)?e.jsxs("div",{className:"bg-zinc-900 border border-zinc-800 rounded-lg mb-3 overflow-hidden",children:[e.jsxs("button",{onClick:()=>P(r),className:"w-full flex items-center justify-between px-4 py-3 text-left hover:bg-zinc-800/50 transition-colors",children:[e.jsxs("div",{className:"flex items-center gap-3",children:[e.jsx("div",{className:d("w-5 h-5 rounded flex items-center justify-center text-xs font-bold bg-zinc-800 text-zinc-300 transition-transform",i&&"rotate-90"),children:"▶"}),e.jsx("span",{className:"text-sm font-medium text-white",children:t}),l&&e.jsx("span",{className:"text-xs text-zinc-500",children:l})]}),e.jsxs("span",{className:"text-xs font-mono text-zinc-500",children:[m(s)," tokens"]})]}),i&&e.jsxs("div",{className:"px-4 pb-3 border-t border-zinc-800",children:[r==="projectFiles"&&n?k(n.segments.projectFiles.map(c=>({key:`file-${c.name}`,label:c.name,tokens:c.sizeTokens,preview:c.preview})),"No project files loaded."):null,r==="toolResults"&&n?k(n.segments.toolResults.map((c,F)=>({key:`tool-${F}-${c.name}`,label:c.name,tokens:c.resultTokens,preview:c.preview,accent:!0})),"No tool results in context."):null,r==="injectedContext"&&n?k(n.segments.injectedContext.map(c=>({key:`inj-${c.label}`,label:c.label,tokens:c.sizeTokens,preview:c.preview})),"No injected context."):null,r==="systemPrompt"&&n?e.jsxs("div",{className:"mt-3 p-3 bg-zinc-950 rounded text-xs font-mono text-zinc-400 leading-relaxed whitespace-pre-wrap",children:[n.segments.systemPrompt.preview.slice(0,200),n.segments.systemPrompt.preview.length>200&&e.jsx("span",{className:"text-zinc-600",children:"…"})]}):null,r==="conversationHistory"&&n?e.jsxs("div",{className:"mt-3 p-3 bg-zinc-950 rounded text-xs font-mono text-zinc-400 leading-relaxed whitespace-pre-wrap",children:[n.segments.conversationHistory.preview.slice(0,200),n.segments.conversationHistory.preview.length>200&&e.jsx("span",{className:"text-zinc-600",children:"…"})]}):null]})]}):null}function k(t,s){const r=t.filter(l=>j(l.label));return r.length===0?e.jsx("p",{className:"mt-3 text-xs text-zinc-500 italic",children:s}):e.jsx("div",{className:"mt-3 space-y-2",children:r.map(l=>{const i=y[l.key]??!1;return e.jsxs("div",{className:"bg-zinc-950 rounded border border-zinc-800/60",children:[e.jsxs("button",{onClick:()=>R(l.key),className:"w-full flex items-center justify-between px-3 py-2 text-left hover:bg-zinc-800/30 transition-colors",children:[e.jsx("span",{className:d("text-xs font-mono",l.accent?"text-indigo-400":"text-zinc-300"),children:l.label}),e.jsx("span",{className:"text-xs font-mono text-zinc-600",children:m(l.tokens)})]}),i&&e.jsx("div",{className:"px-3 pb-2 border-t border-zinc-800/40",children:e.jsxs("div",{className:"mt-2 p-2 bg-zinc-900 rounded text-xs font-mono text-zinc-500 leading-relaxed whitespace-pre-wrap",children:[l.preview.slice(0,200),l.preview.length>200&&e.jsx("span",{className:"text-zinc-700",children:"…"})]})})]},l.key)})})}function E(t){const s=t.segments,r=t.tokenCount||1,l=[{label:"System",tokens:s.systemPrompt.sizeTokens,color:"bg-indigo-500"},{label:"Files",tokens:s.projectFiles.reduce((i,a)=>i+a.sizeTokens,0),color:"bg-cyan-500"},{label:"History",tokens:s.conversationHistory.sizeTokens,color:"bg-violet-500"},{label:"Tools",tokens:s.toolResults.reduce((i,a)=>i+a.resultTokens,0),color:"bg-amber-500"},{label:"Injected",tokens:s.injectedContext.reduce((i,a)=>i+a.sizeTokens,0),color:"bg-emerald-500"}];return e.jsxs("div",{className:"mb-6",children:[e.jsx("div",{className:"text-xs text-zinc-500 mb-2",children:"Context Breakdown"}),e.jsx("div",{className:"h-4 w-full rounded-full bg-zinc-800 overflow-hidden flex",children:l.map(i=>{const a=Math.max(i.tokens/r*100,0);return a<.5?null:e.jsx("div",{className:d("h-full transition-all duration-300",i.color),style:{width:`${a}%`},title:`${i.label}: ${m(i.tokens)}`},i.label)})}),e.jsx("div",{className:"flex flex-wrap gap-4 mt-2",children:l.map(i=>e.jsxs("div",{className:"flex items-center gap-1.5",children:[e.jsx("div",{className:d("w-2.5 h-2.5 rounded-sm",i.color)}),e.jsx("span",{className:"text-xs text-zinc-500",children:i.label}),e.jsx("span",{className:"text-xs font-mono text-zinc-600",children:m(i.tokens)})]},i.label))})]})}const L=o.filter(t=>!x.trim()||t.agentName.toLowerCase().includes(x.toLowerCase()));return e.jsxs("div",{className:"min-h-screen bg-zinc-950 text-white flex",children:[e.jsxs("div",{className:"w-72 flex-shrink-0 border-r border-zinc-800 flex flex-col",children:[e.jsxs("div",{className:"p-4 border-b border-zinc-800",children:[e.jsx("h1",{className:"text-lg font-semibold text-white tracking-tight",children:"Context Browser"}),e.jsx("p",{className:"text-xs text-zinc-500 mt-1",children:"Inspect agent context windows"})]}),e.jsx("div",{className:"p-3",children:e.jsx("input",{type:"text",placeholder:"Search sessions or context...",value:x,onChange:t=>S(t.target.value),className:"w-full px-3 py-2 bg-zinc-900 border border-zinc-800 rounded-lg text-sm text-white placeholder-zinc-600 outline-none focus:border-indigo-500 transition-colors"})}),e.jsx("div",{className:"flex-1 overflow-y-auto",children:L.map(t=>{const s=T(t.tokenCount,t.maxTokens),r=v===t.id;return e.jsxs("button",{onClick:()=>w(t.id),className:d("w-full text-left px-4 py-3 border-b border-zinc-800/50 transition-colors",r?"bg-indigo-500/10 border-l-2 border-l-indigo-500":"hover:bg-zinc-900/80"),children:[e.jsxs("div",{className:"flex items-center justify-between mb-1",children:[e.jsx("span",{className:d("text-sm font-medium",r?"text-indigo-400":"text-white"),children:t.agentName}),e.jsxs("div",{className:"flex items-center gap-1.5",children:[e.jsx("div",{className:d("w-2 h-2 rounded-full",A(t.status))}),e.jsx("span",{className:"text-xs text-zinc-500",children:B(t.status)})]})]}),e.jsx("div",{className:"text-xs text-zinc-500 font-mono mb-2",children:t.model}),e.jsx("div",{className:"h-1.5 w-full rounded-full bg-zinc-800 overflow-hidden",children:e.jsx("div",{className:d("h-full rounded-full",N(s)),style:{width:`${Math.min(s,100)}%`}})}),e.jsxs("div",{className:"text-xs text-zinc-600 font-mono mt-1",children:[m(t.tokenCount)," / ",m(t.maxTokens)]})]},t.id)})})]}),e.jsx("div",{className:"flex-1 overflow-y-auto",children:n?e.jsxs("div",{className:"p-6 max-w-4xl",children:[e.jsxs("div",{className:"flex items-center justify-between mb-6",children:[e.jsxs("div",{children:[e.jsx("h2",{className:"text-xl font-semibold text-white",children:n.agentName}),e.jsxs("span",{className:"text-xs font-mono text-zinc-500",children:[n.model," · ",n.id]})]}),e.jsx("button",{onClick:O,className:"px-4 py-2 bg-indigo-500 hover:bg-indigo-600 text-white text-sm font-medium rounded-lg transition-colors",children:"Trim Context"})]}),H(n),E(n),e.jsxs("div",{className:"space-y-0",children:[p("System Prompt",n.segments.systemPrompt.sizeTokens,"systemPrompt"),p("Project Files",n.segments.projectFiles.reduce((t,s)=>t+s.sizeTokens,0),"projectFiles",`${n.segments.projectFiles.length} files`),p("Conversation History",n.segments.conversationHistory.sizeTokens,"conversationHistory",`${n.segments.conversationHistory.messageCount} messages`),p("Tool Results",n.segments.toolResults.reduce((t,s)=>t+s.resultTokens,0),"toolResults",`${n.segments.toolResults.length} calls`),p("Injected Context",n.segments.injectedContext.reduce((t,s)=>t+s.sizeTokens,0),"injectedContext",`${n.segments.injectedContext.length} items`)]}),e.jsx("div",{className:"mt-6 p-4 bg-zinc-900 border border-zinc-800 rounded-lg",children:e.jsxs("div",{className:"flex items-center justify-between text-xs text-zinc-500",children:[e.jsxs("span",{children:["Tracked segment total: ",m(z(n.segments))," tokens"]}),e.jsxs("span",{children:["Overhead / padding: ",m(Math.max(0,n.tokenCount-z(n.segments)))," tokens"]})]})})]}):e.jsx("div",{className:"flex items-center justify-center h-full",children:e.jsxs("div",{className:"text-center",children:[e.jsx("div",{className:"w-16 h-16 rounded-2xl bg-zinc-900 border border-zinc-800 flex items-center justify-center mx-auto mb-4",children:e.jsx("div",{className:"w-6 h-6 rounded bg-indigo-500/20 border border-indigo-500/40"})}),e.jsx("p",{className:"text-zinc-500 text-sm",children:"Select a session to inspect its context window"})]})})})]})}export{$ as default};
