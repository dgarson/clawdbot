import{r as m,j as t,c as a}from"./index-MVkzivj4.js";const l=[{id:"t1",team:"Platform Engineering",department:"engineering",budget:45e3,spent:38420,forecast:42100,topServices:["GKE Cluster","Cloud SQL","GCS"],owner:"alice",trend:3.2},{id:"t2",team:"ML / AI",department:"engineering",budget:35e3,spent:41890,forecast:48200,topServices:["GPU VMs","Vertex AI","BigQuery"],owner:"bob",trend:18.4},{id:"t3",team:"Marketing Tech",department:"marketing",budget:12e3,spent:9340,forecast:10200,topServices:["CDN","Analytics","Email API"],owner:"carol",trend:-4.1},{id:"t4",team:"Sales Enablement",department:"sales",budget:8e3,spent:7120,forecast:7800,topServices:["CRM API","Video Conferencing"],owner:"dave",trend:1.8},{id:"t5",team:"Data Infrastructure",department:"data",budget:28e3,spent:24670,forecast:26800,topServices:["BigQuery","Pub/Sub","Dataflow"],owner:"eve",trend:-2.3},{id:"t6",team:"Customer Support",department:"support",budget:5e3,spent:4210,forecast:4700,topServices:["Zendesk API","Storage"],owner:"frank",trend:.5},{id:"t7",team:"Core Infrastructure",department:"infra",budget:18e3,spent:16840,forecast:17200,topServices:["VPC","Load Balancers","DNS"],owner:"grace",trend:-1.2}],p=[{id:"s1",service:"GKE / Kubernetes",line:"compute",cost:28400,unit:"node-hours",unitCount:142e3,trend:4.2,topConsumers:["Platform Engineering","ML/AI","Data Infra"]},{id:"s2",service:"GPU Compute (A100)",line:"ai",cost:18900,unit:"GPU-hours",unitCount:945,trend:22.1,topConsumers:["ML / AI"]},{id:"s3",service:"Cloud SQL (Postgres)",line:"compute",cost:12300,unit:"instance-hours",unitCount:61500,trend:1.8,topConsumers:["Platform Engineering","Data Infra"]},{id:"s4",service:"BigQuery",line:"ai",cost:9840,unit:"TB scanned",unitCount:492,trend:-8.3,topConsumers:["Data Infra","ML / AI","Marketing"]},{id:"s5",service:"Cloud Storage (GCS)",line:"storage",cost:4200,unit:"TB stored",unitCount:84,trend:6.1,topConsumers:["Platform Engineering","Data Infra"]},{id:"s6",service:"CDN / Load Balancing",line:"network",cost:3100,unit:"GB transferred",unitCount:15500,trend:3.4,topConsumers:["Marketing Tech","Platform Engineering"]},{id:"s7",service:"Vertex AI",line:"ai",cost:2800,unit:"prediction calls",unitCount:14e5,trend:31.2,topConsumers:["ML / AI"]},{id:"s8",service:"Pub/Sub + Dataflow",line:"network",cost:2400,unit:"messages",unitCount:48e7,trend:-2.1,topConsumers:["Data Infra"]}],g=[{id:"a1",team:"ML / AI",service:"GPU Compute (A100)",expectedCost:15200,actualCost:18900,deviation:24.3,detectedAt:"Today 06:00",status:"open",rootCause:"Training job runaway â€” no timeout set on experimental model run"},{id:"a2",team:"Platform Engineering",service:"Cloud SQL",expectedCost:11800,actualCost:12300,deviation:4.2,detectedAt:"Yesterday 12:00",status:"acknowledged",rootCause:"Read replica scaling after traffic spike â€” expected"},{id:"a3",team:"Data Infrastructure",service:"BigQuery",expectedCost:10700,actualCost:9840,deviation:-8,detectedAt:"3d ago",status:"resolved",rootCause:"Partitioned table backfill completed â€” queries more efficient now"},{id:"a4",team:"ML / AI",service:"Vertex AI",expectedCost:2100,actualCost:2800,deviation:33.3,detectedAt:"Today 08:30",status:"open",rootCause:"New real-time inference endpoint deployed without autoscaling limits"}],b=[{month:"Aug",engineering:62e3,marketing:8400,sales:6800,support:3900,data:21e3,infra:15e3},{month:"Sep",engineering:65e3,marketing:8900,sales:7100,support:4100,data:22e3,infra:15500},{month:"Oct",engineering:68e3,marketing:9200,sales:7300,support:4e3,data:23e3,infra:16200},{month:"Nov",engineering:71e3,marketing:9800,sales:7600,support:4200,data:24e3,infra:16500},{month:"Dec",engineering:73e3,marketing:10100,sales:7900,support:4300,data:24500,infra:17e3},{month:"Jan",engineering:76e3,marketing:10800,sales:7800,support:4200,data:24800,infra:16800},{month:"Feb",engineering:80310,marketing:9340,sales:7120,support:4210,data:24670,infra:16840}],h={engineering:"bg-indigo-500",marketing:"bg-purple-500",sales:"bg-amber-500",support:"bg-sky-500",data:"bg-emerald-500",infra:"bg-zinc-500"},k={compute:"ðŸ–¥ï¸",ai:"ðŸ¤–",storage:"ðŸ’¾",network:"ðŸŒ",saas:"â˜ï¸"},y={open:"bg-rose-500/15 border-rose-500/30 text-rose-400",acknowledged:"bg-amber-500/15 border-amber-500/30 text-amber-400",resolved:"bg-emerald-500/10 border-emerald-500/25 text-emerald-400"};function M(){const[r,f]=m.useState("teams"),[v,j]=m.useState("month"),[s,N]=m.useState(l[0]),o=l.reduce((e,n)=>e+n.spent,0),c=l.reduce((e,n)=>e+n.budget,0),u=l.filter(e=>e.spent>e.budget),d=g.filter(e=>e.status==="open"),w=Math.max(...p.map(e=>e.cost)),C=Math.max(...b.map(e=>e.engineering+e.marketing+e.sales+e.support+e.data+e.infra));return t.jsxs("div",{className:"flex flex-col h-full bg-zinc-950 text-white",children:[t.jsxs("div",{className:"flex-none px-6 py-4 border-b border-zinc-800",children:[t.jsxs("div",{className:"flex items-center justify-between",children:[t.jsxs("div",{children:[t.jsx("h1",{className:"text-lg font-semibold text-white",children:"Cost Attribution"}),t.jsx("p",{className:"text-xs text-zinc-400 mt-0.5",children:"Infrastructure spend by team, service, and anomaly detection"})]}),t.jsx("div",{className:"flex items-center gap-2",children:["month","quarter","ytd"].map(e=>t.jsx("button",{onClick:()=>j(e),className:a("px-3 py-1.5 rounded text-xs font-medium uppercase transition-colors",v===e?"bg-zinc-700 text-white":"text-zinc-500 hover:text-zinc-300"),children:e},e))})]}),t.jsx("div",{className:"flex gap-5 mt-3",children:[{label:"Total Spent",value:`$${(o/1e3).toFixed(0)}K`,color:"text-white"},{label:"Budget",value:`$${(c/1e3).toFixed(0)}K`,color:"text-zinc-300"},{label:"Budget Used",value:`${Math.round(o/c*100)}%`,color:o>c?"text-rose-400":"text-emerald-400"},{label:"Over Budget",value:u.length,color:u.length>0?"text-rose-400":"text-emerald-400"},{label:"Open Anomalies",value:d.length,color:d.length>0?"text-amber-400":"text-emerald-400"}].map(e=>t.jsxs("div",{children:[t.jsx("span",{className:a("text-base font-bold",e.color),children:e.value}),t.jsx("span",{className:"text-zinc-500 text-xs ml-1.5",children:e.label})]},e.label))}),t.jsx("div",{className:"flex gap-1 mt-3",children:["teams","services","anomalies","trend"].map(e=>t.jsxs("button",{onClick:()=>f(e),className:a("px-3 py-1.5 rounded-lg text-xs font-medium capitalize transition-colors",r===e?"bg-zinc-700 text-white":"text-zinc-400 hover:text-white hover:bg-zinc-800"),children:[e.charAt(0).toUpperCase()+e.slice(1),e==="anomalies"&&d.length>0&&t.jsx("span",{className:"ml-1.5 px-1.5 py-0.5 rounded-full bg-amber-500 text-[9px] font-bold text-white",children:d.length})]},e))})]}),t.jsxs("div",{className:"flex-1 overflow-hidden",children:[r==="teams"&&t.jsxs("div",{className:"flex h-full",children:[t.jsx("div",{className:"w-[48%] flex-none border-r border-zinc-800 overflow-y-auto",children:l.sort((e,n)=>n.spent-e.spent).map(e=>{const n=Math.round(e.spent/e.budget*100),i=e.spent>e.budget;return t.jsxs("button",{onClick:()=>N(e),className:a("w-full text-left px-4 py-3.5 border-b border-zinc-800/60 hover:bg-zinc-900 transition-colors",(s==null?void 0:s.id)===e.id&&"bg-zinc-900 border-l-2 border-l-indigo-500"),children:[t.jsxs("div",{className:"flex items-center justify-between gap-2",children:[t.jsxs("div",{className:"flex items-center gap-2 min-w-0",children:[t.jsx("div",{className:a("w-2 h-2 rounded-full flex-none",h[e.department])}),t.jsx("span",{className:"text-sm font-medium text-white truncate",children:e.team})]}),t.jsxs("div",{className:"flex items-center gap-3 flex-none text-xs",children:[t.jsxs("span",{className:a("font-bold",i?"text-rose-400":"text-white"),children:["$",(e.spent/1e3).toFixed(1),"K"]}),t.jsxs("span",{className:"text-zinc-600",children:["of $",(e.budget/1e3).toFixed(0),"K"]})]})]}),t.jsxs("div",{className:"mt-2 px-4",children:[t.jsx("div",{className:"w-full bg-zinc-800 rounded-full h-1.5",children:t.jsx("div",{className:a("h-1.5 rounded-full",i?"bg-rose-500":n>80?"bg-amber-500":"bg-indigo-500"),style:{width:`${Math.min(100,n)}%`}})}),t.jsxs("div",{className:"flex justify-between text-[10px] mt-1",children:[t.jsxs("span",{className:i?"text-rose-400 font-semibold":"text-zinc-600",children:[n,"% used"]}),t.jsxs("span",{className:a("font-medium",e.trend>0?"text-rose-400":"text-emerald-400"),children:[e.trend>0?"â†‘":"â†“",Math.abs(e.trend),"% MoM"]})]})]})]},e.id)})}),t.jsx("div",{className:"flex-1 overflow-y-auto p-5",children:s&&t.jsxs("div",{className:"space-y-4",children:[t.jsxs("div",{children:[t.jsxs("div",{className:"flex items-center gap-2",children:[t.jsx("div",{className:a("w-3 h-3 rounded-full",h[s.department])}),t.jsx("h2",{className:"text-base font-semibold text-white",children:s.team})]}),t.jsxs("p",{className:"text-xs text-zinc-500 mt-1",children:["Owner: ",s.owner," Â· Dept: ",s.department]})]}),t.jsx("div",{className:"grid grid-cols-3 gap-3",children:[{label:"Spent",value:`$${(s.spent/1e3).toFixed(1)}K`,color:s.spent>s.budget?"text-rose-400":"text-white"},{label:"Budget",value:`$${(s.budget/1e3).toFixed(0)}K`,color:"text-zinc-300"},{label:"Forecast",value:`$${(s.forecast/1e3).toFixed(1)}K`,color:s.forecast>s.budget?"text-amber-400":"text-emerald-400"}].map(e=>t.jsxs("div",{className:"bg-zinc-900 rounded-lg p-3 border border-zinc-800 text-center",children:[t.jsx("div",{className:a("text-xl font-bold",e.color),children:e.value}),t.jsx("div",{className:"text-xs text-zinc-500",children:e.label})]},e.label))}),t.jsxs("div",{className:"bg-zinc-900 rounded-xl p-4 border border-zinc-800",children:[t.jsxs("div",{className:"flex justify-between text-xs mb-2",children:[t.jsx("span",{className:"text-zinc-400",children:"Budget utilization"}),t.jsxs("span",{className:a("font-semibold",s.spent>s.budget?"text-rose-400":"text-white"),children:[Math.round(s.spent/s.budget*100),"%"]})]}),t.jsx("div",{className:"w-full bg-zinc-800 rounded-full h-3",children:t.jsx("div",{className:a("h-3 rounded-full relative",s.spent>s.budget?"bg-rose-500":s.spent/s.budget>.8?"bg-amber-500":"bg-indigo-500"),style:{width:`${Math.min(100,s.spent/s.budget*100)}%`}})}),t.jsxs("div",{className:"mt-2 text-[10px] text-zinc-500",children:["Forecast: $",(s.forecast/1e3).toFixed(1),"K â€” ",s.forecast>s.budget?t.jsxs("span",{className:"text-amber-400",children:["will exceed budget by $",((s.forecast-s.budget)/1e3).toFixed(1),"K"]}):t.jsx("span",{className:"text-emerald-400",children:"on track"})]})]}),t.jsxs("div",{className:"bg-zinc-900 rounded-xl p-4 border border-zinc-800",children:[t.jsx("div",{className:"text-xs font-medium text-zinc-400 mb-3",children:"Top Cost Drivers"}),t.jsx("div",{className:"space-y-1.5",children:s.topServices.map((e,n)=>t.jsxs("div",{className:"flex items-center gap-2",children:[t.jsxs("span",{className:"text-xs text-zinc-600",children:[n+1,"."]}),t.jsx("span",{className:"text-xs text-zinc-300",children:e})]},e))})]}),t.jsx("div",{className:"flex items-center gap-2 text-xs",children:t.jsxs("span",{className:a("font-semibold",s.trend>5?"text-rose-400":s.trend>0?"text-amber-400":"text-emerald-400"),children:[s.trend>0?"â†‘":"â†“",Math.abs(s.trend),"% MoM trend"]})})]})})]}),r==="services"&&t.jsx("div",{className:"overflow-y-auto h-full p-5",children:t.jsx("div",{className:"space-y-3",children:p.sort((e,n)=>n.cost-e.cost).map(e=>t.jsxs("div",{className:"bg-zinc-900 rounded-xl p-4 border border-zinc-800",children:[t.jsxs("div",{className:"flex items-start justify-between gap-4",children:[t.jsxs("div",{children:[t.jsxs("div",{className:"flex items-center gap-2",children:[t.jsx("span",{children:k[e.line]}),t.jsx("span",{className:"font-medium text-white text-sm",children:e.service})]}),t.jsxs("div",{className:"text-[10px] text-zinc-600 mt-1 ml-6",children:[e.unitCount.toLocaleString()," ",e.unit]}),t.jsx("div",{className:"flex flex-wrap gap-1 mt-2 ml-6",children:e.topConsumers.map(n=>t.jsx("span",{className:"px-1.5 py-0.5 rounded bg-zinc-800 text-[10px] text-zinc-400",children:n},n))})]}),t.jsxs("div",{className:"text-right flex-none",children:[t.jsxs("div",{className:"text-lg font-bold text-white",children:["$",(e.cost/1e3).toFixed(1),"K"]}),t.jsxs("div",{className:a("text-xs font-medium",e.trend>10?"text-rose-400":e.trend>0?"text-amber-400":"text-emerald-400"),children:[e.trend>0?"â†‘":"â†“",Math.abs(e.trend),"% MoM"]})]})]}),t.jsx("div",{className:"mt-3 w-full bg-zinc-800 rounded-full h-1.5",children:t.jsx("div",{className:"bg-indigo-500 h-1.5 rounded-full",style:{width:`${e.cost/w*100}%`}})})]},e.id))})}),r==="anomalies"&&t.jsx("div",{className:"overflow-y-auto h-full p-5",children:t.jsx("div",{className:"space-y-3",children:g.map(e=>t.jsxs("div",{className:a("bg-zinc-900 rounded-xl p-4 border",e.status==="open"?"border-rose-500/40":e.status==="acknowledged"?"border-amber-500/30":"border-zinc-800"),children:[t.jsxs("div",{className:"flex items-start justify-between gap-4",children:[t.jsxs("div",{className:"flex-1",children:[t.jsxs("div",{className:"flex items-center gap-2",children:[t.jsx("span",{className:a("px-1.5 py-0.5 rounded border text-[10px] font-medium",y[e.status]),children:e.status.toUpperCase()}),t.jsx("span",{className:"text-sm font-medium text-white",children:e.service})]}),t.jsxs("div",{className:"text-xs text-zinc-500 mt-1",children:[e.team," Â· Detected ",e.detectedAt]}),t.jsx("p",{className:"text-xs text-zinc-400 mt-2",children:e.rootCause})]}),t.jsxs("div",{className:"text-right flex-none",children:[t.jsxs("div",{className:a("text-lg font-bold",e.deviation>0?"text-rose-400":"text-emerald-400"),children:[e.deviation>0?"+":"",e.deviation.toFixed(1),"%"]}),t.jsxs("div",{className:"text-xs text-zinc-500",children:["$",(e.actualCost/1e3).toFixed(1),"K actual"]}),t.jsxs("div",{className:"text-xs text-zinc-600",children:["vs $",(e.expectedCost/1e3).toFixed(1),"K expected"]})]})]}),e.status==="open"&&t.jsxs("div",{className:"flex gap-2 mt-3",children:[t.jsx("button",{className:"px-2.5 py-1 rounded text-xs bg-amber-500/15 border border-amber-500/30 text-amber-400 hover:bg-amber-500/25 transition-colors",children:"Acknowledge"}),t.jsx("button",{className:"px-2.5 py-1 rounded text-xs bg-zinc-800 hover:bg-zinc-700 text-zinc-300 transition-colors",children:"Investigate"})]})]},e.id))})}),r==="trend"&&t.jsx("div",{className:"overflow-y-auto h-full p-5",children:t.jsxs("div",{className:"bg-zinc-900 rounded-xl p-5 border border-zinc-800",children:[t.jsx("div",{className:"text-sm font-medium text-zinc-300 mb-4",children:"Monthly Cost by Department (7 months)"}),t.jsx("div",{className:"flex items-end gap-2 h-48",children:b.map(e=>{const n=e.engineering+e.marketing+e.sales+e.support+e.data+e.infra,i=n/C*100,z=[{key:"engineering",val:e.engineering,color:"bg-indigo-500"},{key:"data",val:e.data,color:"bg-emerald-500"},{key:"infra",val:e.infra,color:"bg-zinc-500"},{key:"marketing",val:e.marketing,color:"bg-purple-500"},{key:"sales",val:e.sales,color:"bg-amber-500"},{key:"support",val:e.support,color:"bg-sky-500"}];return t.jsxs("div",{className:"flex-1 flex flex-col items-center gap-1",children:[t.jsxs("div",{className:"text-[10px] text-zinc-500",children:["$",(n/1e3).toFixed(0),"K"]}),t.jsx("div",{className:"w-full flex flex-col-reverse gap-px rounded overflow-hidden",style:{height:`${i}%`},children:z.map(x=>t.jsx("div",{className:x.color,style:{flex:x.val}},x.key))}),t.jsx("div",{className:"text-[10px] text-zinc-500",children:e.month})]},e.month)})}),t.jsx("div",{className:"flex flex-wrap gap-3 mt-4 text-[10px]",children:[{label:"Engineering",color:"bg-indigo-500"},{label:"Data",color:"bg-emerald-500"},{label:"Infra",color:"bg-zinc-500"},{label:"Marketing",color:"bg-purple-500"},{label:"Sales",color:"bg-amber-500"},{label:"Support",color:"bg-sky-500"}].map(e=>t.jsxs("div",{className:"flex items-center gap-1.5",children:[t.jsx("div",{className:a("w-2 h-2 rounded-sm",e.color)}),t.jsx("span",{className:"text-zinc-500",children:e.label})]},e.label))})]})})]})]})}export{M as default};
