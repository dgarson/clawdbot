import{r as a,j as t,c as o}from"./index-D5LhLOE6.js";const z={"model-inference":"Model Inference",storage:"Storage",compute:"Compute",network:"Network","agent-sessions":"Agent Sessions"},S={"model-inference":"bg-indigo-500",storage:"bg-emerald-400",compute:"bg-amber-400",network:"bg-sky-400","agent-sessions":"bg-rose-400"},C={"model-inference":"text-indigo-400",storage:"text-emerald-400",compute:"text-amber-400",network:"text-sky-400","agent-sessions":"text-rose-400"},B={low:{bg:"bg-emerald-400/15",text:"text-emerald-400",label:"Low"},medium:{bg:"bg-amber-400/15",text:"text-amber-400",label:"Medium"},high:{bg:"bg-rose-400/15",text:"text-rose-400",label:"High"}},H=[{id:"ce-01",date:"2026-02-09",category:"model-inference",agent:"Luis",model:"Claude Opus",tokens:48200,cost:380},{id:"ce-02",date:"2026-02-10",category:"model-inference",agent:"Xavier",model:"Claude Sonnet",tokens:31400,cost:145},{id:"ce-03",date:"2026-02-11",category:"compute",agent:"Piper",model:"GPT-4o",tokens:22600,cost:198},{id:"ce-04",date:"2026-02-12",category:"storage",agent:"Reed",model:"Gemini Flash",tokens:8500,cost:42},{id:"ce-05",date:"2026-02-13",category:"network",agent:"Luis",model:"Claude Sonnet",tokens:5200,cost:28},{id:"ce-06",date:"2026-02-14",category:"agent-sessions",agent:"Xavier",model:"Claude Opus",tokens:41800,cost:310},{id:"ce-07",date:"2026-02-15",category:"model-inference",agent:"Piper",model:"GPT-4o",tokens:18900,cost:165},{id:"ce-08",date:"2026-02-16",category:"compute",agent:"Luis",model:"Gemini Flash",tokens:12300,cost:56},{id:"ce-09",date:"2026-02-17",category:"storage",agent:"Reed",model:"Claude Sonnet",tokens:3100,cost:12},{id:"ce-10",date:"2026-02-18",category:"model-inference",agent:"Xavier",model:"Claude Opus",tokens:52700,cost:372},{id:"ce-11",date:"2026-02-19",category:"agent-sessions",agent:"Piper",model:"GPT-4o",tokens:26400,cost:224},{id:"ce-12",date:"2026-02-20",category:"network",agent:"Reed",model:"Gemini Flash",tokens:7800,cost:18}],U=[{id:"opt-01",title:"Switch from Opus to Sonnet for routine tasks",description:"Opus is used for simple summarization and formatting tasks where Sonnet delivers equivalent quality at ~60% lower cost.",category:"model-inference",estimatedSavings:4200,effort:"low",status:"pending"},{id:"opt-02",title:"Enable response caching for repeated prompts",description:"Approximately 18% of prompts are near-duplicates. A semantic cache layer would eliminate redundant inference calls.",category:"compute",estimatedSavings:1800,effort:"medium",status:"pending"},{id:"opt-03",title:"Reduce session history retention to 7 days",description:"Current 30-day retention stores conversation history rarely accessed after the first week. Reducing to 7 days cuts storage costs significantly.",category:"storage",estimatedSavings:950,effort:"low",status:"pending"},{id:"opt-04",title:"Batch webhook deliveries",description:"Webhooks currently fire individually. Batching into 5-second windows reduces network overhead and egress charges.",category:"network",estimatedSavings:420,effort:"low",status:"pending"},{id:"opt-05",title:"Limit concurrent agent sessions to 5",description:"Unbounded concurrency leads to resource contention and higher peak compute costs. A pool of 5 concurrent sessions smooths load.",category:"agent-sessions",estimatedSavings:2100,effort:"medium",status:"pending"},{id:"opt-06",title:"Archive inactive knowledge base entries",description:"Move knowledge base entries with zero hits in 90 days to cold storage, reducing active storage footprint.",category:"storage",estimatedSavings:680,effort:"low",status:"pending"},{id:"opt-07",title:"Use streaming for long responses",description:"Streaming responses instead of buffering reduces memory pressure and allows early connection release, lowering per-request inference cost.",category:"model-inference",estimatedSavings:1100,effort:"high",status:"pending"},{id:"opt-08",title:"Consolidate cron jobs during off-peak hours",description:"Scheduling batch jobs between 2–5 AM leverages lower spot-instance pricing and reduces daytime resource contention.",category:"compute",estimatedSavings:350,effort:"medium",status:"pending"}];function d(l){return`$${(l/100).toFixed(2)}`}function A(l,u){return u===0?0:Math.round(l/u*100)}function b({label:l,value:u,sub:m,subColor:f}){return t.jsxs("div",{className:"flex-1 rounded-lg border border-zinc-800 bg-zinc-900 px-5 py-4",children:[t.jsx("p",{className:"text-xs font-medium uppercase tracking-wider text-zinc-400",children:l}),t.jsx("p",{className:"mt-1 text-2xl font-semibold text-white",children:u}),m&&t.jsx("p",{className:o("mt-0.5 text-sm",f??"text-zinc-400"),children:m})]})}function Y(){const[l,u]=a.useState("analysis"),[m,f]=a.useState(U),[x,T]=a.useState("all"),[g,M]=a.useState("all"),r=H,c=a.useMemo(()=>r.reduce((e,i)=>e+i.cost,0),[r]),p=a.useMemo(()=>Math.round(c*.85),[c]),v=a.useMemo(()=>p===0?0:Math.round((c-p)/p*100),[c,p]),E=a.useMemo(()=>{const e=new Map;r.forEach(n=>e.set(n.agent,(e.get(n.agent)??0)+n.cost));let i="",s=0;return e.forEach((n,h)=>{n>s&&(s=n,i=h)}),i},[r]),O=a.useMemo(()=>m.filter(e=>e.status!=="dismissed").reduce((e,i)=>e+i.estimatedSavings,0),[m]),L=a.useMemo(()=>{const e=new Map;return r.forEach(s=>e.set(s.category,(e.get(s.category)??0)+s.cost)),Array.from(e.entries()).sort((s,n)=>n[1]-s[1]).map(([s,n])=>({category:s,cost:n,pct:A(n,c)}))},[r,c]),y=a.useMemo(()=>{const e=new Date("2026-02-22"),i=[];for(let s=6;s>=0;s--){const n=new Date(e);n.setDate(n.getDate()-s);const h=n.toISOString().slice(0,10),_=r.filter(w=>w.date===h).reduce((w,G)=>w+G.cost,0);i.push({date:h,total:_})}return i},[r]),j=a.useMemo(()=>Math.max(...y.map(e=>e.total),1),[y]),R=a.useMemo(()=>{const e=new Map;return r.forEach(i=>{const s=e.get(i.agent)??{tokens:0,cost:0};e.set(i.agent,{tokens:s.tokens+i.tokens,cost:s.cost+i.cost})}),Array.from(e.entries()).map(([i,s])=>({agent:i,...s,pct:A(s.cost,c)})).sort((i,s)=>s.cost-i.cost)},[r,c]),k=a.useMemo(()=>m.filter(e=>!(x!=="all"&&e.status!==x||g!=="all"&&e.effort!==g)),[m,x,g]),N=a.useMemo(()=>{const e=m.filter(i=>i.status==="applied");return{count:e.length,savings:e.reduce((i,s)=>i+s.estimatedSavings,0)}},[m]);function I(e){f(i=>i.map(s=>s.id===e?{...s,status:"applied"}:s))}function $(e){f(i=>i.map(s=>s.id===e?{...s,status:"dismissed"}:s))}const D=[{id:"analysis",label:"Analysis"},{id:"recommendations",label:"Recommendations"}],P=[{value:"all",label:"All"},{value:"pending",label:"Pending"},{value:"applied",label:"Applied"},{value:"dismissed",label:"Dismissed"}],F=[{value:"all",label:"All"},{value:"low",label:"Low"},{value:"medium",label:"Medium"},{value:"high",label:"High"}];return t.jsxs("div",{className:"flex h-full flex-col bg-zinc-950 text-white",children:[t.jsxs("div",{className:"flex flex-wrap gap-4 p-6 pb-0",children:[t.jsx(b,{label:"Total This Month",value:d(c)}),t.jsx(b,{label:"vs Last Month",value:`${v>=0?"+":""}${v}%`,sub:`Last month: ${d(p)}`,subColor:v>0?"text-rose-400":"text-emerald-400"}),t.jsx(b,{label:"Top Spender",value:E,sub:"By total cost"}),t.jsx(b,{label:"Projected Savings",value:d(O),sub:"If all pending applied",subColor:"text-emerald-400"})]}),t.jsx("div",{className:"flex gap-1 border-b border-zinc-800 px-6 pt-6",children:D.map(e=>t.jsx("button",{role:"tab","aria-selected":l===e.id,"aria-controls":`panel-${e.id}`,className:o("rounded-t-md px-4 py-2 text-sm font-medium transition-colors focus-visible:outline-none focus-visible:ring-2 focus-visible:ring-indigo-500",l===e.id?"bg-zinc-900 text-white":"text-zinc-400 hover:text-zinc-200"),onClick:()=>u(e.id),children:e.label},e.id))}),t.jsxs("div",{className:"flex-1 overflow-y-auto p-6",children:[l==="analysis"&&t.jsxs("div",{id:"panel-analysis",role:"tabpanel","aria-label":"Analysis panel",className:"space-y-8",children:[t.jsxs("section",{"aria-label":"Cost breakdown by category",children:[t.jsx("h2",{className:"mb-4 text-lg font-semibold text-white",children:"Category Breakdown"}),t.jsxs("div",{className:"rounded-lg border border-zinc-800 bg-zinc-900 p-5",children:[t.jsx("div",{className:"space-y-3",children:L.map(({category:e,cost:i,pct:s})=>t.jsxs("div",{children:[t.jsxs("div",{className:"mb-1 flex items-center justify-between text-sm",children:[t.jsx("span",{className:C[e],children:z[e]}),t.jsxs("span",{className:"text-zinc-300",children:[d(i)," (",s,"%)"]})]}),t.jsx("div",{className:"h-2.5 w-full rounded-full bg-zinc-800",children:t.jsx("div",{className:o("h-2.5 rounded-full transition-all",S[e]),style:{width:`${s}%`},role:"meter","aria-valuenow":s,"aria-valuemin":0,"aria-valuemax":100,"aria-label":`${z[e]}: ${s}%`})})]},e))}),t.jsxs("p",{className:"mt-4 text-right text-sm font-medium text-zinc-300",children:["Total: ",d(c)]})]})]}),t.jsxs("section",{"aria-label":"7-day cost trend",children:[t.jsx("h2",{className:"mb-4 text-lg font-semibold text-white",children:"7-Day Cost Trend"}),t.jsx("div",{className:"rounded-lg border border-zinc-800 bg-zinc-900 p-5",children:t.jsx("div",{className:"flex items-end gap-2",style:{height:160},children:y.map(({date:e,total:i})=>{const s=j===0?0:i/j*100,n=e.slice(5);return t.jsxs("div",{className:"flex flex-1 flex-col items-center justify-end",style:{height:"100%"},children:[t.jsx("span",{className:"mb-1 text-xs text-zinc-400",children:i>0?d(i):"—"}),t.jsx("div",{className:o("w-full max-w-[40px] rounded-t bg-indigo-500 transition-all",i===0&&"bg-zinc-700"),style:{height:`${Math.max(s,i>0?4:1)}%`},role:"meter","aria-valuenow":i,"aria-valuemin":0,"aria-valuemax":j,"aria-label":`${e}: ${d(i)}`}),t.jsx("span",{className:"mt-1.5 text-xs text-zinc-500",children:n})]},e)})})})]}),t.jsxs("section",{"aria-label":"Agent cost breakdown",children:[t.jsx("h2",{className:"mb-4 text-lg font-semibold text-white",children:"Cost by Agent"}),t.jsx("div",{className:"overflow-hidden rounded-lg border border-zinc-800",children:t.jsxs("table",{className:"w-full text-sm",children:[t.jsx("thead",{children:t.jsxs("tr",{className:"border-b border-zinc-800 bg-zinc-900/80",children:[t.jsx("th",{className:"px-4 py-3 text-left font-medium text-zinc-400",children:"Agent"}),t.jsx("th",{className:"px-4 py-3 text-right font-medium text-zinc-400",children:"Tokens"}),t.jsx("th",{className:"px-4 py-3 text-right font-medium text-zinc-400",children:"Cost"}),t.jsx("th",{className:"px-4 py-3 text-right font-medium text-zinc-400",children:"% of Total"})]})}),t.jsx("tbody",{children:R.map(e=>t.jsxs("tr",{className:"border-b border-zinc-800/60 bg-zinc-900 last:border-b-0",children:[t.jsx("td",{className:"px-4 py-3 font-medium text-white",children:e.agent}),t.jsx("td",{className:"px-4 py-3 text-right tabular-nums text-zinc-300",children:e.tokens.toLocaleString()}),t.jsx("td",{className:"px-4 py-3 text-right tabular-nums text-zinc-300",children:d(e.cost)}),t.jsxs("td",{className:"px-4 py-3 text-right tabular-nums text-zinc-300",children:[e.pct,"%"]})]},e.agent))})]})})]})]}),l==="recommendations"&&t.jsxs("div",{id:"panel-recommendations",role:"tabpanel","aria-label":"Recommendations panel",className:"space-y-6",children:[t.jsxs("div",{className:"flex flex-wrap items-center gap-3",children:[t.jsx("span",{className:"text-xs font-medium uppercase tracking-wider text-zinc-500",children:"Status"}),P.map(e=>t.jsx("button",{"aria-pressed":x===e.value,className:o("rounded-full px-3 py-1 text-xs font-medium transition-colors focus-visible:outline-none focus-visible:ring-2 focus-visible:ring-indigo-500",x===e.value?"bg-indigo-500 text-white":"bg-zinc-800 text-zinc-400 hover:text-zinc-200"),onClick:()=>T(e.value),children:e.label},e.value)),t.jsx("span",{className:"ml-2 text-xs font-medium uppercase tracking-wider text-zinc-500",children:"Effort"}),F.map(e=>t.jsx("button",{"aria-pressed":g===e.value,className:o("rounded-full px-3 py-1 text-xs font-medium transition-colors focus-visible:outline-none focus-visible:ring-2 focus-visible:ring-indigo-500",g===e.value?"bg-indigo-500 text-white":"bg-zinc-800 text-zinc-400 hover:text-zinc-200"),onClick:()=>M(e.value),children:e.label},e.value))]}),t.jsxs("div",{className:"space-y-4",children:[k.length===0&&t.jsx("p",{className:"py-8 text-center text-sm text-zinc-500",children:"No optimizations match the current filters."}),k.map(e=>{const i=e.status==="dismissed",s=e.status==="applied",n=B[e.effort];return t.jsx("div",{className:o("rounded-lg border border-zinc-800 bg-zinc-900 p-5 transition-opacity",i&&"opacity-50"),children:t.jsxs("div",{className:"flex flex-wrap items-start justify-between gap-4",children:[t.jsxs("div",{className:"flex-1 space-y-2",children:[t.jsx("div",{className:"flex flex-wrap items-center gap-2",children:t.jsxs("h3",{className:o("text-base font-semibold",i?"text-zinc-500 line-through":"text-white"),children:[s&&t.jsx("span",{className:"mr-1.5 inline-block text-emerald-400","aria-label":"Applied",children:"✓"}),e.title]})}),t.jsx("p",{className:"text-sm leading-relaxed text-zinc-400",children:e.description}),t.jsxs("div",{className:"flex flex-wrap items-center gap-2 pt-1",children:[t.jsxs("span",{className:o("inline-flex items-center gap-1.5 rounded-full bg-zinc-800 px-2.5 py-0.5 text-xs font-medium",C[e.category]),children:[t.jsx("span",{className:o("inline-block h-1.5 w-1.5 rounded-full",S[e.category])}),z[e.category]]}),t.jsxs("span",{className:o("rounded-full px-2.5 py-0.5 text-xs font-medium",n.bg,n.text),children:[n.label," effort"]})]})]}),t.jsxs("div",{className:"flex flex-col items-end gap-3",children:[t.jsxs("div",{className:"text-right",children:[t.jsx("p",{className:"text-2xl font-bold tabular-nums text-emerald-400",children:d(e.estimatedSavings)}),t.jsx("p",{className:"text-xs text-zinc-500",children:"savings / month"})]}),e.status==="pending"&&t.jsxs("div",{className:"flex gap-2",children:[t.jsx("button",{onClick:()=>I(e.id),"aria-label":`Apply optimization: ${e.title}`,className:"rounded-md bg-indigo-500 px-3 py-1.5 text-xs font-medium text-white transition-colors hover:bg-indigo-400 focus-visible:outline-none focus-visible:ring-2 focus-visible:ring-indigo-500 focus-visible:ring-offset-2 focus-visible:ring-offset-zinc-900",children:"Apply"}),t.jsx("button",{onClick:()=>$(e.id),"aria-label":`Dismiss optimization: ${e.title}`,className:"rounded-md bg-zinc-800 px-3 py-1.5 text-xs font-medium text-zinc-400 transition-colors hover:text-zinc-200 focus-visible:outline-none focus-visible:ring-2 focus-visible:ring-indigo-500 focus-visible:ring-offset-2 focus-visible:ring-offset-zinc-900",children:"Dismiss"})]}),s&&t.jsx("span",{className:"text-xs font-medium text-emerald-400",children:"Applied"}),i&&t.jsx("span",{className:"text-xs font-medium text-zinc-500",children:"Dismissed"})]})]})},e.id)})]}),t.jsxs("div",{className:"rounded-lg border border-zinc-800 bg-zinc-900/50 px-5 py-3 text-center text-sm text-zinc-400",children:[t.jsx("span",{className:"font-medium text-white",children:N.count})," ","optimization",N.count!==1?"s":""," applied, saving"," ",t.jsxs("span",{className:"font-medium text-emerald-400",children:[d(N.savings),"/month"]})]})]})]})]})}export{Y as default};
