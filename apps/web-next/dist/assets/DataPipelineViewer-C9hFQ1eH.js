import{r as l,j as e,c as r,R as f}from"./index-CCNFd_0f.js";const a=[{id:"p-001",name:"Agent Session Export",description:"Extracts session data, transforms to analytics schema, loads to warehouse",schedule:"0 3 * * *",status:"success",lastRunAt:"2026-02-22 03:00:01",nextRunAt:"2026-02-23 03:00:00",stages:[{id:"s1",name:"Extract Sessions",kind:"extract",status:"success",durationMs:1240,records:2840},{id:"s2",name:"Validate Schema",kind:"validate",status:"success",durationMs:320,records:2840},{id:"s3",name:"Enrich Metadata",kind:"transform",status:"success",durationMs:2100,records:2836},{id:"s4",name:"Aggregate KPIs",kind:"transform",status:"success",durationMs:880,records:48},{id:"s5",name:"Load to BigQuery",kind:"load",status:"success",durationMs:4200,records:2836},{id:"s6",name:"Notify Stephan",kind:"notify",status:"success",durationMs:110}],runs:[{id:"r1",startedAt:"2026-02-22 03:00:01",finishedAt:"2026-02-22 03:02:19",status:"success",recordsIn:2840,recordsOut:2836,durationMs:138e3,triggeredBy:"cron"},{id:"r2",startedAt:"2026-02-21 03:00:00",finishedAt:"2026-02-21 03:01:55",status:"success",recordsIn:3102,recordsOut:3100,durationMs:115e3,triggeredBy:"cron"},{id:"r3",startedAt:"2026-02-20 03:00:00",finishedAt:"2026-02-20 03:03:44",status:"failed",recordsIn:2995,recordsOut:0,durationMs:224e3,triggeredBy:"cron"},{id:"r4",startedAt:"2026-02-20 10:15:22",finishedAt:"2026-02-20 10:17:30",status:"success",recordsIn:2995,recordsOut:2991,durationMs:128e3,triggeredBy:"manual:tim"}]},{id:"p-002",name:"Token Cost Reconciliation",description:"Pulls raw token usage, maps to billing tiers, reconciles against provider invoices",schedule:"0 * * * *",status:"running",lastRunAt:"2026-02-22 02:00:00",nextRunAt:"2026-02-22 03:00:00",stages:[{id:"s1",name:"Fetch Usage API",kind:"extract",status:"success",durationMs:820,records:14200},{id:"s2",name:"Parse Provider Data",kind:"transform",status:"running",records:8440},{id:"s3",name:"Apply Tier Pricing",kind:"transform",status:"idle"},{id:"s4",name:"Load to Ledger",kind:"load",status:"idle"},{id:"s5",name:"Billing Alert Check",kind:"validate",status:"idle"}],runs:[{id:"r1",startedAt:"2026-02-22 02:00:00",status:"running",recordsIn:14200,recordsOut:0,triggeredBy:"cron"},{id:"r2",startedAt:"2026-02-22 01:00:01",finishedAt:"2026-02-22 01:01:12",status:"success",recordsIn:12800,recordsOut:12800,durationMs:71e3,triggeredBy:"cron"},{id:"r3",startedAt:"2026-02-22 00:00:01",finishedAt:"2026-02-22 00:01:05",status:"success",recordsIn:11200,recordsOut:11200,durationMs:64e3,triggeredBy:"cron"}]},{id:"p-003",name:"Knowledge Base Sync",description:"Pulls docs from GitHub, embeds via OpenAI, upserts into vector store",schedule:"0 */6 * * *",status:"failed",lastRunAt:"2026-02-22 00:00:05",nextRunAt:"2026-02-22 06:00:00",stages:[{id:"s1",name:"Clone Repo",kind:"extract",status:"success",durationMs:3200,records:284},{id:"s2",name:"Diff Changed Files",kind:"transform",status:"success",durationMs:420,records:18},{id:"s3",name:"Generate Embeddings",kind:"transform",status:"failed",durationMs:4800,records:0,errorMessage:"OpenAI API rate limit: 429 Too Many Requests after 14 retries"},{id:"s4",name:"Upsert Vector Store",kind:"load",status:"skipped"},{id:"s5",name:"Purge Stale Docs",kind:"transform",status:"skipped"}],runs:[{id:"r1",startedAt:"2026-02-22 00:00:05",finishedAt:"2026-02-22 00:08:25",status:"failed",recordsIn:284,recordsOut:0,durationMs:5e5,triggeredBy:"cron"},{id:"r2",startedAt:"2026-02-21 18:00:01",finishedAt:"2026-02-21 18:06:20",status:"success",recordsIn:276,recordsOut:276,durationMs:379e3,triggeredBy:"cron"}]},{id:"p-004",name:"Slack Digest Generator",description:"Aggregates daily agent activity and posts a digest to #cb-standup",schedule:"0 9 * * 1-5",status:"scheduled",lastRunAt:"2026-02-21 09:00:02",nextRunAt:"2026-02-22 09:00:00",stages:[{id:"s1",name:"Fetch Agent Events",kind:"extract",status:"idle"},{id:"s2",name:"Summarize with LLM",kind:"transform",status:"idle"},{id:"s3",name:"Format Slack Message",kind:"transform",status:"idle"},{id:"s4",name:"Post to #cb-standup",kind:"notify",status:"idle"}],runs:[{id:"r1",startedAt:"2026-02-21 09:00:02",finishedAt:"2026-02-21 09:00:48",status:"success",recordsIn:142,recordsOut:1,durationMs:46e3,triggeredBy:"cron"},{id:"r2",startedAt:"2026-02-20 09:00:01",finishedAt:"2026-02-20 09:00:52",status:"success",recordsIn:98,recordsOut:1,durationMs:51e3,triggeredBy:"cron"}]},{id:"p-005",name:"Audit Log Archiver",description:"Compresses and archives audit logs older than 30 days to cold storage",schedule:"0 0 1 * *",status:"idle",lastRunAt:"2026-02-01 00:00:01",nextRunAt:"2026-03-01 00:00:00",stages:[{id:"s1",name:"Query Old Logs",kind:"extract",status:"idle"},{id:"s2",name:"Compress Gzip",kind:"transform",status:"idle"},{id:"s3",name:"Upload to S3",kind:"load",status:"idle"},{id:"s4",name:"Prune DB",kind:"transform",status:"idle"}],runs:[{id:"r1",startedAt:"2026-02-01 00:00:01",finishedAt:"2026-02-01 00:12:30",status:"success",recordsIn:48e3,recordsOut:48e3,durationMs:75e4,triggeredBy:"cron"}]}],m={extract:"bg-sky-500",transform:"bg-violet-500",load:"bg-emerald-500",validate:"bg-amber-500",notify:"bg-indigo-500"},b={idle:"opacity-30",running:"opacity-100 animate-pulse",success:"opacity-100",failed:"opacity-100",skipped:"opacity-20"},u={idle:"bg-zinc-700 text-zinc-300",running:"bg-indigo-500/20 text-indigo-400 ring-1 ring-indigo-500/30",success:"bg-emerald-500/10 text-emerald-400 ring-1 ring-emerald-500/20",failed:"bg-rose-500/10 text-rose-400 ring-1 ring-rose-500/20",scheduled:"bg-amber-500/10 text-amber-400 ring-1 ring-amber-500/20"},j={idle:"text-zinc-400",running:"text-indigo-400",success:"text-emerald-400",failed:"text-rose-400",scheduled:"text-amber-400"};function x(i){return i>=6e4?`${Math.floor(i/6e4)}m ${Math.floor(i%6e4/1e3)}s`:`${(i/1e3).toFixed(1)}s`}function v({stages:i}){return e.jsx("div",{className:"flex items-center gap-0 overflow-x-auto py-2",children:i.map((t,d)=>e.jsxs(f.Fragment,{children:[e.jsxs("div",{className:"shrink-0 flex flex-col items-center gap-1.5 min-w-[80px]",children:[e.jsxs("div",{className:r("w-10 h-10 rounded-full flex items-center justify-center text-white text-lg shadow",m[t.kind],b[t.status],t.status==="failed"&&"ring-2 ring-rose-500"),children:[t.kind==="extract"&&"â¬‡",t.kind==="transform"&&"âš™",t.kind==="load"&&"â¬†",t.kind==="validate"&&"âœ“",t.kind==="notify"&&"ðŸ“£"]}),e.jsx("span",{className:"text-xs text-zinc-400 text-center leading-tight max-w-[72px]",children:t.name}),t.durationMs&&e.jsx("span",{className:"text-xs text-zinc-600",children:x(t.durationMs)}),t.records!==void 0&&e.jsxs("span",{className:"text-xs text-zinc-600",children:[t.records.toLocaleString()," rec"]})]}),d<i.length-1&&e.jsx("div",{className:r("h-0.5 w-8 shrink-0",i[d+1].status==="idle"||i[d+1].status==="skipped"?"bg-zinc-700":"bg-zinc-500")})]},t.id))})}function y(){const[i,t]=l.useState("p-001"),[d,h]=l.useState("overview"),[c,g]=l.useState("all"),p=a.filter(s=>c==="all"||s.status===c),n=a.find(s=>s.id===i)??a[0],o=n.stages.find(s=>s.status==="failed");return e.jsxs("div",{className:"h-full flex flex-col bg-zinc-950 overflow-hidden",children:[e.jsxs("div",{className:"shrink-0 border-b border-zinc-800 px-6 py-4 flex items-center justify-between",children:[e.jsxs("div",{children:[e.jsx("h1",{className:"text-lg font-semibold text-white",children:"Data Pipeline Viewer"}),e.jsxs("p",{className:"text-xs text-zinc-500 mt-0.5",children:[a.length," pipelines â€” ETL, sync, digest"]})]}),e.jsx("div",{className:"flex gap-1.5",children:["all","running","success","failed","scheduled","idle"].map(s=>e.jsx("button",{onClick:()=>g(s),className:r("px-2.5 py-1 rounded text-xs font-medium transition-colors focus-visible:outline-none focus-visible:ring-2 focus-visible:ring-indigo-500",c===s?"bg-indigo-600 text-white":"bg-zinc-800 text-zinc-400 hover:text-zinc-200"),children:s.charAt(0).toUpperCase()+s.slice(1)},s))})]}),e.jsxs("div",{className:"flex-1 flex overflow-hidden",children:[e.jsx("ul",{className:"w-72 shrink-0 border-r border-zinc-800 overflow-y-auto divide-y divide-zinc-800/50",role:"listbox","aria-label":"Pipelines",children:p.map(s=>e.jsx("li",{children:e.jsxs("button",{role:"option","aria-selected":s.id===i,onClick:()=>t(s.id),className:r("w-full text-left px-4 py-3 hover:bg-zinc-800/60 transition-colors focus-visible:outline-none focus-visible:ring-2 focus-visible:ring-inset focus-visible:ring-indigo-500",s.id===i&&"bg-zinc-800 border-l-2 border-indigo-500"),children:[e.jsxs("div",{className:"flex items-start justify-between gap-2",children:[e.jsx("span",{className:"text-xs font-medium text-zinc-200 leading-tight",children:s.name}),e.jsx("span",{className:r("shrink-0 text-xs px-1.5 py-0.5 rounded font-medium",u[s.status]),children:s.status})]}),e.jsx("div",{className:"mt-1 text-xs text-zinc-500 truncate",children:s.description}),e.jsxs("div",{className:"mt-1 flex items-center gap-2 text-xs text-zinc-600",children:[e.jsx("span",{className:"font-mono",children:s.schedule}),e.jsx("span",{children:"Â·"}),e.jsxs("span",{children:[s.stages.length," stages"]})]})]})},s.id))}),e.jsxs("div",{className:"flex-1 overflow-y-auto",children:[e.jsxs("div",{className:"p-5 border-b border-zinc-800",children:[e.jsxs("div",{className:"flex items-start justify-between gap-4",children:[e.jsxs("div",{children:[e.jsx("h2",{className:"text-base font-semibold text-white",children:n.name}),e.jsx("p",{className:"text-sm text-zinc-400 mt-0.5",children:n.description})]}),e.jsxs("div",{className:"flex items-center gap-3 shrink-0",children:[e.jsx("button",{className:"px-3 py-1.5 bg-indigo-600 hover:bg-indigo-500 text-white text-xs font-medium rounded transition-colors focus-visible:outline-none focus-visible:ring-2 focus-visible:ring-indigo-400",children:"Run Now"}),e.jsx("span",{className:r("text-xs px-2 py-1 rounded font-medium",u[n.status]),children:n.status})]})]}),e.jsxs("div",{className:"mt-4 flex gap-6 text-xs text-zinc-500",children:[e.jsxs("div",{children:[e.jsx("span",{className:"text-zinc-600",children:"Schedule"}),e.jsx("span",{className:"ml-2 font-mono text-zinc-300",children:n.schedule})]}),e.jsxs("div",{children:[e.jsx("span",{className:"text-zinc-600",children:"Last run"}),e.jsx("span",{className:"ml-2 text-zinc-300",children:n.lastRunAt})]}),e.jsxs("div",{children:[e.jsx("span",{className:"text-zinc-600",children:"Next run"}),e.jsx("span",{className:"ml-2 text-zinc-300",children:n.nextRunAt})]})]})]}),e.jsx("div",{className:"border-b border-zinc-800 px-5",children:e.jsx("div",{className:"flex gap-0",role:"tablist",children:["overview","runs"].map(s=>e.jsx("button",{role:"tab","aria-selected":d===s,onClick:()=>h(s),className:r("px-4 py-2.5 text-sm font-medium border-b-2 transition-colors focus-visible:outline-none focus-visible:ring-2 focus-visible:ring-indigo-500",d===s?"border-indigo-500 text-indigo-400":"border-transparent text-zinc-500 hover:text-zinc-300"),children:s.charAt(0).toUpperCase()+s.slice(1)},s))})}),e.jsxs("div",{className:"p-5 space-y-5",children:[d==="overview"&&e.jsxs(e.Fragment,{children:[e.jsxs("div",{className:"bg-zinc-900 rounded-lg border border-zinc-800 p-4",children:[e.jsx("div",{className:"text-xs font-medium text-zinc-400 mb-3 uppercase tracking-wide",children:"Pipeline DAG"}),e.jsx(v,{stages:n.stages})]}),o&&e.jsxs("div",{className:"bg-rose-500/5 border border-rose-500/20 rounded-lg p-4",children:[e.jsxs("div",{className:"text-xs font-semibold text-rose-400 mb-1",children:["Stage Failed: ",o.name]}),e.jsx("p",{className:"text-xs text-rose-300/80",children:o.errorMessage})]}),e.jsxs("div",{className:"bg-zinc-900 rounded-lg border border-zinc-800 overflow-hidden",children:[e.jsx("div",{className:"px-4 py-3 border-b border-zinc-800 text-xs font-medium text-zinc-400 uppercase tracking-wide",children:"Stage Details"}),e.jsxs("table",{className:"w-full text-xs",children:[e.jsx("thead",{children:e.jsxs("tr",{className:"border-b border-zinc-800",children:[e.jsx("th",{className:"text-left px-4 py-2 text-zinc-500 font-medium",children:"Stage"}),e.jsx("th",{className:"text-left px-4 py-2 text-zinc-500 font-medium",children:"Kind"}),e.jsx("th",{className:"text-right px-4 py-2 text-zinc-500 font-medium",children:"Records"}),e.jsx("th",{className:"text-right px-4 py-2 text-zinc-500 font-medium",children:"Duration"}),e.jsx("th",{className:"text-right px-4 py-2 text-zinc-500 font-medium",children:"Status"})]})}),e.jsx("tbody",{className:"divide-y divide-zinc-800/50",children:n.stages.map(s=>e.jsxs("tr",{className:"hover:bg-zinc-800/30",children:[e.jsx("td",{className:"px-4 py-2 text-zinc-200",children:s.name}),e.jsx("td",{className:"px-4 py-2",children:e.jsx("span",{className:r("px-1.5 py-0.5 rounded text-white text-xs",m[s.kind]),children:s.kind})}),e.jsx("td",{className:"px-4 py-2 text-right text-zinc-400",children:s.records!==void 0?s.records.toLocaleString():"â€”"}),e.jsx("td",{className:"px-4 py-2 text-right text-zinc-400",children:s.durationMs!==void 0?x(s.durationMs):"â€”"}),e.jsx("td",{className:"px-4 py-2 text-right",children:e.jsx("span",{className:r("font-medium",s.status==="success"?"text-emerald-400":s.status==="failed"?"text-rose-400":s.status==="running"?"text-indigo-400":s.status==="skipped"?"text-zinc-600":"text-zinc-500"),children:s.status})})]},s.id))})]})]})]}),d==="runs"&&e.jsxs("div",{className:"bg-zinc-900 rounded-lg border border-zinc-800 overflow-hidden",children:[e.jsx("div",{className:"px-4 py-3 border-b border-zinc-800 text-xs font-medium text-zinc-400 uppercase tracking-wide",children:"Run History"}),e.jsx("div",{className:"divide-y divide-zinc-800/50",children:n.runs.map(s=>e.jsxs("div",{className:"px-4 py-3 flex items-center gap-4",children:[e.jsxs("div",{className:"flex-1 min-w-0",children:[e.jsxs("div",{className:"flex items-center gap-2",children:[e.jsx("span",{className:r("text-xs font-semibold",j[s.status]),children:s.status.toUpperCase()}),e.jsxs("span",{className:"text-xs text-zinc-500",children:["by ",s.triggeredBy]})]}),e.jsx("div",{className:"text-xs text-zinc-400 mt-0.5",children:s.startedAt}),s.finishedAt&&e.jsx("div",{className:"text-xs text-zinc-600",children:s.finishedAt})]}),e.jsxs("div",{className:"text-right shrink-0",children:[e.jsxs("div",{className:"text-xs text-zinc-300",children:[s.recordsIn.toLocaleString()," â†’ ",s.recordsOut.toLocaleString()]}),e.jsx("div",{className:"text-xs text-zinc-500 mt-0.5",children:s.durationMs?x(s.durationMs):"runningâ€¦"})]})]},s.id))})]})]})]})]})]})}export{y as default};
