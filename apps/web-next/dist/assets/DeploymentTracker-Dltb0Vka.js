import{r as c,j as e,c as a}from"./index-kB-f6kHk.js";const r=[{id:"d1",version:"v2.5.1",environment:"production",service:"api-gateway",status:"success",deployer:"alice@corp.io",commit:"a3f9e12",branch:"feat/session-improvements",startTime:"2026-02-22T07:12:00Z",duration:284,previousVersion:"v2.5.0",steps:[{name:"Build Docker Image",status:"done",duration:62},{name:"Run Unit Tests",status:"done",duration:41},{name:"Push to Registry",status:"done",duration:18},{name:"Deploy to Staging",status:"done",duration:35},{name:"Smoke Tests",status:"done",duration:22},{name:"Deploy to Production",status:"done",duration:67},{name:"Health Check",status:"done",duration:12},{name:"Update CDN",status:"done",duration:27}]},{id:"d2",version:"v1.8.3",environment:"staging",service:"auth-service",status:"in_progress",deployer:"bob@corp.io",commit:"c7d2f44",branch:"fix/token-refresh",startTime:"2026-02-22T07:38:00Z",steps:[{name:"Build Docker Image",status:"done",duration:58},{name:"Run Unit Tests",status:"done",duration:34},{name:"Push to Registry",status:"done",duration:15},{name:"Deploy to Staging",status:"running",log:"Waiting for pods to become ready... (2/3 ready)"},{name:"Smoke Tests",status:"pending"},{name:"Health Check",status:"pending"}]},{id:"d3",version:"v3.1.0",environment:"production",service:"billing-service",status:"failed",deployer:"carol@corp.io",commit:"e9a1b33",branch:"feat/billing-v3",startTime:"2026-02-22T06:45:00Z",duration:142,previousVersion:"v3.0.8",steps:[{name:"Build Docker Image",status:"done",duration:71},{name:"Run Unit Tests",status:"done",duration:49},{name:"Push to Registry",status:"done",duration:14},{name:"Deploy to Staging",status:"done",duration:33},{name:"Smoke Tests",status:"failed",duration:8,log:`ERROR: POST /api/v2/subscriptions returned 500. Expected 201.
Stack trace: TypeError: Cannot read property 'plan' of undefined
  at BillingController.createSubscription:142`},{name:"Deploy to Production",status:"skipped"},{name:"Health Check",status:"skipped"}]},{id:"d4",version:"v2.2.1",environment:"production",service:"analytics-pipeline",status:"rolled_back",deployer:"david@corp.io",commit:"b5c8f22",branch:"refactor/pipeline-v2",startTime:"2026-02-21T21:15:00Z",duration:621,previousVersion:"v2.1.9",notes:"Rolled back due to 3x increase in p99 latency after deploy.",steps:[{name:"Build Docker Image",status:"done",duration:68},{name:"Run Unit Tests",status:"done",duration:52},{name:"Push to Registry",status:"done",duration:17},{name:"Deploy to Production",status:"done",duration:72},{name:"Health Check",status:"done",duration:10},{name:"Rollback Triggered",status:"done",duration:45,log:"Latency threshold exceeded. Auto-rollback initiated."}]},{id:"d5",version:"v0.9.4",environment:"dev",service:"notification-service",status:"scheduled",deployer:"eve@corp.io",commit:"f2d7a11",branch:"feat/push-v2",startTime:"2026-02-22T10:00:00Z",steps:[{name:"Build Docker Image",status:"pending"},{name:"Run Unit Tests",status:"pending"},{name:"Deploy to Dev",status:"pending"}]}],b={production:"bg-rose-400/15 text-rose-400 border-rose-500/30",staging:"bg-amber-400/15 text-amber-400 border-amber-500/30",dev:"bg-zinc-700 text-zinc-400 border-zinc-600"},m={success:"bg-emerald-400/15 text-emerald-400 border-emerald-500/30",in_progress:"bg-indigo-400/15 text-indigo-300 border-indigo-500/30",failed:"bg-rose-400/15 text-rose-400 border-rose-500/30",rolled_back:"bg-amber-400/15 text-amber-400 border-amber-500/30",scheduled:"bg-zinc-700 text-zinc-400 border-zinc-600"},S={done:"âœ“",running:"â³",pending:"â—‹",failed:"âœ—",skipped:"â€”"},w={done:"text-emerald-400",running:"text-indigo-300",pending:"text-zinc-600",failed:"text-rose-400",skipped:"text-zinc-600"};function D(){const[l,h]=c.useState("timeline"),[n,v]=c.useState(null),[x,g]=c.useState("all"),[u,j]=c.useState("all"),f=[{id:"timeline",label:"Timeline",emoji:"ðŸ“…"},{id:"services",label:"Services",emoji:"âš™ï¸"},{id:"environments",label:"Environments",emoji:"ðŸŒ"},{id:"settings",label:"Settings",emoji:"ðŸ”§"}],y=r.filter(s=>!(x!=="all"&&s.environment!==x||u!=="all"&&s.status!==u)),p=s=>s>=60?`${Math.floor(s/60)}m ${s%60}s`:`${s}s`,N=Array.from(new Set(r.map(s=>s.service))),z=["production","staging","dev"].map(s=>({env:s,recent:r.filter(t=>t.environment===s).sort((t,i)=>i.startTime.localeCompare(t.startTime))[0],count:r.filter(t=>t.environment===s).length}));return e.jsxs("div",{className:"min-h-screen bg-zinc-950 text-white p-6",children:[e.jsxs("div",{className:"flex items-center justify-between mb-6",children:[e.jsxs("div",{children:[e.jsx("h1",{className:"text-2xl font-bold text-white",children:"Deployment Tracker"}),e.jsx("p",{className:"text-zinc-400 text-sm mt-0.5",children:"Track releases across environments and services"})]}),e.jsx("button",{className:"text-sm px-4 py-2 bg-indigo-500 text-white rounded hover:bg-indigo-600 transition-colors",children:"ðŸš€ New Deployment"})]}),e.jsx("div",{className:"grid grid-cols-4 gap-4 mb-6",children:[{label:"Deployments Today",value:r.filter(s=>s.startTime.startsWith("2026-02-22")).length,color:"text-indigo-400"},{label:"Success Rate",value:`${Math.round(r.filter(s=>s.status==="success").length/r.length*100)}%`,color:"text-emerald-400"},{label:"Avg Deploy Time",value:p(Math.round(r.filter(s=>s.duration).reduce((s,t)=>s+(t.duration??0),0)/r.filter(s=>s.duration).length)),color:"text-white"},{label:"Failed",value:r.filter(s=>s.status==="failed"||s.status==="rolled_back").length,color:"text-rose-400"}].map(s=>e.jsxs("div",{className:"bg-zinc-900 border border-zinc-800 rounded-lg p-4",children:[e.jsx("div",{className:"text-xs text-zinc-400 mb-1",children:s.label}),e.jsx("div",{className:a("text-2xl font-bold",s.color),children:s.value})]},s.label))}),e.jsx("div",{className:"flex gap-1 mb-6 bg-zinc-900 p-1 rounded-lg border border-zinc-800 w-fit",children:f.map(s=>e.jsxs("button",{onClick:()=>h(s.id),className:a("px-4 py-2 text-sm rounded-md transition-colors",l===s.id?"bg-indigo-500 text-white":"text-zinc-400 hover:text-white hover:bg-zinc-800"),children:[s.emoji," ",s.label]},s.id))}),l==="timeline"&&e.jsxs("div",{className:"grid grid-cols-5 gap-4",children:[e.jsxs("div",{className:"col-span-2 space-y-3",children:[e.jsxs("div",{className:"flex gap-2",children:[e.jsxs("select",{value:x,onChange:s=>g(s.target.value),className:"bg-zinc-800 border border-zinc-700 text-white text-xs rounded px-2 py-1.5 focus:outline-none",children:[e.jsx("option",{value:"all",children:"All Envs"}),e.jsx("option",{value:"production",children:"Production"}),e.jsx("option",{value:"staging",children:"Staging"}),e.jsx("option",{value:"dev",children:"Dev"})]}),e.jsxs("select",{value:u,onChange:s=>j(s.target.value),className:"bg-zinc-800 border border-zinc-700 text-white text-xs rounded px-2 py-1.5 focus:outline-none",children:[e.jsx("option",{value:"all",children:"All Status"}),e.jsx("option",{value:"success",children:"Success"}),e.jsx("option",{value:"in_progress",children:"In Progress"}),e.jsx("option",{value:"failed",children:"Failed"}),e.jsx("option",{value:"rolled_back",children:"Rolled Back"}),e.jsx("option",{value:"scheduled",children:"Scheduled"})]})]}),y.map(s=>e.jsxs("button",{onClick:()=>v(s),className:a("w-full bg-zinc-900 border rounded-lg p-4 text-left hover:border-zinc-600 transition-colors",(n==null?void 0:n.id)===s.id?"border-indigo-500/50":"border-zinc-800"),children:[e.jsxs("div",{className:"flex items-start justify-between mb-2",children:[e.jsxs("div",{children:[e.jsx("div",{className:"text-sm font-medium text-white",children:s.service}),e.jsxs("div",{className:"text-xs text-zinc-400 font-mono",children:[s.version," Â· ",s.commit]})]}),e.jsx("span",{className:a("text-xs px-2 py-0.5 rounded border",m[s.status]),children:s.status.replace("_"," ")})]}),e.jsxs("div",{className:"flex items-center gap-2 text-xs text-zinc-500",children:[e.jsx("span",{className:a("px-1.5 py-0.5 rounded border text-xs",b[s.environment]),children:s.environment}),e.jsx("span",{children:s.deployer}),s.duration&&e.jsx("span",{className:"ml-auto",children:p(s.duration)})]})]},s.id))]}),e.jsx("div",{className:"col-span-3",children:n?e.jsxs("div",{className:"bg-zinc-900 border border-zinc-800 rounded-lg p-5 space-y-5",children:[e.jsxs("div",{className:"flex items-center justify-between",children:[e.jsxs("div",{children:[e.jsxs("h3",{className:"text-base font-semibold text-white",children:[n.service," ",n.version]}),e.jsxs("div",{className:"text-xs text-zinc-400 mt-0.5 font-mono",children:[n.branch," Â· ",n.commit]})]}),e.jsx("span",{className:a("text-sm px-3 py-1 rounded border",m[n.status]),children:n.status.replace("_"," ")})]}),e.jsx("div",{className:"grid grid-cols-3 gap-3 text-xs",children:[["Environment",n.environment],["Deployed by",n.deployer],["Started",new Date(n.startTime).toLocaleTimeString()],["Duration",n.duration?p(n.duration):"â€”"],["Previous",n.previousVersion??"â€”"],["Branch",n.branch]].map(([s,t])=>e.jsxs("div",{className:"bg-zinc-800 rounded p-2",children:[e.jsx("div",{className:"text-zinc-500",children:s}),e.jsx("div",{className:"text-zinc-300 mt-0.5 truncate",children:t})]},s))}),n.notes&&e.jsxs("div",{className:"bg-amber-400/10 border border-amber-500/30 rounded p-3 text-xs text-amber-300",children:["âš  ",n.notes]}),e.jsxs("div",{children:[e.jsx("div",{className:"text-xs font-medium text-zinc-400 mb-3",children:"Deploy Steps"}),e.jsx("div",{className:"space-y-2",children:n.steps.map((s,t)=>e.jsxs("div",{className:a("bg-zinc-800 rounded-lg p-3",s.status==="failed"&&"border border-rose-500/30"),children:[e.jsxs("div",{className:"flex items-center gap-2",children:[e.jsx("span",{className:a("text-sm font-mono",w[s.status]),children:S[s.status]}),e.jsx("span",{className:"text-sm text-white flex-1",children:s.name}),s.duration&&e.jsxs("span",{className:"text-xs text-zinc-500",children:[s.duration,"s"]}),s.status==="running"&&e.jsx("span",{className:"text-xs text-indigo-300 animate-pulse",children:"running..."})]}),s.log&&e.jsx("pre",{className:a("mt-2 text-xs font-mono rounded p-2 overflow-x-auto whitespace-pre-wrap text-xs leading-relaxed",s.status==="failed"?"bg-rose-900/30 text-rose-200":"bg-zinc-700 text-zinc-300"),children:s.log})]},t))})]}),(n.status==="failed"||n.status==="in_progress")&&e.jsxs("div",{className:"flex gap-2 pt-2 border-t border-zinc-800",children:[n.status==="failed"&&n.previousVersion&&e.jsxs("button",{className:"text-xs px-3 py-2 bg-amber-500/20 border border-amber-500/30 text-amber-300 rounded hover:bg-amber-500/30 transition-colors",children:["ðŸ”„ Rollback to ",n.previousVersion]}),e.jsx("button",{className:"text-xs px-3 py-2 bg-indigo-500/20 border border-indigo-500/30 text-indigo-300 rounded hover:bg-indigo-500/30 transition-colors",children:"ðŸ” Retry"}),n.status==="in_progress"&&e.jsx("button",{className:"text-xs px-3 py-2 bg-rose-400/10 border border-rose-500/30 text-rose-300 rounded hover:bg-rose-400/20 transition-colors",children:"â¹ Abort"})]})]}):e.jsx("div",{className:"bg-zinc-900 border border-zinc-800 rounded-lg p-10 text-center text-zinc-500 text-sm",children:"Select a deployment to view details and step logs"})})]}),l==="services"&&e.jsx("div",{className:"grid grid-cols-3 gap-4",children:N.map(s=>{const t=r.filter(o=>o.service===s),i=t.sort((o,T)=>T.startTime.localeCompare(o.startTime))[0],d=Math.round(t.filter(o=>o.status==="success").length/t.length*100);return e.jsxs("div",{className:"bg-zinc-900 border border-zinc-800 rounded-lg p-4",children:[e.jsxs("div",{className:"flex items-center justify-between mb-3",children:[e.jsx("h3",{className:"text-sm font-semibold text-white",children:s}),e.jsx("span",{className:a("text-xs px-2 py-0.5 rounded border",m[i.status]),children:i.status.replace("_"," ")})]}),e.jsxs("div",{className:"space-y-1.5 text-xs",children:[e.jsxs("div",{className:"flex justify-between",children:[e.jsx("span",{className:"text-zinc-400",children:"Latest"}),e.jsx("span",{className:"text-zinc-300",children:i.version})]}),e.jsxs("div",{className:"flex justify-between",children:[e.jsx("span",{className:"text-zinc-400",children:"Environment"}),e.jsx("span",{className:a("px-1.5 py-0.5 rounded border text-xs",b[i.environment]),children:i.environment})]}),e.jsxs("div",{className:"flex justify-between",children:[e.jsx("span",{className:"text-zinc-400",children:"Success Rate"}),e.jsxs("span",{className:a(d>=80?"text-emerald-400":"text-rose-400"),children:[d,"%"]})]}),e.jsxs("div",{className:"flex justify-between",children:[e.jsx("span",{className:"text-zinc-400",children:"Total Deploys"}),e.jsx("span",{className:"text-zinc-300",children:t.length})]})]})]},s)})}),l==="environments"&&e.jsx("div",{className:"space-y-4",children:z.map(({env:s,recent:t,count:i})=>t&&e.jsxs("div",{className:"bg-zinc-900 border border-zinc-800 rounded-lg p-5",children:[e.jsxs("div",{className:"flex items-center justify-between mb-4",children:[e.jsxs("div",{className:"flex items-center gap-3",children:[e.jsx("span",{className:a("text-sm px-3 py-1 rounded border capitalize font-semibold",b[s]),children:s}),e.jsxs("span",{className:"text-sm text-zinc-400",children:[i," deployment",i!==1?"s":""]})]}),e.jsxs("span",{className:a("text-xs px-2 py-0.5 rounded border",m[t.status]),children:["Latest: ",t.status.replace("_"," ")]})]}),e.jsx("div",{className:"grid grid-cols-4 gap-3 text-xs",children:[["Service",t.service],["Version",t.version],["Deployer",t.deployer],["Time",new Date(t.startTime).toLocaleTimeString()]].map(([d,o])=>e.jsxs("div",{className:"bg-zinc-800 rounded p-2",children:[e.jsx("div",{className:"text-zinc-500",children:d}),e.jsx("div",{className:"text-zinc-300 mt-0.5",children:o})]},d))})]},s))}),l==="settings"&&e.jsxs("div",{className:"max-w-lg space-y-4",children:[[{label:"Default Environment",value:"staging",type:"select",opts:["production","staging","dev"]},{label:"Auto-rollback on failure",value:"enabled",type:"select",opts:["enabled","disabled"]},{label:"Deployment notifications",value:"slack",type:"select",opts:["slack","email","both","none"]},{label:"Max concurrent deployments",value:"3",type:"number"},{label:"Deployment window (UTC)",value:"06:00â€“22:00",type:"text"},{label:"Health check timeout (s)",value:"60",type:"number"}].map(s=>{var t;return e.jsxs("div",{children:[e.jsx("label",{className:"block text-xs text-zinc-400 mb-1.5",children:s.label}),s.type==="select"?e.jsx("select",{className:"w-full bg-zinc-800 border border-zinc-700 text-white text-sm rounded px-3 py-2 focus:outline-none",children:(t=s.opts)==null?void 0:t.map(i=>e.jsx("option",{selected:i===s.value,children:i},i))}):e.jsx("input",{type:s.type,defaultValue:s.value,className:"w-full bg-zinc-800 border border-zinc-700 text-white text-sm rounded px-3 py-2 focus:outline-none focus:border-indigo-500"})]},s.label)}),e.jsx("button",{className:"px-4 py-2 bg-indigo-500 text-white text-sm rounded hover:bg-indigo-600 transition-colors",children:"Save Settings"})]})]})}export{D as default};
