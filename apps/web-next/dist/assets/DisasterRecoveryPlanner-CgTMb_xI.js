import{r as d,j as e,c as a}from"./index-BvekFnzL.js";const o={ready:"bg-emerald-500/20 text-emerald-400 border border-emerald-500/30",degraded:"bg-amber-500/20 text-amber-400 border border-amber-500/30",untested:"bg-zinc-500/20 text-zinc-400 border border-zinc-500/30",failed:"bg-rose-500/20 text-rose-400 border border-rose-500/30"},x={ready:"bg-emerald-400",degraded:"bg-amber-400",untested:"bg-zinc-400",failed:"bg-rose-400"},u={pass:"bg-emerald-500/20 text-emerald-400",fail:"bg-rose-500/20 text-rose-400",partial:"bg-amber-500/20 text-amber-400",skipped:"bg-zinc-500/20 text-zinc-400"},N={primary:"bg-indigo-500/20 text-indigo-400",secondary:"bg-sky-500/20 text-sky-400",tertiary:"bg-zinc-500/20 text-zinc-400"},m=[{id:"s1",name:"US-East-1",region:"us-east-1",role:"primary",status:"ready",lastSync:"2s ago",lagMs:0,capacity:78},{id:"s2",name:"US-West-2",region:"us-west-2",role:"secondary",status:"ready",lastSync:"12s ago",lagMs:124,capacity:45},{id:"s3",name:"EU-Central-1",region:"eu-central-1",role:"secondary",status:"degraded",lastSync:"2m ago",lagMs:890,capacity:62},{id:"s4",name:"AP-Southeast",region:"ap-southeast",role:"tertiary",status:"untested",lastSync:"8m ago",lagMs:450,capacity:30}],i=[{id:"p1",name:"Core API Failover",service:"api-gateway",rto:"< 1hr",rpo:"< 15min",status:"ready",primarySite:"US-East-1",failoverSite:"US-West-2",lastTested:"2025-01-15",nextTest:"2025-04-15",owner:"Platform Team",description:"Automated failover for the core API gateway using Route53 health checks with pre-warmed secondary.",steps:["Detect primary failure via health check (auto, 30s)","Trigger Route53 DNS failover to US-West-2 (auto, 60s)","Validate traffic routing and 2xx response rates","Page on-call engineers for manual verification","Notify stakeholders via PagerDuty"],contacts:["jane@example.com","ops-oncall@example.com"]},{id:"p2",name:"Database Primary Failover",service:"postgres-primary",rto:"1-4hr",rpo:"< 15min",status:"ready",primarySite:"US-East-1",failoverSite:"US-West-2",lastTested:"2024-12-01",nextTest:"2025-03-01",owner:"Data Team",description:"RDS Multi-AZ automatic failover with read replica promotion for regional outage.",steps:["RDS Multi-AZ automatic failover within region (auto, 2-3min)","Promote read replica in US-West-2 (manual, 15-30min)","Update connection strings in app config","Verify data integrity on promoted replica","Run smoke tests against new primary"],contacts:["dba@example.com","backend-oncall@example.com"]},{id:"p3",name:"Search Service Recovery",service:"elasticsearch",rto:"4-24hr",rpo:"1-4hr",status:"degraded",primarySite:"US-East-1",failoverSite:"EU-Central-1",lastTested:"2024-10-20",nextTest:"2025-01-20",owner:"Search Team",description:"Elasticsearch cross-cluster replication with manual promotion. Degraded due to lag in EU cluster.",steps:["Assess EU cluster lag and data freshness","Stop writes to primary (manual)","Confirm EU cluster caught up or accept RPO gap","Promote EU cluster as primary","Update service discovery endpoints","Rebuild index if lag > 4hr threshold"],contacts:["search-team@example.com"]},{id:"p4",name:"CDN Failback Plan",service:"cdn-edge",rto:"< 1hr",rpo:"< 15min",status:"ready",primarySite:"US-East-1",failoverSite:"US-West-2",lastTested:"2025-02-01",nextTest:"2025-05-01",owner:"Infra Team",description:"CDN origin failover via weighted routing rules.",steps:["Detect origin health check failure","Shift 100% traffic to secondary origin","Purge stale CDN cache if needed","Validate edge node cache hit rates"],contacts:["infra@example.com"]}],l=[{id:"t1",planId:"p4",planName:"CDN Failback Plan",date:"2025-02-01",result:"pass",duration:42,rtoActual:22,rpoActual:5,notes:"Smooth. All automated steps completed under SLA.",tester:"alice"},{id:"t2",planId:"p1",planName:"Core API Failover",date:"2025-01-15",result:"pass",duration:55,rtoActual:48,rpoActual:8,notes:"DNS TTL delay added 18min. Recommend lowering TTL.",tester:"bob"},{id:"t3",planId:"p2",planName:"Database Primary Failover",date:"2024-12-01",result:"partial",duration:180,rtoActual:155,rpoActual:12,notes:"Replica promotion took longer than expected.",tester:"carol"},{id:"t4",planId:"p3",planName:"Search Service Recovery",date:"2024-10-20",result:"fail",duration:240,rtoActual:310,rpoActual:180,notes:"RTO exceeded target. EU replication lag was >2hr.",tester:"dave"},{id:"t5",planId:"p1",planName:"Core API Failover",date:"2024-09-10",result:"pass",duration:50,rtoActual:40,rpoActual:6,notes:"Clean run.",tester:"alice"}],f=[{id:"f1",date:"2025-01-28 14:22",service:"api-gateway",from:"US-East-1",to:"US-West-2",trigger:"AZ power outage",duration:38,outcome:"success"},{id:"f2",date:"2024-12-15 03:11",service:"cdn-edge",from:"US-East-1",to:"US-West-2",trigger:"BGP route leak",duration:12,outcome:"success"},{id:"f3",date:"2024-11-02 09:44",service:"elasticsearch",from:"US-East-1",to:"EU-Central-1",trigger:"Datacenter fire suppression",duration:420,outcome:"partial"},{id:"f4",date:"2024-09-18 17:05",service:"postgres-primary",from:"US-East-1",to:"US-West-2",trigger:"Scheduled maintenance",duration:22,outcome:"success"}],j=i.filter(r=>r.status==="ready").length,y=i.filter(r=>r.status==="degraded").length;function S(){const[r,h]=d.useState("overview"),[t,c]=d.useState(null),[n,g]=d.useState("all"),b=n==="all"?i:i.filter(s=>s.status===n),v=[{id:"overview",label:"Overview"},{id:"plans",label:"DR Plans"},{id:"tests",label:"Test History"},{id:"history",label:"Failover Events"}];return e.jsx("div",{className:"min-h-screen bg-zinc-950 text-white p-6",children:e.jsxs("div",{className:"max-w-6xl mx-auto space-y-6",children:[e.jsxs("div",{className:"flex items-center justify-between",children:[e.jsxs("div",{children:[e.jsx("h1",{className:"text-2xl font-bold text-white",children:"Disaster Recovery Planner"}),e.jsx("p",{className:"text-zinc-400 text-sm mt-1",children:"Failover plans, test schedules, and recovery history"})]}),e.jsx("button",{className:"px-4 py-2 rounded-lg bg-indigo-600 hover:bg-indigo-500 text-sm font-medium transition-colors",children:"+ New Plan"})]}),e.jsx("div",{className:"flex gap-1 border-b border-zinc-800",children:v.map(s=>e.jsx("button",{onClick:()=>{h(s.id),c(null)},className:a("px-4 py-2 text-sm font-medium border-b-2 transition-colors",r===s.id?"border-indigo-500 text-white":"border-transparent text-zinc-400 hover:text-zinc-200"),children:s.label},s.id))}),r==="overview"&&e.jsxs("div",{className:"space-y-6",children:[e.jsx("div",{className:"grid grid-cols-2 md:grid-cols-4 gap-4",children:[{label:"Total Plans",value:i.length,color:"text-white"},{label:"Ready",value:j,color:"text-emerald-400"},{label:"Degraded/Untested",value:y+i.filter(s=>s.status==="untested").length,color:"text-amber-400"},{label:"Sites Online",value:`${m.filter(s=>s.status==="ready").length}/${m.length}`,color:"text-indigo-400"}].map(s=>e.jsxs("div",{className:"bg-zinc-900 border border-zinc-800 rounded-xl p-4",children:[e.jsx("p",{className:"text-xs text-zinc-500 uppercase tracking-wider",children:s.label}),e.jsx("p",{className:a("text-3xl font-bold mt-1",s.color),children:s.value})]},s.label))}),e.jsxs("div",{className:"bg-zinc-900 border border-zinc-800 rounded-xl p-5",children:[e.jsx("h2",{className:"text-sm font-semibold text-zinc-300 mb-4",children:"Site Health"}),e.jsx("div",{className:"grid grid-cols-1 md:grid-cols-2 gap-3",children:m.map(s=>e.jsxs("div",{className:"bg-zinc-800/50 rounded-lg p-4 flex items-center gap-4",children:[e.jsx("div",{className:a("w-2.5 h-2.5 rounded-full flex-shrink-0",x[s.status])}),e.jsxs("div",{className:"flex-1 min-w-0",children:[e.jsxs("div",{className:"flex items-center gap-2 mb-1",children:[e.jsx("span",{className:"text-sm font-medium text-white",children:s.name}),e.jsx("span",{className:a("text-xs px-1.5 py-0.5 rounded font-medium",N[s.role]),children:s.role}),e.jsx("span",{className:a("text-xs px-1.5 py-0.5 rounded font-medium",o[s.status]),children:s.status})]}),e.jsxs("p",{className:"text-xs text-zinc-500",children:[s.region," · Sync: ",s.lastSync,s.lagMs>0?` · Lag: ${s.lagMs}ms`:" · In sync"]}),e.jsxs("div",{className:"mt-2 flex items-center gap-2",children:[e.jsx("div",{className:"flex-1 bg-zinc-700 rounded-full h-1.5",children:e.jsx("div",{className:a("h-1.5 rounded-full",s.capacity>80?"bg-rose-500":s.capacity>60?"bg-amber-500":"bg-emerald-500"),style:{width:`${s.capacity}%`}})}),e.jsxs("span",{className:"text-xs text-zinc-400 w-8 text-right",children:[s.capacity,"%"]})]})]})]},s.id))})]}),e.jsxs("div",{className:"bg-zinc-900 border border-zinc-800 rounded-xl p-5",children:[e.jsx("h2",{className:"text-sm font-semibold text-zinc-300 mb-4",children:"RTO / RPO Coverage"}),e.jsx("div",{className:"space-y-3",children:i.map(s=>e.jsxs("div",{className:"flex items-center gap-4",children:[e.jsx("div",{className:"w-40 text-xs text-zinc-300 truncate",children:s.name}),e.jsxs("div",{className:"flex gap-2",children:[e.jsxs("span",{className:"text-xs bg-sky-500/20 text-sky-400 px-2 py-0.5 rounded",children:["RTO: ",s.rto]}),e.jsxs("span",{className:"text-xs bg-violet-500/20 text-violet-400 px-2 py-0.5 rounded",children:["RPO: ",s.rpo]})]}),e.jsx("div",{className:"flex-1",children:e.jsx("div",{className:a("w-2.5 h-2.5 rounded-full inline-block",x[s.status])})}),e.jsxs("span",{className:"text-xs text-zinc-500",children:["Next test: ",s.nextTest]})]},s.id))})]})]}),r==="plans"&&e.jsxs("div",{className:"space-y-4",children:[e.jsx("div",{className:"flex gap-2",children:["all","ready","degraded","untested","failed"].map(s=>e.jsx("button",{onClick:()=>{g(s),c(null)},className:a("px-3 py-1.5 rounded-lg text-xs font-medium transition-colors",n===s?"bg-indigo-600 text-white":"bg-zinc-800 text-zinc-400 hover:text-zinc-200"),children:s==="all"?"All":s.charAt(0).toUpperCase()+s.slice(1)},s))}),t?e.jsxs("div",{className:"bg-zinc-900 border border-zinc-800 rounded-xl p-5 space-y-5",children:[e.jsxs("div",{className:"flex items-center gap-3",children:[e.jsx("button",{onClick:()=>c(null),className:"text-zinc-400 hover:text-white text-sm",children:"← Back"}),e.jsx("span",{className:a("text-xs px-2 py-0.5 rounded-full font-medium",o[t.status]),children:t.status})]}),e.jsxs("div",{children:[e.jsx("h2",{className:"text-xl font-bold text-white",children:t.name}),e.jsx("p",{className:"text-zinc-400 text-sm mt-1",children:t.description})]}),e.jsx("div",{className:"grid grid-cols-2 md:grid-cols-4 gap-4",children:[{label:"Service",value:t.service},{label:"Owner",value:t.owner},{label:"RTO Target",value:t.rto},{label:"RPO Target",value:t.rpo},{label:"Primary Site",value:t.primarySite},{label:"Failover Site",value:t.failoverSite},{label:"Last Tested",value:t.lastTested},{label:"Next Test",value:t.nextTest}].map(s=>e.jsxs("div",{className:"bg-zinc-800/60 rounded-lg p-3",children:[e.jsx("p",{className:"text-xs text-zinc-500",children:s.label}),e.jsx("p",{className:"text-sm font-medium text-white mt-0.5",children:s.value})]},s.label))}),e.jsxs("div",{children:[e.jsx("h3",{className:"text-sm font-semibold text-zinc-300 mb-3",children:"Failover Steps"}),e.jsx("ol",{className:"space-y-2",children:t.steps.map((s,p)=>e.jsxs("li",{className:"flex gap-3 items-start",children:[e.jsx("span",{className:"w-6 h-6 rounded-full bg-indigo-500/20 text-indigo-400 text-xs flex items-center justify-center flex-shrink-0 font-bold",children:p+1}),e.jsx("span",{className:"text-sm text-zinc-300 leading-relaxed",children:s})]},p))})]}),e.jsxs("div",{children:[e.jsx("h3",{className:"text-sm font-semibold text-zinc-300 mb-2",children:"Emergency Contacts"}),e.jsx("div",{className:"flex gap-2 flex-wrap",children:t.contacts.map(s=>e.jsx("span",{className:"text-xs bg-zinc-800 text-zinc-300 px-2 py-1 rounded",children:s},s))})]}),e.jsxs("div",{children:[e.jsx("h3",{className:"text-sm font-semibold text-zinc-300 mb-3",children:"Test History"}),e.jsx("div",{className:"space-y-2",children:l.filter(s=>s.planId===t.id).length===0?e.jsx("p",{className:"text-zinc-500 text-sm",children:"No tests recorded."}):l.filter(s=>s.planId===t.id).map(s=>e.jsxs("div",{className:"bg-zinc-800/60 rounded-lg p-3 flex items-center gap-4",children:[e.jsx("span",{className:a("text-xs px-2 py-0.5 rounded font-medium",u[s.result]),children:s.result}),e.jsx("span",{className:"text-xs text-zinc-400",children:s.date}),e.jsxs("span",{className:"text-xs text-zinc-500",children:["RTO: ",s.rtoActual,"min / RPO: ",s.rpoActual,"min"]}),e.jsx("span",{className:"text-xs text-zinc-500 flex-1",children:s.notes})]},s.id))})]})]}):e.jsx("div",{className:"space-y-3",children:b.map(s=>e.jsxs("button",{onClick:()=>c(s),className:"w-full text-left bg-zinc-900 border border-zinc-800 hover:border-zinc-600 rounded-xl p-4 transition-colors",children:[e.jsxs("div",{className:"flex items-start justify-between gap-4",children:[e.jsxs("div",{className:"flex items-center gap-3 flex-1 min-w-0",children:[e.jsx("div",{className:a("w-2.5 h-2.5 rounded-full flex-shrink-0 mt-0.5",x[s.status])}),e.jsxs("div",{className:"min-w-0",children:[e.jsx("p",{className:"text-sm font-semibold text-white truncate",children:s.name}),e.jsxs("p",{className:"text-xs text-zinc-500 mt-0.5",children:[s.service," · Owner: ",s.owner]})]})]}),e.jsxs("div",{className:"flex gap-2 flex-shrink-0",children:[e.jsxs("span",{className:"text-xs bg-sky-500/20 text-sky-400 px-2 py-0.5 rounded",children:["RTO ",s.rto]}),e.jsxs("span",{className:"text-xs bg-violet-500/20 text-violet-400 px-2 py-0.5 rounded",children:["RPO ",s.rpo]}),e.jsx("span",{className:a("text-xs px-2 py-0.5 rounded font-medium",o[s.status]),children:s.status})]})]}),e.jsxs("p",{className:"text-xs text-zinc-500 mt-2 ml-5",children:[s.primarySite," → ",s.failoverSite," · Last tested: ",s.lastTested," · Next: ",s.nextTest]})]},s.id))})]}),r==="tests"&&e.jsxs("div",{className:"space-y-3",children:[e.jsx("div",{className:"grid grid-cols-4 gap-3 mb-4",children:[{label:"Total Tests",value:l.length,color:"text-white"},{label:"Passed",value:l.filter(s=>s.result==="pass").length,color:"text-emerald-400"},{label:"Failed",value:l.filter(s=>s.result==="fail").length,color:"text-rose-400"},{label:"Partial",value:l.filter(s=>s.result==="partial").length,color:"text-amber-400"}].map(s=>e.jsxs("div",{className:"bg-zinc-900 border border-zinc-800 rounded-xl p-4",children:[e.jsx("p",{className:"text-xs text-zinc-500 uppercase tracking-wider",children:s.label}),e.jsx("p",{className:a("text-2xl font-bold mt-1",s.color),children:s.value})]},s.label))}),l.map(s=>e.jsxs("div",{className:"bg-zinc-900 border border-zinc-800 rounded-xl p-4",children:[e.jsxs("div",{className:"flex items-center justify-between mb-2",children:[e.jsxs("div",{className:"flex items-center gap-3",children:[e.jsx("span",{className:a("text-xs px-2 py-0.5 rounded font-medium",u[s.result]),children:s.result.toUpperCase()}),e.jsx("span",{className:"text-sm font-medium text-white",children:s.planName})]}),e.jsx("span",{className:"text-xs text-zinc-500",children:s.date})]}),e.jsxs("div",{className:"grid grid-cols-3 gap-4 mb-2",children:[e.jsxs("div",{className:"bg-zinc-800/50 rounded p-2",children:[e.jsx("p",{className:"text-xs text-zinc-500",children:"Duration"}),e.jsxs("p",{className:"text-sm font-medium text-white",children:[s.duration,"min"]})]}),e.jsxs("div",{className:"bg-zinc-800/50 rounded p-2",children:[e.jsx("p",{className:"text-xs text-zinc-500",children:"Actual RTO"}),e.jsxs("p",{className:"text-sm font-medium text-sky-400",children:[s.rtoActual,"min"]})]}),e.jsxs("div",{className:"bg-zinc-800/50 rounded p-2",children:[e.jsx("p",{className:"text-xs text-zinc-500",children:"Actual RPO"}),e.jsxs("p",{className:"text-sm font-medium text-violet-400",children:[s.rpoActual,"min"]})]})]}),e.jsx("p",{className:"text-xs text-zinc-400",children:s.notes}),e.jsxs("p",{className:"text-xs text-zinc-600 mt-1",children:["Tester: ",s.tester]})]},s.id))]}),r==="history"&&e.jsxs("div",{className:"space-y-3",children:[e.jsx("p",{className:"text-sm text-zinc-400",children:"Real failover events (planned and unplanned)"}),f.map(s=>e.jsxs("div",{className:"bg-zinc-900 border border-zinc-800 rounded-xl p-4",children:[e.jsxs("div",{className:"flex items-center justify-between mb-2",children:[e.jsxs("div",{className:"flex items-center gap-3",children:[e.jsx("span",{className:a("text-xs px-2 py-0.5 rounded font-medium",s.outcome==="success"?"bg-emerald-500/20 text-emerald-400":s.outcome==="partial"?"bg-amber-500/20 text-amber-400":"bg-rose-500/20 text-rose-400"),children:s.outcome}),e.jsx("span",{className:"text-sm font-semibold text-white",children:s.service})]}),e.jsx("span",{className:"text-xs text-zinc-500",children:s.date})]}),e.jsxs("div",{className:"flex items-center gap-3 text-sm text-zinc-300 mb-1",children:[e.jsx("span",{className:"text-zinc-500",children:s.from}),e.jsx("span",{className:"text-zinc-600",children:"→"}),e.jsx("span",{className:"text-zinc-300",children:s.to})]}),e.jsxs("div",{className:"flex gap-4 text-xs text-zinc-500",children:[e.jsxs("span",{children:["Trigger: ",s.trigger]}),e.jsxs("span",{children:["Duration: ",s.duration,"min"]})]})]},s.id))]})]})})}export{S as default};
