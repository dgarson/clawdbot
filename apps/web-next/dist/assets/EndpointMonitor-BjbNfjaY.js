import{r,j as e,c as a}from"./index-C59JeFug.js";const m={healthy:"bg-emerald-500/20 text-emerald-400 border border-emerald-500/30",degraded:"bg-amber-500/20 text-amber-400 border border-amber-500/30",down:"bg-rose-500/20 text-rose-400 border border-rose-500/30",unknown:"bg-zinc-500/20 text-zinc-400 border border-zinc-500/30"},x={healthy:"bg-emerald-400",degraded:"bg-amber-400",down:"bg-rose-400 animate-pulse",unknown:"bg-zinc-400"},p={GET:"bg-emerald-500/20 text-emerald-400",POST:"bg-sky-500/20 text-sky-400",PUT:"bg-amber-500/20 text-amber-400",DELETE:"bg-rose-500/20 text-rose-400",PATCH:"bg-violet-500/20 text-violet-400",HEAD:"bg-zinc-500/20 text-zinc-400"},z={critical:"bg-rose-500/20 text-rose-400 border-rose-500/30",warning:"bg-amber-500/20 text-amber-400 border-amber-500/30",info:"bg-sky-500/20 text-sky-400 border-sky-500/30"},n=[{id:"e1",name:"Auth: Login",url:"https://api.example.com/v1/auth/login",method:"POST",status:"healthy",latencyMs:82,p95Ms:145,p99Ms:210,successRate:99.8,checksPerMin:60,lastChecked:"5s ago",responseCode:200,region:"us-east-1",tags:["auth","critical"],uptime30d:99.97},{id:"e2",name:"Users: Get Profile",url:"https://api.example.com/v1/users/:id",method:"GET",status:"healthy",latencyMs:45,p95Ms:98,p99Ms:140,successRate:99.9,checksPerMin:60,lastChecked:"3s ago",responseCode:200,region:"us-east-1",tags:["users","read"],uptime30d:99.99},{id:"e3",name:"Search: Query",url:"https://api.example.com/v1/search",method:"GET",status:"degraded",latencyMs:820,p95Ms:2100,p99Ms:4500,successRate:97.2,checksPerMin:60,lastChecked:"8s ago",responseCode:200,region:"us-east-1",tags:["search","perf"],uptime30d:99.2},{id:"e4",name:"Payments: Charge",url:"https://api.example.com/v1/payments/charge",method:"POST",status:"healthy",latencyMs:310,p95Ms:680,p99Ms:1100,successRate:99.95,checksPerMin:30,lastChecked:"12s ago",responseCode:200,region:"us-east-1",tags:["payments","critical"],uptime30d:99.98},{id:"e5",name:"Webhooks: Deliver",url:"https://api.example.com/v1/webhooks/deliver",method:"POST",status:"down",latencyMs:0,p95Ms:0,p99Ms:0,successRate:0,checksPerMin:60,lastChecked:"2s ago",responseCode:503,region:"us-east-1",tags:["webhooks"],uptime30d:98.1},{id:"e6",name:"Analytics: Track",url:"https://api.example.com/v1/analytics/track",method:"POST",status:"healthy",latencyMs:28,p95Ms:55,p99Ms:80,successRate:99.7,checksPerMin:60,lastChecked:"1s ago",responseCode:202,region:"us-east-1",tags:["analytics"],uptime30d:99.95},{id:"e7",name:"Files: Upload",url:"https://api.example.com/v1/files/upload",method:"POST",status:"healthy",latencyMs:220,p95Ms:850,p99Ms:1800,successRate:99.4,checksPerMin:10,lastChecked:"30s ago",responseCode:201,region:"us-east-1",tags:["files"],uptime30d:99.8},{id:"e8",name:"Admin: Stats",url:"https://api.example.com/v1/admin/stats",method:"GET",status:"unknown",latencyMs:0,p95Ms:0,p99Ms:0,successRate:0,checksPerMin:5,lastChecked:"5m ago",responseCode:0,region:"eu-central-1",tags:["admin"],uptime30d:95}],h=[{id:"i1",endpointId:"e5",endpointName:"Webhooks: Deliver",startTime:"2025-02-22 14:10",endTime:null,duration:"12m (ongoing)",impact:"Webhook deliveries failing, downstream integrations delayed.",rootCause:"Investigating â€” potential pod OOM in webhook-worker namespace."},{id:"i2",endpointId:"e3",endpointName:"Search: Query",startTime:"2025-02-22 11:30",endTime:"2025-02-22 12:05",duration:"35min",impact:"Search latency 10x normal, some timeouts.",rootCause:"Elasticsearch shard rebalancing triggered by node addition."},{id:"i3",endpointId:"e1",endpointName:"Auth: Login",startTime:"2025-02-20 03:14",endTime:"2025-02-20 03:22",duration:"8min",impact:"Login failures for EU users, 503 responses.",rootCause:"Redis session store connection exhaustion; pool size increased."}],w=[{id:"a1",name:"High Latency",condition:"p95 > 2000ms for 3 consecutive checks",severity:"warning",enabled:!0,lastFired:"35m ago"},{id:"a2",name:"Down (503+)",condition:"response code >= 500 for 2 checks",severity:"critical",enabled:!0,lastFired:"12m ago"},{id:"a3",name:"Success Rate Drop",condition:"success rate < 98% over 5min window",severity:"critical",enabled:!0,lastFired:"2d ago"},{id:"a4",name:"Cert Expiry",condition:"TLS cert expires in < 14 days",severity:"warning",enabled:!0,lastFired:null},{id:"a5",name:"Slow Response",condition:"p50 > 500ms for 5 consecutive checks",severity:"info",enabled:!1,lastFired:null},{id:"a6",name:"Unknown Status",condition:"no successful check for 5 minutes",severity:"warning",enabled:!0,lastFired:"4h ago"}],l=[{time:"13:00",p50:42,p95:95,p99:140},{time:"13:05",p50:45,p95:98,p99:145},{time:"13:10",p50:820,p95:2100,p99:4500},{time:"13:15",p50:750,p95:1900,p99:4100},{time:"13:20",p50:610,p95:1600,p99:3200},{time:"13:25",p50:480,p95:1200,p99:2800},{time:"13:30",p50:200,p95:450,p99:900},{time:"13:35",p50:95,p95:210,p99:380},{time:"13:40",p50:65,p95:150,p99:240},{time:"13:45",p50:55,p95:120,p99:190},{time:"13:50",p50:50,p95:110,p99:170},{time:"13:55",p50:48,p95:105,p99:165}],o=Math.max(...l.map(i=>i.p99));function M(){const[i,u]=r.useState("overview"),[t,d]=r.useState(null),[c,g]=r.useState("all"),b=c==="all"?n:n.filter(s=>s.status===c),j=n.filter(s=>s.status==="down").length,v=n.filter(s=>s.status==="degraded").length,N=n.filter(s=>s.status==="healthy").length,f=[{id:"overview",label:"Endpoints"},{id:"incidents",label:`Incidents${h.some(s=>!s.endTime)?" ðŸ”´":""}`},{id:"alerts",label:"Alert Rules"}];return e.jsx("div",{className:"min-h-screen bg-zinc-950 text-white p-6",children:e.jsxs("div",{className:"max-w-6xl mx-auto space-y-6",children:[e.jsxs("div",{className:"flex items-center justify-between",children:[e.jsxs("div",{children:[e.jsx("h1",{className:"text-2xl font-bold text-white",children:"Endpoint Monitor"}),e.jsx("p",{className:"text-zinc-400 text-sm mt-1",children:"Uptime, latency, and incident tracking for API endpoints"})]}),e.jsx("button",{className:"px-4 py-2 rounded-lg bg-indigo-600 hover:bg-indigo-500 text-sm font-medium transition-colors",children:"+ Add Endpoint"})]}),e.jsxs("div",{className:"grid grid-cols-3 gap-4",children:[e.jsxs("div",{className:"bg-zinc-900 border border-zinc-800 rounded-xl p-4 flex items-center gap-3",children:[e.jsx("div",{className:"w-3 h-3 rounded-full bg-emerald-400"}),e.jsxs("div",{children:[e.jsx("p",{className:"text-xs text-zinc-500",children:"Healthy"}),e.jsx("p",{className:"text-2xl font-bold text-emerald-400",children:N})]})]}),e.jsxs("div",{className:"bg-zinc-900 border border-zinc-800 rounded-xl p-4 flex items-center gap-3",children:[e.jsx("div",{className:"w-3 h-3 rounded-full bg-amber-400"}),e.jsxs("div",{children:[e.jsx("p",{className:"text-xs text-zinc-500",children:"Degraded"}),e.jsx("p",{className:"text-2xl font-bold text-amber-400",children:v})]})]}),e.jsxs("div",{className:"bg-zinc-900 border border-zinc-800 rounded-xl p-4 flex items-center gap-3",children:[e.jsx("div",{className:"w-3 h-3 rounded-full bg-rose-400 animate-pulse"}),e.jsxs("div",{children:[e.jsx("p",{className:"text-xs text-zinc-500",children:"Down"}),e.jsx("p",{className:"text-2xl font-bold text-rose-400",children:j})]})]})]}),e.jsx("div",{className:"flex gap-1 border-b border-zinc-800",children:f.map(s=>e.jsx("button",{onClick:()=>{u(s.id),d(null)},className:a("px-4 py-2 text-sm font-medium border-b-2 transition-colors",i===s.id?"border-indigo-500 text-white":"border-transparent text-zinc-400 hover:text-zinc-200"),children:s.label},s.id))}),i==="overview"&&e.jsxs("div",{className:"space-y-4",children:[e.jsx("div",{className:"flex gap-2",children:["all","healthy","degraded","down","unknown"].map(s=>e.jsx("button",{onClick:()=>{g(s==="all"?"all":s),d(null)},className:a("px-3 py-1.5 rounded-lg text-xs font-medium transition-colors",c===s?"bg-indigo-600 text-white":"bg-zinc-800 text-zinc-400 hover:text-zinc-200"),children:s.charAt(0).toUpperCase()+s.slice(1)},s))}),t?e.jsxs("div",{className:"bg-zinc-900 border border-zinc-800 rounded-xl p-5 space-y-5",children:[e.jsx("button",{onClick:()=>d(null),className:"text-zinc-400 hover:text-white text-sm",children:"â† Back"}),e.jsxs("div",{className:"flex items-center gap-3",children:[e.jsx("div",{className:a("w-3 h-3 rounded-full",x[t.status])}),e.jsx("h2",{className:"text-xl font-bold text-white",children:t.name}),e.jsx("span",{className:a("text-xs px-2 py-0.5 rounded-full font-medium",m[t.status]),children:t.status})]}),e.jsxs("div",{className:"flex items-center gap-2",children:[e.jsx("span",{className:a("text-xs px-2 py-0.5 rounded font-medium",p[t.method]),children:t.method}),e.jsx("code",{className:"text-xs text-zinc-400 bg-zinc-800/80 px-2 py-1 rounded",children:t.url})]}),e.jsx("div",{className:"grid grid-cols-2 md:grid-cols-4 gap-3",children:[{label:"Latency (p50)",value:`${t.latencyMs}ms`,color:"text-white"},{label:"Latency (p95)",value:`${t.p95Ms}ms`,color:t.p95Ms>1e3?"text-amber-400":"text-white"},{label:"Latency (p99)",value:`${t.p99Ms}ms`,color:t.p99Ms>2e3?"text-rose-400":"text-white"},{label:"Success Rate",value:`${t.successRate}%`,color:t.successRate<99?"text-rose-400":"text-emerald-400"},{label:"Uptime (30d)",value:`${t.uptime30d}%`,color:"text-emerald-400"},{label:"Response Code",value:t.responseCode||"N/A",color:t.responseCode>=500?"text-rose-400":"text-white"},{label:"Last Checked",value:t.lastChecked,color:"text-zinc-400"},{label:"Region",value:t.region,color:"text-zinc-400"}].map(s=>e.jsxs("div",{className:"bg-zinc-800/60 rounded-lg p-3",children:[e.jsx("p",{className:"text-xs text-zinc-500",children:s.label}),e.jsx("p",{className:a("text-sm font-semibold mt-0.5",s.color),children:s.value})]},s.label))}),e.jsxs("div",{className:"bg-zinc-800/40 rounded-xl p-4",children:[e.jsx("h3",{className:"text-sm font-semibold text-zinc-300 mb-3",children:"Latency Over Time"}),e.jsx("div",{className:"flex items-end gap-1 h-20",children:l.map((s,y)=>e.jsxs("div",{className:"flex-1 flex flex-col items-stretch gap-0",children:[e.jsx("div",{className:"bg-rose-500/40 rounded-t-sm",style:{height:`${s.p99/o*70}px`},title:`p99: ${s.p99}ms`}),e.jsx("div",{className:"bg-indigo-500 -mt-px",style:{height:`${s.p50/o*70}px`,marginTop:`${-(s.p50/o*70)}px`},title:`p50: ${s.p50}ms`})]},y))}),e.jsxs("div",{className:"flex justify-between text-xs text-zinc-600 mt-1",children:[e.jsx("span",{children:l[0].time}),e.jsx("span",{children:l[l.length-1].time})]}),e.jsxs("div",{className:"flex gap-4 mt-2",children:[e.jsxs("div",{className:"flex items-center gap-1.5",children:[e.jsx("div",{className:"w-2 h-2 rounded-full bg-indigo-500"}),e.jsx("span",{className:"text-xs text-zinc-400",children:"p50"})]}),e.jsxs("div",{className:"flex items-center gap-1.5",children:[e.jsx("div",{className:"w-2 h-2 rounded-full bg-rose-500/40"}),e.jsx("span",{className:"text-xs text-zinc-400",children:"p99"})]})]})]}),e.jsx("div",{className:"flex gap-2 flex-wrap",children:t.tags.map(s=>e.jsx("span",{className:"text-xs bg-zinc-800 text-zinc-400 px-2 py-0.5 rounded",children:s},s))})]}):e.jsx("div",{className:"space-y-2",children:b.map(s=>e.jsx("button",{onClick:()=>d(s),className:"w-full text-left bg-zinc-900 border border-zinc-800 hover:border-zinc-600 rounded-xl p-4 transition-colors",children:e.jsxs("div",{className:"flex items-center gap-4",children:[e.jsx("div",{className:a("w-2.5 h-2.5 rounded-full flex-shrink-0",x[s.status])}),e.jsxs("div",{className:"flex-1 min-w-0",children:[e.jsxs("div",{className:"flex items-center gap-2 mb-0.5",children:[e.jsx("span",{className:a("text-xs px-1.5 py-0.5 rounded font-medium",p[s.method]),children:s.method}),e.jsx("span",{className:"text-sm font-semibold text-white",children:s.name}),e.jsx("span",{className:a("text-xs px-2 py-0.5 rounded-full font-medium",m[s.status]),children:s.status})]}),e.jsx("p",{className:"text-xs text-zinc-500 truncate",children:s.url})]}),e.jsxs("div",{className:"flex items-center gap-6 flex-shrink-0 text-xs",children:[e.jsxs("div",{className:"text-right",children:[e.jsx("p",{className:"text-zinc-500",children:"p50"}),e.jsx("p",{className:a("font-medium",s.latencyMs>500?"text-rose-400":s.latencyMs>200?"text-amber-400":"text-white"),children:s.status==="down"?"â€”":`${s.latencyMs}ms`})]}),e.jsxs("div",{className:"text-right",children:[e.jsx("p",{className:"text-zinc-500",children:"Uptime"}),e.jsxs("p",{className:a("font-medium",s.uptime30d<99?"text-amber-400":"text-emerald-400"),children:[s.uptime30d,"%"]})]}),e.jsxs("div",{className:"text-right",children:[e.jsx("p",{className:"text-zinc-500",children:"Checked"}),e.jsx("p",{className:"text-zinc-400",children:s.lastChecked})]})]})]})},s.id))})]}),i==="incidents"&&e.jsx("div",{className:"space-y-3",children:h.map(s=>e.jsxs("div",{className:a("bg-zinc-900 border rounded-xl p-4",s.endTime?"border-zinc-800":"border-rose-500/30"),children:[e.jsxs("div",{className:"flex items-center justify-between mb-2",children:[e.jsxs("div",{className:"flex items-center gap-3",children:[!s.endTime&&e.jsx("div",{className:"w-2.5 h-2.5 rounded-full bg-rose-400 animate-pulse"}),e.jsx("span",{className:a("text-xs px-2 py-0.5 rounded-full font-medium",s.endTime?"bg-zinc-500/20 text-zinc-400":"bg-rose-500/20 text-rose-400"),children:s.endTime?"RESOLVED":"ONGOING"}),e.jsx("span",{className:"text-sm font-semibold text-white",children:s.endpointName})]}),e.jsxs("span",{className:"text-xs text-zinc-500",children:["Duration: ",s.duration]})]}),e.jsxs("div",{className:"grid grid-cols-2 gap-3 mt-3",children:[e.jsxs("div",{className:"bg-zinc-800/50 rounded p-2",children:[e.jsx("p",{className:"text-xs text-zinc-500",children:"Impact"}),e.jsx("p",{className:"text-xs text-zinc-300 mt-0.5",children:s.impact})]}),e.jsxs("div",{className:"bg-zinc-800/50 rounded p-2",children:[e.jsx("p",{className:"text-xs text-zinc-500",children:"Root Cause"}),e.jsx("p",{className:"text-xs text-zinc-300 mt-0.5",children:s.rootCause})]})]}),e.jsxs("p",{className:"text-xs text-zinc-600 mt-2",children:["Started: ",s.startTime,s.endTime?` Â· Resolved: ${s.endTime}`:""]})]},s.id))}),i==="alerts"&&e.jsx("div",{className:"space-y-3",children:w.map(s=>e.jsxs("div",{className:"bg-zinc-900 border border-zinc-800 rounded-xl p-4 flex items-center gap-4",children:[e.jsx("div",{className:a("w-2.5 h-2.5 rounded-full flex-shrink-0",s.enabled?"bg-emerald-400":"bg-zinc-500")}),e.jsxs("div",{className:"flex-1 min-w-0",children:[e.jsxs("div",{className:"flex items-center gap-2 mb-1",children:[e.jsx("span",{className:"text-sm font-semibold text-white",children:s.name}),e.jsx("span",{className:a("text-xs px-2 py-0.5 rounded border font-medium",z[s.severity]),children:s.severity})]}),e.jsx("p",{className:"text-xs text-zinc-400",children:s.condition}),s.lastFired&&e.jsxs("p",{className:"text-xs text-zinc-600 mt-0.5",children:["Last fired: ",s.lastFired]})]}),e.jsx("button",{className:a("text-xs px-3 py-1.5 rounded-lg font-medium flex-shrink-0 transition-colors",s.enabled?"bg-zinc-700 hover:bg-zinc-600 text-zinc-300":"bg-indigo-600 hover:bg-indigo-500 text-white"),children:s.enabled?"Disable":"Enable"})]},s.id))})]})})}export{M as default};
