import{r as g,j as e,a}from"./index-DPSUG5BZ.js";const x=[{id:"slo-1",name:"API Availability",service:"API Gateway",target:99.9,current:99.94,errorBudgetMinutes:43.2,errorBudgetUsedMinutes:8.4,burnRate1h:.8,burnRate6h:1.1,burnRate24h:.9,status:"healthy",lastBreached:null,trend:[99.95,99.97,99.92,99.94,99.91,99.96,99.94,99.94]},{id:"slo-2",name:"LLM P95 Latency < 500ms",service:"LLM Proxy",target:99.5,current:98.8,errorBudgetMinutes:216,errorBudgetUsedMinutes:186,burnRate1h:8.2,burnRate6h:5.4,burnRate24h:3.1,status:"at-risk",lastBreached:"4 days ago",trend:[99.2,99.5,99.4,99.1,98.9,98.7,98.8,98.8]},{id:"slo-3",name:"Agent Task Success Rate",service:"Agent Runtime",target:99,current:99.4,errorBudgetMinutes:432,errorBudgetUsedMinutes:95,burnRate1h:.6,burnRate6h:.8,burnRate24h:.7,status:"healthy",lastBreached:"18 days ago",trend:[99.1,99.3,99.5,99.4,99.2,99.6,99.4,99.4]},{id:"slo-4",name:"Webhook Delivery Rate",service:"Slack Integration",target:99.5,current:97.2,errorBudgetMinutes:216,errorBudgetUsedMinutes:217,burnRate1h:12.4,burnRate6h:9.8,burnRate24h:7.2,status:"breached",lastBreached:"Active",trend:[99.1,99,98.4,98.1,97.8,97.4,97.2,97.2]},{id:"slo-5",name:"DB Query P99 < 100ms",service:"Database",target:99.9,current:99.97,errorBudgetMinutes:43.2,errorBudgetUsedMinutes:1.2,burnRate1h:.1,burnRate6h:.2,burnRate24h:.1,status:"healthy",lastBreached:null,trend:[99.95,99.97,99.98,99.97,99.96,99.98,99.97,99.97]}],b=[{id:"a1",sloId:"slo-2",window:"1h",threshold:5,triggered:!0,triggeredAt:"07:02 MST"},{id:"a2",sloId:"slo-4",window:"1h",threshold:10,triggered:!0,triggeredAt:"06:55 MST"},{id:"a3",sloId:"slo-4",window:"6h",threshold:5,triggered:!0,triggeredAt:"04:30 MST"},{id:"a4",sloId:"slo-1",window:"6h",threshold:2,triggered:!1,triggeredAt:null},{id:"a5",sloId:"slo-3",window:"24h",threshold:1,triggered:!1,triggeredAt:null}],j=r=>r==="healthy"?"text-emerald-400 bg-emerald-400/10 border-emerald-400/30":r==="at-risk"?"text-amber-400 bg-amber-400/10 border-amber-400/30":"text-rose-400 bg-rose-400/10 border-rose-400/30",f=r=>r==="healthy"?"bg-emerald-400":r==="at-risk"?"bg-amber-400 animate-pulse":"bg-rose-500 animate-pulse",N=r=>r<1?"text-emerald-400":r<5?"text-amber-400":"text-rose-400";function v({used:r,total:d,status:i}){const o=Math.min(r/d*100,100),h=i==="breached"?"bg-rose-500":i==="at-risk"?"bg-amber-400":"bg-emerald-400";return e.jsxs("div",{className:"relative h-2 bg-zinc-800 rounded overflow-hidden",children:[e.jsx("div",{className:a("h-full rounded transition-all",h),style:{width:`${o}%`}}),o>=80&&e.jsx("div",{className:"absolute right-0 top-0 bottom-0 w-px bg-rose-500 opacity-50"})]})}function z({data:r,status:d}){const i=Math.min(...r)-.1,h=Math.max(...r)+.1-i||1,u=d==="breached"?"bg-rose-400":d==="at-risk"?"bg-amber-400":"bg-emerald-400";return e.jsx("div",{className:"flex items-end gap-px h-8",children:r.map((s,l)=>{const m=(s-i)/h*100;return e.jsx("div",{className:a("flex-1 rounded-sm opacity-70",u,l===r.length-1&&"opacity-100"),style:{height:`${Math.max(m,8)}%`},title:`${s}%`},l)})})}function M(){const[r,d]=g.useState("slo-2"),[i,o]=g.useState("6h"),[h,u]=g.useState(!0),s=x.find(t=>t.id===r),l=b.filter(t=>t.triggered),m=t=>i==="1h"?t.burnRate1h:i==="6h"?t.burnRate6h:t.burnRate24h,w=x.filter(t=>t.status==="healthy").length,y=x.filter(t=>t.status==="at-risk").length,B=x.filter(t=>t.status==="breached").length;return e.jsxs("div",{className:"flex h-full bg-zinc-950 overflow-hidden flex-col",children:[e.jsxs("div",{className:"flex items-center gap-6 px-6 py-3 border-b border-zinc-800 bg-zinc-900 flex-shrink-0",children:[e.jsxs("div",{children:[e.jsx("div",{className:"text-sm font-semibold text-white",children:"Error Budget Tracker"}),e.jsx("div",{className:"text-xs text-zinc-500 mt-0.5",children:"30-day rolling window Â· SLO compliance"})]}),e.jsxs("div",{className:"flex items-center gap-4 ml-6",children:[e.jsxs("div",{className:"text-center",children:[e.jsx("div",{className:"text-sm font-bold text-emerald-400",children:w}),e.jsx("div",{className:"text-[10px] text-zinc-500",children:"Healthy"})]}),e.jsxs("div",{className:"text-center",children:[e.jsx("div",{className:"text-sm font-bold text-amber-400",children:y}),e.jsx("div",{className:"text-[10px] text-zinc-500",children:"At Risk"})]}),e.jsxs("div",{className:"text-center",children:[e.jsx("div",{className:"text-sm font-bold text-rose-400",children:B}),e.jsx("div",{className:"text-[10px] text-zinc-500",children:"Breached"})]})]}),e.jsxs("div",{className:"ml-auto flex items-center gap-2",children:[e.jsx("span",{className:"text-[10px] text-zinc-500",children:"Burn Rate Window:"}),e.jsx("div",{className:"flex rounded border border-zinc-700 overflow-hidden",children:["1h","6h","24h"].map(t=>e.jsx("button",{onClick:()=>o(t),className:a("text-xs px-3 py-1 transition-colors",i===t?"bg-indigo-500 text-white":"bg-zinc-800 text-zinc-400 hover:text-white"),children:t},t))})]})]}),e.jsxs("div",{className:"flex-1 flex overflow-hidden",children:[e.jsxs("div",{className:"flex-1 overflow-y-auto",children:[l.length>0&&h&&e.jsxs("div",{className:"bg-rose-500/10 border-b border-rose-500/30 px-4 py-3 flex items-center gap-3",children:[e.jsxs("span",{className:"text-rose-400 text-xs font-semibold",children:["ðŸ”¥ ",l.length," burn rate alert",l.length>1?"s":""," active"]}),e.jsx("div",{className:"flex-1 flex flex-wrap gap-2",children:l.map(t=>{const n=x.find(c=>c.id===t.sloId);return e.jsxs("span",{className:"text-[10px] bg-rose-500/20 text-rose-300 px-2 py-0.5 rounded border border-rose-500/30",children:[n==null?void 0:n.name," Â· ",t.window," > ",t.threshold,"Ã— Â· ",t.triggeredAt]},t.id)})}),e.jsx("button",{onClick:()=>u(!1),className:"text-[10px] text-zinc-500 hover:text-zinc-300",children:"Dismiss"})]}),e.jsxs("table",{className:"w-full",children:[e.jsx("thead",{children:e.jsxs("tr",{className:"border-b border-zinc-800 text-[10px] text-zinc-500 uppercase tracking-wider",children:[e.jsx("th",{className:"text-left px-4 py-3",children:"SLO"}),e.jsx("th",{className:"text-left px-4 py-3",children:"Status"}),e.jsx("th",{className:"text-left px-4 py-3 w-32",children:"Error Budget"}),e.jsxs("th",{className:"text-left px-4 py-3",children:["Burn Rate (",i,")"]}),e.jsx("th",{className:"text-left px-4 py-3",children:"Trend (8w)"}),e.jsx("th",{className:"text-left px-4 py-3",children:"Current SLI"})]})}),e.jsx("tbody",{className:"divide-y divide-zinc-800/50",children:x.map(t=>{const n=Math.min(t.errorBudgetUsedMinutes/t.errorBudgetMinutes*100,100),c=m(t),p=r===t.id;return e.jsxs("tr",{onClick:()=>d(p?null:t.id),className:a("cursor-pointer hover:bg-zinc-900 transition-colors",p&&"bg-indigo-500/5"),children:[e.jsx("td",{className:"px-4 py-3",children:e.jsxs("div",{className:"flex items-center gap-2",children:[e.jsx("span",{className:a("w-2 h-2 rounded-full flex-shrink-0",f(t.status))}),e.jsxs("div",{children:[e.jsx("div",{className:"text-sm font-medium text-white",children:t.name}),e.jsxs("div",{className:"text-[10px] text-zinc-500",children:[t.service," Â· Target ",t.target,"%"]})]})]})}),e.jsx("td",{className:"px-4 py-3",children:e.jsx("span",{className:a("text-[10px] px-2 py-0.5 rounded border font-medium capitalize",j(t.status)),children:t.status})}),e.jsx("td",{className:"px-4 py-3",children:e.jsxs("div",{className:"space-y-1",children:[e.jsx(v,{used:t.errorBudgetUsedMinutes,total:t.errorBudgetMinutes,status:t.status}),e.jsxs("div",{className:"text-[10px] text-zinc-500",children:[n.toFixed(0),"% used Â· ",(t.errorBudgetMinutes-t.errorBudgetUsedMinutes).toFixed(1),"m left"]})]})}),e.jsxs("td",{className:"px-4 py-3",children:[e.jsxs("span",{className:a("text-sm font-bold font-mono",N(c)),children:[c.toFixed(1),"Ã—"]}),e.jsx("div",{className:"text-[10px] text-zinc-600",children:c>1?`âš  ${c.toFixed(1)}Ã— faster than replenish rate`:"Within safe range"})]}),e.jsx("td",{className:"px-4 py-3 w-24",children:e.jsx(z,{data:t.trend,status:t.status})}),e.jsxs("td",{className:"px-4 py-3",children:[e.jsxs("span",{className:a("text-sm font-mono font-semibold",t.current>=t.target?"text-emerald-400":"text-rose-400"),children:[t.current.toFixed(2),"%"]}),e.jsxs("div",{className:"text-[10px] text-zinc-600",children:["vs ",t.target,"% target"]})]})]},t.id)})})]})]}),s&&e.jsxs("div",{className:"w-80 flex-shrink-0 border-l border-zinc-800 bg-zinc-900 overflow-y-auto p-4",children:[e.jsxs("div",{className:"flex items-center justify-between mb-4",children:[e.jsxs("div",{children:[e.jsx("div",{className:"text-sm font-semibold text-white",children:s.name}),e.jsx("div",{className:"text-[10px] text-zinc-500 mt-0.5",children:s.service})]}),e.jsx("button",{onClick:()=>d(null),className:"text-zinc-500 hover:text-white text-xs",children:"âœ•"})]}),e.jsxs("div",{className:a("flex items-center gap-2 px-3 py-2 rounded border mb-4",j(s.status)),children:[e.jsx("span",{className:a("w-2 h-2 rounded-full",f(s.status))}),e.jsx("span",{className:"text-xs font-semibold capitalize",children:s.status}),s.lastBreached&&e.jsxs("span",{className:"ml-auto text-[10px]",children:["Last: ",s.lastBreached]})]}),e.jsxs("div",{className:"mb-4",children:[e.jsx("div",{className:"text-[10px] font-semibold text-zinc-400 uppercase tracking-wider mb-2",children:"Error Budget (30d)"}),e.jsxs("div",{className:"space-y-2",children:[e.jsxs("div",{className:"flex justify-between text-xs",children:[e.jsx("span",{className:"text-zinc-400",children:"Total budget"}),e.jsxs("span",{className:"text-white",children:[s.errorBudgetMinutes.toFixed(1)," min"]})]}),e.jsxs("div",{className:"flex justify-between text-xs",children:[e.jsx("span",{className:"text-zinc-400",children:"Used"}),e.jsxs("span",{className:s.status==="breached"?"text-rose-400":"text-amber-400",children:[s.errorBudgetUsedMinutes.toFixed(1)," min"]})]}),e.jsxs("div",{className:"flex justify-between text-xs",children:[e.jsx("span",{className:"text-zinc-400",children:"Remaining"}),e.jsxs("span",{className:"text-emerald-400",children:[Math.max(0,s.errorBudgetMinutes-s.errorBudgetUsedMinutes).toFixed(1)," min"]})]}),e.jsx(v,{used:s.errorBudgetUsedMinutes,total:s.errorBudgetMinutes,status:s.status})]})]}),e.jsxs("div",{className:"mb-4",children:[e.jsx("div",{className:"text-[10px] font-semibold text-zinc-400 uppercase tracking-wider mb-2",children:"Burn Rates"}),e.jsx("div",{className:"space-y-2",children:[{label:"1-hour",rate:s.burnRate1h},{label:"6-hour",rate:s.burnRate6h},{label:"24-hour",rate:s.burnRate24h}].map(({label:t,rate:n})=>e.jsxs("div",{className:"flex items-center gap-2",children:[e.jsx("span",{className:"text-[10px] text-zinc-500 w-14",children:t}),e.jsx("div",{className:"flex-1 h-1.5 bg-zinc-800 rounded overflow-hidden",children:e.jsx("div",{className:a("h-full rounded",n<1?"bg-emerald-400":n<5?"bg-amber-400":"bg-rose-500"),style:{width:`${Math.min(n*10,100)}%`}})}),e.jsxs("span",{className:a("text-xs font-mono font-bold w-10 text-right",N(n)),children:[n.toFixed(1),"Ã—"]})]},t))})]}),e.jsxs("div",{children:[e.jsxs("div",{className:"text-[10px] font-semibold text-zinc-400 uppercase tracking-wider mb-2",children:["Alerts (",b.filter(t=>t.sloId===s.id).length,")"]}),e.jsx("div",{className:"space-y-1.5",children:b.filter(t=>t.sloId===s.id).map(t=>e.jsxs("div",{className:a("flex items-center gap-2 px-3 py-2 rounded border text-[10px]",t.triggered?"bg-rose-500/10 border-rose-500/30 text-rose-300":"bg-zinc-800 border-zinc-700 text-zinc-500"),children:[e.jsx("span",{className:a("w-1.5 h-1.5 rounded-full flex-shrink-0",t.triggered?"bg-rose-500 animate-pulse":"bg-zinc-600")}),e.jsxs("span",{children:[t.window," burn rate > ",t.threshold,"Ã—"]}),t.triggeredAt&&e.jsx("span",{className:"ml-auto",children:t.triggeredAt})]},t.id))})]})]})]})]})}export{M as default};
