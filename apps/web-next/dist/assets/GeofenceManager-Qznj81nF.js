import{r as g,j as e,c as m}from"./index-BvekFnzL.js";const b=[{id:"geo-001",name:"Main Office Building",shape:"circle",centerLat:40.7128,centerLng:-74.006,radius:150,isActive:!0,triggeredCount:1247},{id:"geo-002",name:"Warehouse Zone A",shape:"polygon",centerLat:40.7589,centerLng:-73.9851,area:25e3,polygonCoords:[{lat:40.76,lng:-73.99},{lat:40.76,lng:-73.98},{lat:40.758,lng:-73.98},{lat:40.758,lng:-73.99}],isActive:!0,triggeredCount:892},{id:"geo-003",name:"Parking Lot North",shape:"circle",centerLat:40.7614,centerLng:-73.9776,radius:80,isActive:!0,triggeredCount:3421},{id:"geo-004",name:"Restricted Area",shape:"circle",centerLat:40.7489,centerLng:-73.968,radius:50,isActive:!1,triggeredCount:156},{id:"geo-005",name:"Campus Perimeter",shape:"polygon",centerLat:40.75,centerLng:-73.975,area:15e4,polygonCoords:[{lat:40.755,lng:-73.98},{lat:40.755,lng:-73.97},{lat:40.745,lng:-73.97},{lat:40.745,lng:-73.98}],isActive:!0,triggeredCount:5678},{id:"geo-006",name:"Loading Dock",shape:"circle",centerLat:40.7549,centerLng:-73.984,radius:30,isActive:!0,triggeredCount:789},{id:"geo-007",name:"Server Room",shape:"circle",centerLat:40.7527,centerLng:-73.9772,radius:15,isActive:!0,triggeredCount:45}],w=[{id:"rule-001",name:"Office Entry Alert",trigger:"enter",geofenceName:"Main Office Building",geofenceId:"geo-001",action:"send_notification",conditions:["time between 08:00-18:00","user is employee"],isEnabled:!0},{id:"rule-002",name:"After Hours Notification",trigger:"enter",geofenceName:"Main Office Building",geofenceId:"geo-001",action:"send_notification",conditions:["time outside 08:00-18:00"],isEnabled:!0},{id:"rule-003",name:"Warehouse Exit Log",trigger:"exit",geofenceName:"Warehouse Zone A",geofenceId:"geo-002",action:"log_event",conditions:["always"],isEnabled:!0},{id:"rule-004",name:"Restricted Block",trigger:"enter",geofenceName:"Restricted Area",geofenceId:"geo-004",action:"block_access",conditions:["user role is not admin"],isEnabled:!1},{id:"rule-005",name:"Perimeter Webhook",trigger:"enter",geofenceName:"Campus Perimeter",geofenceId:"geo-005",action:"webhook",conditions:["always"],isEnabled:!0},{id:"rule-006",name:"Dwell Time Alert",trigger:"dwell",geofenceName:"Loading Dock",geofenceId:"geo-006",action:"send_notification",conditions:["dwell time > 30 minutes"],isEnabled:!0},{id:"rule-007",name:"Parking Occupancy",trigger:"dwell",geofenceName:"Parking Lot North",geofenceId:"geo-003",action:"log_event",conditions:["dwell time > 60 minutes"],isEnabled:!0}],y=[{id:"evt-001",timestamp:new Date(Date.now()-1e3*60*2),userId:"user-123",deviceId:"dev-abc",geofenceName:"Main Office Building",geofenceId:"geo-001",eventType:"enter",lat:40.7129,lng:-74.0061,actionTaken:"Notification sent"},{id:"evt-002",timestamp:new Date(Date.now()-1e3*60*5),userId:"user-456",deviceId:"dev-def",geofenceName:"Warehouse Zone A",geofenceId:"geo-002",eventType:"exit",lat:40.7588,lng:-73.9852,actionTaken:"Event logged"},{id:"evt-003",timestamp:new Date(Date.now()-1e3*60*12),userId:"user-789",deviceId:"dev-ghi",geofenceName:"Parking Lot North",geofenceId:"geo-003",eventType:"dwell",duration:45,lat:40.7615,lng:-73.9777,actionTaken:"Event logged"},{id:"evt-004",timestamp:new Date(Date.now()-1e3*60*18),userId:"user-234",deviceId:"dev-jkl",geofenceName:"Campus Perimeter",geofenceId:"geo-005",eventType:"enter",lat:40.749,lng:-73.975,actionTaken:"Webhook triggered"},{id:"evt-005",timestamp:new Date(Date.now()-1e3*60*25),userId:"user-567",deviceId:"dev-mno",geofenceName:"Main Office Building",geofenceId:"geo-001",eventType:"exit",lat:40.7127,lng:-74.0059,actionTaken:"Notification sent"},{id:"evt-006",timestamp:new Date(Date.now()-1e3*60*32),userId:"user-890",deviceId:"dev-pqr",geofenceName:"Loading Dock",geofenceId:"geo-006",eventType:"dwell",duration:32,lat:40.755,lng:-73.9841,actionTaken:"Notification sent"},{id:"evt-007",timestamp:new Date(Date.now()-1e3*60*41),userId:"user-321",deviceId:"dev-stu",geofenceName:"Warehouse Zone A",geofenceId:"geo-002",eventType:"enter",lat:40.759,lng:-73.985,actionTaken:"Event logged"},{id:"evt-008",timestamp:new Date(Date.now()-1e3*60*55),userId:"user-654",deviceId:"dev-vwx",geofenceName:"Server Room",geofenceId:"geo-007",eventType:"enter",lat:40.7528,lng:-73.9773,actionTaken:"Notification sent"},{id:"evt-009",timestamp:new Date(Date.now()-1e3*60*67),userId:"user-987",deviceId:"dev-yza",geofenceName:"Parking Lot North",geofenceId:"geo-003",eventType:"exit",lat:40.7613,lng:-73.9775,actionTaken:"Event logged"},{id:"evt-010",timestamp:new Date(Date.now()-1e3*60*78),userId:"user-135",deviceId:"dev-bcd",geofenceName:"Campus Perimeter",geofenceId:"geo-005",eventType:"exit",lat:40.7491,lng:-73.9751,actionTaken:"Webhook triggered"},{id:"evt-011",timestamp:new Date(Date.now()-1e3*60*92),userId:"user-246",deviceId:"dev-efg",geofenceName:"Main Office Building",geofenceId:"geo-001",eventType:"dwell",duration:120,lat:40.7128,lng:-74.006,actionTaken:"Event logged"},{id:"evt-012",timestamp:new Date(Date.now()-1e3*60*105),userId:"user-357",deviceId:"dev-hij",geofenceName:"Loading Dock",geofenceId:"geo-006",eventType:"exit",lat:40.7548,lng:-73.9839,actionTaken:"Notification sent"},{id:"evt-013",timestamp:new Date(Date.now()-1e3*60*118),userId:"user-468",deviceId:"dev-klm",geofenceName:"Warehouse Zone A",geofenceId:"geo-002",eventType:"dwell",duration:15,lat:40.7589,lng:-73.9851,actionTaken:"Event logged"},{id:"evt-014",timestamp:new Date(Date.now()-1e3*60*130),userId:"user-579",deviceId:"dev-nop",geofenceName:"Server Room",geofenceId:"geo-007",eventType:"exit",lat:40.7526,lng:-73.9771,actionTaken:"Event logged"},{id:"evt-015",timestamp:new Date(Date.now()-1e3*60*145),userId:"user-680",deviceId:"dev-qrs",geofenceName:"Campus Perimeter",geofenceId:"geo-005",eventType:"dwell",duration:5,lat:40.75,lng:-73.975,actionTaken:"Webhook triggered"},{id:"evt-016",timestamp:new Date(Date.now()-1e3*60*158),userId:"user-791",deviceId:"dev-tuv",geofenceName:"Main Office Building",geofenceId:"geo-001",eventType:"enter",lat:40.713,lng:-74.0062,actionTaken:"Notification sent"}],z={locationAccuracy:"high",eventRetentionDays:30,webhookEndpoint:"https://api.example.com/geofence/events",batchProcessingEnabled:!0,batchSize:100,batchInterval:60},k=c=>{const a=new Date().getTime()-c.getTime(),r=Math.floor(a/(1e3*60));if(r<1)return"Just now";if(r<60)return`${r}m ago`;const s=Math.floor(r/60);if(s<24)return`${s}h ago`;const t=Math.floor(s/24);return t<7?`${t}d ago`:c.toLocaleDateString()},C=c=>{switch(c){case"enter":return"text-emerald-400";case"exit":return"text-amber-400";case"dwell":return"text-indigo-400";default:return"text-white"}},I=c=>{switch(c){case"enter":return"â†—ï¸";case"exit":return"â†™ï¸";case"dwell":return"â±ï¸";default:return"â€¢"}},E=({geofence:c})=>{const d=c.shape==="polygon";return e.jsxs("div",{className:"relative w-full h-48 bg-zinc-800 rounded-lg border border-zinc-700 overflow-hidden",children:[e.jsx("div",{className:"absolute inset-0 opacity-20",style:{backgroundImage:`
            linear-gradient(to right, rgba(255,255,255,0.1) 1px, transparent 1px),
            linear-gradient(to bottom, rgba(255,255,255,0.1) 1px, transparent 1px)
          `,backgroundSize:"20px 20px"}}),d&&c.polygonCoords?e.jsxs("div",{className:"absolute inset-0 flex items-center justify-center",children:[e.jsx("div",{className:"absolute border-2 border-indigo-500 bg-indigo-500/20",style:{width:"60%",height:"60%",borderRadius:"4px"}}),e.jsx("div",{className:"absolute top-1/2 left-1/2 -translate-x-1/2 -translate-y-1/2",children:e.jsx("span",{className:"text-xs text-indigo-400",children:c.name})})]}):e.jsxs("div",{className:"absolute inset-0 flex items-center justify-center",children:[e.jsx("div",{className:"rounded-full border-2 border-indigo-500 bg-indigo-500/20",style:{width:c.radius?`${Math.min(c.radius/2,80)}px`:"60px",height:c.radius?`${Math.min(c.radius/2,80)}px`:"60px"}}),e.jsx("div",{className:"absolute",children:e.jsx("span",{className:"text-xs text-indigo-400",children:c.name})})]}),e.jsx("div",{className:"absolute top-1/2 left-1/2 -translate-x-1/2 -translate-y-1/2",children:e.jsx("div",{className:"w-3 h-3 bg-white rounded-full shadow-lg"})})]})},T=({geofences:c})=>{const[d,a]=g.useState(null),[r,s]=g.useState(!1),[t,o]=g.useState({name:"",shape:"circle",centerLat:0,centerLng:0,radius:100,isActive:!0,triggeredCount:0}),l=()=>{t.name&&(alert(`Created geofence: ${t.name}`),s(!1),o({name:"",shape:"circle",centerLat:0,centerLng:0,radius:100,isActive:!0,triggeredCount:0}))};return e.jsxs("div",{className:"space-y-4",children:[e.jsxs("div",{className:"flex justify-between items-center",children:[e.jsx("h2",{className:"text-xl font-semibold text-white",children:"Geofences"}),e.jsx("button",{onClick:()=>s(!r),className:"px-4 py-2 bg-indigo-600 hover:bg-indigo-500 text-white rounded-lg transition-colors duration-150",children:r?"Cancel":"+ Create New"})]}),r&&e.jsxs("div",{className:"bg-zinc-900 border border-zinc-800 rounded-lg p-4 space-y-4",children:[e.jsx("h3",{className:"text-lg font-medium text-white",children:"Create New Geofence"}),e.jsxs("div",{className:"grid grid-cols-2 gap-4",children:[e.jsxs("div",{children:[e.jsx("label",{className:"block text-sm text-zinc-400 mb-1",children:"Name"}),e.jsx("input",{type:"text",value:t.name,onChange:i=>o({...t,name:i.target.value}),className:"w-full px-3 py-2 bg-zinc-800 border border-zinc-700 rounded-lg text-white focus:outline-none focus:border-indigo-500",placeholder:"Geofence name"})]}),e.jsxs("div",{children:[e.jsx("label",{className:"block text-sm text-zinc-400 mb-1",children:"Shape"}),e.jsxs("select",{value:t.shape,onChange:i=>o({...t,shape:i.target.value}),className:"w-full px-3 py-2 bg-zinc-800 border border-zinc-700 rounded-lg text-white focus:outline-none focus:border-indigo-500",children:[e.jsx("option",{value:"circle",children:"Circle"}),e.jsx("option",{value:"polygon",children:"Polygon"})]})]}),e.jsxs("div",{children:[e.jsx("label",{className:"block text-sm text-zinc-400 mb-1",children:"Center Latitude"}),e.jsx("input",{type:"number",step:"0.0001",value:t.centerLat,onChange:i=>o({...t,centerLat:parseFloat(i.target.value)||0}),className:"w-full px-3 py-2 bg-zinc-800 border border-zinc-700 rounded-lg text-white focus:outline-none focus:border-indigo-500"})]}),e.jsxs("div",{children:[e.jsx("label",{className:"block text-sm text-zinc-400 mb-1",children:"Center Longitude"}),e.jsx("input",{type:"number",step:"0.0001",value:t.centerLng,onChange:i=>o({...t,centerLng:parseFloat(i.target.value)||0}),className:"w-full px-3 py-2 bg-zinc-800 border border-zinc-700 rounded-lg text-white focus:outline-none focus:border-indigo-500"})]}),t.shape==="circle"&&e.jsxs("div",{children:[e.jsx("label",{className:"block text-sm text-zinc-400 mb-1",children:"Radius (meters)"}),e.jsx("input",{type:"number",value:t.radius,onChange:i=>o({...t,radius:parseInt(i.target.value)||0}),className:"w-full px-3 py-2 bg-zinc-800 border border-zinc-700 rounded-lg text-white focus:outline-none focus:border-indigo-500"})]}),e.jsxs("div",{className:"flex items-center",children:[e.jsx("input",{type:"checkbox",id:"active",checked:t.isActive,onChange:i=>o({...t,isActive:i.target.checked}),className:"w-4 h-4 rounded border-zinc-600 bg-zinc-800 text-indigo-600 focus:ring-indigo-500"}),e.jsx("label",{htmlFor:"active",className:"ml-2 text-sm text-white",children:"Active"})]})]}),e.jsx("button",{onClick:l,className:"w-full px-4 py-2 bg-indigo-600 hover:bg-indigo-500 text-white rounded-lg transition-colors duration-150",children:"Create Geofence"})]}),e.jsx("div",{className:"space-y-2",children:c.map(i=>{var u;return e.jsxs("div",{className:"bg-zinc-900 border border-zinc-800 rounded-lg overflow-hidden",children:[e.jsx("div",{onClick:()=>a(d===i.id?null:i.id),className:"p-4 cursor-pointer hover:bg-zinc-800/50 transition-colors duration-150",children:e.jsxs("div",{className:"flex items-center justify-between",children:[e.jsxs("div",{className:"flex items-center space-x-3",children:[e.jsx("span",{className:m("text-lg",i.isActive?"text-emerald-400":"text-zinc-500"),children:i.isActive?"ðŸŸ¢":"ðŸ”´"}),e.jsxs("div",{children:[e.jsx("h3",{className:"font-medium text-white",children:i.name}),e.jsx("p",{className:"text-sm text-zinc-400",children:i.shape==="circle"?`Circle â€¢ ${i.radius}m radius`:`Polygon â€¢ ${(u=i.area)==null?void 0:u.toLocaleString()} mÂ²`})]})]}),e.jsxs("div",{className:"text-right",children:[e.jsxs("p",{className:"text-sm text-zinc-400",children:[i.centerLat.toFixed(4),", ",i.centerLng.toFixed(4)]}),e.jsxs("p",{className:"text-sm text-indigo-400",children:[i.triggeredCount.toLocaleString()," triggers"]})]})]})}),d===i.id&&e.jsxs("div",{className:"p-4 border-t border-zinc-800 bg-zinc-800/30",children:[e.jsx(E,{geofence:i}),e.jsxs("div",{className:"mt-4 grid grid-cols-3 gap-4 text-sm",children:[e.jsxs("div",{children:[e.jsx("span",{className:"text-zinc-500",children:"Center:"}),e.jsxs("p",{className:"text-white",children:[i.centerLat.toFixed(6),", ",i.centerLng.toFixed(6)]})]}),e.jsxs("div",{children:[e.jsx("span",{className:"text-zinc-500",children:"Shape:"}),e.jsx("p",{className:"text-white capitalize",children:i.shape})]}),e.jsxs("div",{children:[e.jsx("span",{className:"text-zinc-500",children:"Status:"}),e.jsx("p",{className:i.isActive?"text-emerald-400":"text-zinc-500",children:i.isActive?"Active":"Inactive"})]})]})]})]},i.id)})})]})},D=({rules:c,geofences:d})=>{const[a,r]=g.useState(!1),[s,t]=g.useState({name:"",trigger:"enter",geofenceId:"",geofenceName:"",action:"send_notification",conditions:[],isEnabled:!0}),[o,l]=g.useState(""),i=n=>{const x=d.find(h=>h.id===n);t({...s,geofenceId:n,geofenceName:(x==null?void 0:x.name)||""})},u=()=>{o.trim()&&(t({...s,conditions:[...s.conditions||[],o.trim()]}),l(""))},p=n=>{const x=[...s.conditions||[]];x.splice(n,1),t({...s,conditions:x})},v=()=>{s.name&&s.geofenceId&&(alert(`Created rule: ${s.name}`),r(!1),t({name:"",trigger:"enter",geofenceId:"",geofenceName:"",action:"send_notification",conditions:[],isEnabled:!0}))},f=n=>{alert(`Toggled rule: ${n}`)},j=n=>{switch(n){case"enter":return"text-emerald-400 bg-emerald-400/10";case"exit":return"text-amber-400 bg-amber-400/10";case"dwell":return"text-indigo-400 bg-indigo-400/10";default:return"text-zinc-400 bg-zinc-400/10"}},N=n=>{switch(n){case"send_notification":return"Send Notification";case"block_access":return"Block Access";case"log_event":return"Log Event";case"webhook":return"Webhook";default:return n}};return e.jsxs("div",{className:"space-y-4",children:[e.jsxs("div",{className:"flex justify-between items-center",children:[e.jsx("h2",{className:"text-xl font-semibold text-white",children:"Geofence Rules"}),e.jsx("button",{onClick:()=>r(!a),className:"px-4 py-2 bg-indigo-600 hover:bg-indigo-500 text-white rounded-lg transition-colors duration-150",children:a?"Cancel":"+ Rule Builder"})]}),a&&e.jsxs("div",{className:"bg-zinc-900 border border-zinc-800 rounded-lg p-4 space-y-4",children:[e.jsx("h3",{className:"text-lg font-medium text-white",children:"Create New Rule"}),e.jsxs("div",{className:"grid grid-cols-2 gap-4",children:[e.jsxs("div",{children:[e.jsx("label",{className:"block text-sm text-zinc-400 mb-1",children:"Rule Name"}),e.jsx("input",{type:"text",value:s.name,onChange:n=>t({...s,name:n.target.value}),className:"w-full px-3 py-2 bg-zinc-800 border border-zinc-700 rounded-lg text-white focus:outline-none focus:border-indigo-500",placeholder:"Enter rule name"})]}),e.jsxs("div",{children:[e.jsx("label",{className:"block text-sm text-zinc-400 mb-1",children:"Trigger"}),e.jsxs("select",{value:s.trigger,onChange:n=>t({...s,trigger:n.target.value}),className:"w-full px-3 py-2 bg-zinc-800 border border-zinc-700 rounded-lg text-white focus:outline-none focus:border-indigo-500",children:[e.jsx("option",{value:"enter",children:"Enter"}),e.jsx("option",{value:"exit",children:"Exit"}),e.jsx("option",{value:"dwell",children:"Dwell"})]})]}),e.jsxs("div",{children:[e.jsx("label",{className:"block text-sm text-zinc-400 mb-1",children:"Geofence"}),e.jsxs("select",{value:s.geofenceId,onChange:n=>i(n.target.value),className:"w-full px-3 py-2 bg-zinc-800 border border-zinc-700 rounded-lg text-white focus:outline-none focus:border-indigo-500",children:[e.jsx("option",{value:"",children:"Select geofence"}),d.map(n=>e.jsx("option",{value:n.id,children:n.name},n.id))]})]}),e.jsxs("div",{children:[e.jsx("label",{className:"block text-sm text-zinc-400 mb-1",children:"Action"}),e.jsxs("select",{value:s.action,onChange:n=>t({...s,action:n.target.value}),className:"w-full px-3 py-2 bg-zinc-800 border border-zinc-700 rounded-lg text-white focus:outline-none focus:border-indigo-500",children:[e.jsx("option",{value:"send_notification",children:"Send Notification"}),e.jsx("option",{value:"block_access",children:"Block Access"}),e.jsx("option",{value:"log_event",children:"Log Event"}),e.jsx("option",{value:"webhook",children:"Webhook"})]})]})]}),e.jsxs("div",{children:[e.jsx("label",{className:"block text-sm text-zinc-400 mb-1",children:"Conditions"}),e.jsxs("div",{className:"flex gap-2",children:[e.jsx("input",{type:"text",value:o,onChange:n=>l(n.target.value),onKeyPress:n=>n.key==="Enter"&&u(),className:"flex-1 px-3 py-2 bg-zinc-800 border border-zinc-700 rounded-lg text-white focus:outline-none focus:border-indigo-500",placeholder:"Add condition (press Enter)"}),e.jsx("button",{onClick:u,className:"px-4 py-2 bg-zinc-700 hover:bg-zinc-600 text-white rounded-lg transition-colors duration-150",children:"Add"})]}),s.conditions&&s.conditions.length>0&&e.jsx("div",{className:"flex flex-wrap gap-2 mt-2",children:s.conditions.map((n,x)=>e.jsxs("span",{className:"inline-flex items-center px-2 py-1 bg-zinc-800 text-zinc-300 rounded text-sm",children:[n,e.jsx("button",{onClick:()=>p(x),className:"ml-2 text-zinc-500 hover:text-rose-400",children:"Ã—"})]},x))})]}),e.jsxs("div",{className:"flex items-center",children:[e.jsx("input",{type:"checkbox",id:"ruleEnabled",checked:s.isEnabled,onChange:n=>t({...s,isEnabled:n.target.checked}),className:"w-4 h-4 rounded border-zinc-600 bg-zinc-800 text-indigo-600 focus:ring-indigo-500"}),e.jsx("label",{htmlFor:"ruleEnabled",className:"ml-2 text-sm text-white",children:"Enable rule"})]}),e.jsx("button",{onClick:v,className:"w-full px-4 py-2 bg-indigo-600 hover:bg-indigo-500 text-white rounded-lg transition-colors duration-150",children:"Create Rule"})]}),e.jsx("div",{className:"space-y-2",children:c.map(n=>e.jsxs("div",{className:"bg-zinc-900 border border-zinc-800 rounded-lg p-4",children:[e.jsxs("div",{className:"flex items-center justify-between",children:[e.jsxs("div",{className:"flex items-center space-x-3",children:[e.jsx("span",{className:m("px-2 py-1 rounded text-xs font-medium",j(n.trigger)),children:n.trigger.toUpperCase()}),e.jsxs("div",{children:[e.jsx("h3",{className:"font-medium text-white",children:n.name}),e.jsxs("p",{className:"text-sm text-zinc-400",children:[n.geofenceName," â€¢ ",N(n.action)]})]})]}),e.jsx("div",{className:"flex items-center space-x-4",children:e.jsx("button",{onClick:()=>f(n.id),className:m("relative w-12 h-6 rounded-full transition-colors duration-150",n.isEnabled?"bg-emerald-500":"bg-zinc-600"),children:e.jsx("span",{className:m("absolute top-1 w-4 h-4 bg-white rounded-full transition-transform duration-150",n.isEnabled?"translate-x-7":"translate-x-1")})})})]}),n.conditions.length>0&&e.jsx("div",{className:"mt-3 flex flex-wrap gap-2",children:n.conditions.map((x,h)=>e.jsx("span",{className:"px-2 py-1 bg-zinc-800 text-zinc-400 rounded text-xs",children:x},h))})]},n.id))})]})},L=({events:c,geofences:d})=>{const[a,r]=g.useState("all"),[s,t]=g.useState("all"),o=c.filter(l=>!(a!=="all"&&l.geofenceId!==a||s!=="all"&&l.eventType!==s));return e.jsxs("div",{className:"space-y-4",children:[e.jsxs("div",{className:"flex justify-between items-center",children:[e.jsx("h2",{className:"text-xl font-semibold text-white",children:"Geofence Events"}),e.jsxs("span",{className:"text-sm text-zinc-400",children:[o.length," events"]})]}),e.jsxs("div",{className:"flex gap-4",children:[e.jsxs("div",{className:"flex-1",children:[e.jsx("label",{className:"block text-sm text-zinc-400 mb-1",children:"Filter by Geofence"}),e.jsxs("select",{value:a,onChange:l=>r(l.target.value),className:"w-full px-3 py-2 bg-zinc-800 border border-zinc-700 rounded-lg text-white focus:outline-none focus:border-indigo-500",children:[e.jsx("option",{value:"all",children:"All Geofences"}),d.map(l=>e.jsx("option",{value:l.id,children:l.name},l.id))]})]}),e.jsxs("div",{className:"flex-1",children:[e.jsx("label",{className:"block text-sm text-zinc-400 mb-1",children:"Filter by Event Type"}),e.jsxs("select",{value:s,onChange:l=>t(l.target.value),className:"w-full px-3 py-2 bg-zinc-800 border border-zinc-700 rounded-lg text-white focus:outline-none focus:border-indigo-500",children:[e.jsx("option",{value:"all",children:"All Events"}),e.jsx("option",{value:"enter",children:"Enter"}),e.jsx("option",{value:"exit",children:"Exit"}),e.jsx("option",{value:"dwell",children:"Dwell"})]})]})]}),e.jsx("div",{className:"space-y-2",children:o.map(l=>e.jsxs("div",{className:"bg-zinc-900 border border-zinc-800 rounded-lg p-4",children:[e.jsxs("div",{className:"flex items-start justify-between",children:[e.jsxs("div",{className:"flex items-start space-x-3",children:[e.jsx("span",{className:"text-lg",children:I(l.eventType)}),e.jsxs("div",{children:[e.jsxs("div",{className:"flex items-center space-x-2",children:[e.jsx("span",{className:m("font-medium",C(l.eventType)),children:l.eventType.toUpperCase()}),e.jsx("span",{className:"text-zinc-500",children:"â€¢"}),e.jsx("span",{className:"text-white",children:l.geofenceName})]}),e.jsxs("p",{className:"text-sm text-zinc-400 mt-1",children:["User: ",l.userId," â€¢ Device: ",l.deviceId]}),e.jsxs("p",{className:"text-xs text-zinc-500 mt-1",children:[l.lat.toFixed(6),", ",l.lng.toFixed(6)]})]})]}),e.jsxs("div",{className:"text-right",children:[e.jsx("p",{className:"text-sm text-zinc-400",children:k(l.timestamp)}),l.duration&&e.jsxs("p",{className:"text-xs text-indigo-400 mt-1",children:[l.duration," min dwell"]})]})]}),e.jsx("div",{className:"mt-3 pt-3 border-t border-zinc-800",children:e.jsxs("p",{className:"text-xs text-zinc-500",children:["Action: ",e.jsx("span",{className:"text-zinc-300",children:l.actionTaken})]})})]},l.id))}),o.length===0&&e.jsx("div",{className:"text-center py-8 text-zinc-500",children:"No events match your filters"})]})},S=({settings:c,onUpdate:d})=>{const[a,r]=g.useState(c),s=()=>{d(a),alert("Settings saved successfully")};return e.jsxs("div",{className:"space-y-6",children:[e.jsx("h2",{className:"text-xl font-semibold text-white",children:"Settings"}),e.jsxs("div",{className:"bg-zinc-900 border border-zinc-800 rounded-lg p-4 space-y-4",children:[e.jsx("h3",{className:"text-lg font-medium text-white",children:"Location Settings"}),e.jsxs("div",{children:[e.jsx("label",{className:"block text-sm text-zinc-400 mb-1",children:"Location Accuracy"}),e.jsxs("select",{value:a.locationAccuracy,onChange:t=>r({...a,locationAccuracy:t.target.value}),className:"w-full px-3 py-2 bg-zinc-800 border border-zinc-700 rounded-lg text-white focus:outline-none focus:border-indigo-500",children:[e.jsx("option",{value:"high",children:"High (GPS)"}),e.jsx("option",{value:"balanced",children:"Balanced (Wi-Fi + Cell)"}),e.jsx("option",{value:"low",children:"Low (Cell only)"})]}),e.jsx("p",{className:"text-xs text-zinc-500 mt-1",children:"Higher accuracy uses more battery but provides better geofence precision"})]})]}),e.jsxs("div",{className:"bg-zinc-900 border border-zinc-800 rounded-lg p-4 space-y-4",children:[e.jsx("h3",{className:"text-lg font-medium text-white",children:"Data Retention"}),e.jsxs("div",{children:[e.jsx("label",{className:"block text-sm text-zinc-400 mb-1",children:"Event Retention Period"}),e.jsxs("div",{className:"flex items-center gap-2",children:[e.jsx("input",{type:"number",min:"1",max:"365",value:a.eventRetentionDays,onChange:t=>r({...a,eventRetentionDays:parseInt(t.target.value)||30}),className:"w-24 px-3 py-2 bg-zinc-800 border border-zinc-700 rounded-lg text-white focus:outline-none focus:border-indigo-500"}),e.jsx("span",{className:"text-zinc-400",children:"days"})]}),e.jsx("p",{className:"text-xs text-zinc-500 mt-1",children:"Events older than this will be automatically deleted"})]})]}),e.jsxs("div",{className:"bg-zinc-900 border border-zinc-800 rounded-lg p-4 space-y-4",children:[e.jsx("h3",{className:"text-lg font-medium text-white",children:"Webhook Configuration"}),e.jsxs("div",{children:[e.jsx("label",{className:"block text-sm text-zinc-400 mb-1",children:"Webhook Endpoint"}),e.jsx("input",{type:"url",value:a.webhookEndpoint,onChange:t=>r({...a,webhookEndpoint:t.target.value}),className:"w-full px-3 py-2 bg-zinc-800 border border-zinc-700 rounded-lg text-white focus:outline-none focus:border-indigo-500",placeholder:"https://api.example.com/webhook"}),e.jsx("p",{className:"text-xs text-zinc-500 mt-1",children:"Events will be forwarded to this endpoint as JSON"})]})]}),e.jsxs("div",{className:"bg-zinc-900 border border-zinc-800 rounded-lg p-4 space-y-4",children:[e.jsx("h3",{className:"text-lg font-medium text-white",children:"Batch Processing"}),e.jsxs("div",{className:"space-y-4",children:[e.jsxs("div",{className:"flex items-center justify-between",children:[e.jsxs("div",{children:[e.jsx("p",{className:"text-sm text-white",children:"Enable Batch Processing"}),e.jsx("p",{className:"text-xs text-zinc-500",children:"Process events in batches for better performance"})]}),e.jsx("button",{onClick:()=>r({...a,batchProcessingEnabled:!a.batchProcessingEnabled}),className:m("relative w-12 h-6 rounded-full transition-colors duration-150",a.batchProcessingEnabled?"bg-emerald-500":"bg-zinc-600"),children:e.jsx("span",{className:m("absolute top-1 w-4 h-4 bg-white rounded-full transition-transform duration-150",a.batchProcessingEnabled?"translate-x-7":"translate-x-1")})})]}),a.batchProcessingEnabled&&e.jsxs("div",{className:"grid grid-cols-2 gap-4 pt-4 border-t border-zinc-800",children:[e.jsxs("div",{children:[e.jsx("label",{className:"block text-sm text-zinc-400 mb-1",children:"Batch Size"}),e.jsx("input",{type:"number",min:"10",max:"1000",value:a.batchSize,onChange:t=>r({...a,batchSize:parseInt(t.target.value)||100}),className:"w-full px-3 py-2 bg-zinc-800 border border-zinc-700 rounded-lg text-white focus:outline-none focus:border-indigo-500"})]}),e.jsxs("div",{children:[e.jsx("label",{className:"block text-sm text-zinc-400 mb-1",children:"Batch Interval (seconds)"}),e.jsx("input",{type:"number",min:"10",max:"600",value:a.batchInterval,onChange:t=>r({...a,batchInterval:parseInt(t.target.value)||60}),className:"w-full px-3 py-2 bg-zinc-800 border border-zinc-700 rounded-lg text-white focus:outline-none focus:border-indigo-500"})]})]})]})]}),e.jsx("button",{onClick:s,className:"w-full px-4 py-3 bg-indigo-600 hover:bg-indigo-500 text-white rounded-lg transition-colors duration-150 font-medium",children:"Save Settings"})]})},P=()=>{const[c,d]=g.useState("geofences"),[a,r]=g.useState(z),s=[{id:"geofences",label:"Geofences"},{id:"rules",label:"Rules"},{id:"events",label:"Events"},{id:"settings",label:"Settings"}];return e.jsx("div",{className:"min-h-screen bg-zinc-950 p-6",children:e.jsxs("div",{className:"max-w-6xl mx-auto",children:[e.jsxs("div",{className:"mb-8",children:[e.jsx("h1",{className:"text-2xl font-bold text-white",children:"Geofence Manager"}),e.jsx("p",{className:"text-zinc-400 mt-1",children:"Manage location-based triggers and rules"})]}),e.jsx("div",{className:"mb-6 border-b border-zinc-800",children:e.jsx("nav",{className:"flex space-x-1",children:s.map(t=>e.jsx("button",{onClick:()=>d(t.id),className:m("px-4 py-2 text-sm font-medium transition-colors duration-150 border-b-2 -mb-px",c===t.id?"text-indigo-400 border-indigo-500":"text-zinc-400 border-transparent hover:text-white hover:border-zinc-600"),children:t.label},t.id))})}),e.jsxs("div",{className:"bg-zinc-900 border border-zinc-800 rounded-lg p-6",children:[c==="geofences"&&e.jsx(T,{geofences:b}),c==="rules"&&e.jsx(D,{rules:w,geofences:b}),c==="events"&&e.jsx(L,{events:y,geofences:b}),c==="settings"&&e.jsx(S,{settings:a,onUpdate:r})]})]})})};export{P as default};
