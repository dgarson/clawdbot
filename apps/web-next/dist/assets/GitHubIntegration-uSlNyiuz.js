import{r as d,j as e,c as a}from"./index-BvekFnzL.js";const v=[{id:"repo-1",name:"dgarson/clawdbot",label:"main",syncStatus:"synced",lastPush:"2 minutes ago",openPRs:7,branchCount:23,defaultBranch:"dgarson/fork",protectionRules:["Require pull request reviews (1 approver)","Require status checks to pass","Restrict force pushes"],webhookUrl:"https://hooks.openclaw.dev/github/clawdbot",recentCommits:[{sha:"a3f81c2",message:"feat: add megabranch rebase automation",author:"dgarson",date:"2 min ago"},{sha:"e9b44d7",message:"fix: worker PR review notification timing",author:"luis-agent",date:"18 min ago"},{sha:"c7210fa",message:"chore: update pnpm lockfile after dep bump",author:"reed-agent",date:"1 hr ago"}]},{id:"repo-2",name:"openclaw/openclaw",label:"upstream",syncStatus:"behind",lastPush:"3 hours ago",openPRs:12,branchCount:41,defaultBranch:"main",protectionRules:["Require pull request reviews (2 approvers)","Require signed commits","Require linear history","Restrict deletions"],webhookUrl:"https://hooks.openclaw.dev/github/openclaw",recentCommits:[{sha:"f1d92b8",message:"feat: gateway heartbeat health endpoint",author:"tim-agent",date:"3 hr ago"},{sha:"b8c35e1",message:"fix: node pairing race condition on reconnect",author:"roman-agent",date:"5 hr ago"},{sha:"d4a67c3",message:"docs: update AGENTS.md escalation paths",author:"joey-agent",date:"8 hr ago"}]}],T=[{scope:"contents",access:"read"},{scope:"pull_requests",access:"write"},{scope:"checks",access:"write"},{scope:"issues",access:"write"},{scope:"metadata",access:"read"},{scope:"statuses",access:"write"},{scope:"actions",access:"read"},{scope:"webhooks",access:"write"}],P=[{id:"evt-1",event:"push",enabled:!0,payloadFormat:"JSON"},{id:"evt-2",event:"pull_request",enabled:!0,payloadFormat:"JSON"},{id:"evt-3",event:"pull_request_review",enabled:!0,payloadFormat:"JSON"},{id:"evt-4",event:"check_run",enabled:!0,payloadFormat:"JSON"},{id:"evt-5",event:"check_suite",enabled:!1,payloadFormat:"JSON"},{id:"evt-6",event:"issues",enabled:!0,payloadFormat:"JSON"},{id:"evt-7",event:"issue_comment",enabled:!1,payloadFormat:"JSON"},{id:"evt-8",event:"status",enabled:!0,payloadFormat:"JSON"}],E=[{id:"del-1",timestamp:"2026-02-22 03:16:42",eventType:"push",responseCode:200,repoName:"dgarson/clawdbot"},{id:"del-2",timestamp:"2026-02-22 03:14:18",eventType:"pull_request",responseCode:200,repoName:"dgarson/clawdbot"},{id:"del-3",timestamp:"2026-02-22 02:58:04",eventType:"check_run",responseCode:422,repoName:"openclaw/openclaw"},{id:"del-4",timestamp:"2026-02-22 02:41:33",eventType:"push",responseCode:200,repoName:"openclaw/openclaw"},{id:"del-5",timestamp:"2026-02-22 02:22:10",eventType:"pull_request_review",responseCode:500,repoName:"dgarson/clawdbot"},{id:"del-6",timestamp:"2026-02-22 01:59:55",eventType:"issues",responseCode:200,repoName:"openclaw/openclaw"}];function o({status:n}){return e.jsx("div",{className:a("w-2.5 h-2.5 rounded-full shrink-0",n==="synced"&&"bg-emerald-500",n==="behind"&&"bg-amber-500",n==="error"&&"bg-red-500")})}function I({code:n}){return e.jsx("div",{className:a("px-2 py-0.5 rounded text-xs font-mono font-medium",n>=200&&n<300&&"bg-emerald-500/15 text-emerald-400",n>=400&&n<500&&"bg-amber-500/15 text-amber-400",n>=500&&"bg-red-500/15 text-red-400"),children:n})}function A({access:n}){return e.jsx("div",{className:a("px-2 py-0.5 rounded text-xs font-medium",n==="read"&&"bg-zinc-800 text-zinc-400",n==="write"&&"bg-indigo-500/15 text-indigo-400"),children:n})}function _(){const[n,j]=d.useState(null),[x,N]=d.useState(P),[p,f]=d.useState({autoPRCreation:!0,autoCommitSigning:!1,requiredStatusChecks:!0}),[u,b]=d.useState(E),[r,m]=d.useState({}),[h,g]=d.useState(null),[l,y]=d.useState("repos"),w=s=>{j(t=>t===s?null:s)},z=s=>{N(t=>t.map(i=>i.id===s?{...i,enabled:!i.enabled}:i))},k=s=>{f(t=>({...t,[s]:!t[s]}))},S=s=>{m(t=>({...t,[s]:"sending"})),setTimeout(()=>{var i;m(c=>({...c,[s]:"sent"}));const t={id:`del-ping-${Date.now()}`,timestamp:new Date().toISOString().replace("T"," ").slice(0,19),eventType:"ping",responseCode:200,repoName:((i=v.find(c=>c.id===s))==null?void 0:i.name)??"unknown"};b(c=>[t,...c]),setTimeout(()=>m(c=>({...c,[s]:"idle"})),2e3)},1200)},R=s=>{g(s),setTimeout(()=>{b(t=>t.map(i=>i.id===s?{...i,responseCode:200}:i)),g(null)},1500)},C=[{key:"repos",label:"Repositories"},{key:"permissions",label:"App Permissions"},{key:"webhooks",label:"Webhook Config"},{key:"deliveries",label:"Deliveries"}];return e.jsx("div",{className:"min-h-screen bg-zinc-950 text-white p-6",children:e.jsxs("div",{className:"max-w-5xl mx-auto space-y-6",children:[e.jsxs("div",{className:"flex items-center justify-between",children:[e.jsxs("div",{children:[e.jsx("h1",{className:"text-2xl font-bold tracking-tight",children:"GitHub Integration"}),e.jsx("p",{className:"text-sm text-zinc-500 mt-1",children:"Manage connected repositories, webhooks, and sync settings"})]}),e.jsxs("div",{className:"flex items-center gap-2 text-sm",children:[e.jsx(o,{status:"synced"}),e.jsx("span",{className:"text-zinc-400",children:"Connected as"}),e.jsx("span",{className:"font-mono text-indigo-400",children:"openclaw-bot[app]"})]})]}),e.jsx("div",{className:"flex gap-1 bg-zinc-900 rounded-lg p-1 border border-zinc-800",children:C.map(s=>e.jsx("button",{onClick:()=>y(s.key),className:a("flex-1 px-4 py-2 rounded-md text-sm font-medium transition-colors",l===s.key?"bg-zinc-800 text-white":"text-zinc-500 hover:text-zinc-300"),children:s.label},s.key))}),l==="repos"&&e.jsx("div",{className:"space-y-3",children:v.map(s=>e.jsxs("div",{className:"bg-zinc-900 border border-zinc-800 rounded-xl overflow-hidden",children:[e.jsxs("button",{onClick:()=>w(s.id),className:"w-full px-5 py-4 flex items-center justify-between hover:bg-zinc-800/50 transition-colors",children:[e.jsxs("div",{className:"flex items-center gap-3",children:[e.jsx(o,{status:s.syncStatus}),e.jsxs("div",{className:"text-left",children:[e.jsxs("div",{className:"flex items-center gap-2",children:[e.jsx("span",{className:"font-mono font-semibold",children:s.name}),e.jsx("span",{className:"text-xs px-2 py-0.5 rounded bg-zinc-800 text-zinc-400",children:s.label})]}),e.jsxs("div",{className:"text-xs text-zinc-500 mt-0.5",children:["Last push: ",s.lastPush]})]})]}),e.jsxs("div",{className:"flex items-center gap-5 text-sm",children:[e.jsxs("div",{className:"text-right",children:[e.jsxs("div",{className:"text-zinc-400",children:[s.openPRs," open PRs"]}),e.jsxs("div",{className:"text-xs text-zinc-600",children:[s.branchCount," branches"]})]}),e.jsx("div",{className:a("text-zinc-500 transition-transform text-lg",n===s.id&&"rotate-180"),children:"▾"})]})]}),n===s.id&&e.jsxs("div",{className:"border-t border-zinc-800 px-5 py-4 space-y-4",children:[e.jsxs("div",{className:"grid grid-cols-2 gap-4",children:[e.jsxs("div",{children:[e.jsx("div",{className:"text-xs text-zinc-500 uppercase tracking-wider mb-1",children:"Default Branch"}),e.jsx("div",{className:"font-mono text-sm text-indigo-400",children:s.defaultBranch})]}),e.jsxs("div",{children:[e.jsx("div",{className:"text-xs text-zinc-500 uppercase tracking-wider mb-1",children:"Webhook URL"}),e.jsx("div",{className:"font-mono text-xs text-zinc-300 truncate",children:s.webhookUrl})]})]}),e.jsxs("div",{children:[e.jsx("div",{className:"text-xs text-zinc-500 uppercase tracking-wider mb-2",children:"Protection Rules"}),e.jsx("div",{className:"space-y-1",children:s.protectionRules.map(t=>e.jsxs("div",{className:"flex items-center gap-2 text-sm text-zinc-300",children:[e.jsx("div",{className:"w-1.5 h-1.5 rounded-full bg-indigo-500 shrink-0"}),t]},t))})]}),e.jsxs("div",{children:[e.jsx("div",{className:"text-xs text-zinc-500 uppercase tracking-wider mb-2",children:"Recent Commits"}),e.jsx("div",{className:"space-y-2",children:s.recentCommits.map(t=>e.jsxs("div",{className:"flex items-center justify-between bg-zinc-950 rounded-lg px-3 py-2",children:[e.jsxs("div",{className:"flex items-center gap-3 min-w-0",children:[e.jsx("span",{className:"font-mono text-xs text-indigo-400 shrink-0",children:t.sha}),e.jsx("span",{className:"text-sm text-zinc-300 truncate",children:t.message})]}),e.jsxs("div",{className:"flex items-center gap-3 shrink-0 ml-3",children:[e.jsx("span",{className:"text-xs text-zinc-500",children:t.author}),e.jsx("span",{className:"text-xs text-zinc-600",children:t.date})]})]},t.sha))})]}),e.jsx("button",{onClick:()=>S(s.id),disabled:r[s.id]==="sending",className:a("px-4 py-2 rounded-lg text-sm font-medium transition-colors",r[s.id]==="sent"?"bg-emerald-500/15 text-emerald-400":r[s.id]==="sending"?"bg-zinc-800 text-zinc-500 cursor-wait":"bg-indigo-500/15 text-indigo-400 hover:bg-indigo-500/25"),children:r[s.id]==="sending"?"Sending ping…":r[s.id]==="sent"?"Ping delivered ✓":"Test Webhook"})]})]},s.id))}),l==="permissions"&&e.jsxs("div",{className:"bg-zinc-900 border border-zinc-800 rounded-xl overflow-hidden",children:[e.jsxs("div",{className:"px-5 py-4 border-b border-zinc-800",children:[e.jsx("h2",{className:"text-sm font-semibold",children:"GitHub App Permissions"}),e.jsx("p",{className:"text-xs text-zinc-500 mt-0.5",children:"Scopes granted to the openclaw-bot GitHub App installation"})]}),e.jsx("div",{className:"divide-y divide-zinc-800",children:T.map(s=>e.jsxs("div",{className:"flex items-center justify-between px-5 py-3 hover:bg-zinc-800/30 transition-colors",children:[e.jsxs("div",{className:"flex items-center gap-3",children:[e.jsx("div",{className:"w-2 h-2 rounded-full bg-indigo-500"}),e.jsx("span",{className:"font-mono text-sm",children:s.scope})]}),e.jsx(A,{access:s.access})]},s.scope))})]}),l==="webhooks"&&e.jsxs("div",{className:"space-y-4",children:[e.jsxs("div",{className:"bg-zinc-900 border border-zinc-800 rounded-xl overflow-hidden",children:[e.jsxs("div",{className:"px-5 py-4 border-b border-zinc-800",children:[e.jsx("h2",{className:"text-sm font-semibold",children:"Webhook Events"}),e.jsx("p",{className:"text-xs text-zinc-500 mt-0.5",children:"Events this integration listens for"})]}),e.jsxs("div",{className:"divide-y divide-zinc-800",children:[e.jsxs("div",{className:"grid grid-cols-3 px-5 py-2 text-xs text-zinc-500 uppercase tracking-wider",children:[e.jsx("span",{children:"Event"}),e.jsx("span",{children:"Format"}),e.jsx("span",{className:"text-right",children:"Enabled"})]}),x.map(s=>e.jsxs("div",{className:"grid grid-cols-3 items-center px-5 py-3 hover:bg-zinc-800/30 transition-colors",children:[e.jsx("span",{className:"font-mono text-sm",children:s.event}),e.jsx("span",{className:"text-xs text-zinc-500 font-mono",children:s.payloadFormat}),e.jsx("div",{className:"flex justify-end",children:e.jsx("button",{onClick:()=>z(s.id),className:a("w-10 h-5 rounded-full transition-colors relative",s.enabled?"bg-indigo-500":"bg-zinc-700"),children:e.jsx("div",{className:a("absolute top-0.5 w-4 h-4 rounded-full bg-white transition-transform",s.enabled?"left-5":"left-0.5")})})})]},s.id))]})]}),e.jsxs("div",{className:"bg-zinc-900 border border-zinc-800 rounded-xl overflow-hidden",children:[e.jsxs("div",{className:"px-5 py-4 border-b border-zinc-800",children:[e.jsx("h2",{className:"text-sm font-semibold",children:"Auto-Sync Settings"}),e.jsx("p",{className:"text-xs text-zinc-500 mt-0.5",children:"Configure automated sync behavior"})]}),e.jsx("div",{className:"divide-y divide-zinc-800",children:[{key:"autoPRCreation",label:"Auto PR Creation",desc:"Automatically create PRs for upstream changes"},{key:"autoCommitSigning",label:"Auto Commit Signing",desc:"Sign commits with the bot GPG key"},{key:"requiredStatusChecks",label:"Required Status Checks",desc:"Enforce passing CI before merge"}].map(s=>e.jsxs("div",{className:"flex items-center justify-between px-5 py-4 hover:bg-zinc-800/30 transition-colors",children:[e.jsxs("div",{children:[e.jsx("div",{className:"text-sm font-medium",children:s.label}),e.jsx("div",{className:"text-xs text-zinc-500 mt-0.5",children:s.desc})]}),e.jsx("button",{onClick:()=>k(s.key),className:a("w-10 h-5 rounded-full transition-colors relative shrink-0 ml-4",p[s.key]?"bg-indigo-500":"bg-zinc-700"),children:e.jsx("div",{className:a("absolute top-0.5 w-4 h-4 rounded-full bg-white transition-transform",p[s.key]?"left-5":"left-0.5")})})]},s.key))})]})]}),l==="deliveries"&&e.jsxs("div",{className:"bg-zinc-900 border border-zinc-800 rounded-xl overflow-hidden",children:[e.jsxs("div",{className:"px-5 py-4 border-b border-zinc-800",children:[e.jsx("h2",{className:"text-sm font-semibold",children:"Recent Webhook Deliveries"}),e.jsxs("p",{className:"text-xs text-zinc-500 mt-0.5",children:[u.length," deliveries — failed deliveries can be retried"]})]}),e.jsxs("div",{className:"divide-y divide-zinc-800",children:[e.jsxs("div",{className:"grid grid-cols-5 px-5 py-2 text-xs text-zinc-500 uppercase tracking-wider",children:[e.jsx("span",{children:"Timestamp"}),e.jsx("span",{children:"Event"}),e.jsx("span",{children:"Repository"}),e.jsx("span",{children:"Status"}),e.jsx("span",{className:"text-right",children:"Action"})]}),u.map(s=>e.jsxs("div",{className:"grid grid-cols-5 items-center px-5 py-3 hover:bg-zinc-800/30 transition-colors",children:[e.jsx("span",{className:"font-mono text-xs text-zinc-400",children:s.timestamp}),e.jsx("span",{className:"font-mono text-sm",children:s.eventType}),e.jsx("span",{className:"text-sm text-zinc-400 truncate",children:s.repoName}),e.jsx(I,{code:s.responseCode}),e.jsx("div",{className:"flex justify-end",children:s.responseCode>=400?e.jsx("button",{onClick:()=>R(s.id),disabled:h===s.id,className:a("px-3 py-1 rounded text-xs font-medium transition-colors",h===s.id?"bg-zinc-800 text-zinc-500 cursor-wait":"bg-red-500/15 text-red-400 hover:bg-red-500/25"),children:h===s.id?"Retrying…":"Retry"}):e.jsx("span",{className:"text-xs text-zinc-600",children:"—"})})]},s.id))]})]}),e.jsxs("div",{className:"flex items-center justify-between bg-zinc-900 border border-zinc-800 rounded-xl px-5 py-3",children:[e.jsxs("div",{className:"flex items-center gap-6 text-sm",children:[e.jsxs("div",{className:"flex items-center gap-2",children:[e.jsx(o,{status:"synced"}),e.jsx("span",{className:"text-zinc-400",children:"1 synced"})]}),e.jsxs("div",{className:"flex items-center gap-2",children:[e.jsx(o,{status:"behind"}),e.jsx("span",{className:"text-zinc-400",children:"1 behind"})]}),e.jsx("div",{className:"flex items-center gap-2",children:e.jsxs("div",{className:"text-xs text-zinc-500 font-mono",children:[x.filter(s=>s.enabled).length,"/",x.length," events active"]})})]}),e.jsx("div",{className:"text-xs text-zinc-600",children:"Last sync check: just now"})]})]})})}export{_ as default};
