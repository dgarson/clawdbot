import{r as x,j as e,c as o}from"./index-AZTR846M.js";const d=[{id:"r1",name:"api-prod-m5-4xl",type:"ec2",region:"us-east-1",monthlyCost:420.48,wasteReason:"oversized",wasteCost:210.24,utilization:18,recommendation:"Downsize to m5.xlarge",potentialSavings:210,owner:"platform-core",lastActivity:"2026-02-22T06:00:00Z"},{id:"r2",name:"ml-training-p3-8xl",type:"ec2",region:"us-east-1",monthlyCost:2840,wasteReason:"idle",wasteCost:1136,utilization:8,recommendation:"Schedule off-hours shutdown; use spot instances for training",potentialSavings:1700,owner:"ml-team",lastActivity:"2026-02-21T18:00:00Z"},{id:"r3",name:"prod-postgres-db2",type:"rds",region:"us-east-1",monthlyCost:680,wasteReason:"oversized",wasteCost:340,utilization:22,recommendation:"Downsize from db.r6g.2xlarge to db.r6g.large",potentialSavings:340,owner:"data-eng",lastActivity:"2026-02-22T06:00:00Z"},{id:"r4",name:"prod-redis-cluster",type:"elasticache",region:"us-east-1",monthlyCost:184.8,wasteReason:null,wasteCost:0,utilization:68,recommendation:null,potentialSavings:0,owner:"platform-core",lastActivity:"2026-02-22T06:00:00Z"},{id:"r5",name:"staging-ec2-idle",type:"ec2",region:"us-west-2",monthlyCost:82.4,wasteReason:"idle",wasteCost:82.4,utilization:0,recommendation:"Terminate â€” no traffic for 14 days",potentialSavings:82,owner:"dev-ops",lastActivity:"2026-02-08T00:00:00Z"},{id:"r6",name:"log-archive-bucket",type:"s3",region:"us-east-1",monthlyCost:124,wasteReason:"lifecycle",wasteCost:68.2,utilization:100,recommendation:"Add lifecycle policy to transition logs > 30d to Glacier",potentialSavings:68,owner:"data-eng",lastActivity:"2026-02-22T06:00:00Z"},{id:"r7",name:"prod-lb-unused-rules",type:"elb",region:"us-east-1",monthlyCost:28.4,wasteReason:"unused",wasteCost:14.2,utilization:12,recommendation:"Remove 3 unused listener rules",potentialSavings:14,owner:"platform-core",lastActivity:"2026-02-22T06:00:00Z"},{id:"r8",name:"worker-queue-ecs",type:"ecs",region:"us-east-1",monthlyCost:142,wasteReason:null,wasteCost:0,utilization:72,recommendation:null,potentialSavings:0,owner:"backend",lastActivity:"2026-02-22T06:00:00Z"},{id:"r9",name:"batch-processor-lambda",type:"lambda",region:"us-east-1",monthlyCost:8.4,wasteReason:null,wasteCost:0,utilization:94,recommendation:null,potentialSavings:0,owner:"data-eng",lastActivity:"2026-02-22T06:00:00Z"},{id:"r10",name:"dev-rds-postgres",type:"rds",region:"us-east-1",monthlyCost:86.4,wasteReason:"idle",wasteCost:86.4,utilization:2,recommendation:"Stop dev database during off-hours (save 70%)",potentialSavings:62,owner:"engineering",lastActivity:"2026-02-21T17:00:00Z"}],m=[{id:"op1",title:"Rightsize EC2 Instances",description:"4 EC2 instances consistently below 25% CPU/memory utilization. Downsize to next smaller instance type.",type:"rightsizing",resourceCount:4,monthlySavings:680,annualSavings:8160,effort:"medium",risk:"low",services:["api-prod","worker-service"]},{id:"op2",title:"Reserved Instance Savings",description:"Convert 6 on-demand EC2 instances to 1-year reserved. These have been running > 3 months continuously.",type:"reserved",resourceCount:6,monthlySavings:1240,annualSavings:14880,effort:"low",risk:"low",services:["prod-cluster","data-service"]},{id:"op3",title:"Terminate Idle Resources",description:"3 resources with zero or near-zero utilization for > 7 days. Safe to terminate or stop.",type:"idle",resourceCount:3,monthlySavings:310,annualSavings:3720,effort:"low",risk:"low",services:["staging-ec2-idle","dev-rds"]},{id:"op4",title:"Spot Instances for ML Training",description:"ML training jobs are interruptible workloads â€” using spot instances instead of on-demand saves 70-80%.",type:"spot",resourceCount:2,monthlySavings:2100,annualSavings:25200,effort:"high",risk:"medium",services:["ml-training-p3-8xl","ml-featurization"]},{id:"op5",title:"S3 Lifecycle Policies",description:"Add Intelligent-Tiering and Glacier transition policies to log and backup buckets.",type:"lifecycle",resourceCount:3,monthlySavings:186,annualSavings:2232,effort:"low",risk:"low",services:["log-archive-bucket","prod-backups"]}],c=[{name:"Compute (EC2/ECS)",current:4240,optimized:2180,services:"EC2, ECS, EKS"},{name:"Database (RDS/ElastiCache)",current:864,optimized:524,services:"RDS, ElastiCache"},{name:"ML/GPU (P3/G4)",current:2840,optimized:820,services:"EC2 P/G series"},{name:"Storage (S3/EFS)",current:284,optimized:182,services:"S3, EFS"},{name:"Networking (LB/DTO)",current:142,optimized:124,services:"ELB, Data Transfer"},{name:"Functions (Lambda)",current:18,optimized:14,services:"Lambda"}];function g(s){return{ec2:"bg-indigo-500/20 text-indigo-400 border-indigo-500/30",rds:"bg-blue-500/20 text-blue-400 border-blue-500/30",lambda:"bg-amber-500/20 text-amber-400 border-amber-500/30",s3:"bg-emerald-500/20 text-emerald-400 border-emerald-500/30",elb:"bg-zinc-500/20 text-zinc-400 border-zinc-500/30",elasticache:"bg-rose-500/20 text-rose-400 border-rose-500/30",ecs:"bg-purple-500/20 text-purple-400 border-purple-500/30"}[s]}function v(s){return s==="low"?"text-emerald-400":s==="medium"?"text-amber-400":"text-rose-400"}function h(s){return s==="low"?"text-emerald-400":s==="medium"?"text-amber-400":"text-rose-400"}function b(){const s=c.reduce((i,l)=>i+l.current,0),a=c.reduce((i,l)=>i+l.optimized,0),r=s-a,t=d.filter(i=>i.wasteCost>0),n=t.reduce((i,l)=>i+l.wasteCost,0);return e.jsxs("div",{className:"space-y-6",children:[e.jsx("div",{className:"grid grid-cols-4 gap-4",children:[{label:"Monthly Spend",value:"$"+s.toLocaleString(),color:"text-white"},{label:"Potential Savings",value:"$"+r.toLocaleString(),color:"text-emerald-400"},{label:"Waste Identified",value:"$"+Math.round(n).toLocaleString(),color:"text-rose-400"},{label:"Resources at Risk",value:t.length,color:"text-amber-400"}].map(i=>e.jsxs("div",{className:"rounded-xl border border-zinc-800 bg-zinc-900 p-4",children:[e.jsx("div",{className:o("text-3xl font-bold",i.color),children:i.value}),e.jsx("div",{className:"text-sm text-zinc-400 mt-1",children:i.label})]},i.label))}),e.jsxs("div",{className:"rounded-xl border border-zinc-800 bg-zinc-900 p-5",children:[e.jsx("h3",{className:"text-sm font-semibold text-white mb-4",children:"Cost by Category: Current vs Optimized"}),e.jsx("div",{className:"space-y-4",children:c.map(i=>{const l=Math.max(...c.map(p=>p.current)),u=i.current-i.optimized;return e.jsxs("div",{children:[e.jsxs("div",{className:"flex justify-between text-xs mb-1",children:[e.jsx("span",{className:"text-zinc-300",children:i.name}),e.jsxs("span",{className:"text-emerald-400",children:["save $",u.toLocaleString()]})]}),e.jsx("div",{className:"relative",children:e.jsxs("div",{className:"flex items-center gap-2",children:[e.jsx("div",{className:"flex-1 bg-zinc-800 rounded h-3 overflow-hidden",children:e.jsx("div",{className:"h-full bg-zinc-600 relative",style:{width:i.current/l*100+"%"},children:e.jsx("div",{className:"absolute inset-0 bg-emerald-500",style:{width:i.optimized/i.current*100+"%"}})})}),e.jsxs("span",{className:"text-xs text-zinc-400 w-16 text-right",children:["$",i.current.toLocaleString()]})]})})]},i.name)})}),e.jsxs("div",{className:"flex gap-4 mt-3 text-xs",children:[e.jsxs("div",{className:"flex items-center gap-1",children:[e.jsx("div",{className:"w-3 h-2 rounded bg-emerald-500"}),e.jsx("span",{className:"text-zinc-400",children:"Optimized"})]}),e.jsxs("div",{className:"flex items-center gap-1",children:[e.jsx("div",{className:"w-3 h-2 rounded bg-zinc-600"}),e.jsx("span",{className:"text-zinc-400",children:"Current overspend"})]})]})]})]})}function w(){const[s,a]=x.useState(null),r=m.reduce((t,n)=>t+n.monthlySavings,0);return e.jsxs("div",{className:"space-y-3",children:[e.jsxs("div",{className:"text-sm text-zinc-400 mb-4",children:["Total potential savings: ",e.jsxs("span",{className:"text-emerald-400 font-semibold",children:["$",r.toLocaleString(),"/month"]})," Â· "," ",e.jsxs("span",{className:"text-emerald-300 font-semibold",children:["$",(r*12).toLocaleString(),"/year"]})]}),m.sort((t,n)=>n.monthlySavings-t.monthlySavings).map(t=>e.jsxs("div",{className:o("rounded-xl border p-4 cursor-pointer transition-all",(s==null?void 0:s.id)===t.id?"border-indigo-500 bg-indigo-500/5":"border-zinc-800 bg-zinc-900 hover:border-zinc-600"),onClick:()=>a((s==null?void 0:s.id)===t.id?null:t),children:[e.jsxs("div",{className:"flex items-center gap-3",children:[e.jsxs("div",{className:"flex-1",children:[e.jsxs("div",{className:"flex items-center gap-2",children:[e.jsx("span",{className:"font-medium text-white",children:t.title}),e.jsx("span",{className:"text-xs bg-zinc-800 text-zinc-400 rounded px-2 py-0.5 capitalize",children:t.type})]}),e.jsx("p",{className:"text-xs text-zinc-500 mt-0.5",children:t.description})]}),e.jsxs("div",{className:"text-right shrink-0",children:[e.jsxs("div",{className:"text-emerald-400 font-bold",children:["$",t.monthlySavings.toLocaleString(),"/mo"]}),e.jsxs("div",{className:"text-xs text-zinc-500",children:[t.resourceCount," resources"]})]})]}),(s==null?void 0:s.id)===t.id&&e.jsxs("div",{className:"mt-4 border-t border-zinc-800 pt-4 grid grid-cols-4 gap-4 text-xs",children:[e.jsxs("div",{children:[e.jsx("div",{className:"text-zinc-500",children:"Monthly"}),e.jsxs("div",{className:"text-emerald-400 font-bold",children:["$",t.monthlySavings.toLocaleString()]})]}),e.jsxs("div",{children:[e.jsx("div",{className:"text-zinc-500",children:"Annual"}),e.jsxs("div",{className:"text-emerald-400 font-bold",children:["$",t.annualSavings.toLocaleString()]})]}),e.jsxs("div",{children:[e.jsx("div",{className:"text-zinc-500",children:"Effort"}),e.jsx("div",{className:o("capitalize",v(t.effort)),children:t.effort})]}),e.jsxs("div",{children:[e.jsx("div",{className:"text-zinc-500",children:"Risk"}),e.jsx("div",{className:o("capitalize",h(t.risk)),children:t.risk})]})]})]},t.id))]})}function f(){const[s,a]=x.useState("waste"),r=s==="waste"?d.filter(t=>t.wasteCost>0):d;return e.jsxs("div",{className:"space-y-4",children:[e.jsx("div",{className:"flex gap-2",children:["all","waste"].map(t=>e.jsx("button",{onClick:()=>a(t),className:o("px-3 py-1 rounded-full text-xs font-medium capitalize transition-colors",s===t?"bg-indigo-600 text-white":"bg-zinc-800 text-zinc-400 hover:text-white"),children:t==="waste"?"Waste Only":"All Resources"},t))}),e.jsx("div",{className:"space-y-2",children:r.map(t=>e.jsxs("div",{className:"rounded-xl border border-zinc-800 bg-zinc-900 p-4",children:[e.jsxs("div",{className:"flex items-center gap-3",children:[e.jsx("span",{className:o("text-xs px-1.5 py-0.5 rounded border uppercase",g(t.type)),children:t.type}),e.jsx("span",{className:"font-medium text-white text-sm",children:t.name}),e.jsx("span",{className:"text-xs text-zinc-500",children:t.region}),e.jsxs("span",{className:"ml-auto text-sm font-semibold text-white",children:["$",t.monthlyCost.toFixed(0),"/mo"]}),t.wasteCost>0&&e.jsxs("span",{className:"text-xs text-rose-400",children:["waste: $",t.wasteCost.toFixed(0)]})]}),e.jsxs("div",{className:"mt-2 flex items-center gap-3",children:[e.jsx("span",{className:"text-xs text-zinc-500 w-24",children:"Utilization"}),e.jsx("div",{className:"flex-1 bg-zinc-800 rounded-full h-1.5",children:e.jsx("div",{className:o("h-1.5 rounded-full",t.utilization<30?"bg-rose-500":t.utilization<70?"bg-amber-500":"bg-emerald-500"),style:{width:Math.max(1,t.utilization)+"%"}})}),e.jsxs("span",{className:"text-xs text-zinc-400 w-8 text-right",children:[t.utilization,"%"]})]}),t.recommendation&&e.jsxs("div",{className:"mt-2 text-xs text-indigo-300 bg-indigo-500/10 border border-indigo-500/20 rounded px-3 py-1.5",children:["ðŸ’¡ ",t.recommendation," â€” save $",t.potentialSavings,"/mo"]})]},t.id))})]})}const z=["Overview","Opportunities","Resources"];function j(){const[s,a]=x.useState("Overview"),r=m.reduce((n,i)=>n+i.monthlySavings,0),t=d.filter(n=>n.wasteCost>0).length;return e.jsxs("div",{className:"min-h-screen bg-zinc-950 text-white p-6",children:[e.jsxs("div",{className:"mb-6",children:[e.jsx("h1",{className:"text-2xl font-bold mb-1",children:"Infrastructure Cost Optimizer"}),e.jsxs("p",{className:"text-zinc-400 text-sm",children:["Cloud spend analysis and waste reduction â€” ",t," wasteful resources, $",r.toLocaleString(),"/month recoverable"]})]}),e.jsx("div",{className:"flex gap-1 mb-6 border-b border-zinc-800",children:z.map(n=>e.jsx("button",{onClick:()=>a(n),className:o("px-4 py-2 text-sm font-medium border-b-2 transition-colors -mb-px",s===n?"border-indigo-500 text-indigo-400":"border-transparent text-zinc-400 hover:text-white"),children:n},n))}),s==="Overview"&&e.jsx(b,{}),s==="Opportunities"&&e.jsx(w,{}),s==="Resources"&&e.jsx(f,{})]})}export{j as default};
