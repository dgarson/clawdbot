import{r as l,j as s,c as r}from"./index-D88R7rlx.js";const c=[{id:"l1",timestamp:"10:42:31.841",level:"ERROR",source:"api-gateway",message:"Upstream connection timeout for service user-service after 5000ms",traceId:"a3f92c8e",spanId:"b1d4",fields:{duration_ms:5e3,status:503,upstream:"user-service",retries:3}},{id:"l2",timestamp:"10:42:31.102",level:"WARN",source:"auth-service",message:"Rate limit approaching for client_id=cli_abc123: 950/1000 requests used",traceId:"b7e41d2a",spanId:"c2e5",fields:{client_id:"cli_abc123",limit:1e3,used:950,window:"1m"}},{id:"l3",timestamp:"10:42:30.577",level:"INFO",source:"billing-service",message:"Payment processed successfully for customer cus_xyz789",traceId:"c9a03e4b",spanId:"d3f6",fields:{customer_id:"cus_xyz789",amount:299,currency:"USD",method:"card"}},{id:"l4",timestamp:"10:42:30.219",level:"INFO",source:"user-service",message:"User profile updated: usr_123 changed email address",traceId:"d2f57b1c",spanId:"e4g7",fields:{user_id:"usr_123",field:"email",old_domain:"gmail.com",new_domain:"company.com"}},{id:"l5",timestamp:"10:42:29.883",level:"FATAL",source:"api-gateway",message:"Circuit breaker OPEN for upstream auth-service after 10 consecutive failures",traceId:"e8c12a5d",spanId:"f5h8",fields:{service:"auth-service",failures:10,state:"OPEN",recovery_in:30}},{id:"l6",timestamp:"10:42:29.441",level:"DEBUG",source:"scheduler",message:"Job invoice-generator-daily started with 1204 pending invoices",traceId:"f1b36e7c",spanId:"g6i9",fields:{job_id:"invoice-gen-daily",pending_count:1204,estimated_duration_min:14}},{id:"l7",timestamp:"10:42:28.971",level:"ERROR",source:"worker",message:"Failed to process event order.created evt_001HX after 3 attempts: queue consumer timeout",traceId:"g4d92f8a",spanId:"h7j0",fields:{event_id:"evt_001HX",attempts:3,queue:"orders-processing",error:"ConsumerTimeoutError"}},{id:"l8",timestamp:"10:42:28.542",level:"INFO",source:"auth-service",message:"JWT issued for usr_456 - scope: read:all,write:profile expires in 3600s",traceId:"h7f21c4b",spanId:"i8k1",fields:{user_id:"usr_456",scope:"read:all,write:profile",ttl:3600}},{id:"l9",timestamp:"10:42:28.103",level:"WARN",source:"billing-service",message:"Webhook delivery failed for endpoint https://api.acme.com/webhooks/orders (attempt 2/5)",traceId:"i2a54d9e",spanId:"j9l2",fields:{endpoint:"https://api.acme.com/webhooks/orders",attempt:2,max_attempts:5,response_code:503}},{id:"l10",timestamp:"10:42:27.674",level:"INFO",source:"api-gateway",message:"GET /api/users/profile 200 OK 124ms",traceId:"j5c87e2f",spanId:"k0m3",fields:{method:"GET",path:"/api/users/profile",status:200,duration_ms:124}},{id:"l11",timestamp:"10:42:27.201",level:"DEBUG",source:"user-service",message:"Cache hit for user profile usr_789 (key: profile:usr_789:v2)",traceId:"k8e14f5g",spanId:"l1n4",fields:{user_id:"usr_789",cache_key:"profile:usr_789:v2",ttl_remaining:287}},{id:"l12",timestamp:"10:42:26.812",level:"ERROR",source:"worker",message:"Database connection pool exhausted: 100/100 connections in use",traceId:"l3g47h8i",spanId:"m2o5",fields:{pool_size:100,active_connections:100,waiting_requests:23,queue_wait_ms:4200}}],w=[{id:"ss1",name:"Production Errors",query:"level:ERROR OR level:FATAL source:api-gateway,user-service",createdBy:"alice",createdAt:"2d ago"},{id:"ss2",name:"Auth Issues",query:"source:auth-service level:WARN OR level:ERROR",createdBy:"bob",createdAt:"1w ago"},{id:"ss3",name:"Slow Requests > 1s",query:"duration_ms:>1000 level:INFO",createdBy:"carol",createdAt:"3d ago"},{id:"ss4",name:"Circuit Breaker Events",query:"message:circuit breaker",createdBy:"dave",createdAt:"5d ago"}],b=[{time:"10:30",debug:4200,info:18400,warn:340,error:82,fatal:1},{time:"10:32",debug:3900,info:17200,warn:290,error:74,fatal:0},{time:"10:34",debug:4100,info:19100,warn:410,error:91,fatal:0},{time:"10:36",debug:4500,info:20200,warn:480,error:124,fatal:2},{time:"10:38",debug:5100,info:22100,warn:620,error:187,fatal:4},{time:"10:40",debug:4800,info:21400,warn:540,error:203,fatal:5},{time:"10:42",debug:4300,info:19800,warn:490,error:178,fatal:3}],d=[{source:"api-gateway",total:48210,errorRate:2.1,trend:8.4},{source:"user-service",total:31890,errorRate:.4,trend:-1.2},{source:"auth-service",total:28340,errorRate:.2,trend:2.8},{source:"billing-service",total:12190,errorRate:1.8,trend:4.1},{source:"worker",total:9820,errorRate:3.2,trend:15.7},{source:"scheduler",total:2140,errorRate:.1,trend:-.3}],R={DEBUG:"text-zinc-500",INFO:"text-sky-400",WARN:"text-amber-400",ERROR:"text-rose-400",FATAL:"text-rose-300"},_={DEBUG:"bg-zinc-700/30 border-zinc-700/50",INFO:"bg-sky-500/10 border-sky-500/20",WARN:"bg-amber-500/10 border-amber-500/20",ERROR:"bg-rose-500/10 border-rose-500/30",FATAL:"bg-rose-500/20 border-rose-500/50"},I={DEBUG:"bg-zinc-700 text-zinc-400",INFO:"bg-sky-500/15 text-sky-400",WARN:"bg-amber-500/15 text-amber-400",ERROR:"bg-rose-500/15 text-rose-400",FATAL:"bg-rose-500/30 text-rose-200 font-bold"},A=Math.max(...b.map(t=>t.debug+t.info+t.warn+t.error+t.fatal)),E=Math.max(...d.map(t=>t.total));function k(){const[t,g]=l.useState("stream"),[n,v]=l.useState("all"),[o,N]=l.useState("all"),[m,j]=l.useState(null),[i,x]=l.useState(""),[u,y]=l.useState("1h"),p=c.filter(e=>(n==="all"||e.level===n)&&(o==="all"||e.source===o)&&(i===""||e.message.toLowerCase().includes(i.toLowerCase())||e.traceId.includes(i))),h=c.filter(e=>e.level==="ERROR"||e.level==="FATAL").length,f=c.filter(e=>e.level==="WARN").length;return s.jsxs("div",{className:"flex flex-col h-full bg-zinc-950 text-white",children:[s.jsxs("div",{className:"flex-none px-6 py-4 border-b border-zinc-800",children:[s.jsxs("div",{className:"flex items-center justify-between",children:[s.jsxs("div",{children:[s.jsx("h1",{className:"text-lg font-semibold text-white",children:"Log Aggregator"}),s.jsxs("p",{className:"text-xs text-zinc-400 mt-0.5",children:[d.length," sources · Real-time log streaming"]})]}),s.jsx("div",{className:"flex items-center gap-2",children:s.jsx("div",{className:"flex items-center gap-1.5",children:["1h","6h","24h","7d"].map(e=>s.jsx("button",{onClick:()=>y(e),className:r("px-2 py-1 rounded text-xs font-mono transition-colors",u===e?"bg-zinc-700 text-white":"text-zinc-500 hover:text-zinc-300"),children:e},e))})})]}),s.jsx("div",{className:"flex gap-4 mt-3",children:[{label:"Total Logs",value:c.length.toLocaleString(),color:"text-zinc-300"},{label:"Errors",value:h,color:h>0?"text-rose-400":"text-emerald-400"},{label:"Warnings",value:f,color:f>0?"text-amber-400":"text-zinc-300"},{label:"Ingestion Rate",value:"~25K/min",color:"text-sky-400"}].map(e=>s.jsxs("div",{children:[s.jsx("span",{className:r("text-base font-bold",e.color),children:e.value}),s.jsx("span",{className:"text-zinc-500 text-xs ml-1.5",children:e.label})]},e.label))}),s.jsxs("div",{className:"mt-3 space-y-2",children:[s.jsx("input",{value:i,onChange:e=>x(e.target.value),placeholder:"Search logs, trace IDs, messages...",className:"w-full bg-zinc-900 border border-zinc-800 rounded-lg px-3 py-2 text-sm text-zinc-300 placeholder-zinc-600 focus:outline-none focus:border-indigo-500"}),s.jsx("div",{className:"flex gap-1",children:["stream","volume","sources","saved"].map(e=>s.jsx("button",{onClick:()=>g(e),className:r("px-3 py-1.5 rounded-lg text-xs font-medium capitalize transition-colors",t===e?"bg-zinc-700 text-white":"text-zinc-400 hover:text-white hover:bg-zinc-800"),children:e.charAt(0).toUpperCase()+e.slice(1)},e))})]})]}),s.jsxs("div",{className:"flex-1 overflow-hidden",children:[t==="stream"&&s.jsxs("div",{className:"flex flex-col h-full",children:[s.jsxs("div",{className:"flex-none px-4 py-2 border-b border-zinc-800 flex flex-wrap gap-2",children:[s.jsxs("div",{className:"flex items-center gap-1",children:[s.jsx("span",{className:"text-[10px] text-zinc-500",children:"Level:"}),["all","DEBUG","INFO","WARN","ERROR","FATAL"].map(e=>s.jsx("button",{onClick:()=>v(e),className:r("px-2 py-0.5 rounded text-[10px] transition-colors",n===e?"bg-zinc-700 text-white":"text-zinc-500 hover:text-zinc-300"),children:e},e))]}),s.jsxs("div",{className:"flex items-center gap-1",children:[s.jsx("span",{className:"text-[10px] text-zinc-500",children:"Source:"}),s.jsxs("select",{value:o,onChange:e=>N(e.target.value),className:"bg-zinc-800 border border-zinc-700 rounded px-1.5 py-0.5 text-[10px] text-zinc-300 focus:outline-none",children:[s.jsx("option",{value:"all",children:"all"}),["api-gateway","user-service","auth-service","billing-service","worker","scheduler"].map(e=>s.jsx("option",{value:e,children:e},e))]})]})]}),s.jsxs("div",{className:"flex-1 overflow-y-auto font-mono text-[11px]",children:[p.map(e=>s.jsxs("div",{className:r("border-b border-zinc-800/50 hover:bg-zinc-900/50 transition-colors cursor-pointer",_[e.level]),onClick:()=>j(m===e.id?null:e.id),children:[s.jsxs("div",{className:"flex items-start gap-3 px-4 py-2",children:[s.jsx("span",{className:"text-zinc-600 flex-none w-20",children:e.timestamp}),s.jsx("span",{className:r("flex-none px-1.5 py-0.5 rounded text-[9px] font-bold w-11 text-center",I[e.level]),children:e.level}),s.jsx("span",{className:"text-indigo-400 flex-none w-24 truncate",children:e.source}),s.jsx("span",{className:r("flex-1 min-w-0 truncate",R[e.level]),children:e.message}),s.jsx("span",{className:"text-zinc-700 flex-none",children:e.traceId})]}),m===e.id&&s.jsx("div",{className:"px-4 pb-3 pt-1 bg-zinc-900/80",children:s.jsxs("div",{className:"bg-zinc-950 rounded-lg p-3 border border-zinc-800",children:[s.jsx("div",{className:"text-[10px] text-zinc-500 mb-2",children:"Fields"}),s.jsxs("div",{className:"grid grid-cols-2 gap-x-4 gap-y-1",children:[Object.entries(e.fields).map(([a,z])=>s.jsxs("div",{className:"flex items-center gap-2",children:[s.jsxs("span",{className:"text-indigo-400",children:[a,":"]}),s.jsx("span",{className:"text-zinc-300",children:String(z)})]},a)),s.jsxs("div",{className:"flex items-center gap-2",children:[s.jsx("span",{className:"text-indigo-400",children:"trace_id:"}),s.jsx("span",{className:"text-zinc-300",children:e.traceId})]}),s.jsxs("div",{className:"flex items-center gap-2",children:[s.jsx("span",{className:"text-indigo-400",children:"span_id:"}),s.jsx("span",{className:"text-zinc-300",children:e.spanId})]})]})]})})]},e.id)),p.length===0&&s.jsx("div",{className:"flex items-center justify-center h-full text-zinc-600 text-sm",children:"No logs match your filters"})]})]}),t==="volume"&&s.jsx("div",{className:"overflow-y-auto h-full p-5",children:s.jsxs("div",{className:"bg-zinc-900 rounded-xl p-5 border border-zinc-800 mb-4",children:[s.jsxs("div",{className:"text-sm font-medium text-zinc-300 mb-4",children:["Log Volume by Level (last ",u,")"]}),s.jsx("div",{className:"flex items-end gap-2 h-48",children:b.map(e=>{const a=e.debug+e.info+e.warn+e.error+e.fatal;return s.jsxs("div",{className:"flex-1 flex flex-col items-center gap-1",children:[s.jsxs("div",{className:"text-[9px] text-zinc-600",children:[(a/1e3).toFixed(0),"K"]}),s.jsxs("div",{className:"w-full flex flex-col-reverse rounded overflow-hidden gap-px",style:{height:`${a/A*180}px`},children:[e.fatal>0&&s.jsx("div",{className:"bg-rose-300",style:{flex:e.fatal}}),e.error>0&&s.jsx("div",{className:"bg-rose-500",style:{flex:e.error}}),e.warn>0&&s.jsx("div",{className:"bg-amber-500",style:{flex:e.warn}}),e.info>0&&s.jsx("div",{className:"bg-sky-500",style:{flex:e.info}}),e.debug>0&&s.jsx("div",{className:"bg-zinc-600",style:{flex:e.debug}})]}),s.jsx("div",{className:"text-[9px] text-zinc-600",children:e.time})]},e.time)})}),s.jsx("div",{className:"flex gap-4 mt-3 text-[10px]",children:[{label:"FATAL",color:"bg-rose-300"},{label:"ERROR",color:"bg-rose-500"},{label:"WARN",color:"bg-amber-500"},{label:"INFO",color:"bg-sky-500"},{label:"DEBUG",color:"bg-zinc-600"}].map(e=>s.jsxs("div",{className:"flex items-center gap-1.5",children:[s.jsx("div",{className:r("w-2 h-2 rounded-sm",e.color)}),s.jsx("span",{className:"text-zinc-500",children:e.label})]},e.label))})]})}),t==="sources"&&s.jsx("div",{className:"overflow-y-auto h-full p-5",children:s.jsx("div",{className:"space-y-3",children:d.sort((e,a)=>a.total-e.total).map(e=>s.jsxs("div",{className:"bg-zinc-900 rounded-xl p-4 border border-zinc-800",children:[s.jsxs("div",{className:"flex items-center justify-between mb-2",children:[s.jsx("div",{className:"font-mono text-sm font-medium text-white",children:e.source}),s.jsxs("div",{className:"flex items-center gap-4 text-xs",children:[s.jsxs("div",{children:[s.jsxs("span",{className:r("font-semibold",e.errorRate>2?"text-rose-400":e.errorRate>.5?"text-amber-400":"text-emerald-400"),children:[e.errorRate,"%"]}),s.jsx("span",{className:"text-zinc-600 ml-1",children:"errors"})]}),s.jsxs("div",{children:[s.jsxs("span",{className:r("font-semibold",e.trend>10?"text-rose-400":e.trend>0?"text-amber-400":"text-emerald-400"),children:[e.trend>0?"↑":"↓",Math.abs(e.trend),"%"]}),s.jsx("span",{className:"text-zinc-600 ml-1",children:"trend"})]}),s.jsx("div",{className:"text-white font-semibold",children:e.total.toLocaleString()})]})]}),s.jsx("div",{className:"w-full bg-zinc-800 rounded-full h-1.5",children:s.jsx("div",{className:"bg-indigo-500 h-1.5 rounded-full",style:{width:`${e.total/E*100}%`}})}),s.jsx("div",{className:"mt-1.5 w-full bg-zinc-800 rounded-full h-1",children:s.jsx("div",{className:"bg-rose-500 h-1 rounded-full",style:{width:`${e.errorRate*10}%`}})})]},e.source))})}),t==="saved"&&s.jsxs("div",{className:"overflow-y-auto h-full p-5",children:[s.jsxs("div",{className:"flex justify-between items-center mb-4",children:[s.jsx("h2",{className:"text-sm font-medium text-zinc-300",children:"Saved Searches"}),s.jsx("button",{className:"px-3 py-1.5 rounded-lg bg-indigo-600 hover:bg-indigo-500 text-xs font-medium transition-colors",children:"Save Current"})]}),s.jsx("div",{className:"space-y-2",children:w.map(e=>s.jsxs("div",{className:"bg-zinc-900 rounded-xl p-4 border border-zinc-800 hover:border-zinc-700 transition-colors",children:[s.jsxs("div",{className:"flex items-center justify-between",children:[s.jsx("span",{className:"font-medium text-white text-sm",children:e.name}),s.jsxs("div",{className:"flex gap-2",children:[s.jsx("button",{onClick:()=>x(e.query),className:"px-2.5 py-1 rounded text-xs bg-indigo-600/20 hover:bg-indigo-600/30 text-indigo-400 border border-indigo-500/30 transition-colors",children:"Load"}),s.jsx("button",{className:"px-2.5 py-1 rounded text-xs bg-zinc-800 hover:bg-zinc-700 text-zinc-300 transition-colors",children:"Delete"})]})]}),s.jsx("div",{className:"mt-2 font-mono text-[11px] bg-zinc-950 rounded px-2.5 py-1.5 border border-zinc-800 text-emerald-400",children:e.query}),s.jsxs("div",{className:"mt-1.5 text-[10px] text-zinc-600",children:["Saved by ",e.createdBy," · ",e.createdAt]})]},e.id))})]})]})]})}export{k as default};
