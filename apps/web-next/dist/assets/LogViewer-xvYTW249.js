import{r as l,j as s,c as r}from"./index-rWtyeRSA.js";const S={trace:"text-zinc-600",debug:"text-zinc-500",info:"text-sky-400",warn:"text-amber-400",error:"text-rose-400"},p={trace:"bg-zinc-800 text-zinc-500",debug:"bg-zinc-800 text-zinc-400",info:"bg-sky-500/10 text-sky-400 ring-1 ring-sky-500/20",warn:"bg-amber-500/10 text-amber-400 ring-1 ring-amber-500/20",error:"bg-rose-500/10 text-rose-400 ring-1 ring-rose-500/20"},v={system:"text-zinc-500",agent:"text-indigo-400",llm:"text-violet-400",tool:"text-emerald-400",webhook:"text-sky-400",cron:"text-amber-400"},c=[{id:"l-001",ts:"02:09:42.881",level:"info",source:"system",message:"OpenClaw gateway started on :8080",meta:{pid:4821,version:"1.14.2"}},{id:"l-002",ts:"02:09:43.012",level:"info",source:"cron",message:"Cron scheduler initialized, 12 jobs registered"},{id:"l-003",ts:"02:09:43.204",level:"debug",source:"system",message:"Loading agent manifests from workspace/",meta:{count:18}},{id:"l-004",ts:"02:09:44.110",level:"info",source:"agent",agent:"Luis",message:"Session started — cron:e61f3c46 heartbeat triggered"},{id:"l-005",ts:"02:09:44.291",level:"debug",source:"llm",agent:"Luis",message:"LLM request queued: claude-sonnet-4-6 (1841 tokens)"},{id:"l-006",ts:"02:09:46.403",level:"info",source:"llm",agent:"Luis",message:"LLM response received: 642 tokens in 2112ms"},{id:"l-007",ts:"02:09:46.780",level:"debug",source:"tool",agent:"Luis",message:"tool:read executing — path=CONTEXT.md"},{id:"l-008",ts:"02:09:46.824",level:"debug",source:"tool",agent:"Luis",message:"tool:read complete — 4218 bytes in 44ms"},{id:"l-009",ts:"02:09:47.100",level:"info",source:"agent",agent:"Piper",message:"Sub-agent spawned — label=horizon-api-playground model=MiniMax-M2.5"},{id:"l-010",ts:"02:09:47.200",level:"info",source:"agent",agent:"Reed",message:"Sub-agent spawned — label=horizon-workspace-settings model=gemini-3-flash-preview"},{id:"l-011",ts:"02:09:48.001",level:"warn",source:"webhook",message:"Webhook delivery slow — endpoint=https://hooks.slack.com latency=1840ms"},{id:"l-012",ts:"02:09:48.500",level:"debug",source:"llm",agent:"Luis",message:"LLM request queued: claude-sonnet-4-6 (3820 tokens) — code generation"},{id:"l-013",ts:"02:09:50.100",level:"warn",source:"system",message:"Memory usage high: 84% of 8GB",meta:{used_mb:6912,total_mb:8192}},{id:"l-014",ts:"02:09:52.301",level:"info",source:"llm",agent:"Luis",message:"LLM response received: 2041 tokens in 3801ms"},{id:"l-015",ts:"02:09:52.388",level:"debug",source:"tool",agent:"Luis",message:"tool:write executing — path=AgentWorkload.tsx size=19824"},{id:"l-016",ts:"02:09:52.476",level:"debug",source:"tool",agent:"Luis",message:"tool:write complete — 88ms"},{id:"l-017",ts:"02:10:08.312",level:"info",source:"agent",agent:"Reed",message:"Sub-agent complete — WorkspaceSettings.tsx written (19389 bytes)"},{id:"l-018",ts:"02:10:40.860",level:"info",source:"agent",agent:"Piper",message:"Sub-agent complete — ApiPlayground.tsx written (18383 bytes)"},{id:"l-019",ts:"02:10:41.100",level:"debug",source:"tool",agent:"Luis",message:"tool:exec executing — cmd='pnpm build'"},{id:"l-020",ts:"02:10:42.740",level:"info",source:"tool",agent:"Luis",message:"Build succeeded in 1.64s — 63 chunks, 0 errors"},{id:"l-021",ts:"02:10:42.810",level:"debug",source:"tool",agent:"Luis",message:"tool:exec executing — cmd='git commit'"},{id:"l-022",ts:"02:10:43.230",level:"info",source:"tool",agent:"Luis",message:"git commit 81a5453 — 103 files changed"},{id:"l-023",ts:"02:10:50.001",level:"error",source:"webhook",message:"Webhook delivery failed — endpoint=https://api.external.com/hook status=503 after 3 retries"},{id:"l-024",ts:"02:10:50.100",level:"error",source:"system",message:"Circuit breaker OPEN for api.external.com — 5 failures in 60s"},{id:"l-025",ts:"02:11:00.000",level:"info",source:"cron",message:"Cron job triggered: daily-digest — agent=Stephan"},{id:"l-026",ts:"02:11:00.200",level:"info",source:"agent",agent:"Stephan",message:"Session started — cron daily-digest"},{id:"l-027",ts:"02:11:00.400",level:"debug",source:"llm",agent:"Stephan",message:"LLM request queued: gpt-4o (2200 tokens)"},{id:"l-028",ts:"02:11:07.900",level:"error",source:"llm",agent:"Stephan",message:"LLM timeout after 7.5s — gpt-4o rate limit",meta:{status:429,retry_after:60}},{id:"l-029",ts:"02:11:08.000",level:"error",source:"agent",agent:"Stephan",message:"Session failed — unhandled LLM timeout exception"},{id:"l-030",ts:"02:12:01.000",level:"info",source:"agent",agent:"Wes",message:"Sub-agent spawned — label=horizon-cost-optimizer model=MiniMax-M2.5"},{id:"l-031",ts:"02:12:01.100",level:"info",source:"agent",agent:"Quinn",message:"Sub-agent spawned — label=horizon-plugin-manager model=gemini-3-flash-preview"},{id:"l-032",ts:"02:12:05.200",level:"trace",source:"system",message:"GC cycle: minor collection 14ms — freed 124MB"},{id:"l-033",ts:"02:12:10.800",level:"info",source:"agent",agent:"Luis",message:"AgentTracer.tsx written — 21612 bytes"},{id:"l-034",ts:"02:12:11.000",level:"info",source:"agent",agent:"Luis",message:"DataPipelineViewer.tsx written — 21415 bytes"},{id:"l-035",ts:"02:12:12.000",level:"info",source:"tool",agent:"Luis",message:"Build succeeded in 1.61s — 65 chunks, 0 errors"}];function C(n,a){if(!a)return n;const i=n.toLowerCase().indexOf(a.toLowerCase());return i===-1?n:s.jsxs(s.Fragment,{children:[n.slice(0,i),s.jsx("mark",{className:"bg-amber-400/30 text-amber-200 rounded-sm",children:n.slice(i,i+a.length)}),n.slice(i+a.length)]})}function E(){const[n,a]=l.useState(new Set(["debug","info","warn","error","trace"])),[i,j]=l.useState("all"),[g,w]=l.useState("all"),[d,z]=l.useState(""),[f,b]=l.useState(null),[u,L]=l.useState(!0),h=l.useRef(null),y=l.useMemo(()=>{const e=new Set;return c.forEach(o=>{o.agent&&e.add(o.agent)}),Array.from(e).sort()},[]),m=l.useMemo(()=>c.filter(e=>!(!n.has(e.level)||i!=="all"&&e.source!==i||g!=="all"&&e.agent!==g||d&&!e.message.toLowerCase().includes(d.toLowerCase()))),[n,i,g,d]);l.useEffect(()=>{u&&h.current&&h.current.scrollIntoView({behavior:"smooth"})},[m,u]);const t=c.find(e=>e.id===f)??null;function N(e){a(o=>{const x=new Set(o);return x.has(e)?x.delete(e):x.add(e),x})}const k=["trace","debug","info","warn","error"];return s.jsxs("div",{className:"h-full flex flex-col bg-zinc-950 overflow-hidden font-mono text-xs",children:[s.jsxs("div",{className:"shrink-0 border-b border-zinc-800 px-4 py-2 flex items-center gap-3 flex-wrap",children:[s.jsx("span",{className:"text-zinc-400 font-sans text-sm font-semibold not-italic",children:"Log Viewer"}),s.jsx("div",{className:"flex gap-1",children:k.map(e=>s.jsx("button",{onClick:()=>N(e),className:r("px-2 py-0.5 rounded text-xs font-medium transition-opacity focus-visible:outline-none focus-visible:ring-2 focus-visible:ring-indigo-500",p[e],!n.has(e)&&"opacity-30"),"aria-pressed":n.has(e),children:e.toUpperCase()},e))}),s.jsxs("select",{value:i,onChange:e=>j(e.target.value),className:"bg-zinc-800 border border-zinc-700 text-zinc-300 text-xs rounded px-2 py-0.5 focus:outline-none focus:ring-2 focus:ring-indigo-500 font-mono","aria-label":"Filter by source",children:[s.jsx("option",{value:"all",children:"all sources"}),["system","agent","llm","tool","webhook","cron"].map(e=>s.jsx("option",{value:e,children:e},e))]}),s.jsxs("select",{value:g,onChange:e=>w(e.target.value),className:"bg-zinc-800 border border-zinc-700 text-zinc-300 text-xs rounded px-2 py-0.5 focus:outline-none focus:ring-2 focus:ring-indigo-500 font-mono","aria-label":"Filter by agent",children:[s.jsx("option",{value:"all",children:"all agents"}),y.map(e=>s.jsx("option",{value:e,children:e},e))]}),s.jsx("input",{type:"search",placeholder:"search messages…",value:d,onChange:e=>z(e.target.value),className:"flex-1 min-w-32 bg-zinc-800 border border-zinc-700 text-zinc-300 text-xs rounded px-2 py-0.5 focus:outline-none focus:ring-2 focus:ring-indigo-500 font-mono placeholder-zinc-600","aria-label":"Search log messages"}),s.jsxs("span",{className:"text-zinc-600 shrink-0",children:[m.length," / ",c.length," lines"]}),s.jsx("button",{onClick:()=>L(e=>!e),"aria-pressed":u,className:r("px-2 py-0.5 rounded text-xs font-medium transition-colors focus-visible:outline-none focus-visible:ring-2 focus-visible:ring-indigo-500 font-sans",u?"bg-indigo-600 text-white":"bg-zinc-800 text-zinc-400"),children:u?"↓ tailing":"tail off"})]}),s.jsxs("div",{className:"flex-1 flex overflow-hidden",children:[s.jsxs("div",{className:"flex-1 overflow-y-auto",role:"log","aria-live":"polite","aria-label":"Log output",children:[m.length===0?s.jsx("div",{className:"flex items-center justify-center h-32 text-zinc-600 font-sans",children:"No logs match current filters"}):m.map(e=>s.jsxs("button",{onClick:()=>b(e.id===f?null:e.id),className:r("w-full text-left flex items-start gap-2 px-3 py-0.5 hover:bg-zinc-800/40 transition-colors focus-visible:outline-none focus-visible:ring-1 focus-visible:ring-inset focus-visible:ring-indigo-500",e.id===f&&"bg-zinc-800/60",e.level==="error"&&"border-l-2 border-rose-500",e.level==="warn"&&"border-l-2 border-amber-500"),children:[s.jsx("span",{className:"shrink-0 text-zinc-600 w-24",children:e.ts}),s.jsx("span",{className:r("shrink-0 w-9 uppercase font-bold",S[e.level]),children:e.level==="debug"?"DBG":e.level==="trace"?"TRC":e.level.toUpperCase()}),s.jsx("span",{className:r("shrink-0 w-14",v[e.source]),children:e.source}),s.jsx("span",{className:"shrink-0 w-16 text-indigo-300/70 truncate",children:e.agent??""}),s.jsx("span",{className:"text-zinc-300 break-all",children:C(e.message,d)})]},e.id)),s.jsx("div",{ref:h})]}),t&&s.jsxs("aside",{className:"w-72 shrink-0 border-l border-zinc-800 overflow-y-auto font-sans",children:[s.jsx("div",{className:"p-4 border-b border-zinc-800",children:s.jsxs("div",{className:"flex items-center justify-between",children:[s.jsx("span",{className:r("text-xs px-2 py-0.5 rounded font-medium",p[t.level]),children:t.level.toUpperCase()}),s.jsx("button",{onClick:()=>b(null),className:"text-zinc-500 hover:text-zinc-300 text-lg leading-none focus-visible:outline-none focus-visible:ring-2 focus-visible:ring-indigo-500 rounded","aria-label":"Close detail panel",children:"×"})]})}),s.jsxs("div",{className:"p-4 space-y-4",children:[s.jsxs("div",{children:[s.jsx("div",{className:"text-xs font-medium text-zinc-400 mb-1 uppercase tracking-wide",children:"Message"}),s.jsx("p",{className:"text-xs text-zinc-200 break-words font-mono",children:t.message})]}),s.jsxs("div",{className:"grid grid-cols-2 gap-2",children:[s.jsxs("div",{children:[s.jsx("div",{className:"text-xs text-zinc-600 mb-0.5",children:"Timestamp"}),s.jsx("div",{className:"text-xs text-zinc-300 font-mono",children:t.ts})]}),s.jsxs("div",{children:[s.jsx("div",{className:"text-xs text-zinc-600 mb-0.5",children:"Source"}),s.jsx("div",{className:r("text-xs font-medium",v[t.source]),children:t.source})]}),t.agent&&s.jsxs("div",{children:[s.jsx("div",{className:"text-xs text-zinc-600 mb-0.5",children:"Agent"}),s.jsx("div",{className:"text-xs text-indigo-400",children:t.agent})]}),s.jsxs("div",{children:[s.jsx("div",{className:"text-xs text-zinc-600 mb-0.5",children:"ID"}),s.jsx("div",{className:"text-xs text-zinc-500 font-mono",children:t.id})]})]}),t.meta&&Object.keys(t.meta).length>0&&s.jsxs("div",{children:[s.jsx("div",{className:"text-xs font-medium text-zinc-400 mb-2 uppercase tracking-wide",children:"Metadata"}),s.jsx("div",{className:"bg-zinc-900 rounded border border-zinc-800 p-3 space-y-1",children:Object.entries(t.meta).map(([e,o])=>s.jsxs("div",{className:"flex justify-between text-xs gap-2",children:[s.jsx("span",{className:"text-zinc-500",children:e}),s.jsx("span",{className:"text-zinc-300 font-mono",children:String(o)})]},e))})]})]})]})]}),s.jsxs("div",{className:"shrink-0 border-t border-zinc-800 px-4 py-1 flex items-center gap-4 text-xs text-zinc-600 font-sans",children:[s.jsxs("span",{children:[c.filter(e=>e.level==="error").length," errors ·"," ",c.filter(e=>e.level==="warn").length," warnings"]}),s.jsx("span",{className:"ml-auto",children:"35 total entries · live simulation"})]})]})}export{E as default};
