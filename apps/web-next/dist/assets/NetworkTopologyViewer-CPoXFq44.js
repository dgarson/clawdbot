import{r as p,j as e,c,R as B}from"./index-MVkzivj4.js";const i=[{id:"gw1",name:"API Gateway",type:"gateway",status:"healthy",region:"us-east-1",host:"gw-us-east.internal",port:443,version:"3.2.1",connections:4820,latencyMs:8,rps:12400,errorRate:.12,cpu:34,memory:48,tags:["edge","tls-termination"]},{id:"lb1",name:"Load Balancer US-E",type:"loadbalancer",status:"healthy",region:"us-east-1",host:"lb-ue1.internal",port:80,version:"nginx/1.25",connections:3200,latencyMs:2,rps:11800,errorRate:.04,cpu:22,memory:31,tags:["layer7","sticky"]},{id:"lb2",name:"Load Balancer EU",type:"loadbalancer",status:"degraded",region:"eu-west-1",host:"lb-ew1.internal",port:80,version:"nginx/1.24",connections:1100,latencyMs:18,rps:3200,errorRate:1.4,cpu:78,memory:65,tags:["layer7"]},{id:"svc1",name:"Auth Service",type:"service",status:"healthy",region:"us-east-1",host:"auth-svc.internal",port:8080,version:"2.4.0",connections:840,latencyMs:12,rps:4200,errorRate:.08,cpu:45,memory:60,tags:["stateless","jwt"]},{id:"svc2",name:"User Service",type:"service",status:"healthy",region:"us-east-1",host:"user-svc.internal",port:8081,version:"1.9.3",connections:520,latencyMs:22,rps:2100,errorRate:.15,cpu:38,memory:52,tags:["stateless"]},{id:"svc3",name:"Order Service",type:"service",status:"degraded",region:"us-east-1",host:"order-svc.internal",port:8082,version:"3.1.0",connections:380,latencyMs:145,rps:980,errorRate:2.8,cpu:88,memory:74,tags:["stateful"]},{id:"svc4",name:"Notification Service",type:"service",status:"healthy",region:"us-east-1",host:"notif-svc.internal",port:8083,version:"1.2.1",connections:90,latencyMs:35,rps:450,errorRate:.3,cpu:18,memory:28,tags:["async"]},{id:"svc5",name:"Analytics Service",type:"service",status:"healthy",region:"eu-west-1",host:"analytics-svc.internal",port:8084,version:"2.0.0",connections:210,latencyMs:55,rps:720,errorRate:.5,cpu:62,memory:71,tags:["batch"]},{id:"db1",name:"Postgres Primary",type:"database",status:"healthy",region:"us-east-1",host:"pg-primary.internal",port:5432,version:"16.1",connections:240,latencyMs:3,rps:8200,errorRate:.02,cpu:55,memory:72,tags:["primary","rds"]},{id:"db2",name:"Postgres Replica",type:"database",status:"healthy",region:"us-east-1",host:"pg-replica.internal",port:5432,version:"16.1",connections:120,latencyMs:5,rps:3100,errorRate:.01,cpu:32,memory:58,tags:["replica","read-only"]},{id:"db3",name:"MongoDB",type:"database",status:"down",region:"us-east-1",host:"mongo.internal",port:27017,version:"7.0.3",connections:0,latencyMs:0,rps:0,errorRate:100,cpu:0,memory:0,tags:["document","shard"]},{id:"c1",name:"Redis Primary",type:"cache",status:"healthy",region:"us-east-1",host:"redis-primary.internal",port:6379,version:"7.2.3",connections:580,latencyMs:.8,rps:22e3,errorRate:0,cpu:24,memory:44,tags:["cache","sessions"]},{id:"c2",name:"Redis Replica",type:"cache",status:"healthy",region:"eu-west-1",host:"redis-replica.internal",port:6379,version:"7.2.3",connections:190,latencyMs:1.2,rps:7400,errorRate:0,cpu:18,memory:38,tags:["cache","read-only"]},{id:"q1",name:"RabbitMQ",type:"queue",status:"healthy",region:"us-east-1",host:"rabbitmq.internal",port:5672,version:"3.13.0",connections:44,latencyMs:4,rps:1800,errorRate:.1,cpu:28,memory:55,tags:["amqp","durable"]},{id:"ext1",name:"Stripe API",type:"external",status:"healthy",region:"external",host:"api.stripe.com",port:443,version:"v1",connections:12,latencyMs:220,rps:180,errorRate:.5,cpu:0,memory:0,tags:["payments","webhook"]},{id:"ext2",name:"SendGrid",type:"external",status:"healthy",region:"external",host:"api.sendgrid.com",port:443,version:"v3",connections:5,latencyMs:185,rps:90,errorRate:.2,cpu:0,memory:0,tags:["email","transactional"]}],m=[{id:"l1",source:"gw1",target:"lb1",type:"http",rps:11800,latencyMs:2,errorRate:.04,encrypted:!0,status:"active"},{id:"l2",source:"gw1",target:"lb2",type:"http",rps:3200,latencyMs:18,errorRate:1.4,encrypted:!0,status:"degraded"},{id:"l3",source:"lb1",target:"svc1",type:"http",rps:4200,latencyMs:12,errorRate:.08,encrypted:!1,status:"active"},{id:"l4",source:"lb1",target:"svc2",type:"http",rps:2100,latencyMs:22,errorRate:.15,encrypted:!1,status:"active"},{id:"l5",source:"lb1",target:"svc3",type:"grpc",rps:980,latencyMs:145,errorRate:2.8,encrypted:!0,status:"degraded"},{id:"l6",source:"svc1",target:"db1",type:"tcp",rps:3200,latencyMs:3,errorRate:.02,encrypted:!0,status:"active"},{id:"l7",source:"svc2",target:"db1",type:"tcp",rps:1800,latencyMs:3,errorRate:.02,encrypted:!0,status:"active"},{id:"l8",source:"svc3",target:"db1",type:"tcp",rps:850,latencyMs:3,errorRate:.02,encrypted:!0,status:"active"},{id:"l9",source:"svc3",target:"db3",type:"tcp",rps:0,latencyMs:0,errorRate:100,encrypted:!1,status:"down"},{id:"l10",source:"svc1",target:"c1",type:"redis",rps:8200,latencyMs:.8,errorRate:0,encrypted:!1,status:"active"},{id:"l11",source:"svc2",target:"c1",type:"redis",rps:5400,latencyMs:.8,errorRate:0,encrypted:!1,status:"active"},{id:"l12",source:"svc3",target:"q1",type:"amqp",rps:450,latencyMs:4,errorRate:.1,encrypted:!0,status:"active"},{id:"l13",source:"q1",target:"svc4",type:"amqp",rps:440,latencyMs:4,errorRate:.1,encrypted:!0,status:"active"},{id:"l14",source:"svc3",target:"ext1",type:"http",rps:180,latencyMs:220,errorRate:.5,encrypted:!0,status:"active"},{id:"l15",source:"svc4",target:"ext2",type:"http",rps:90,latencyMs:185,errorRate:.2,encrypted:!0,status:"active"},{id:"l16",source:"db1",target:"db2",type:"tcp",rps:3100,latencyMs:5,errorRate:.01,encrypted:!0,status:"active"}],O=[{label:"User Login",path:["gw1","lb1","svc1","db1"],rps:1200,p99Ms:45},{label:"Place Order",path:["gw1","lb1","svc3","db1","q1","svc4","ext1"],rps:180,p99Ms:680},{label:"User Profile",path:["gw1","lb1","svc2","c1"],rps:840,p99Ms:28}];function j(n){switch(n){case"gateway":return"bg-purple-500/20 text-purple-300";case"loadbalancer":return"bg-blue-500/20 text-blue-300";case"service":return"bg-indigo-500/20 text-indigo-300";case"database":return"bg-amber-500/20 text-amber-300";case"cache":return"bg-emerald-500/20 text-emerald-300";case"queue":return"bg-orange-500/20 text-orange-300";case"external":return"bg-zinc-500/20 text-zinc-300"}}function h(n){return n==="healthy"?"bg-emerald-400":n==="degraded"?"bg-amber-400":n==="down"?"bg-rose-400":"bg-zinc-400"}function f(n){return n==="healthy"?"text-emerald-400":n==="degraded"?"text-amber-400":n==="down"?"text-rose-400":"text-zinc-400"}function z(n){return n==="active"?"bg-emerald-500/10 text-emerald-400":n==="degraded"?"bg-amber-500/10 text-amber-400":"bg-rose-500/10 text-rose-400"}function w(n){return n==="http"?"ðŸŒ":n==="grpc"?"âš¡":n==="tcp"?"ðŸ”Œ":n==="amqp"?"ðŸ“¨":"ðŸ”´"}function R({label:n,value:x,warn:d=70,crit:u=90}){const r=x>=u?"bg-rose-500":x>=d?"bg-amber-500":"bg-emerald-500";return e.jsxs("div",{children:[e.jsxs("div",{className:"flex justify-between text-xs mb-0.5",children:[e.jsx("span",{className:"text-zinc-500",children:n}),e.jsxs("span",{className:x>=u?"text-rose-400":x>=d?"text-amber-400":"text-zinc-400",children:[x,"%"]})]}),e.jsx("div",{className:"h-1.5 bg-zinc-700 rounded-full overflow-hidden",children:e.jsx("div",{className:c("h-full rounded-full",r),style:{width:`${x}%`}})})]})}function H(){const[n,x]=p.useState("network-topology"),[d,u]=p.useState("topology"),[r,g]=p.useState(null),[b,M]=p.useState("all"),[y,S]=p.useState("all"),[v,C]=p.useState("all"),N=Array.from(new Set(i.map(s=>s.region))),L=i.filter(s=>s.status==="healthy").length,k=i.filter(s=>s.status==="degraded").length,q=i.filter(s=>s.status==="down").length,T=i.filter(s=>s.type==="gateway").reduce((s,a)=>s+a.rps,0),P=m.filter(s=>s.status==="active").length,A=m.filter(s=>s.status==="down").length,E=N.map(s=>{const a=i.filter(t=>t.region===s);return{name:s,nodeCount:a.length,healthyCount:a.filter(t=>t.status==="healthy").length,rps:a.reduce((t,l)=>t+l.rps,0),avgLatencyMs:a.length>0?Math.round(a.reduce((t,l)=>t+l.latencyMs,0)/a.length):0}}),F=i.filter(s=>!(b!=="all"&&s.type!==b||y!=="all"&&s.status!==y||v!=="all"&&s.region!==v)),o=Object.fromEntries(i.map(s=>[s.id,s])),D=[{id:"topology",label:"Topology"},{id:"nodes",label:`Nodes (${i.length})`},{id:"links",label:`Links (${m.length})`},{id:"traffic",label:"Traffic Flows"}],U={gateway:i.filter(s=>s.type==="gateway"),loadbalancer:i.filter(s=>s.type==="loadbalancer"),service:i.filter(s=>s.type==="service"),database:i.filter(s=>s.type==="database"),cache:i.filter(s=>s.type==="cache"),queue:i.filter(s=>s.type==="queue"),external:i.filter(s=>s.type==="external")};return e.jsxs("div",{className:"min-h-screen bg-zinc-950 text-white p-6",children:[e.jsxs("div",{className:"flex items-start justify-between mb-6",children:[e.jsxs("div",{children:[e.jsx("h1",{className:"text-2xl font-bold text-white",children:"Network Topology Viewer"}),e.jsx("p",{className:"text-zinc-400 text-sm mt-1",children:"Real-time service mesh topology and connectivity health"})]}),e.jsxs("div",{className:"flex gap-2",children:[e.jsx("button",{className:"px-3 py-1.5 text-sm bg-zinc-800 hover:bg-zinc-700 rounded-lg text-zinc-300 transition-colors",children:"Export Map"}),e.jsx("button",{className:"px-3 py-1.5 text-sm bg-indigo-600 hover:bg-indigo-500 rounded-lg text-white transition-colors",children:"âŸ³ Refresh"})]})]}),e.jsxs("div",{className:"grid grid-cols-2 md:grid-cols-4 gap-4 mb-6",children:[e.jsxs("div",{className:"bg-zinc-900 rounded-xl p-4 border border-zinc-800",children:[e.jsx("div",{className:"text-xs text-zinc-500 mb-1",children:"Healthy Nodes"}),e.jsxs("div",{className:"text-2xl font-bold text-emerald-400",children:[L,e.jsxs("span",{className:"text-zinc-500 text-sm font-normal",children:["/",i.length]})]})]}),e.jsxs("div",{className:"bg-zinc-900 rounded-xl p-4 border border-zinc-800",children:[e.jsx("div",{className:"text-xs text-zinc-500 mb-1",children:"Degraded / Down"}),e.jsxs("div",{className:"text-2xl font-bold",children:[e.jsx("span",{className:"text-amber-400",children:k}),e.jsx("span",{className:"text-zinc-500 text-sm font-normal",children:" / "}),e.jsx("span",{className:"text-rose-400",children:q})]})]}),e.jsxs("div",{className:"bg-zinc-900 rounded-xl p-4 border border-zinc-800",children:[e.jsx("div",{className:"text-xs text-zinc-500 mb-1",children:"Total RPS"}),e.jsxs("div",{className:"text-2xl font-bold text-white",children:[(T/1e3).toFixed(1),"k"]})]}),e.jsxs("div",{className:"bg-zinc-900 rounded-xl p-4 border border-zinc-800",children:[e.jsx("div",{className:"text-xs text-zinc-500 mb-1",children:"Active / Down Links"}),e.jsxs("div",{className:"text-2xl font-bold",children:[e.jsx("span",{className:"text-emerald-400",children:P}),e.jsx("span",{className:"text-zinc-500 text-sm font-normal",children:" / "}),e.jsx("span",{className:"text-rose-400",children:A})]})]})]}),e.jsx("div",{className:"flex gap-1 border-b border-zinc-800 mb-6",children:D.map(s=>e.jsx("button",{onClick:()=>{u(s.id),g(null)},className:c("px-4 py-2 text-sm font-medium transition-colors border-b-2 -mb-px",d===s.id?"border-indigo-500 text-white":"border-transparent text-zinc-400 hover:text-zinc-200"),children:s.label},s.id))}),d==="topology"&&e.jsxs("div",{className:"space-y-6",children:[e.jsx("div",{className:"grid grid-cols-1 md:grid-cols-3 gap-4",children:E.map(s=>e.jsxs("div",{className:"bg-zinc-900 rounded-xl p-4 border border-zinc-800",children:[e.jsxs("div",{className:"flex justify-between items-start mb-2",children:[e.jsx("div",{className:"font-medium text-zinc-200",children:s.name}),e.jsxs("div",{className:c("text-xs px-2 py-0.5 rounded-full",s.healthyCount===s.nodeCount?"bg-emerald-400/10 text-emerald-400":"bg-amber-400/10 text-amber-400"),children:[s.healthyCount,"/",s.nodeCount," healthy"]})]}),e.jsxs("div",{className:"grid grid-cols-2 gap-2 text-xs",children:[e.jsxs("div",{children:[e.jsx("span",{className:"text-zinc-500",children:"RPS: "}),e.jsx("span",{className:"text-zinc-200",children:s.rps.toLocaleString()})]}),e.jsxs("div",{children:[e.jsx("span",{className:"text-zinc-500",children:"Avg latency: "}),e.jsxs("span",{className:"text-zinc-200",children:[s.avgLatencyMs,"ms"]})]})]})]},s.name))}),["gateway","loadbalancer","service","database","cache","queue","external"].map(s=>{const a=U[s];return a.length===0?null:e.jsxs("div",{children:[e.jsxs("div",{className:"flex items-center gap-2 mb-3",children:[e.jsx("div",{className:c("text-xs px-2 py-0.5 rounded-full capitalize font-medium",j(s)),children:s}),e.jsx("div",{className:"flex-1 h-px bg-zinc-800"})]}),e.jsx("div",{className:"flex flex-wrap gap-3",children:a.map(t=>e.jsxs("button",{onClick:()=>{g(t),u("nodes")},className:c("bg-zinc-900 rounded-xl p-3 border transition-all text-left hover:border-zinc-500",t.status==="down"?"border-rose-500/50":t.status==="degraded"?"border-amber-500/30":"border-zinc-800"),style:{minWidth:160},children:[e.jsxs("div",{className:"flex items-center gap-2 mb-1.5",children:[e.jsx("div",{className:c("w-2 h-2 rounded-full",h(t.status))}),e.jsx("span",{className:"text-sm font-medium text-zinc-200 truncate",children:t.name})]}),e.jsx("div",{className:"text-xs text-zinc-500",children:t.host}),e.jsxs("div",{className:"flex gap-3 mt-2 text-xs",children:[e.jsxs("span",{className:"text-zinc-400",children:[t.rps.toLocaleString()," rps"]}),e.jsxs("span",{className:t.latencyMs>100?"text-rose-400":"text-zinc-500",children:[t.latencyMs,"ms"]})]})]},t.id))})]},s)})]}),d==="nodes"&&!r&&e.jsxs("div",{children:[e.jsxs("div",{className:"flex flex-wrap gap-3 mb-4",children:[e.jsxs("select",{value:b,onChange:s=>M(s.target.value),className:"bg-zinc-800 border border-zinc-700 rounded-lg px-3 py-1.5 text-sm text-zinc-200",children:[e.jsx("option",{value:"all",children:"All Types"}),["gateway","loadbalancer","service","database","cache","queue","external"].map(s=>e.jsx("option",{value:s,className:"capitalize",children:s},s))]}),e.jsxs("select",{value:y,onChange:s=>S(s.target.value),className:"bg-zinc-800 border border-zinc-700 rounded-lg px-3 py-1.5 text-sm text-zinc-200",children:[e.jsx("option",{value:"all",children:"All Status"}),e.jsx("option",{value:"healthy",children:"Healthy"}),e.jsx("option",{value:"degraded",children:"Degraded"}),e.jsx("option",{value:"down",children:"Down"})]}),e.jsxs("select",{value:v,onChange:s=>C(s.target.value),className:"bg-zinc-800 border border-zinc-700 rounded-lg px-3 py-1.5 text-sm text-zinc-200",children:[e.jsx("option",{value:"all",children:"All Regions"}),N.map(s=>e.jsx("option",{value:s,children:s},s))]})]}),e.jsx("div",{className:"space-y-2",children:F.map(s=>e.jsx("div",{onClick:()=>g(s),className:"bg-zinc-900 rounded-xl p-4 border border-zinc-800 hover:border-zinc-600 cursor-pointer transition-colors",children:e.jsxs("div",{className:"flex items-center justify-between",children:[e.jsxs("div",{className:"flex items-center gap-3",children:[e.jsx("div",{className:c("w-2.5 h-2.5 rounded-full",h(s.status))}),e.jsxs("div",{children:[e.jsxs("div",{className:"flex items-center gap-2",children:[e.jsx("span",{className:"font-medium text-zinc-200",children:s.name}),e.jsx("span",{className:c("text-xs px-1.5 py-0.5 rounded-full capitalize",j(s.type)),children:s.type}),e.jsx("span",{className:c("text-xs capitalize",f(s.status)),children:s.status})]}),e.jsxs("div",{className:"text-xs text-zinc-500 mt-0.5",children:[s.host,":",s.port," Â· v",s.version," Â· ",s.region]})]})]}),e.jsxs("div",{className:"grid grid-cols-4 gap-4 text-right text-xs",children:[e.jsxs("div",{children:[e.jsx("div",{className:"text-zinc-200",children:s.rps.toLocaleString()}),e.jsx("div",{className:"text-zinc-500",children:"rps"})]}),e.jsxs("div",{children:[e.jsxs("div",{className:s.latencyMs>100?"text-rose-400":"text-zinc-200",children:[s.latencyMs,"ms"]}),e.jsx("div",{className:"text-zinc-500",children:"latency"})]}),e.jsxs("div",{children:[e.jsxs("div",{className:s.errorRate>1?"text-rose-400":"text-zinc-200",children:[s.errorRate,"%"]}),e.jsx("div",{className:"text-zinc-500",children:"errors"})]}),e.jsxs("div",{children:[e.jsx("div",{className:"text-zinc-200",children:s.connections}),e.jsx("div",{className:"text-zinc-500",children:"conns"})]})]})]})},s.id))})]}),d==="nodes"&&r&&e.jsxs("div",{children:[e.jsx("button",{onClick:()=>g(null),className:"flex items-center gap-1 text-sm text-zinc-400 hover:text-zinc-200 mb-4 transition-colors",children:"â† Back to nodes"}),e.jsxs("div",{className:"grid md:grid-cols-2 gap-5",children:[e.jsxs("div",{className:"bg-zinc-900 rounded-xl p-5 border border-zinc-800",children:[e.jsxs("div",{className:"flex items-center gap-2 mb-4",children:[e.jsx("div",{className:c("w-3 h-3 rounded-full",h(r.status))}),e.jsx("h2",{className:"text-xl font-bold text-white",children:r.name}),e.jsx("span",{className:c("text-xs px-2 py-0.5 rounded-full capitalize",j(r.type)),children:r.type})]}),e.jsx("div",{className:"space-y-2 text-sm",children:[{label:"Host",value:`${r.host}:${r.port}`},{label:"Version",value:r.version},{label:"Region",value:r.region},{label:"Status",value:r.status},{label:"Connections",value:r.connections.toLocaleString()}].map(s=>e.jsxs("div",{className:"flex justify-between",children:[e.jsx("span",{className:"text-zinc-500",children:s.label}),e.jsx("span",{className:c("font-medium",s.label==="Status"?f(r.status):"text-zinc-200"),children:s.value})]},s.label))}),e.jsx("div",{className:"mt-4 flex flex-wrap gap-1",children:r.tags.map(s=>e.jsx("span",{className:"text-xs px-2 py-0.5 rounded-full bg-zinc-700 text-zinc-300",children:s},s))})]}),e.jsxs("div",{className:"bg-zinc-900 rounded-xl p-5 border border-zinc-800",children:[e.jsx("h3",{className:"text-sm font-medium text-zinc-300 mb-4",children:"Performance Metrics"}),e.jsx("div",{className:"grid grid-cols-2 gap-4 mb-5",children:[{label:"RPS",value:r.rps.toLocaleString(),sub:"requests/sec"},{label:"Latency",value:`${r.latencyMs}ms`,sub:"avg response"},{label:"Error Rate",value:`${r.errorRate}%`,sub:"error rate"},{label:"Connections",value:r.connections.toLocaleString(),sub:"active"}].map(s=>e.jsxs("div",{className:"bg-zinc-800 rounded-lg p-3",children:[e.jsx("div",{className:"text-xl font-bold text-white",children:s.value}),e.jsx("div",{className:"text-xs text-zinc-500",children:s.sub})]},s.label))}),r.type!=="external"&&e.jsxs("div",{className:"space-y-3",children:[e.jsx(R,{label:"CPU",value:r.cpu}),e.jsx(R,{label:"Memory",value:r.memory})]})]})]}),e.jsxs("div",{className:"mt-5 bg-zinc-900 rounded-xl p-5 border border-zinc-800",children:[e.jsx("h3",{className:"text-sm font-medium text-zinc-300 mb-4",children:"Connections"}),e.jsx("div",{className:"space-y-2",children:m.filter(s=>s.source===r.id||s.target===r.id).map(s=>{const a=s.source===r.id?o[s.target]:o[s.source],t=s.source===r.id?"â†’":"â†";return a?e.jsxs("div",{className:"flex items-center justify-between p-3 bg-zinc-800 rounded-lg",children:[e.jsxs("div",{className:"flex items-center gap-2",children:[e.jsx("span",{className:"text-zinc-500 text-sm",children:t}),e.jsx("div",{className:c("w-2 h-2 rounded-full",h(a.status))}),e.jsx("span",{className:"text-sm text-zinc-200",children:a.name}),e.jsxs("span",{className:"text-xs text-zinc-500",children:[w(s.type)," ",s.type.toUpperCase()]}),s.encrypted&&e.jsx("span",{className:"text-xs text-emerald-400",children:"ðŸ”’"})]}),e.jsxs("div",{className:"flex gap-4 text-xs text-right",children:[e.jsxs("span",{className:"text-zinc-400",children:[s.rps.toLocaleString()," rps"]}),e.jsxs("span",{className:s.latencyMs>100?"text-rose-400":"text-zinc-400",children:[s.latencyMs,"ms"]}),e.jsx("span",{className:c("px-1.5 py-0.5 rounded-full",z(s.status)),children:s.status})]})]},s.id):null})})]})]}),d==="links"&&e.jsx("div",{className:"space-y-2",children:m.map(s=>{const a=o[s.source],t=o[s.target];return e.jsx("div",{className:c("bg-zinc-900 rounded-xl p-4 border",s.status==="down"?"border-rose-500/40":s.status==="degraded"?"border-amber-500/30":"border-zinc-800"),children:e.jsxs("div",{className:"flex items-center justify-between",children:[e.jsx("div",{className:"flex items-center gap-3",children:e.jsx("div",{children:e.jsxs("div",{className:"flex items-center gap-2",children:[e.jsx("span",{className:"text-sm text-zinc-200",children:(a==null?void 0:a.name)??s.source}),e.jsx("span",{className:"text-zinc-500",children:"â†’"}),e.jsx("span",{className:"text-sm text-zinc-200",children:(t==null?void 0:t.name)??s.target}),e.jsxs("span",{className:"text-xs text-zinc-500",children:[w(s.type)," ",s.type.toUpperCase()]}),s.encrypted&&e.jsx("span",{className:"text-xs text-emerald-400",children:"ðŸ”’"})]})})}),e.jsxs("div",{className:"flex items-center gap-4 text-xs",children:[e.jsxs("span",{className:"text-zinc-400",children:[s.rps.toLocaleString()," rps"]}),e.jsxs("span",{className:s.latencyMs>100?"text-rose-400":"text-zinc-400",children:[s.latencyMs,"ms"]}),e.jsxs("span",{className:s.errorRate>1?"text-rose-400":"text-zinc-500",children:[s.errorRate,"% err"]}),e.jsx("span",{className:c("px-2 py-0.5 rounded-full",z(s.status)),children:s.status})]})]})},s.id)})}),d==="traffic"&&e.jsxs("div",{className:"space-y-5",children:[O.map(s=>e.jsxs("div",{className:"bg-zinc-900 rounded-xl p-5 border border-zinc-800",children:[e.jsx("div",{className:"flex items-start justify-between mb-4",children:e.jsxs("div",{children:[e.jsx("h3",{className:"font-semibold text-zinc-100",children:s.label}),e.jsxs("div",{className:"flex gap-4 text-xs text-zinc-500 mt-1",children:[e.jsxs("span",{children:[s.rps.toLocaleString()," rps"]}),e.jsxs("span",{children:["p99: ",s.p99Ms,"ms"]})]})]})}),e.jsx("div",{className:"flex items-center gap-2 flex-wrap",children:s.path.map((a,t)=>{const l=o[a];return e.jsxs(B.Fragment,{children:[e.jsx("div",{className:c("px-3 py-1.5 rounded-lg text-xs font-medium border",(l==null?void 0:l.status)==="down"?"border-rose-500 bg-rose-500/10 text-rose-300":(l==null?void 0:l.status)==="degraded"?"border-amber-500 bg-amber-500/10 text-amber-300":"border-zinc-700 bg-zinc-800 text-zinc-200"),children:e.jsxs("div",{className:"flex items-center gap-1.5",children:[e.jsx("div",{className:c("w-1.5 h-1.5 rounded-full",l?h(l.status):"bg-zinc-500")}),(l==null?void 0:l.name)??a]})}),t<s.path.length-1&&e.jsx("span",{className:"text-zinc-600",children:"â†’"})]},a)})})]},s.label)),e.jsxs("div",{className:"bg-zinc-900 rounded-xl p-5 border border-zinc-800",children:[e.jsx("h3",{className:"text-sm font-medium text-zinc-300 mb-4",children:"Service-to-Service Traffic Matrix"}),e.jsx("div",{className:"space-y-2",children:m.filter(s=>{const a=o[s.source],t=o[s.target];return(a==null?void 0:a.type)==="service"||(t==null?void 0:t.type)==="service"}).slice(0,8).map(s=>{const a=o[s.source],t=o[s.target],$=Math.min(100,s.rps/1e4*100);return e.jsxs("div",{children:[e.jsxs("div",{className:"flex justify-between text-xs mb-1",children:[e.jsxs("span",{className:"text-zinc-400",children:[(a==null?void 0:a.name)??s.source," â†’ ",(t==null?void 0:t.name)??s.target]}),e.jsxs("span",{className:c(s.status==="down"?"text-rose-400":s.status==="degraded"?"text-amber-400":"text-zinc-400"),children:[s.rps.toLocaleString()," rps"]})]}),e.jsx("div",{className:"h-2 bg-zinc-700 rounded-full overflow-hidden",children:e.jsx("div",{className:c("h-full rounded-full",s.status==="down"?"bg-rose-500":s.status==="degraded"?"bg-amber-500":"bg-indigo-500"),style:{width:`${$}%`}})})]},s.id)})})]})]})]})}export{H as default};
