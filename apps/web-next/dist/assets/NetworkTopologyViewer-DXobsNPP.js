import{r as u,j as e,c as p}from"./index-SfRm27bA.js";const m=[{id:"cdn-1",name:"CloudFront CDN",type:"cdn",hostname:"cdn.horizon.io",ip:"13.224.60.12",status:"healthy",uptime:99.99,requestRate:24800,responseTime:8,connections:["lb-1"],x:50,y:2},{id:"lb-1",name:"HAProxy LB",type:"load-balancer",hostname:"lb-01.horizon.internal",ip:"10.0.1.10",status:"healthy",uptime:99.97,requestRate:18200,responseTime:2,connections:["web-1","web-2","web-3"],x:50,y:16},{id:"web-1",name:"Web Server 1",type:"web",hostname:"web-01.horizon.internal",ip:"10.0.2.11",status:"healthy",uptime:99.94,requestRate:6100,responseTime:18,connections:["api-1","api-2"],x:18,y:32},{id:"web-2",name:"Web Server 2",type:"web",hostname:"web-02.horizon.internal",ip:"10.0.2.12",status:"healthy",uptime:99.91,requestRate:5900,responseTime:21,connections:["api-1","api-2"],x:50,y:32},{id:"web-3",name:"Web Server 3",type:"web",hostname:"web-03.horizon.internal",ip:"10.0.2.13",status:"degraded",uptime:98.72,requestRate:4300,responseTime:45,connections:["api-1","api-2"],x:82,y:32},{id:"api-1",name:"API Server 1",type:"api",hostname:"api-01.horizon.internal",ip:"10.0.3.21",status:"healthy",uptime:99.95,requestRate:9400,responseTime:34,connections:["db-primary","cache-1","mq-1"],x:30,y:50},{id:"api-2",name:"API Server 2",type:"api",hostname:"api-02.horizon.internal",ip:"10.0.3.22",status:"healthy",uptime:99.88,requestRate:8700,responseTime:37,connections:["db-primary","cache-1","mq-1","s3-1"],x:70,y:50},{id:"db-primary",name:"PostgreSQL Primary",type:"database",hostname:"pg-primary.horizon.internal",ip:"10.0.4.31",status:"healthy",uptime:99.99,requestRate:12300,responseTime:4,connections:["db-replica"],x:22,y:70},{id:"db-replica",name:"PostgreSQL Replica",type:"database",hostname:"pg-replica.horizon.internal",ip:"10.0.4.32",status:"healthy",uptime:99.98,requestRate:7100,responseTime:5,connections:[],x:22,y:88},{id:"cache-1",name:"Redis Cache",type:"cache",hostname:"redis-01.horizon.internal",ip:"10.0.5.41",status:"healthy",uptime:99.96,requestRate:31200,responseTime:1,connections:[],x:50,y:70},{id:"mq-1",name:"RabbitMQ",type:"queue",hostname:"mq-01.horizon.internal",ip:"10.0.5.51",status:"degraded",uptime:97.84,requestRate:4500,responseTime:12,connections:["s3-1"],x:68,y:70},{id:"s3-1",name:"AWS S3 Bucket",type:"external",hostname:"horizon-assets.s3.amazonaws.com",ip:"52.216.133.37",status:"healthy",uptime:99.99,requestRate:2200,responseTime:22,connections:[],x:85,y:88}];function w(t){const n=[],i=new Set;for(const s of t)for(const l of s.connections){const c=[s.id,l].sort().join("|");i.has(c)||(i.add(c),n.push({from:s.id,to:l,latency:Math.round((Math.random()*8+1)*10)/10,throughput:Math.round(Math.random()*800+50)}))}return n}const g=w(m),b={healthy:"bg-emerald-400",degraded:"bg-amber-400",down:"bg-rose-400"},j={healthy:"text-emerald-400",degraded:"text-amber-400",down:"text-rose-400"},y={cdn:"ðŸŒ","load-balancer":"âš–ï¸",web:"ðŸ–¥ï¸",api:"âš¡",database:"ðŸ—„ï¸",cache:"ðŸ’¾",queue:"ðŸ“¨",external:"â˜ï¸"},f={cdn:"CDN","load-balancer":"Load Balancer",web:"Web Server",api:"API Server",database:"Database",cache:"Cache",queue:"Message Queue",external:"External"};function h(t){var n;return((n=m.find(i=>i.id===t))==null?void 0:n.name)??t}function z(){return e.jsx("div",{className:"flex items-center gap-5 text-xs text-zinc-400",children:["healthy","degraded","down"].map(t=>e.jsxs("span",{className:"flex items-center gap-1.5",children:[e.jsx("span",{className:p("inline-block h-2.5 w-2.5 rounded-full",b[t])}),t.charAt(0).toUpperCase()+t.slice(1)]},t))})}function T({nodes:t}){const n=t.length,i=t.filter(r=>r.status==="healthy").length,s=Math.round(t.reduce((r,x)=>r+x.responseTime,0)/n),l=t.reduce((r,x)=>r+x.requestRate,0),c=[{label:"Total Nodes",value:String(n)},{label:"Healthy",value:`${i}/${n}`},{label:"Avg Latency",value:`${s} ms`},{label:"Throughput",value:`${(l/1e3).toFixed(1)}k req/s`}];return e.jsx("div",{className:"grid grid-cols-2 gap-3 sm:grid-cols-4",children:c.map(r=>e.jsxs("div",{className:"rounded-lg bg-zinc-900 border border-zinc-800 px-4 py-3",children:[e.jsx("p",{className:"text-[11px] uppercase tracking-wider text-zinc-500",children:r.label}),e.jsx("p",{className:"mt-0.5 text-lg font-semibold text-white",children:r.value})]},r.label))})}function S({mode:t,onChange:n}){const i=[{key:"topology",label:"Topology"},{key:"list",label:"List"},{key:"connections",label:"Connections"}];return e.jsx("div",{className:"inline-flex rounded-lg border border-zinc-800 bg-zinc-900 p-0.5",children:i.map(s=>e.jsx("button",{onClick:()=>n(s.key),className:p("rounded-md px-4 py-1.5 text-sm font-medium transition-colors",t===s.key?"bg-indigo-500 text-white shadow-sm":"text-zinc-400 hover:text-white"),children:s.label},s.key))})}function q({nodes:t,selected:n}){const i=new Map(t.map(s=>[s.id,{x:s.x,y:s.y}]));return e.jsx("svg",{className:"pointer-events-none absolute inset-0 h-full w-full",style:{zIndex:0},children:g.map(s=>{const l=i.get(s.from),c=i.get(s.to);if(!l||!c)return null;const r=n===s.from||n===s.to;return e.jsx("line",{x1:`${l.x}%`,y1:`${l.y+2.5}%`,x2:`${c.x}%`,y2:`${c.y+2.5}%`,stroke:r?"#6366f1":"#3f3f46",strokeWidth:r?2:1,strokeDasharray:r?void 0:"4 4",opacity:r?1:.5},`${s.from}-${s.to}`)})})}function k({nodes:t,selected:n,onSelect:i}){return e.jsxs("div",{className:"relative w-full overflow-hidden rounded-lg border border-zinc-800 bg-zinc-900",style:{height:540},children:[e.jsx(q,{nodes:t,selected:n}),t.map(s=>e.jsxs("button",{onClick:()=>i(s.id),className:p("absolute z-10 flex min-w-[110px] -translate-x-1/2 flex-col items-center rounded-lg border px-3 py-2 text-xs transition-all hover:scale-105",n===s.id?"border-indigo-500 bg-indigo-500/10 ring-1 ring-indigo-500/50":"border-zinc-700 bg-zinc-800 hover:border-zinc-600"),style:{left:`${s.x}%`,top:`${s.y}%`},children:[e.jsx("span",{className:"text-base leading-none",children:y[s.type]}),e.jsx("span",{className:"mt-1 font-medium text-white truncate max-w-[100px]",children:s.name}),e.jsxs("span",{className:"flex items-center gap-1 mt-0.5",children:[e.jsx("span",{className:p("inline-block h-1.5 w-1.5 rounded-full",b[s.status])}),e.jsxs("span",{className:"text-zinc-500",children:[s.responseTime,"ms"]})]})]},s.id))]})}function R({node:t,onClose:n}){const i=[{label:"Type",value:f[t.type]},{label:"Hostname",value:t.hostname},{label:"IP Address",value:t.ip},{label:"Status",value:t.status.charAt(0).toUpperCase()+t.status.slice(1),color:j[t.status]},{label:"Uptime",value:`${t.uptime}%`},{label:"Request Rate",value:`${t.requestRate.toLocaleString()} req/s`},{label:"Response Time",value:`${t.responseTime} ms`},{label:"Connections",value:t.connections.length>0?t.connections.map(h).join(", "):"â€”"}];return e.jsxs("div",{className:"rounded-lg border border-zinc-800 bg-zinc-900 p-5",children:[e.jsxs("div",{className:"flex items-start justify-between mb-4",children:[e.jsxs("div",{className:"flex items-center gap-2",children:[e.jsx("span",{className:"text-xl",children:y[t.type]}),e.jsx("h3",{className:"text-base font-semibold text-white",children:t.name})]}),e.jsx("button",{onClick:n,className:"text-zinc-500 hover:text-white text-lg leading-none",children:"âœ•"})]}),e.jsx("dl",{className:"space-y-2",children:i.map(s=>e.jsxs("div",{className:"flex justify-between text-sm",children:[e.jsx("dt",{className:"text-zinc-500",children:s.label}),e.jsx("dd",{className:p("font-medium",s.color??"text-white"),children:s.value})]},s.label))})]})}function C({nodes:t,onSelect:n}){const[i,s]=u.useState("name"),[l,c]=u.useState("asc"),r=a=>{i===a?c(o=>o==="asc"?"desc":"asc"):(s(a),c("asc"))},x=[...t].sort((a,o)=>{const d=l==="asc"?1:-1;switch(i){case"name":return a.name.localeCompare(o.name)*d;case"type":return a.type.localeCompare(o.type)*d;case"status":return a.status.localeCompare(o.status)*d;case"uptime":return(a.uptime-o.uptime)*d;case"requestRate":return(a.requestRate-o.requestRate)*d;case"responseTime":return(a.responseTime-o.responseTime)*d}}),N=[{field:"name",label:"Name"},{field:"type",label:"Type"},{field:"status",label:"Status"},{field:"uptime",label:"Uptime"},{field:"requestRate",label:"Req/s"},{field:"responseTime",label:"Latency"}],v=a=>i===a?l==="asc"?" â†‘":" â†“":"";return e.jsx("div",{className:"overflow-x-auto rounded-lg border border-zinc-800",children:e.jsxs("table",{className:"w-full text-sm text-left",children:[e.jsx("thead",{className:"bg-zinc-900 text-zinc-400 text-xs uppercase tracking-wider",children:e.jsx("tr",{children:N.map(a=>e.jsxs("th",{onClick:()=>r(a.field),className:"px-4 py-3 cursor-pointer select-none hover:text-white transition-colors",children:[a.label,v(a.field)]},a.field))})}),e.jsx("tbody",{className:"divide-y divide-zinc-800",children:x.map(a=>e.jsxs("tr",{onClick:()=>n(a.id),className:"bg-zinc-950 hover:bg-zinc-900 cursor-pointer transition-colors",children:[e.jsxs("td",{className:"px-4 py-3 font-medium text-white",children:[e.jsx("span",{className:"mr-1.5",children:y[a.type]}),a.name]}),e.jsx("td",{className:"px-4 py-3 text-zinc-400",children:f[a.type]}),e.jsx("td",{className:"px-4 py-3",children:e.jsxs("span",{className:"flex items-center gap-1.5",children:[e.jsx("span",{className:p("inline-block h-2 w-2 rounded-full",b[a.status])}),e.jsx("span",{className:j[a.status],children:a.status.charAt(0).toUpperCase()+a.status.slice(1)})]})}),e.jsxs("td",{className:"px-4 py-3 text-zinc-300",children:[a.uptime,"%"]}),e.jsx("td",{className:"px-4 py-3 text-zinc-300",children:a.requestRate.toLocaleString()}),e.jsxs("td",{className:"px-4 py-3 text-zinc-300",children:[a.responseTime," ms"]})]},a.id))})]})})}function $(){return e.jsx("div",{className:"overflow-x-auto rounded-lg border border-zinc-800",children:e.jsxs("table",{className:"w-full text-sm text-left",children:[e.jsx("thead",{className:"bg-zinc-900 text-zinc-400 text-xs uppercase tracking-wider",children:e.jsxs("tr",{children:[e.jsx("th",{className:"px-4 py-3",children:"From"}),e.jsx("th",{className:"px-4 py-3",children:"To"}),e.jsx("th",{className:"px-4 py-3",children:"Latency"}),e.jsx("th",{className:"px-4 py-3",children:"Throughput"})]})}),e.jsx("tbody",{className:"divide-y divide-zinc-800",children:g.map(t=>e.jsxs("tr",{className:"bg-zinc-950 hover:bg-zinc-900 transition-colors",children:[e.jsx("td",{className:"px-4 py-3 text-white font-medium",children:h(t.from)}),e.jsx("td",{className:"px-4 py-3 text-white font-medium",children:h(t.to)}),e.jsxs("td",{className:"px-4 py-3 text-zinc-300",children:[t.latency," ms"]}),e.jsxs("td",{className:"px-4 py-3 text-zinc-300",children:[t.throughput," MB/s"]})]},`${t.from}-${t.to}`))})]})})}function M(){const[t,n]=u.useState("topology"),[i,s]=u.useState(null),l=i?m.find(c=>c.id===i)??null:null;return e.jsx("div",{className:"min-h-screen bg-zinc-950 p-6 text-white",children:e.jsxs("div",{className:"mx-auto max-w-7xl space-y-6",children:[e.jsxs("div",{className:"flex flex-col gap-4 sm:flex-row sm:items-center sm:justify-between",children:[e.jsxs("div",{children:[e.jsx("h1",{className:"text-2xl font-bold tracking-tight",children:"Network Topology"}),e.jsx("p",{className:"mt-1 text-sm text-zinc-400",children:"Infrastructure overview and connectivity map"})]}),e.jsx(z,{})]}),e.jsx(T,{nodes:m}),e.jsx(S,{mode:t,onChange:n}),e.jsxs("div",{className:"grid gap-6 lg:grid-cols-[1fr_320px]",children:[e.jsxs("div",{children:[t==="topology"&&e.jsx(k,{nodes:m,selected:i,onSelect:s}),t==="list"&&e.jsx(C,{nodes:m,onSelect:s}),t==="connections"&&e.jsx($,{})]}),e.jsx("div",{children:l?e.jsx(R,{node:l,onClose:()=>s(null)}):e.jsx("div",{className:"flex h-48 items-center justify-center rounded-lg border border-dashed border-zinc-800 text-sm text-zinc-600",children:"Click a node to inspect"})})]})]})})}export{M as default};
