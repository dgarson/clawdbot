import{r as v,j as e,c as n}from"./index-v5gn4Pco.js";const h=[{id:"p1",name:"Alice Nguyen",email:"alice@company.com",timezone:"US/Pacific (UTC-8)",phone:"+1-555-0101",avatarInitials:"AN",avatarColor:"bg-indigo-600",team:"Platform",role:"Staff Engineer",alertChannels:["phone","sms","pagerduty"],incidentsThisMonth:7,avgResponseMin:3.2,lastAck:"2h ago"},{id:"p2",name:"Bob Martinez",email:"bob@company.com",timezone:"US/Eastern (UTC-5)",phone:"+1-555-0102",avatarInitials:"BM",avatarColor:"bg-emerald-600",team:"Platform",role:"Senior Engineer",alertChannels:["phone","slack","email"],incidentsThisMonth:4,avgResponseMin:7.8,lastAck:"1d ago"},{id:"p3",name:"Carol Kim",email:"carol@company.com",timezone:"Europe/London (UTC+0)",phone:"+44-20-0103",avatarInitials:"CK",avatarColor:"bg-purple-600",team:"Backend",role:"Principal Engineer",alertChannels:["pagerduty","sms"],incidentsThisMonth:11,avgResponseMin:2.1,lastAck:"4h ago"},{id:"p4",name:"Dave Patel",email:"dave@company.com",timezone:"Asia/Kolkata (UTC+5:30)",phone:"+91-98-0104",avatarInitials:"DP",avatarColor:"bg-amber-600",team:"Data",role:"Data Engineer",alertChannels:["phone","slack"],incidentsThisMonth:2,avgResponseMin:9.4,lastAck:"3d ago"},{id:"p5",name:"Eve Chen",email:"eve@company.com",timezone:"US/Pacific (UTC-8)",phone:"+1-555-0105",avatarInitials:"EC",avatarColor:"bg-rose-600",team:"Backend",role:"Engineer",alertChannels:["pagerduty","email"],incidentsThisMonth:6,avgResponseMin:5.3,lastAck:"6h ago"}],o=[{id:"rot1",name:"Platform Primary",team:"Platform",currentPersonId:"p1",nextPersonId:"p2",escalationPolicy:"15min",handoffDay:"Monday",handoffTime:"09:00",members:["p1","p2","p5"],alertCount:42,mttrMin:18},{id:"rot2",name:"Backend On-Call",team:"Backend",currentPersonId:"p3",nextPersonId:"p5",escalationPolicy:"immediate",handoffDay:"Wednesday",handoffTime:"08:00",members:["p3","p5"],alertCount:28,mttrMin:24},{id:"rot3",name:"Data Team",team:"Data",currentPersonId:"p4",nextPersonId:"p1",escalationPolicy:"30min",handoffDay:"Friday",handoffTime:"18:00",members:["p4","p1"],alertCount:9,mttrMin:45}],p=[{id:"s1",personId:"p1",rotationId:"rot1",start:"Mon Feb 17 09:00",end:"Mon Feb 24 09:00",status:"active",incidentCount:7,acknowledged:!0},{id:"s2",personId:"p2",rotationId:"rot1",start:"Mon Feb 24 09:00",end:"Mon Mar 03 09:00",status:"upcoming",incidentCount:0,acknowledged:!1},{id:"s3",personId:"p3",rotationId:"rot2",start:"Wed Feb 19 08:00",end:"Wed Feb 26 08:00",status:"active",incidentCount:11,acknowledged:!0},{id:"s4",personId:"p5",rotationId:"rot2",start:"Wed Feb 26 08:00",end:"Wed Mar 05 08:00",status:"upcoming",incidentCount:0,acknowledged:!1},{id:"s5",personId:"p4",rotationId:"rot3",start:"Fri Feb 14 18:00",end:"Fri Feb 21 18:00",status:"active",incidentCount:2,acknowledged:!0},{id:"s6",personId:"p1",rotationId:"rot3",start:"Fri Feb 21 18:00",end:"Fri Feb 28 18:00",status:"upcoming",incidentCount:0,acknowledged:!1},{id:"s7",personId:"p5",rotationId:"rot1",start:"Mon Feb 10 09:00",end:"Mon Feb 17 09:00",status:"past",incidentCount:4,acknowledged:!0},{id:"s8",personId:"p3",rotationId:"rot2",start:"Wed Feb 12 08:00",end:"Wed Feb 19 08:00",status:"past",incidentCount:8,acknowledged:!0}],u=[{id:"i1",title:"High Error Rate on API Gateway",severity:"sev1",status:"acked",assignedTo:"p1",rotationId:"rot1",firedAt:"Today 10:34",ackedAt:"Today 10:37",resolvedAt:null,ackTimeMin:3,resolveTimeMin:null},{id:"i2",title:"DB Connection Pool Saturation",severity:"sev1",status:"resolved",assignedTo:"p1",rotationId:"rot1",firedAt:"Today 09:12",ackedAt:"Today 09:15",resolvedAt:"Today 09:44",ackTimeMin:3,resolveTimeMin:32},{id:"i3",title:"Memory Anomaly in ML Service",severity:"sev2",status:"resolved",assignedTo:"p3",rotationId:"rot2",firedAt:"Today 08:03",ackedAt:"Today 08:05",resolvedAt:"Today 08:27",ackTimeMin:2,resolveTimeMin:24},{id:"i4",title:"P95 Latency Spike User Service",severity:"sev2",status:"open",assignedTo:"p1",rotationId:"rot1",firedAt:"Today 10:39",ackedAt:null,resolvedAt:null,ackTimeMin:null,resolveTimeMin:null},{id:"i5",title:"ETL Pipeline Failure",severity:"sev3",status:"resolved",assignedTo:"p4",rotationId:"rot3",firedAt:"Yesterday 14:22",ackedAt:"Yesterday 14:31",resolvedAt:"Yesterday 16:48",ackTimeMin:9,resolveTimeMin:146}],b={phone:"ðŸ“ž",sms:"ðŸ’¬",slack:"ðŸ’™",email:"âœ‰ï¸",pagerduty:"ðŸ“Ÿ"},w={sev1:"bg-rose-500/20 border-rose-500/40 text-rose-300",sev2:"bg-orange-500/15 border-orange-500/30 text-orange-400",sev3:"bg-amber-500/10 border-amber-500/20 text-amber-400"},C={open:"bg-rose-500/15 border-rose-500/30 text-rose-400",acked:"bg-sky-500/15 border-sky-500/30 text-sky-400",resolved:"bg-emerald-500/10 border-emerald-500/25 text-emerald-400"},f={immediate:"Immediate","15min":"After 15 min","30min":"After 30 min","1hr":"After 1 hr"},g={active:"bg-emerald-500/15 border-emerald-500/30 text-emerald-400",upcoming:"bg-indigo-500/10 border-indigo-500/20 text-indigo-400",past:"bg-zinc-700/40 border-zinc-600 text-zinc-500"},r=d=>h.find(x=>x.id===d),j=d=>o.find(x=>x.id===d);function I(){const[d,x]=v.useState("rotations"),[i,N]=v.useState(o[0]),m=u.filter(t=>t.status==="open"||t.status==="acked"),y=o.reduce((t,s)=>t+s.alertCount,0);return e.jsxs("div",{className:"flex flex-col h-full bg-zinc-950 text-white",children:[e.jsxs("div",{className:"flex-none px-6 py-4 border-b border-zinc-800",children:[e.jsxs("div",{className:"flex items-center justify-between",children:[e.jsxs("div",{children:[e.jsx("h1",{className:"text-lg font-semibold text-white",children:"On-Call Rotation Manager"}),e.jsxs("p",{className:"text-xs text-zinc-400 mt-0.5",children:[o.length," rotations Â· ",h.length," on-call engineers"]})]}),e.jsx("button",{className:"px-3 py-1.5 rounded-lg bg-indigo-600 hover:bg-indigo-500 text-xs font-medium transition-colors",children:"+ New Rotation"})]}),e.jsx("div",{className:"flex gap-4 mt-3",children:[{label:"Active Incidents",value:m.length,color:m.length>0?"text-rose-400":"text-emerald-400",pulse:m.length>0},{label:"Alerts This Month",value:y,color:"text-zinc-300",pulse:!1},{label:"Avg MTTR",value:`${Math.round(o.reduce((t,s)=>t+s.mttrMin,0)/o.length)}m`,color:"text-white",pulse:!1},{label:"On-Call Now",value:o.length,color:"text-indigo-400",pulse:!1}].map(t=>e.jsxs("div",{className:"flex items-center gap-2",children:[t.pulse&&e.jsx("div",{className:"w-1.5 h-1.5 rounded-full bg-rose-400 animate-pulse"}),e.jsxs("div",{children:[e.jsx("span",{className:n("text-base font-bold",t.color),children:t.value}),e.jsx("span",{className:"text-zinc-500 text-xs ml-1.5",children:t.label})]})]},t.label))}),e.jsx("div",{className:"flex gap-1 mt-3",children:["rotations","schedule","incidents","team"].map(t=>e.jsxs("button",{onClick:()=>x(t),className:n("px-3 py-1.5 rounded-lg text-xs font-medium capitalize transition-colors",d===t?"bg-zinc-700 text-white":"text-zinc-400 hover:text-white hover:bg-zinc-800"),children:[t.charAt(0).toUpperCase()+t.slice(1),t==="incidents"&&m.length>0&&e.jsx("span",{className:"ml-1.5 px-1.5 py-0.5 rounded-full bg-rose-500 text-[9px] font-bold text-white",children:m.length})]},t))})]}),e.jsxs("div",{className:"flex-1 overflow-hidden",children:[d==="rotations"&&e.jsxs("div",{className:"flex h-full",children:[e.jsx("div",{className:"w-[44%] flex-none border-r border-zinc-800 overflow-y-auto",children:o.map(t=>{const s=r(t.currentPersonId),l=r(t.nextPersonId);return e.jsxs("button",{onClick:()=>N(t),className:n("w-full text-left px-4 py-4 border-b border-zinc-800/60 hover:bg-zinc-900 transition-colors",(i==null?void 0:i.id)===t.id&&"bg-zinc-900 border-l-2 border-l-indigo-500"),children:[e.jsxs("div",{className:"flex items-center justify-between",children:[e.jsxs("div",{children:[e.jsx("div",{className:"font-semibold text-white text-sm",children:t.name}),e.jsxs("div",{className:"text-xs text-zinc-500 mt-0.5",children:[t.team," Â· Escalation: ",f[t.escalationPolicy]]})]}),e.jsxs("div",{className:"text-right text-xs",children:[e.jsxs("div",{className:"text-zinc-400",children:[t.alertCount," alerts"]}),e.jsxs("div",{className:"text-zinc-600",children:["MTTR ",t.mttrMin,"m"]})]})]}),s&&e.jsxs("div",{className:"flex items-center gap-2 mt-3",children:[e.jsx("div",{className:n("w-7 h-7 rounded-full flex items-center justify-center text-[10px] font-bold flex-none",s.avatarColor),children:s.avatarInitials}),e.jsxs("div",{children:[e.jsx("div",{className:"text-xs text-white",children:s.name}),e.jsx("div",{className:"text-[10px] text-emerald-400",children:"On-call now"})]}),l&&e.jsxs(e.Fragment,{children:[e.jsx("div",{className:"text-zinc-700 mx-1",children:"â†’"}),e.jsx("div",{className:n("w-6 h-6 rounded-full flex items-center justify-center text-[9px] font-bold flex-none opacity-50",l.avatarColor),children:l.avatarInitials}),e.jsxs("div",{className:"text-[10px] text-zinc-500",children:[l.name," next"]})]})]})]},t.id)})}),e.jsx("div",{className:"flex-1 overflow-y-auto p-5",children:i&&(()=>{const t=r(i.currentPersonId),s=r(i.nextPersonId),l=i.members.map(a=>r(a)).filter(Boolean),z=p.filter(a=>a.rotationId===i.id);return e.jsxs("div",{className:"space-y-5",children:[e.jsxs("div",{children:[e.jsx("h2",{className:"text-base font-semibold text-white",children:i.name}),e.jsxs("p",{className:"text-xs text-zinc-500 mt-1",children:["Team: ",i.team," Â· Handoff: ",i.handoffDay," at ",i.handoffTime]})]}),t&&e.jsxs("div",{className:"bg-indigo-500/10 border border-indigo-500/30 rounded-xl p-4",children:[e.jsx("div",{className:"text-xs text-indigo-400 font-medium mb-2",children:"Currently On-Call"}),e.jsxs("div",{className:"flex items-center gap-3",children:[e.jsx("div",{className:n("w-10 h-10 rounded-full flex items-center justify-center font-bold",t.avatarColor),children:t.avatarInitials}),e.jsxs("div",{children:[e.jsx("div",{className:"font-semibold text-white",children:t.name}),e.jsx("div",{className:"text-xs text-zinc-400",children:t.timezone}),e.jsx("div",{className:"flex items-center gap-1.5 mt-1",children:t.alertChannels.map(a=>e.jsx("span",{title:a,children:b[a]},a))})]}),e.jsxs("div",{className:"ml-auto text-right text-xs",children:[e.jsxs("div",{className:"text-white font-semibold",children:[t.avgResponseMin,"m"]}),e.jsx("div",{className:"text-zinc-500",children:"avg response"})]})]})]}),s&&e.jsxs("div",{className:"bg-zinc-900 rounded-xl p-4 border border-zinc-800",children:[e.jsxs("div",{className:"text-xs text-zinc-500 font-medium mb-2",children:["Next On-Call (",i.handoffDay,")"]}),e.jsxs("div",{className:"flex items-center gap-3",children:[e.jsx("div",{className:n("w-8 h-8 rounded-full flex items-center justify-center text-sm font-bold",s.avatarColor),children:s.avatarInitials}),e.jsxs("div",{children:[e.jsx("div",{className:"text-sm font-medium text-white",children:s.name}),e.jsx("div",{className:"text-xs text-zinc-500",children:s.timezone})]})]})]}),e.jsxs("div",{className:"bg-zinc-900 rounded-xl p-4 border border-zinc-800",children:[e.jsx("div",{className:"text-xs font-medium text-zinc-400 mb-2",children:"Escalation Policy"}),e.jsx("div",{className:"text-sm text-white",children:f[i.escalationPolicy]}),e.jsx("div",{className:"text-xs text-zinc-500 mt-1",children:"After no acknowledgment, page all rotation members"})]}),e.jsxs("div",{children:[e.jsx("div",{className:"text-xs font-medium text-zinc-400 mb-2",children:"Shift Schedule"}),e.jsx("div",{className:"space-y-1.5",children:z.map(a=>{const c=r(a.personId);return e.jsxs("div",{className:"flex items-center gap-3 bg-zinc-900 rounded-lg px-3 py-2 border border-zinc-800",children:[c&&e.jsx("div",{className:n("w-6 h-6 rounded-full flex items-center justify-center text-[9px] font-bold flex-none",c.avatarColor),children:c.avatarInitials}),e.jsxs("div",{className:"flex-1 min-w-0",children:[e.jsx("div",{className:"text-xs text-zinc-300",children:c==null?void 0:c.name}),e.jsxs("div",{className:"text-[10px] text-zinc-600",children:[a.start," â€“ ",a.end]})]}),e.jsx("span",{className:n("px-1.5 py-0.5 rounded border text-[10px]",g[a.status]),children:a.status}),a.incidentCount>0&&e.jsxs("span",{className:"text-[10px] text-zinc-500",children:[a.incidentCount," incidents"]})]},a.id)})})]}),e.jsxs("div",{children:[e.jsx("div",{className:"text-xs font-medium text-zinc-400 mb-2",children:"Rotation Members"}),e.jsx("div",{className:"flex gap-2 flex-wrap",children:l.map(a=>e.jsxs("div",{className:"flex items-center gap-2 bg-zinc-900 rounded-lg px-3 py-2 border border-zinc-800",children:[e.jsx("div",{className:n("w-6 h-6 rounded-full flex items-center justify-center text-[9px] font-bold",a.avatarColor),children:a.avatarInitials}),e.jsx("span",{className:"text-xs text-zinc-300",children:a.name})]},a.id))})]})]})})()})]}),d==="schedule"&&e.jsx("div",{className:"overflow-y-auto h-full p-5",children:e.jsx("div",{className:"space-y-2",children:p.sort((t,s)=>t.status==="active"?-1:s.status==="active"?1:0).map(t=>{const s=r(t.personId),l=j(t.rotationId);return e.jsx("div",{className:n("bg-zinc-900 rounded-xl p-4 border",t.status==="active"?"border-emerald-500/30":"border-zinc-800"),children:e.jsxs("div",{className:"flex items-center justify-between gap-4",children:[e.jsxs("div",{className:"flex items-center gap-3",children:[s&&e.jsx("div",{className:n("w-9 h-9 rounded-full flex items-center justify-center font-bold text-sm flex-none",s.avatarColor),children:s.avatarInitials}),e.jsxs("div",{children:[e.jsx("div",{className:"font-medium text-white text-sm",children:s==null?void 0:s.name}),e.jsx("div",{className:"text-xs text-zinc-500",children:l==null?void 0:l.name}),e.jsxs("div",{className:"text-[10px] text-zinc-600 mt-0.5",children:[t.start," â†’ ",t.end]})]})]}),e.jsxs("div",{className:"flex items-center gap-3",children:[t.incidentCount>0&&e.jsxs("div",{className:"text-right",children:[e.jsx("div",{className:"text-sm font-semibold text-white",children:t.incidentCount}),e.jsx("div",{className:"text-[10px] text-zinc-600",children:"incidents"})]}),e.jsx("span",{className:n("px-2 py-1 rounded border text-xs font-medium",g[t.status]),children:t.status})]})]})},t.id)})})}),d==="incidents"&&e.jsx("div",{className:"overflow-y-auto h-full p-5",children:e.jsx("div",{className:"space-y-2",children:u.map(t=>{const s=r(t.assignedTo),l=j(t.rotationId);return e.jsx("div",{className:n("bg-zinc-900 rounded-xl p-4 border",t.status==="open"?"border-rose-500/40":t.status==="acked"?"border-sky-500/30":"border-zinc-800"),children:e.jsxs("div",{className:"flex items-start justify-between gap-4",children:[e.jsxs("div",{className:"flex-1 min-w-0",children:[e.jsxs("div",{className:"flex items-center gap-2 mb-1.5",children:[e.jsx("span",{className:n("px-1.5 py-0.5 rounded border text-[10px] font-bold",w[t.severity]),children:t.severity.toUpperCase()}),e.jsx("span",{className:n("px-1.5 py-0.5 rounded border text-[10px] font-medium",C[t.status]),children:t.status.toUpperCase()}),e.jsx("span",{className:"text-[10px] text-zinc-600",children:t.firedAt})]}),e.jsx("div",{className:"font-medium text-white text-sm",children:t.title}),e.jsxs("div",{className:"flex items-center gap-2 mt-1.5 text-[10px] text-zinc-500",children:[s&&e.jsxs("span",{children:["Assigned: ",e.jsx("span",{className:"text-zinc-300",children:s.name})]}),e.jsx("span",{children:"Â·"}),e.jsx("span",{children:l==null?void 0:l.name})]})]}),e.jsxs("div",{className:"flex gap-3 flex-none text-right text-xs",children:[t.ackTimeMin!==null&&e.jsxs("div",{children:[e.jsxs("div",{className:n("font-semibold",t.ackTimeMin<=5?"text-emerald-400":"text-amber-400"),children:[t.ackTimeMin,"m"]}),e.jsx("div",{className:"text-zinc-600 text-[10px]",children:"ack time"})]}),t.resolveTimeMin!==null&&e.jsxs("div",{children:[e.jsxs("div",{className:"font-semibold text-white",children:[t.resolveTimeMin,"m"]}),e.jsx("div",{className:"text-zinc-600 text-[10px]",children:"resolve"})]}),t.status==="open"&&e.jsx("button",{className:"px-2.5 py-1 rounded bg-sky-500/15 border border-sky-500/30 text-sky-400 text-xs hover:bg-sky-500/25 transition-colors",children:"Ack"})]})]})},t.id)})})}),d==="team"&&e.jsx("div",{className:"overflow-y-auto h-full p-5",children:e.jsx("div",{className:"space-y-3",children:h.sort((t,s)=>t.avgResponseMin-s.avgResponseMin).map(t=>e.jsxs("div",{className:"bg-zinc-900 rounded-xl p-5 border border-zinc-800 hover:border-zinc-700 transition-colors",children:[e.jsxs("div",{className:"flex items-start justify-between gap-4",children:[e.jsxs("div",{className:"flex items-center gap-4",children:[e.jsx("div",{className:n("w-12 h-12 rounded-full flex items-center justify-center font-bold flex-none",t.avatarColor),children:t.avatarInitials}),e.jsxs("div",{children:[e.jsx("div",{className:"font-semibold text-white",children:t.name}),e.jsxs("div",{className:"text-xs text-zinc-400",children:[t.role," Â· ",t.team]}),e.jsx("div",{className:"text-xs text-zinc-500 mt-0.5",children:t.timezone}),e.jsx("div",{className:"flex items-center gap-1.5 mt-1.5",children:t.alertChannels.map(s=>e.jsx("span",{className:"text-base",title:s,children:b[s]},s))})]})]}),e.jsxs("div",{className:"grid grid-cols-2 gap-4 text-right text-xs",children:[e.jsxs("div",{children:[e.jsxs("div",{className:n("text-lg font-bold",t.avgResponseMin<=5?"text-emerald-400":"text-amber-400"),children:[t.avgResponseMin,"m"]}),e.jsx("div",{className:"text-zinc-600",children:"avg response"})]}),e.jsxs("div",{children:[e.jsx("div",{className:"text-lg font-bold text-white",children:t.incidentsThisMonth}),e.jsx("div",{className:"text-zinc-600",children:"incidents/mo"})]})]})]}),e.jsxs("div",{className:"mt-3",children:[e.jsx("div",{className:"w-full bg-zinc-800 rounded-full h-1",children:e.jsx("div",{className:n("h-1 rounded-full",t.avgResponseMin<=5?"bg-emerald-500":"bg-amber-500"),style:{width:`${Math.min(100,t.avgResponseMin/15*100)}%`}})}),e.jsxs("div",{className:"text-[10px] text-zinc-600 mt-1",children:["Last acknowledged: ",t.lastAck]})]})]},t.id))})})]})]})}export{I as default};
