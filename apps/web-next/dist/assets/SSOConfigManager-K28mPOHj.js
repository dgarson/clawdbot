import{r,j as e,c as o}from"./index-Bx1-C_tl.js";const c=[{id:"conn-okta",name:"Okta (Production)",protocol:"saml",provider:"Okta",status:"active",entityId:"https://openclawapp.okta.com/exk1234",loginUrl:"https://openclawapp.okta.com/app/openclawapp/sso/saml",userCount:1240,lastUsed:"2026-02-22T06:14:00Z",createdAt:"2024-01-15",autoProvision:!0,jitProvisioning:!0,defaultRole:"member",domains:["openclawapp.com","openclawteam.com"]},{id:"conn-azure",name:"Azure AD (Production)",protocol:"oidc",provider:"Microsoft Azure AD",status:"active",entityId:"https://login.microsoftonline.com/tenant-id/v2.0",loginUrl:"https://login.microsoftonline.com/tenant-id/oauth2/v2.0/authorize",userCount:482,lastUsed:"2026-02-22T05:58:00Z",createdAt:"2024-03-01",autoProvision:!0,jitProvisioning:!1,defaultRole:"viewer",domains:["contractor.openclawapp.com"]},{id:"conn-google",name:"Google Workspace",protocol:"oidc",provider:"Google",status:"active",entityId:"https://accounts.google.com",loginUrl:"https://accounts.google.com/o/oauth2/v2/auth",userCount:84,lastUsed:"2026-02-22T04:30:00Z",createdAt:"2024-06-01",autoProvision:!1,jitProvisioning:!0,defaultRole:"viewer",domains:["partner.openclawapp.com"]},{id:"conn-onelogin",name:"OneLogin (Staging)",protocol:"saml",provider:"OneLogin",status:"testing",entityId:"https://app.onelogin.com/saml/metadata/stage-app",loginUrl:"https://openclawapp.onelogin.com/trust/saml2/http-post/sso",userCount:12,lastUsed:"2026-02-21T16:00:00Z",createdAt:"2026-02-01",autoProvision:!1,jitProvisioning:!1,defaultRole:"viewer",domains:["staging.openclawapp.com"]},{id:"conn-ldap",name:"Active Directory (Legacy)",protocol:"ldap",provider:"Microsoft AD",status:"inactive",entityId:"ldap://ad.openclawapp.local",loginUrl:"ldap://ad.openclawapp.local:389",userCount:0,lastUsed:"2025-12-01T00:00:00Z",createdAt:"2023-06-01",autoProvision:!1,jitProvisioning:!1,defaultRole:"member",domains:["internal.openclawapp.com"]}],p=[{id:"m1",connectionId:"conn-okta",samlAttribute:"email",appField:"email",transform:null,required:!0},{id:"m2",connectionId:"conn-okta",samlAttribute:"firstName",appField:"name",transform:"concat(firstName, ' ', lastName)",required:!0},{id:"m3",connectionId:"conn-okta",samlAttribute:"lastName",appField:"family_name",transform:null,required:!1},{id:"m4",connectionId:"conn-okta",samlAttribute:"groups",appField:"role",transform:"mapGroupsToRole",required:!0},{id:"m5",connectionId:"conn-okta",samlAttribute:"department",appField:"department",transform:"lowercase",required:!1},{id:"m6",connectionId:"conn-okta",samlAttribute:"employeeId",appField:"external_id",transform:null,required:!1},{id:"m7",connectionId:"conn-azure",samlAttribute:"email",appField:"email",transform:null,required:!0},{id:"m8",connectionId:"conn-azure",samlAttribute:"displayName",appField:"name",transform:null,required:!0},{id:"m9",connectionId:"conn-azure",samlAttribute:"jobTitle",appField:"title",transform:null,required:!1}],d=[{id:"s1",userId:"usr-001",email:"alice@openclawapp.com",connectionId:"conn-okta",loginAt:"2026-02-22T06:00:00Z",expiresAt:"2026-02-22T14:00:00Z",ipAddress:"198.51.100.1",userAgent:"Chrome/120 (macOS)",active:!0},{id:"s2",userId:"usr-002",email:"bob@openclawapp.com",connectionId:"conn-okta",loginAt:"2026-02-22T05:30:00Z",expiresAt:"2026-02-22T13:30:00Z",ipAddress:"198.51.100.2",userAgent:"Safari/17 (macOS)",active:!0},{id:"s3",userId:"usr-003",email:"carol@contractor.openclawapp.com",connectionId:"conn-azure",loginAt:"2026-02-22T04:45:00Z",expiresAt:"2026-02-22T12:45:00Z",ipAddress:"203.0.113.10",userAgent:"Edge/120 (Windows)",active:!0},{id:"s4",userId:"usr-004",email:"dave@openclawapp.com",connectionId:"conn-okta",loginAt:"2026-02-22T03:00:00Z",expiresAt:"2026-02-22T11:00:00Z",ipAddress:"198.51.100.4",userAgent:"Firefox/121 (Linux)",active:!1},{id:"s5",userId:"usr-005",email:"eve@partner.openclawapp.com",connectionId:"conn-google",loginAt:"2026-02-22T04:30:00Z",expiresAt:"2026-02-22T12:30:00Z",ipAddress:"192.0.2.50",userAgent:"Chrome/120 (macOS)",active:!0},{id:"s6",userId:"usr-006",email:"frank@openclawapp.com",connectionId:"conn-okta",loginAt:"2026-02-22T02:00:00Z",expiresAt:"2026-02-22T10:00:00Z",ipAddress:"198.51.100.6",userAgent:"Chrome/120 (Windows)",active:!1}],x=[{id:"p1",timestamp:"2026-02-22T06:01:00Z",action:"created",email:"alice.new@openclawapp.com",connectionId:"conn-okta",details:"JIT provisioned via Okta SAML. Role: member"},{id:"p2",timestamp:"2026-02-22T05:45:00Z",action:"updated",email:"bob@openclawapp.com",connectionId:"conn-okta",details:"Department updated: engineering → platform"},{id:"p3",timestamp:"2026-02-22T04:00:00Z",action:"failed",email:"invalid@openclawapp.com",connectionId:"conn-azure",details:"Email domain not in allowlist. Blocked."},{id:"p4",timestamp:"2026-02-21T20:00:00Z",action:"deactivated",email:"alice.left@openclawapp.com",connectionId:"conn-okta",details:"User deprovisioned via SCIM. Account suspended."},{id:"p5",timestamp:"2026-02-21T18:00:00Z",action:"created",email:"carol@contractor.openclawapp.com",connectionId:"conn-azure",details:"Auto-provisioned via Azure AD sync. Role: viewer"},{id:"p6",timestamp:"2026-02-21T14:00:00Z",action:"updated",email:"dave@openclawapp.com",connectionId:"conn-okta",details:"Groups changed: [dev] → [dev, leads]. Role promoted: member → developer"},{id:"p7",timestamp:"2026-02-21T10:00:00Z",action:"failed",email:"test@example.com",connectionId:"conn-onelogin",details:"Attribute mapping error: email attribute missing from SAML assertion"},{id:"p8",timestamp:"2026-02-20T16:00:00Z",action:"created",email:"eve@partner.openclawapp.com",connectionId:"conn-google",details:"JIT provisioned via Google OIDC. Role: viewer"}];function u(t){return{saml:"bg-indigo-500/20 text-indigo-400 border-indigo-500/30",oidc:"bg-blue-500/20 text-blue-400 border-blue-500/30",oauth2:"bg-emerald-500/20 text-emerald-400 border-emerald-500/30",ldap:"bg-zinc-500/20 text-zinc-400 border-zinc-500/30"}[t]}function h(t){return{active:"bg-emerald-400",inactive:"bg-zinc-600",testing:"bg-amber-400",error:"bg-rose-500"}[t]}function g(t){return{active:"text-emerald-400",inactive:"text-zinc-500",testing:"text-amber-400",error:"text-rose-400"}[t]}function v(t){return{created:"text-emerald-400",updated:"text-indigo-400",deactivated:"text-amber-400",failed:"text-rose-400"}[t]}function b(){const[t,a]=r.useState(null);return e.jsx("div",{className:"space-y-3",children:c.map(i=>e.jsxs("div",{className:o("rounded-xl border p-4 cursor-pointer transition-all",(t==null?void 0:t.id)===i.id?"border-indigo-500 bg-indigo-500/5":"border-zinc-800 bg-zinc-900 hover:border-zinc-600"),onClick:()=>a((t==null?void 0:t.id)===i.id?null:i),children:[e.jsxs("div",{className:"flex items-center gap-3",children:[e.jsx("span",{className:o("w-2.5 h-2.5 rounded-full shrink-0",h(i.status))}),e.jsxs("div",{className:"flex-1 min-w-0",children:[e.jsxs("div",{className:"flex items-center gap-2 flex-wrap",children:[e.jsx("span",{className:"font-medium text-white",children:i.name}),e.jsx("span",{className:o("text-xs px-1.5 py-0.5 rounded border uppercase",u(i.protocol)),children:i.protocol}),e.jsx("span",{className:o("text-xs capitalize",g(i.status)),children:i.status})]}),e.jsxs("div",{className:"text-xs text-zinc-500 mt-0.5",children:[i.provider," · ",i.domains.join(", ")]})]}),e.jsxs("div",{className:"text-right text-xs",children:[e.jsx("div",{className:"text-white font-semibold",children:i.userCount.toLocaleString()}),e.jsx("div",{className:"text-zinc-500",children:"users"})]})]}),(t==null?void 0:t.id)===i.id&&e.jsxs("div",{className:"mt-4 border-t border-zinc-800 pt-4 space-y-4",children:[e.jsxs("div",{className:"grid grid-cols-2 gap-4 text-xs",children:[e.jsxs("div",{className:"space-y-2",children:[e.jsxs("div",{className:"flex justify-between",children:[e.jsx("span",{className:"text-zinc-500",children:"Entity / Issuer ID"}),e.jsx("span",{className:"font-mono text-zinc-300 text-right max-w-48 truncate",children:i.entityId})]}),e.jsxs("div",{className:"flex justify-between",children:[e.jsx("span",{className:"text-zinc-500",children:"Login URL"}),e.jsx("span",{className:"font-mono text-indigo-300 text-right max-w-48 truncate",children:i.loginUrl})]}),e.jsxs("div",{className:"flex justify-between",children:[e.jsx("span",{className:"text-zinc-500",children:"Default Role"}),e.jsx("span",{className:"text-zinc-300",children:i.defaultRole})]}),e.jsxs("div",{className:"flex justify-between",children:[e.jsx("span",{className:"text-zinc-500",children:"Created"}),e.jsx("span",{className:"text-zinc-300",children:i.createdAt})]})]}),e.jsxs("div",{className:"space-y-2",children:[e.jsxs("div",{className:"flex justify-between",children:[e.jsx("span",{className:"text-zinc-500",children:"Auto-provision"}),e.jsx("span",{className:i.autoProvision?"text-emerald-400":"text-zinc-500",children:i.autoProvision?"enabled":"disabled"})]}),e.jsxs("div",{className:"flex justify-between",children:[e.jsx("span",{className:"text-zinc-500",children:"JIT provisioning"}),e.jsx("span",{className:i.jitProvisioning?"text-emerald-400":"text-zinc-500",children:i.jitProvisioning?"enabled":"disabled"})]}),e.jsxs("div",{className:"flex justify-between",children:[e.jsx("span",{className:"text-zinc-500",children:"Last used"}),e.jsx("span",{className:"text-zinc-300",children:i.lastUsed.slice(0,16).replace("T"," ")})]}),e.jsxs("div",{className:"flex justify-between",children:[e.jsx("span",{className:"text-zinc-500",children:"Allowed domains"}),e.jsx("span",{className:"text-zinc-300",children:i.domains.length})]})]})]}),e.jsxs("div",{children:[e.jsx("div",{className:"text-xs text-zinc-500 mb-1",children:"Allowed domains"}),e.jsx("div",{className:"flex flex-wrap gap-1",children:i.domains.map(n=>e.jsx("span",{className:"text-xs font-mono bg-zinc-800 text-zinc-300 rounded px-2 py-0.5",children:n},n))})]})]})]},i.id))})}function f(){var l;const[t,a]=r.useState("conn-okta"),i=p.filter(s=>s.connectionId===t),n=((l=c.find(s=>s.id===t))==null?void 0:l.name)??t;return e.jsxs("div",{className:"space-y-4",children:[e.jsx("div",{className:"flex gap-2 flex-wrap",children:c.filter(s=>s.status!=="inactive").map(s=>e.jsx("button",{onClick:()=>a(s.id),className:o("px-3 py-1.5 rounded-lg text-xs font-medium transition-colors",t===s.id?"bg-indigo-600 text-white":"bg-zinc-800 text-zinc-400 hover:text-white"),children:s.name},s.id))}),e.jsxs("div",{className:"rounded-xl border border-zinc-800 bg-zinc-900 p-4",children:[e.jsxs("h3",{className:"text-sm font-semibold text-white mb-3",children:[n," — Attribute Mappings"]}),i.length===0?e.jsx("div",{className:"text-sm text-zinc-500 text-center py-8",children:"No mappings configured for this connection"}):e.jsx("div",{className:"rounded-lg border border-zinc-800 overflow-hidden",children:e.jsxs("table",{className:"w-full text-xs",children:[e.jsx("thead",{children:e.jsxs("tr",{className:"border-b border-zinc-800 bg-zinc-950",children:[e.jsx("th",{className:"text-left px-3 py-2 text-zinc-400",children:"IdP Attribute"}),e.jsx("th",{className:"text-left px-3 py-2 text-zinc-400",children:"App Field"}),e.jsx("th",{className:"text-left px-3 py-2 text-zinc-400",children:"Transform"}),e.jsx("th",{className:"text-left px-3 py-2 text-zinc-400",children:"Required"})]})}),e.jsx("tbody",{className:"divide-y divide-zinc-800",children:i.map(s=>e.jsxs("tr",{className:"bg-zinc-950 hover:bg-zinc-900 transition-colors",children:[e.jsx("td",{className:"px-3 py-2 font-mono text-indigo-300",children:s.samlAttribute}),e.jsx("td",{className:"px-3 py-2 font-mono text-emerald-300",children:s.appField}),e.jsx("td",{className:"px-3 py-2 text-zinc-400",children:s.transform??"—"}),e.jsx("td",{className:"px-3 py-2",children:s.required?e.jsx("span",{className:"text-rose-400",children:"yes"}):e.jsx("span",{className:"text-zinc-500",children:"no"})})]},s.id))})]})})]})]})}function j(){const[t,a]=r.useState(!0),i=d.filter(n=>!t||n.active);return e.jsxs("div",{className:"space-y-4",children:[e.jsxs("div",{className:"flex items-center gap-3",children:[e.jsxs("div",{className:"flex gap-1",children:[e.jsx("button",{onClick:()=>a(!1),className:o("px-3 py-1 rounded-full text-xs font-medium transition-colors",t?"bg-zinc-800 text-zinc-400 hover:text-white":"bg-indigo-600 text-white"),children:"All"}),e.jsx("button",{onClick:()=>a(!0),className:o("px-3 py-1 rounded-full text-xs font-medium transition-colors",t?"bg-indigo-600 text-white":"bg-zinc-800 text-zinc-400 hover:text-white"),children:"Active Only"})]}),e.jsxs("span",{className:"text-xs text-zinc-500 ml-auto",children:[i.length," sessions shown"]})]}),e.jsx("div",{className:"rounded-xl border border-zinc-800 overflow-hidden",children:e.jsxs("table",{className:"w-full text-xs",children:[e.jsx("thead",{children:e.jsxs("tr",{className:"border-b border-zinc-800 bg-zinc-900",children:[e.jsx("th",{className:"text-left px-3 py-2 text-zinc-400",children:"User"}),e.jsx("th",{className:"text-left px-3 py-2 text-zinc-400",children:"Connection"}),e.jsx("th",{className:"text-left px-3 py-2 text-zinc-400",children:"Login at"}),e.jsx("th",{className:"text-left px-3 py-2 text-zinc-400",children:"Expires"}),e.jsx("th",{className:"text-left px-3 py-2 text-zinc-400",children:"IP"}),e.jsx("th",{className:"text-left px-3 py-2 text-zinc-400",children:"Status"})]})}),e.jsx("tbody",{className:"divide-y divide-zinc-800",children:i.map(n=>{const l=c.find(s=>s.id===n.connectionId);return e.jsxs("tr",{className:"bg-zinc-950 hover:bg-zinc-900 transition-colors",children:[e.jsx("td",{className:"px-3 py-2 text-zinc-300",children:n.email}),e.jsx("td",{className:"px-3 py-2 text-zinc-400",children:(l==null?void 0:l.name)??n.connectionId}),e.jsxs("td",{className:"px-3 py-2 text-zinc-400",children:[n.loginAt.slice(11,16)," UTC"]}),e.jsxs("td",{className:"px-3 py-2 text-zinc-500",children:[n.expiresAt.slice(11,16)," UTC"]}),e.jsx("td",{className:"px-3 py-2 font-mono text-zinc-500",children:n.ipAddress}),e.jsx("td",{className:"px-3 py-2",children:e.jsx("span",{className:o("font-medium",n.active?"text-emerald-400":"text-zinc-600"),children:n.active?"active":"expired"})})]},n.id)})})]})})]})}function N(){return e.jsx("div",{className:"space-y-2",children:x.map(t=>{var a;return e.jsxs("div",{className:"rounded-xl border border-zinc-800 bg-zinc-900 p-4",children:[e.jsxs("div",{className:"flex items-center gap-3",children:[e.jsx("span",{className:o("font-semibold text-xs capitalize w-20 shrink-0",v(t.action)),children:t.action}),e.jsx("span",{className:"text-sm text-white",children:t.email}),e.jsx("span",{className:"text-xs text-zinc-500 ml-auto",children:t.timestamp.slice(0,16).replace("T"," ")})]}),e.jsxs("div",{className:"flex items-center gap-2 mt-1.5",children:[e.jsx("span",{className:"text-xs text-zinc-500",children:((a=c.find(i=>i.id===t.connectionId))==null?void 0:a.name)??t.connectionId}),e.jsx("span",{className:"text-zinc-700",children:"·"}),e.jsx("span",{className:"text-xs text-zinc-400",children:t.details})]})]},t.id)})})}const z=["Connections","Mappings","Sessions","Logs"];function A(){const[t,a]=r.useState("Connections"),i=c.filter(s=>s.status==="active").length,n=c.reduce((s,m)=>s+m.userCount,0),l=d.filter(s=>s.active).length;return e.jsxs("div",{className:"min-h-screen bg-zinc-950 text-white p-6",children:[e.jsxs("div",{className:"mb-6",children:[e.jsx("h1",{className:"text-2xl font-bold mb-1",children:"SSO Configuration Manager"}),e.jsxs("p",{className:"text-zinc-400 text-sm",children:["SAML, OIDC & OAuth2 identity provider connections — ",c.length," providers, ",n.toLocaleString()," users"]})]}),e.jsx("div",{className:"grid grid-cols-4 gap-4 mb-6",children:[{label:"Active Connections",value:i,color:"text-emerald-400"},{label:"Total SSO Users",value:n.toLocaleString(),color:"text-white"},{label:"Active Sessions",value:l,color:"text-indigo-400"},{label:"Domains Protected",value:[...new Set(c.flatMap(s=>s.domains))].length,color:"text-white"}].map(s=>e.jsxs("div",{className:"rounded-xl border border-zinc-800 bg-zinc-900 p-4",children:[e.jsx("div",{className:o("text-3xl font-bold",s.color),children:s.value}),e.jsx("div",{className:"text-sm text-zinc-400 mt-1",children:s.label})]},s.label))}),e.jsx("div",{className:"flex gap-1 mb-6 border-b border-zinc-800",children:z.map(s=>e.jsx("button",{onClick:()=>a(s),className:o("px-4 py-2 text-sm font-medium border-b-2 transition-colors -mb-px",t===s?"border-indigo-500 text-indigo-400":"border-transparent text-zinc-400 hover:text-white"),children:s},s))}),t==="Connections"&&e.jsx(b,{}),t==="Mappings"&&e.jsx(f,{}),t==="Sessions"&&e.jsx(j,{}),t==="Logs"&&e.jsx(N,{})]})}export{A as default};
