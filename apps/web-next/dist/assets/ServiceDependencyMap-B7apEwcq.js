import{r as p,j as e,c as a}from"./index-C59JeFug.js";const n=[{id:"api-gw",name:"api-gateway",team:"platform",status:"degraded",version:"v3.2.1",language:"Go",uptime:"99.7%",p99:"312ms",errorRate:"2.1%",requestsPerMin:8420,dependencies:["user-svc","auth-svc","rate-limiter"],dependents:[],port:8080,host:"api-gw.internal",lastDeploy:"2h ago",alerts:2},{id:"user-svc",name:"user-service",team:"identity",status:"healthy",version:"v2.8.4",language:"TypeScript",uptime:"99.99%",p99:"45ms",errorRate:"0.02%",requestsPerMin:6240,dependencies:["postgres-users","redis-cache","notification-svc"],dependents:["api-gw","billing-svc"],port:3001,host:"user-svc.internal",lastDeploy:"1d ago",alerts:0},{id:"auth-svc",name:"auth-service",team:"identity",status:"healthy",version:"v1.9.2",language:"Go",uptime:"99.99%",p99:"28ms",errorRate:"0.01%",requestsPerMin:8100,dependencies:["redis-sessions","postgres-users"],dependents:["api-gw","admin-svc"],port:3002,host:"auth-svc.internal",lastDeploy:"3d ago",alerts:0},{id:"billing-svc",name:"billing-service",team:"payments",status:"healthy",version:"v4.1.0",language:"Python",uptime:"99.95%",p99:"180ms",errorRate:"0.08%",requestsPerMin:340,dependencies:["stripe-api","postgres-billing","user-svc"],dependents:["api-gw"],port:3003,host:"billing-svc.internal",lastDeploy:"5d ago",alerts:0},{id:"notification-svc",name:"notification-service",team:"platform",status:"healthy",version:"v2.3.1",language:"TypeScript",uptime:"99.8%",p99:"95ms",errorRate:"0.15%",requestsPerMin:1890,dependencies:["sendgrid","twilio","message-queue"],dependents:["user-svc","billing-svc"],port:3004,host:"notif-svc.internal",lastDeploy:"2d ago",alerts:0},{id:"rate-limiter",name:"rate-limiter",team:"platform",status:"healthy",version:"v1.2.0",language:"Go",uptime:"99.99%",p99:"3ms",errorRate:"0%",requestsPerMin:8420,dependencies:["redis-rate"],dependents:["api-gw"],port:3005,host:"rate-limiter.internal",lastDeploy:"1w ago",alerts:0},{id:"admin-svc",name:"admin-service",team:"platform",status:"down",version:"v1.1.0",language:"TypeScript",uptime:"0%",p99:"-",errorRate:"100%",requestsPerMin:0,dependencies:["auth-svc","postgres-admin"],dependents:[],port:3006,host:"admin-svc.internal",lastDeploy:"4h ago",alerts:5},{id:"postgres-users",name:"postgres-users",team:"data",status:"healthy",version:"15.4",language:"SQL",uptime:"99.999%",p99:"12ms",errorRate:"0%",requestsPerMin:14500,dependencies:[],dependents:["user-svc","auth-svc"],port:5432,host:"pg-users.internal",lastDeploy:"30d ago",alerts:0},{id:"redis-cache",name:"redis-cache",team:"data",status:"healthy",version:"7.2",language:"Redis",uptime:"99.99%",p99:"2ms",errorRate:"0%",requestsPerMin:42e3,dependencies:[],dependents:["user-svc","rate-limiter"],port:6379,host:"redis.internal",lastDeploy:"14d ago",alerts:0},{id:"message-queue",name:"rabbitmq",team:"data",status:"healthy",version:"3.12",language:"Erlang",uptime:"99.97%",p99:"8ms",errorRate:"0.02%",requestsPerMin:3200,dependencies:[],dependents:["notification-svc"],port:5672,host:"mq.internal",lastDeploy:"21d ago",alerts:0}],x=[{from:"api-gw",to:"user-svc",type:"sync",latency:"45ms",errorRate:"0.02%",callsPerMin:5200,healthy:!0,protocol:"gRPC"},{from:"api-gw",to:"auth-svc",type:"sync",latency:"28ms",errorRate:"0.01%",callsPerMin:8100,healthy:!0,protocol:"gRPC"},{from:"api-gw",to:"rate-limiter",type:"sync",latency:"3ms",errorRate:"0%",callsPerMin:8420,healthy:!0,protocol:"HTTP"},{from:"user-svc",to:"postgres-users",type:"db",latency:"12ms",errorRate:"0%",callsPerMin:9800,healthy:!0,protocol:"PSQL"},{from:"user-svc",to:"redis-cache",type:"cache",latency:"2ms",errorRate:"0%",callsPerMin:28e3,healthy:!0,protocol:"Redis"},{from:"user-svc",to:"notification-svc",type:"async",latency:"95ms",errorRate:"0.15%",callsPerMin:840,healthy:!0,protocol:"AMQP"},{from:"auth-svc",to:"postgres-users",type:"db",latency:"12ms",errorRate:"0%",callsPerMin:4700,healthy:!0,protocol:"PSQL"},{from:"notification-svc",to:"message-queue",type:"async",latency:"8ms",errorRate:"0.02%",callsPerMin:3200,healthy:!0,protocol:"AMQP"},{from:"billing-svc",to:"user-svc",type:"sync",latency:"47ms",errorRate:"0.02%",callsPerMin:340,healthy:!0,protocol:"gRPC"},{from:"admin-svc",to:"auth-svc",type:"sync",latency:"-",errorRate:"100%",callsPerMin:0,healthy:!1,protocol:"gRPC"}],z=[{id:"t1",traceId:"a3f92c",service:"api-gw",operation:"POST /api/users/profile",duration:"312ms",status:"error",timestamp:"10:42:31.120",downstream:["user-svc","auth-svc"]},{id:"t2",traceId:"b7e41d",service:"api-gw",operation:"GET /api/billing/invoice",duration:"189ms",status:"ok",timestamp:"10:42:29.850",downstream:["billing-svc","user-svc"]},{id:"t3",traceId:"c9a03e",service:"api-gw",operation:"POST /api/auth/login",duration:"31ms",status:"ok",timestamp:"10:42:28.410",downstream:["auth-svc"]},{id:"t4",traceId:"d2f57b",service:"api-gw",operation:"PUT /api/users/settings",duration:"498ms",status:"error",timestamp:"10:42:27.003",downstream:["user-svc","notification-svc"]},{id:"t5",traceId:"e8c12a",service:"billing-svc",operation:"POST /charges",duration:"204ms",status:"ok",timestamp:"10:42:25.775",downstream:["postgres-billing","user-svc"]}],P=[{serviceId:"api-gw",upstreamCount:0,downstreamCount:3,criticalPath:!0,estimatedImpact:"All external traffic blocked"},{serviceId:"user-svc",upstreamCount:2,downstreamCount:3,criticalPath:!0,estimatedImpact:"Login, profiles, billing affected"},{serviceId:"auth-svc",upstreamCount:2,downstreamCount:2,criticalPath:!0,estimatedImpact:"Auth fails → all API calls fail"},{serviceId:"postgres-users",upstreamCount:0,downstreamCount:2,criticalPath:!0,estimatedImpact:"All user data unavailable"},{serviceId:"redis-cache",upstreamCount:0,downstreamCount:2,criticalPath:!1,estimatedImpact:"Cache miss fallback active"},{serviceId:"admin-svc",upstreamCount:1,downstreamCount:0,criticalPath:!1,estimatedImpact:"Admin panel only — no user impact"}],u={healthy:"text-emerald-400",degraded:"text-amber-400",down:"text-rose-400",unknown:"text-zinc-400"},l={healthy:"bg-emerald-400",degraded:"bg-amber-400 animate-pulse",down:"bg-rose-400 animate-pulse",unknown:"bg-zinc-500"},v={sync:"bg-indigo-500/15 text-indigo-400",async:"bg-purple-500/15 text-purple-400",cache:"bg-amber-500/15 text-amber-400",db:"bg-sky-500/15 text-sky-400"},g={Go:"text-sky-400",TypeScript:"text-blue-400",Python:"text-yellow-400",SQL:"text-indigo-400",Redis:"text-red-400",Erlang:"text-purple-400"};function C(){const[d,f]=p.useState("services"),[t,h]=p.useState(n[0]),[m,j]=p.useState("all"),b=n.filter(s=>m==="all"||s.status===m),N=n.filter(s=>s.status==="healthy").length,y=n.filter(s=>s.status==="degraded").length,w=n.filter(s=>s.status==="down").length;t&&x.filter(s=>s.from===t.id||s.to===t.id);const c=s=>n.find(r=>r.id===s);return e.jsxs("div",{className:"flex flex-col h-full bg-zinc-950 text-white",children:[e.jsxs("div",{className:"flex-none px-6 py-4 border-b border-zinc-800",children:[e.jsxs("div",{className:"flex items-center justify-between",children:[e.jsxs("div",{children:[e.jsx("h1",{className:"text-lg font-semibold text-white",children:"Service Dependency Map"}),e.jsxs("p",{className:"text-xs text-zinc-400 mt-0.5",children:[n.length," services · ",x.length," dependencies"]})]}),e.jsx("button",{className:"px-3 py-1.5 rounded-lg bg-zinc-800 hover:bg-zinc-700 text-xs font-medium text-zinc-300 transition-colors",children:"Export Graph"})]}),e.jsxs("div",{className:"flex gap-4 mt-3",children:[[{label:"Healthy",value:N,color:"text-emerald-400",dot:"bg-emerald-400"},{label:"Degraded",value:y,color:"text-amber-400",dot:"bg-amber-400"},{label:"Down",value:w,color:"text-rose-400",dot:"bg-rose-400"}].map(s=>e.jsxs("div",{className:"flex items-center gap-2",children:[e.jsx("div",{className:a("w-2 h-2 rounded-full flex-none",s.dot)}),e.jsx("span",{className:a("text-base font-bold",s.color),children:s.value}),e.jsx("span",{className:"text-zinc-500 text-xs",children:s.label})]},s.label)),e.jsxs("div",{className:"flex items-center gap-2 ml-2",children:[e.jsx("span",{className:"text-base font-bold text-rose-400",children:n.reduce((s,r)=>s+r.alerts,0)}),e.jsx("span",{className:"text-zinc-500 text-xs",children:"Active Alerts"})]})]}),e.jsx("div",{className:"flex gap-1 mt-3",children:["services","deps","traces","impact"].map(s=>e.jsx("button",{onClick:()=>f(s),className:a("px-3 py-1.5 rounded-lg text-xs font-medium capitalize transition-colors",d===s?"bg-zinc-700 text-white":"text-zinc-400 hover:text-white hover:bg-zinc-800"),children:s==="deps"?"Dependencies":s==="impact"?"Impact Analysis":s.charAt(0).toUpperCase()+s.slice(1)},s))})]}),e.jsxs("div",{className:"flex-1 overflow-hidden",children:[d==="services"&&e.jsxs("div",{className:"flex h-full",children:[e.jsxs("div",{className:"w-[46%] flex-none border-r border-zinc-800 flex flex-col",children:[e.jsxs("div",{className:"flex-none px-4 py-2.5 border-b border-zinc-800 flex items-center gap-2",children:[e.jsx("span",{className:"text-xs text-zinc-500",children:"Status:"}),["all","healthy","degraded","down"].map(s=>e.jsx("button",{onClick:()=>j(s),className:a("px-2 py-0.5 rounded text-xs capitalize transition-colors",m===s?"bg-zinc-700 text-white":"text-zinc-500 hover:text-zinc-300"),children:s},s))]}),e.jsx("div",{className:"flex-1 overflow-y-auto",children:b.map(s=>e.jsxs("button",{onClick:()=>h(s),className:a("w-full text-left px-4 py-3 border-b border-zinc-800/60 hover:bg-zinc-900 transition-colors",(t==null?void 0:t.id)===s.id&&"bg-zinc-900 border-l-2 border-l-indigo-500"),children:[e.jsxs("div",{className:"flex items-center justify-between gap-2",children:[e.jsxs("div",{className:"flex items-center gap-2 min-w-0",children:[e.jsx("div",{className:a("w-1.5 h-1.5 rounded-full flex-none",l[s.status])}),e.jsx("span",{className:"text-sm font-medium text-white font-mono truncate",children:s.name})]}),e.jsxs("div",{className:"flex items-center gap-2 flex-none",children:[s.alerts>0&&e.jsx("span",{className:"px-1.5 py-0.5 rounded bg-rose-500 text-[9px] font-bold text-white",children:s.alerts}),e.jsx("span",{className:a("text-[10px] font-medium",u[s.status]),children:s.status})]})]}),e.jsxs("div",{className:"flex items-center gap-3 mt-1.5 pl-3.5 text-[10px] text-zinc-600",children:[e.jsx("span",{className:g[s.language]||"text-zinc-400",children:s.language}),e.jsx("span",{children:s.version}),e.jsxs("span",{children:[s.requestsPerMin.toLocaleString()," rpm"]}),e.jsxs("span",{children:["p99: ",s.p99]}),s.errorRate!=="0%"&&s.errorRate!=="0.01%"&&s.errorRate!=="0.02%"&&e.jsxs("span",{className:"text-amber-400",children:[s.errorRate," err"]})]})]},s.id))})]}),e.jsx("div",{className:"flex-1 overflow-y-auto p-5",children:t&&e.jsxs("div",{className:"space-y-4",children:[e.jsxs("div",{className:"flex items-start justify-between",children:[e.jsxs("div",{children:[e.jsxs("div",{className:"flex items-center gap-2",children:[e.jsx("div",{className:a("w-2 h-2 rounded-full",l[t.status])}),e.jsx("h2",{className:"font-mono text-base font-semibold text-white",children:t.name}),e.jsx("span",{className:a("text-xs font-medium",u[t.status]),children:t.status})]}),e.jsxs("div",{className:"flex items-center gap-3 mt-1 pl-4 text-xs text-zinc-500",children:[e.jsxs("span",{children:["Team: ",e.jsx("span",{className:"text-zinc-300",children:t.team})]}),e.jsx("span",{children:t.version}),e.jsx("span",{className:g[t.language]||"text-zinc-400",children:t.language})]})]}),e.jsxs("div",{className:"text-right text-xs text-zinc-500",children:[e.jsxs("div",{children:[":",t.port]}),e.jsx("div",{className:"font-mono text-zinc-400",children:t.host})]})]}),e.jsx("div",{className:"grid grid-cols-2 gap-3",children:[{label:"Uptime",value:t.uptime,color:t.uptime==="0%"?"text-rose-400":"text-emerald-400"},{label:"P99 Latency",value:t.p99,color:"text-white"},{label:"Error Rate",value:t.errorRate,color:parseFloat(t.errorRate)>1?"text-rose-400":parseFloat(t.errorRate)>0?"text-amber-400":"text-emerald-400"},{label:"Req/min",value:t.requestsPerMin.toLocaleString(),color:"text-white"}].map(s=>e.jsxs("div",{className:"bg-zinc-900 rounded-lg p-3 border border-zinc-800",children:[e.jsx("div",{className:"text-xs text-zinc-500",children:s.label}),e.jsx("div",{className:a("text-lg font-bold mt-0.5",s.color),children:s.value})]},s.label))}),e.jsxs("div",{className:"bg-zinc-900 rounded-xl p-4 border border-zinc-800",children:[e.jsxs("div",{className:"text-xs font-medium text-zinc-400 mb-3",children:["Upstream Dependencies (",t.dependencies.length,")"]}),t.dependencies.length===0?e.jsx("div",{className:"text-xs text-zinc-600",children:"No upstream dependencies — leaf service"}):e.jsx("div",{className:"space-y-1.5",children:t.dependencies.map(s=>{const r=c(s),i=x.find(o=>o.from===t.id&&o.to===s);return e.jsxs("div",{className:"flex items-center justify-between bg-zinc-950 rounded-lg px-3 py-2",children:[e.jsxs("div",{className:"flex items-center gap-2",children:[e.jsx("div",{className:a("w-1.5 h-1.5 rounded-full",r?l[r.status]:"bg-zinc-500")}),e.jsx("span",{className:"font-mono text-xs text-zinc-300",children:s})]}),e.jsx("div",{className:"flex items-center gap-2 text-[10px]",children:i&&e.jsxs(e.Fragment,{children:[e.jsx("span",{className:a("px-1.5 py-0.5 rounded",v[i.type]),children:i.type}),e.jsx("span",{className:"text-zinc-500",children:i.latency}),e.jsx("span",{className:"text-zinc-600",children:i.protocol})]})})]},s)})})]}),e.jsxs("div",{className:"bg-zinc-900 rounded-xl p-4 border border-zinc-800",children:[e.jsxs("div",{className:"text-xs font-medium text-zinc-400 mb-3",children:["Downstream Dependents (",t.dependents.length,")"]}),t.dependents.length===0?e.jsx("div",{className:"text-xs text-zinc-600",children:"No dependents — external-facing service"}):e.jsx("div",{className:"flex flex-wrap gap-1.5",children:t.dependents.map(s=>{const r=c(s);return e.jsxs("button",{onClick:()=>r&&h(r),className:"flex items-center gap-1.5 bg-zinc-950 rounded-lg px-3 py-1.5 hover:bg-zinc-800 transition-colors",children:[e.jsx("div",{className:a("w-1.5 h-1.5 rounded-full",r?l[r.status]:"bg-zinc-500")}),e.jsx("span",{className:"font-mono text-xs text-zinc-300",children:s})]},s)})})]}),e.jsxs("div",{className:"text-xs text-zinc-600",children:["Last deployed: ",t.lastDeploy]})]})})]}),d==="deps"&&e.jsx("div",{className:"overflow-y-auto h-full p-5",children:e.jsx("div",{className:"space-y-2",children:x.map((s,r)=>{const i=c(s.from),o=c(s.to);return e.jsx("div",{className:a("bg-zinc-900 rounded-xl p-4 border transition-colors",s.healthy?"border-zinc-800 hover:border-zinc-700":"border-rose-500/40 bg-rose-500/5"),children:e.jsxs("div",{className:"flex items-center justify-between gap-4",children:[e.jsxs("div",{className:"flex items-center gap-3",children:[e.jsx("div",{className:"text-center",children:e.jsxs("div",{className:"flex items-center gap-1",children:[e.jsx("div",{className:a("w-1.5 h-1.5 rounded-full",i?l[i.status]:"bg-zinc-500")}),e.jsx("span",{className:"font-mono text-xs text-white",children:s.from})]})}),e.jsxs("div",{className:"flex flex-col items-center",children:[e.jsx("div",{className:a("text-sm",s.healthy?"text-zinc-400":"text-rose-400"),children:"→"}),e.jsx("span",{className:a("px-1.5 py-0.5 rounded text-[10px] mt-0.5",v[s.type]),children:s.type})]}),e.jsxs("div",{className:"flex items-center gap-1",children:[e.jsx("div",{className:a("w-1.5 h-1.5 rounded-full",o?l[o.status]:"bg-zinc-500")}),e.jsx("span",{className:"font-mono text-xs text-white",children:s.to})]})]}),e.jsxs("div",{className:"flex items-center gap-4 text-xs",children:[e.jsxs("div",{className:"text-right",children:[e.jsx("div",{className:"text-zinc-400",children:s.latency}),e.jsx("div",{className:"text-zinc-600 text-[10px]",children:"p99 lat"})]}),e.jsxs("div",{className:"text-right",children:[e.jsx("div",{className:s.errorRate==="0%"?"text-emerald-400":"text-amber-400",children:s.errorRate}),e.jsx("div",{className:"text-zinc-600 text-[10px]",children:"err rate"})]}),e.jsxs("div",{className:"text-right",children:[e.jsx("div",{className:"text-zinc-300",children:s.callsPerMin.toLocaleString()}),e.jsx("div",{className:"text-zinc-600 text-[10px]",children:"calls/min"})]}),e.jsxs("div",{className:"text-right",children:[e.jsx("div",{className:"text-zinc-400",children:s.protocol}),e.jsx("div",{className:"text-zinc-600 text-[10px]",children:"protocol"})]}),!s.healthy&&e.jsx("span",{className:"px-2 py-1 rounded bg-rose-500/15 border border-rose-500/30 text-xs text-rose-400",children:"UNHEALTHY"})]})]})},r)})})}),d==="traces"&&e.jsx("div",{className:"overflow-y-auto h-full p-5",children:e.jsx("div",{className:"space-y-2",children:z.map(s=>e.jsxs("div",{className:a("bg-zinc-900 rounded-xl p-4 border",s.status==="error"?"border-rose-500/30":"border-zinc-800"),children:[e.jsxs("div",{className:"flex items-start justify-between",children:[e.jsxs("div",{children:[e.jsxs("div",{className:"flex items-center gap-2",children:[e.jsx("span",{className:a("px-1.5 py-0.5 rounded text-[10px] font-medium",s.status==="error"?"bg-rose-500/15 text-rose-400":"bg-emerald-500/15 text-emerald-400"),children:s.status.toUpperCase()}),e.jsx("span",{className:"font-mono text-xs text-zinc-400",children:s.traceId}),e.jsx("span",{className:"text-[10px] text-zinc-600",children:s.timestamp})]}),e.jsx("div",{className:"mt-1.5",children:e.jsx("span",{className:"font-mono text-sm text-white",children:s.operation})}),e.jsxs("div",{className:"mt-1 text-xs text-zinc-500",children:["Origin: ",e.jsx("span",{className:"text-zinc-300",children:s.service})]})]}),e.jsxs("div",{className:"text-right",children:[e.jsx("div",{className:a("text-sm font-semibold",s.status==="error"?"text-rose-400":"text-white"),children:s.duration}),e.jsx("div",{className:"text-[10px] text-zinc-600",children:"total duration"})]})]}),e.jsxs("div",{className:"mt-3 flex items-center gap-2",children:[e.jsx("span",{className:"text-[10px] text-zinc-600",children:"Downstream:"}),s.downstream.map(r=>{const i=c(r);return e.jsxs("span",{className:"flex items-center gap-1 bg-zinc-800 rounded px-2 py-0.5",children:[e.jsx("div",{className:a("w-1 h-1 rounded-full",i?l[i.status]:"bg-zinc-500")}),e.jsx("span",{className:"font-mono text-[10px] text-zinc-300",children:r})]},r)})]})]},s.id))})}),d==="impact"&&e.jsxs("div",{className:"overflow-y-auto h-full p-5",children:[e.jsx("p",{className:"text-xs text-zinc-500 mb-4",children:"Services ranked by blast radius — what breaks if each service goes down."}),e.jsx("div",{className:"space-y-3",children:P.map(s=>{const r=c(s.serviceId);return e.jsxs("div",{className:a("bg-zinc-900 rounded-xl p-4 border",s.criticalPath?"border-rose-500/30":"border-zinc-800"),children:[e.jsxs("div",{className:"flex items-start justify-between gap-4",children:[e.jsxs("div",{className:"flex items-center gap-3",children:[e.jsx("div",{className:a("w-2 h-2 rounded-full flex-none",r?l[r.status]:"bg-zinc-500")}),e.jsxs("div",{children:[e.jsxs("div",{className:"flex items-center gap-2",children:[e.jsx("span",{className:"font-mono text-sm font-semibold text-white",children:s.serviceId}),s.criticalPath&&e.jsx("span",{className:"px-1.5 py-0.5 rounded bg-rose-500/15 border border-rose-500/30 text-[10px] text-rose-400",children:"Critical Path"})]}),e.jsx("p",{className:"text-xs text-zinc-400 mt-0.5",children:s.estimatedImpact})]})]}),e.jsxs("div",{className:"flex items-center gap-4 text-xs text-right flex-none",children:[e.jsxs("div",{children:[e.jsx("div",{className:"text-white font-semibold",children:s.upstreamCount}),e.jsx("div",{className:"text-zinc-600 text-[10px]",children:"upstream"})]}),e.jsxs("div",{children:[e.jsx("div",{className:"text-white font-semibold",children:s.downstreamCount}),e.jsx("div",{className:"text-zinc-600 text-[10px]",children:"downstream"})]}),e.jsxs("div",{children:[e.jsx("div",{className:"text-white font-semibold",children:s.upstreamCount+s.downstreamCount}),e.jsx("div",{className:"text-zinc-600 text-[10px]",children:"total"})]})]})]}),e.jsx("div",{className:"mt-3 w-full bg-zinc-800 rounded-full h-1",children:e.jsx("div",{className:a("h-1 rounded-full",s.criticalPath?"bg-rose-500":"bg-indigo-500"),style:{width:`${Math.min(100,(s.upstreamCount+s.downstreamCount)/10*100)}%`}})})]},s.serviceId)})})]})]})]})}export{C as default};
