import{r as d,j as e,c as i}from"./index-LED0RZob.js";const O=["agent.started","agent.completed","agent.failed","deploy.started","deploy.completed","deploy.failed","alert.triggered","alert.resolved","pr.opened","pr.merged","pr.reviewed","incident.created","incident.resolved"],B=[{id:"C001",name:"cb-inbox",type:"public",members:14,isMonitored:!0,isBotMember:!0,lastMessage:"1m ago",purpose:"Agent notifications and task updates",notifyOnEvents:["agent.completed","agent.failed","deploy.completed"]},{id:"C002",name:"cb-activity",type:"public",members:14,isMonitored:!0,isBotMember:!0,lastMessage:"3m ago",purpose:"PR activity and git events",notifyOnEvents:["pr.opened","pr.merged"]},{id:"C003",name:"alerts",type:"public",members:12,isMonitored:!0,isBotMember:!0,lastMessage:"12m ago",purpose:"System alerts and incident notifications",notifyOnEvents:["alert.triggered","incident.created"]},{id:"C004",name:"releases",type:"public",members:12,isMonitored:!1,isBotMember:!0,lastMessage:"1h ago",purpose:"Deploy and release tracking",notifyOnEvents:["deploy.started","deploy.completed","deploy.failed"]},{id:"C005",name:"dev",type:"public",members:8,isMonitored:!1,isBotMember:!1,lastMessage:"5m ago",purpose:"Engineering discussion",notifyOnEvents:[]},{id:"C006",name:"product-ui",type:"private",members:6,isMonitored:!1,isBotMember:!0,lastMessage:"8m ago",purpose:"Product & UI Squad channel",notifyOnEvents:["pr.reviewed"]},{id:"C007",name:"incidents",type:"public",members:14,isMonitored:!0,isBotMember:!0,lastMessage:"2h ago",purpose:"Active incident coordination",notifyOnEvents:["incident.created","incident.resolved","alert.triggered"]},{id:"C008",name:"xavier-dm",type:"shared",members:2,isMonitored:!1,isBotMember:!1,lastMessage:"30m ago",purpose:"Direct messages with Xavier",notifyOnEvents:[]}],q=[{id:"wh1",name:"Agent Notifications",channel:"#cb-inbox",url:"https://hooks.slack.com/services/T01/B01/xxx1",status:"active",lastTriggered:"1m ago",triggerCount:2847,events:["agent.completed","agent.failed"]},{id:"wh2",name:"Deploy Pipeline",channel:"#releases",url:"https://hooks.slack.com/services/T01/B02/xxx2",status:"active",lastTriggered:"1h ago",triggerCount:184,events:["deploy.started","deploy.completed","deploy.failed"]},{id:"wh3",name:"Critical Alerts",channel:"#alerts",url:"https://hooks.slack.com/services/T01/B03/xxx3",status:"active",lastTriggered:"12m ago",triggerCount:56,events:["alert.triggered","incident.created"]},{id:"wh4",name:"PR Activity",channel:"#cb-activity",url:"https://hooks.slack.com/services/T01/B04/xxx4",status:"active",lastTriggered:"3m ago",triggerCount:1243,events:["pr.opened","pr.merged","pr.reviewed"]},{id:"wh5",name:"Legacy Notifications",channel:"#general",url:"https://hooks.slack.com/services/T01/B05/xxx5",status:"inactive",lastTriggered:"7d ago",triggerCount:89,events:["agent.started"]},{id:"wh6",name:"Error Escalation",channel:"#incidents",url:"https://hooks.slack.com/services/T01/B06/xxx6",status:"error",lastTriggered:"2d ago",triggerCount:12,events:["agent.failed","incident.created"]}],A=[{scope:"channels:read",description:"View basic info about public channels",permission:"read",required:!0},{scope:"channels:write",description:"Join, leave, and manage channels",permission:"write",required:!1},{scope:"chat:write",description:"Send messages as the bot",permission:"write",required:!0},{scope:"chat:write.public",description:"Send messages to public channels",permission:"write",required:!0},{scope:"files:write",description:"Upload and modify files",permission:"write",required:!1},{scope:"groups:read",description:"View basic info about private channels",permission:"read",required:!1},{scope:"im:read",description:"View basic info about direct messages",permission:"read",required:!1},{scope:"im:write",description:"Start direct message conversations",permission:"write",required:!1},{scope:"reactions:write",description:"Add and edit emoji reactions",permission:"write",required:!1},{scope:"users:read",description:"View people in the workspace",permission:"read",required:!0},{scope:"webhooks:incoming",description:"Post messages with incoming webhooks",permission:"admin",required:!0}],L=n=>n==="active"?"text-emerald-400 bg-emerald-400/10":n==="inactive"?"text-zinc-400 bg-zinc-400/10":"text-rose-400 bg-rose-400/10",P=n=>n==="admin"?"text-rose-400":n==="write"?"text-amber-400":n==="read"?"text-emerald-400":"text-zinc-600";function I(){const[n,g]=d.useState("channels"),[l,h]=d.useState(B),[c,b]=d.useState(q),[x,u]=d.useState(null),[p,v]=d.useState(null),[m,f]=d.useState("all"),a=l.find(t=>t.id===x);c.find(t=>t.id===p);const y=m==="all"?l:l.filter(t=>t.type===m),j=l.filter(t=>t.isMonitored).length,N=l.filter(t=>t.isBotMember).length,z=c.filter(t=>t.status==="active").length,w=c.reduce((t,s)=>t+s.triggerCount,0);function k(t){h(s=>s.map(r=>r.id===t?{...r,isMonitored:!r.isMonitored}:r))}function C(t){b(s=>s.map(r=>r.id===t?{...r,status:r.status==="active"?"inactive":"active"}:r))}function M(t,s){h(r=>r.map(o=>{if(o.id!==t)return o;const S=o.notifyOnEvents.includes(s);return{...o,notifyOnEvents:S?o.notifyOnEvents.filter(T=>T!==s):[...o.notifyOnEvents,s]}}))}const E=[{time:"07:14:02",event:"agent.completed",channel:"#cb-inbox",status:"delivered",payload:'{"agent":"Quinn","task":"AccessControlMatrix","status":"done"}'},{time:"07:11:55",event:"pr.reviewed",channel:"#cb-activity",status:"delivered",payload:'{"pr":247,"author":"Luis","action":"approve"}'},{time:"07:08:33",event:"agent.failed",channel:"#cb-inbox",status:"delivered",payload:'{"agent":"Reed","task":"ChatRoomView","error":"silent_fail"}'},{time:"07:00:12",event:"alert.triggered",channel:"#alerts",status:"delivered",payload:'{"level":"warning","msg":"LLM latency elevated"}'},{time:"06:50:44",event:"deploy.completed",channel:"#releases",status:"delivered",payload:'{"env":"staging","views":98,"status":"success"}'},{time:"06:48:11",event:"pr.merged",channel:"#cb-activity",status:"delivered",payload:'{"pr":246,"author":"Luis","title":"views #96-97"}'},{time:"05:12:30",event:"agent.failed",channel:"#incidents",status:"error",payload:'{"err":"webhook_timeout","retry":false}'}];return e.jsxs("div",{className:"flex h-full bg-zinc-950 flex-col overflow-hidden",children:[e.jsxs("div",{className:"flex items-center gap-6 px-6 py-3 border-b border-zinc-800 bg-zinc-900 flex-shrink-0",children:[e.jsxs("div",{className:"flex items-center gap-2",children:[e.jsx("span",{className:"text-xl",children:"ðŸ’¬"}),e.jsxs("div",{children:[e.jsx("div",{className:"text-xs font-semibold text-white",children:"OpenClaw Slack App"}),e.jsx("div",{className:"text-[10px] text-emerald-400",children:"Connected Â· workspace: openclaw-hq"})]})]}),e.jsx("div",{className:"ml-6 flex items-center gap-6",children:[{label:"Channels Monitored",value:j},{label:"Bot In",value:`${N} channels`},{label:"Active Webhooks",value:z},{label:"Total Triggers",value:w.toLocaleString()}].map(({label:t,value:s})=>e.jsxs("div",{children:[e.jsx("div",{className:"text-xs font-semibold text-white",children:s}),e.jsx("div",{className:"text-[10px] text-zinc-500",children:t})]},t))})]}),e.jsx("div",{className:"flex border-b border-zinc-800 bg-zinc-900 flex-shrink-0",children:["channels","webhooks","bot","logs"].map(t=>e.jsx("button",{onClick:()=>g(t),className:i("px-5 py-2.5 text-sm font-medium transition-colors border-b-2 capitalize",n===t?"border-indigo-500 text-indigo-300":"border-transparent text-zinc-500 hover:text-zinc-300"),children:t==="channels"?`ðŸ“¢ Channels (${l.length})`:t==="webhooks"?`ðŸ”— Webhooks (${c.length})`:t==="bot"?"ðŸ¤– Bot Scopes":"ðŸ“‹ Event Logs"},t))}),e.jsxs("div",{className:"flex-1 flex overflow-hidden",children:[n==="channels"&&e.jsxs(e.Fragment,{children:[e.jsxs("div",{className:"flex-1 overflow-y-auto",children:[e.jsx("div",{className:"flex items-center gap-2 px-4 py-3 border-b border-zinc-800",children:["all","public","private","shared"].map(t=>e.jsx("button",{onClick:()=>f(t),className:i("text-xs px-3 py-1 rounded border transition-colors capitalize",m===t?"bg-indigo-500/20 border-indigo-500 text-indigo-300":"border-zinc-700 text-zinc-500 hover:text-zinc-300 bg-zinc-800"),children:t},t))}),e.jsxs("table",{className:"w-full",children:[e.jsx("thead",{children:e.jsxs("tr",{className:"border-b border-zinc-800 text-[10px] text-zinc-500 uppercase tracking-wider",children:[e.jsx("th",{className:"text-left px-4 py-2",children:"Channel"}),e.jsx("th",{className:"text-left px-4 py-2",children:"Type"}),e.jsx("th",{className:"text-left px-4 py-2",children:"Members"}),e.jsx("th",{className:"text-left px-4 py-2",children:"Bot"}),e.jsx("th",{className:"text-left px-4 py-2",children:"Monitored"}),e.jsx("th",{className:"text-left px-4 py-2",children:"Last Active"})]})}),e.jsx("tbody",{className:"divide-y divide-zinc-800/50",children:y.map(t=>e.jsxs("tr",{onClick:()=>u(x===t.id?null:t.id),className:i("cursor-pointer hover:bg-zinc-900 transition-colors",x===t.id&&"bg-indigo-500/5"),children:[e.jsx("td",{className:"px-4 py-3",children:e.jsxs("div",{className:"flex items-center gap-2",children:[e.jsx("span",{className:"text-zinc-500",children:t.type==="private"?"ðŸ”’":"#"}),e.jsx("span",{className:"text-sm text-white",children:t.name})]})}),e.jsx("td",{className:"px-4 py-3",children:e.jsx("span",{className:i("text-[10px] px-2 py-0.5 rounded capitalize",t.type==="private"?"bg-purple-500/10 text-purple-400":t.type==="shared"?"bg-blue-500/10 text-blue-400":"bg-zinc-800 text-zinc-400"),children:t.type})}),e.jsx("td",{className:"px-4 py-3 text-xs text-zinc-400",children:t.members}),e.jsx("td",{className:"px-4 py-3",children:e.jsx("span",{className:i("text-xs",t.isBotMember?"text-emerald-400":"text-zinc-600"),children:t.isBotMember?"âœ“ Member":"â€”"})}),e.jsx("td",{className:"px-4 py-3",children:e.jsx("button",{onClick:s=>{s.stopPropagation(),k(t.id)},className:i("text-[10px] px-2 py-1 rounded border transition-colors",t.isMonitored?"bg-emerald-500/10 border-emerald-500 text-emerald-400":"bg-zinc-800 border-zinc-700 text-zinc-500 hover:border-zinc-600"),children:t.isMonitored?"Monitored":"Off"})}),e.jsx("td",{className:"px-4 py-3 text-xs text-zinc-500",children:t.lastMessage})]},t.id))})]})]}),a&&e.jsxs("div",{className:"w-72 flex-shrink-0 border-l border-zinc-800 p-4 bg-zinc-900 overflow-y-auto",children:[e.jsxs("div",{className:"flex items-center justify-between mb-3",children:[e.jsxs("span",{className:"font-semibold text-white text-sm",children:["#",a.name]}),e.jsx("button",{onClick:()=>u(null),className:"text-zinc-500 hover:text-white text-xs",children:"âœ•"})]}),e.jsx("p",{className:"text-xs text-zinc-400 mb-4",children:a.purpose}),e.jsx("div",{className:"text-[10px] font-semibold text-zinc-500 uppercase tracking-wider mb-2",children:"Event Notifications"}),e.jsx("div",{className:"space-y-1.5",children:O.map(t=>e.jsxs("div",{onClick:()=>M(a.id,t),className:i("flex items-center gap-2 px-2 py-1.5 rounded border cursor-pointer transition-colors",a.notifyOnEvents.includes(t)?"bg-indigo-500/10 border-indigo-500/30":"border-zinc-800 hover:bg-zinc-800"),children:[e.jsx("div",{className:i("w-3 h-3 rounded border flex items-center justify-center text-[8px]",a.notifyOnEvents.includes(t)?"bg-indigo-500 border-indigo-500 text-white":"border-zinc-600"),children:a.notifyOnEvents.includes(t)&&"âœ“"}),e.jsx("span",{className:"text-[10px] font-mono text-zinc-400",children:t})]},t))})]})]}),n==="webhooks"&&e.jsx("div",{className:"flex-1 flex overflow-hidden",children:e.jsx("div",{className:"flex-1 overflow-y-auto",children:e.jsx("div",{className:"divide-y divide-zinc-800/50",children:c.map(t=>e.jsx("div",{onClick:()=>v(p===t.id?null:t.id),className:i("p-4 cursor-pointer hover:bg-zinc-900 transition-colors",p===t.id&&"bg-indigo-500/5"),children:e.jsxs("div",{className:"flex items-center gap-3",children:[e.jsxs("div",{className:"flex-1",children:[e.jsxs("div",{className:"flex items-center gap-3 mb-1",children:[e.jsx("span",{className:"text-sm font-semibold text-white",children:t.name}),e.jsx("span",{className:i("text-[10px] px-2 py-0.5 rounded font-medium capitalize",L(t.status)),children:t.status})]}),e.jsxs("div",{className:"text-xs text-zinc-500",children:["â†’ ",t.channel]}),e.jsxs("div",{className:"flex items-center gap-4 mt-2 text-[10px] text-zinc-500",children:[e.jsxs("span",{children:["Last: ",t.lastTriggered]}),e.jsxs("span",{children:["Total: ",t.triggerCount.toLocaleString()," triggers"]})]}),e.jsx("div",{className:"flex flex-wrap gap-1 mt-2",children:t.events.map(s=>e.jsx("span",{className:"text-[9px] font-mono bg-zinc-800 text-zinc-400 px-1.5 py-0.5 rounded",children:s},s))})]}),e.jsx("button",{onClick:s=>{s.stopPropagation(),C(t.id)},className:i("text-xs px-3 py-1.5 rounded border transition-colors",t.status==="active"?"border-emerald-600 text-emerald-400 hover:bg-emerald-500/10":"border-zinc-700 text-zinc-500 hover:border-zinc-600"),children:t.status==="active"?"Pause":"Enable"})]})},t.id))})})}),n==="bot"&&e.jsx("div",{className:"flex-1 overflow-y-auto p-6",children:e.jsxs("div",{className:"max-w-2xl",children:[e.jsx("p",{className:"text-xs text-zinc-400 mb-4",children:"OAuth scopes granted to the ClawdBot Slack app"}),e.jsx("div",{className:"bg-zinc-900 rounded border border-zinc-800 divide-y divide-zinc-800",children:A.map(t=>e.jsxs("div",{className:"flex items-center gap-4 px-4 py-3",children:[e.jsx("div",{className:i("w-2 h-2 rounded-full flex-shrink-0",t.required?"bg-indigo-500":"bg-zinc-600")}),e.jsxs("div",{className:"flex-1",children:[e.jsxs("div",{className:"flex items-center gap-2",children:[e.jsx("code",{className:"text-xs font-mono text-white",children:t.scope}),t.required&&e.jsx("span",{className:"text-[9px] text-indigo-400 border border-indigo-400/30 px-1 rounded",children:"required"})]}),e.jsx("div",{className:"text-[10px] text-zinc-500 mt-0.5",children:t.description})]}),e.jsx("span",{className:i("text-[10px] font-medium uppercase tracking-wider",P(t.permission)),children:t.permission})]},t.scope))})]})}),n==="logs"&&e.jsx("div",{className:"flex-1 overflow-y-auto",children:e.jsxs("table",{className:"w-full text-xs",children:[e.jsx("thead",{children:e.jsxs("tr",{className:"border-b border-zinc-800 text-[10px] text-zinc-500 uppercase tracking-wider sticky top-0 bg-zinc-950",children:[e.jsx("th",{className:"text-left px-4 py-2",children:"Time"}),e.jsx("th",{className:"text-left px-4 py-2",children:"Event"}),e.jsx("th",{className:"text-left px-4 py-2",children:"Channel"}),e.jsx("th",{className:"text-left px-4 py-2",children:"Status"}),e.jsx("th",{className:"text-left px-4 py-2",children:"Payload"})]})}),e.jsx("tbody",{className:"divide-y divide-zinc-800/50",children:E.map((t,s)=>e.jsxs("tr",{className:"hover:bg-zinc-900 transition-colors",children:[e.jsx("td",{className:"px-4 py-2 font-mono text-zinc-500",children:t.time}),e.jsx("td",{className:"px-4 py-2 font-mono text-indigo-300",children:t.event}),e.jsx("td",{className:"px-4 py-2 text-zinc-400",children:t.channel}),e.jsx("td",{className:"px-4 py-2",children:e.jsx("span",{className:i("px-1.5 py-0.5 rounded text-[10px]",t.status==="delivered"?"bg-emerald-400/10 text-emerald-400":"bg-rose-400/10 text-rose-400"),children:t.status})}),e.jsx("td",{className:"px-4 py-2 font-mono text-[10px] text-zinc-600 max-w-xs truncate",children:t.payload})]},s))})]})})]})]})}export{I as default};
