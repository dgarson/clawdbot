import{r as c,j as e,a as i}from"./index-DPSUG5BZ.js";const x=s=>s==="operational"?"Operational":s==="degraded"?"Degraded Performance":s==="partial-outage"?"Partial Outage":s==="major-outage"?"Major Outage":"Maintenance",f=s=>s==="operational"?"bg-emerald-400":s==="degraded"?"bg-amber-400":s==="partial-outage"?"bg-orange-400":s==="major-outage"?"bg-rose-500":"bg-blue-400",N=s=>s==="operational"?"text-emerald-400":s==="degraded"?"text-amber-400":s==="partial-outage"?"text-orange-400":s==="major-outage"?"text-rose-400":"text-blue-400",y=s=>s==="investigating"?"text-amber-400 bg-amber-400/10":s==="identified"?"text-orange-400 bg-orange-400/10":s==="monitoring"?"text-blue-400 bg-blue-400/10":"text-emerald-400 bg-emerald-400/10",w=s=>s==="critical"?"text-rose-400 bg-rose-400/10 border-rose-400/30":s==="major"?"text-orange-400 bg-orange-400/10 border-orange-400/30":s==="minor"?"text-amber-400 bg-amber-400/10 border-amber-400/30":"text-blue-400 bg-blue-400/10 border-blue-400/30";function D(s){const u=[];for(let d=89;d>=0;d--){const p=new Date;p.setDate(p.getDate()-d);const m=p.toISOString().slice(0,10),g=Math.random();let l="operational";s!=="operational"&&d<3?l=s:g<.02?l="degraded":g<.005&&(l="partial-outage"),u.push({date:m,status:l})}return u}const L=[{id:"gateway",name:"API Gateway",group:"Core",status:"operational",uptime30d:99.98,uptime90d:99.95,lastIncident:null,responseMs:12},{id:"agent-rt",name:"Agent Runtime",group:"Core",status:"operational",uptime30d:99.92,uptime90d:99.87,lastIncident:"5 days ago",responseMs:45},{id:"scheduler",name:"Cron Scheduler",group:"Core",status:"operational",uptime30d:99.99,uptime90d:99.98,lastIncident:null,responseMs:8},{id:"llm-proxy",name:"LLM Proxy",group:"AI",status:"degraded",uptime30d:99.71,uptime90d:99.65,lastIncident:"2 hours ago",responseMs:280},{id:"vector-db",name:"Vector Store",group:"AI",status:"operational",uptime30d:99.89,uptime90d:99.82,lastIncident:"12 days ago",responseMs:35},{id:"slack-int",name:"Slack Integration",group:"Integrations",status:"operational",uptime30d:99.95,uptime90d:99.91,lastIncident:null,responseMs:92},{id:"github-int",name:"GitHub Integration",group:"Integrations",status:"operational",uptime30d:99.88,uptime90d:99.8,lastIncident:"8 days ago",responseMs:128},{id:"postgres",name:"Database (Primary)",group:"Data",status:"operational",uptime30d:99.99,uptime90d:99.99,lastIncident:null,responseMs:4},{id:"redis",name:"Cache Layer",group:"Data",status:"operational",uptime30d:99.97,uptime90d:99.96,lastIncident:null,responseMs:1},{id:"cdn",name:"CDN / Edge",group:"Network",status:"operational",uptime30d:99.99,uptime90d:99.99,lastIncident:null,responseMs:6},{id:"web-app",name:"Web Application",group:"Network",status:"operational",uptime30d:99.94,uptime90d:99.9,lastIncident:"18 days ago",responseMs:220}],O=[{id:"inc-001",title:"LLM Proxy Elevated Latency",severity:"minor",phase:"monitoring",startedAt:"2026-02-22 05:10 MST",resolvedAt:null,affectedComponents:["llm-proxy"],updates:[{timestamp:"07:00 MST",message:"Latency has decreased to 280ms (down from 450ms). Continuing to monitor.",phase:"monitoring"},{timestamp:"05:45 MST",message:"Root cause identified: upstream model provider experiencing high load. No action required on our end.",phase:"identified"},{timestamp:"05:10 MST",message:"We are investigating elevated response times on the LLM Proxy. P95 latency is 450ms (normal: <200ms).",phase:"investigating"}]},{id:"inc-002",title:"Agent Runtime Partial Degradation",severity:"major",phase:"resolved",startedAt:"2026-02-17 14:30 MST",resolvedAt:"2026-02-17 16:45 MST",affectedComponents:["agent-rt"],updates:[{timestamp:"16:45 MST",message:"All systems have recovered. Root cause was a memory leak in the session manager, patched in v2.14.1.",phase:"resolved"},{timestamp:"15:20 MST",message:"Fix deployed. Monitoring recovery.",phase:"monitoring"},{timestamp:"14:50 MST",message:"Issue identified: memory leak in session manager causing OOM restarts. Fix in progress.",phase:"identified"},{timestamp:"14:30 MST",message:"Investigating reports of agent sessions timing out unexpectedly.",phase:"investigating"}]}],R=["Core","AI","Integrations","Data","Network"];function $(){const[s,u]=c.useState(L),[d,p]=c.useState(O),[m,g]=c.useState("status"),[l,M]=c.useState("inc-001"),[S,C]=c.useState(null),[k,v]=c.useState(null),[z,I]=c.useState("operational"),h=s.some(t=>t.status==="major-outage")?"major-outage":s.some(t=>t.status==="partial-outage")?"partial-outage":s.some(t=>t.status==="degraded")?"degraded":s.some(t=>t.status==="maintenance")?"maintenance":"operational",A=(s.reduce((t,n)=>t+n.uptime30d,0)/s.length).toFixed(3);function T(t){v(t.id),I(t.status)}function E(t){u(n=>n.map(r=>r.id===t?{...r,status:z}:r)),v(null)}return e.jsxs("div",{className:"flex h-full bg-zinc-950 overflow-hidden flex-col",children:[e.jsxs("div",{className:"flex border-b border-zinc-800 bg-zinc-900 flex-shrink-0",children:[["status","incidents","builder"].map(t=>e.jsx("button",{onClick:()=>g(t),className:i("px-6 py-3 text-sm font-medium transition-colors border-b-2 capitalize",m===t?"border-indigo-500 text-indigo-300":"border-transparent text-zinc-500 hover:text-zinc-300"),children:t==="status"?"ðŸŸ¢ Live Status":t==="incidents"?`ðŸ”¥ Incidents (${d.filter(n=>!n.resolvedAt).length} open)`:"âš™ï¸ Builder"},t)),e.jsxs("div",{className:"ml-auto flex items-center gap-3 pr-6",children:[e.jsxs("div",{className:i("flex items-center gap-2 px-3 py-1 rounded-full text-xs font-semibold border",w(h==="operational"?"informational":"minor")),children:[e.jsx("span",{className:i("w-2 h-2 rounded-full",f(h),h!=="operational"&&"animate-pulse")}),x(h)]}),e.jsxs("span",{className:"text-xs text-zinc-500",children:[A,"% uptime (30d)"]})]})]}),e.jsxs("div",{className:"flex-1 overflow-y-auto p-6",children:[m==="status"&&e.jsx("div",{className:"max-w-3xl mx-auto space-y-6",children:R.map(t=>{const n=s.filter(a=>a.group===t);if(n.length===0)return null;const r=n.some(a=>a.status!=="operational")?n.find(a=>a.status!=="operational").status:"operational";return e.jsxs("div",{className:"bg-zinc-900 rounded border border-zinc-800 overflow-hidden",children:[e.jsxs("div",{className:"flex items-center justify-between px-4 py-3 border-b border-zinc-800",children:[e.jsx("span",{className:"font-semibold text-white text-sm",children:t}),e.jsx("span",{className:i("text-xs font-medium",N(r)),children:x(r)})]}),e.jsx("div",{className:"divide-y divide-zinc-800",children:n.map(a=>{const P=D(a.status),b=S===a.id;return e.jsxs("div",{children:[e.jsx("button",{onClick:()=>C(b?null:a.id),className:"w-full text-left px-4 py-3 hover:bg-zinc-800/50 transition-colors",children:e.jsxs("div",{className:"flex items-center gap-3",children:[e.jsx("span",{className:i("w-2.5 h-2.5 rounded-full flex-shrink-0",f(a.status),a.status!=="operational"&&"animate-pulse")}),e.jsx("span",{className:"text-sm text-white flex-1",children:a.name}),e.jsx("span",{className:i("text-xs font-medium",N(a.status)),children:x(a.status)}),e.jsxs("span",{className:"text-xs text-zinc-500",children:[a.responseMs,"ms"]}),e.jsx("span",{className:i("text-xs transition-transform",b&&"rotate-180"),children:"â–¾"})]})}),b&&e.jsxs("div",{className:"px-4 pb-4 bg-zinc-950/40",children:[e.jsxs("div",{className:"mb-3",children:[e.jsxs("div",{className:"flex items-center justify-between mb-1",children:[e.jsx("span",{className:"text-[10px] text-zinc-500",children:"90-day uptime"}),e.jsxs("span",{className:"text-[10px] text-zinc-400",children:[a.uptime90d,"%"]})]}),e.jsx("div",{className:"flex gap-px h-6",children:P.map((o,j)=>e.jsx("div",{title:`${o.date}: ${x(o.status)}`,className:i("flex-1 rounded-sm",f(o.status),o.status==="operational"?"opacity-70":"opacity-100")},j))}),e.jsxs("div",{className:"flex justify-between text-[9px] text-zinc-600 mt-0.5",children:[e.jsx("span",{children:"90 days ago"}),e.jsx("span",{children:"Today"})]})]}),e.jsx("div",{className:"grid grid-cols-3 gap-3 mb-3",children:[{label:"30d Uptime",value:`${a.uptime30d}%`},{label:"Avg Response",value:`${a.responseMs}ms`},{label:"Last Incident",value:a.lastIncident??"Never"}].map(({label:o,value:j})=>e.jsxs("div",{className:"bg-zinc-900 rounded p-2 border border-zinc-800",children:[e.jsx("div",{className:"text-[10px] text-zinc-500",children:o}),e.jsx("div",{className:"text-xs text-white font-medium mt-0.5",children:j})]},o))})]})]},a.id)})})]},t)})}),m==="incidents"&&e.jsx("div",{className:"max-w-3xl mx-auto space-y-4",children:d.length===0?e.jsx("div",{className:"text-center py-12 text-zinc-600",children:"No incidents recorded"}):d.map(t=>e.jsxs("div",{className:i("bg-zinc-900 rounded border overflow-hidden",t.resolvedAt?"border-zinc-800":"border-amber-400/30"),children:[e.jsx("button",{onClick:()=>M(l===t.id?null:t.id),className:"w-full text-left px-5 py-4",children:e.jsxs("div",{className:"flex items-start gap-3",children:[e.jsx("span",{className:i("text-xs font-semibold px-2 py-1 rounded border mt-0.5",w(t.severity)),children:t.severity.toUpperCase()}),e.jsxs("div",{className:"flex-1",children:[e.jsx("div",{className:"text-sm font-semibold text-white",children:t.title}),e.jsxs("div",{className:"flex items-center gap-3 mt-1",children:[e.jsx("span",{className:i("text-xs font-medium px-2 py-0.5 rounded capitalize",y(t.phase)),children:t.phase}),e.jsxs("span",{className:"text-xs text-zinc-500",children:["Started: ",t.startedAt]}),t.resolvedAt&&e.jsxs("span",{className:"text-xs text-zinc-500",children:["Resolved: ",t.resolvedAt]})]}),e.jsx("div",{className:"flex flex-wrap gap-1 mt-2",children:t.affectedComponents.map(n=>{const r=s.find(a=>a.id===n);return r?e.jsx("span",{className:"text-[10px] bg-zinc-800 text-zinc-400 px-2 py-0.5 rounded",children:r.name},n):null})})]}),e.jsx("span",{className:i("text-xs transition-transform flex-shrink-0",l===t.id&&"rotate-180"),children:"â–¾"})]})}),l===t.id&&e.jsxs("div",{className:"border-t border-zinc-800 px-5 py-4",children:[e.jsx("div",{className:"text-xs font-semibold text-zinc-400 uppercase tracking-wider mb-3",children:"Incident Timeline"}),e.jsx("div",{className:"space-y-3",children:t.updates.map((n,r)=>e.jsxs("div",{className:"flex gap-3",children:[e.jsxs("div",{className:"flex flex-col items-center",children:[e.jsx("div",{className:i("w-2.5 h-2.5 rounded-full flex-shrink-0 mt-0.5",y(n.phase).split(" ")[0].replace("text-","bg-"))}),r<t.updates.length-1&&e.jsx("div",{className:"w-px flex-1 bg-zinc-800 mt-1"})]}),e.jsxs("div",{className:"flex-1 pb-3",children:[e.jsxs("div",{className:"flex items-center gap-2 mb-1",children:[e.jsx("span",{className:i("text-[10px] font-semibold capitalize px-1.5 py-0.5 rounded",y(n.phase)),children:n.phase}),e.jsx("span",{className:"text-[10px] text-zinc-500",children:n.timestamp})]}),e.jsx("p",{className:"text-sm text-zinc-300",children:n.message})]})]},r))})]})]},t.id))}),m==="builder"&&e.jsxs("div",{className:"max-w-3xl mx-auto",children:[e.jsx("div",{className:"mb-4",children:e.jsx("p",{className:"text-sm text-zinc-400",children:"Manage component statuses for the public status page."})}),e.jsx("div",{className:"bg-zinc-900 rounded border border-zinc-800 divide-y divide-zinc-800",children:s.map(t=>e.jsxs("div",{className:"flex items-center gap-4 px-4 py-3",children:[e.jsx("span",{className:i("w-2.5 h-2.5 rounded-full flex-shrink-0",f(t.status))}),e.jsxs("div",{className:"flex-1",children:[e.jsx("div",{className:"text-sm text-white font-medium",children:t.name}),e.jsx("div",{className:"text-[10px] text-zinc-500",children:t.group})]}),k===t.id?e.jsxs("div",{className:"flex items-center gap-2",children:[e.jsxs("select",{value:z,onChange:n=>I(n.target.value),className:"bg-zinc-800 border border-zinc-700 text-white text-xs px-2 py-1 rounded focus:outline-none focus:border-indigo-500",children:[e.jsx("option",{value:"operational",children:"Operational"}),e.jsx("option",{value:"degraded",children:"Degraded Performance"}),e.jsx("option",{value:"partial-outage",children:"Partial Outage"}),e.jsx("option",{value:"major-outage",children:"Major Outage"}),e.jsx("option",{value:"maintenance",children:"Maintenance"})]}),e.jsx("button",{onClick:()=>E(t.id),className:"text-xs bg-indigo-500 hover:bg-indigo-600 text-white px-3 py-1 rounded",children:"Save"}),e.jsx("button",{onClick:()=>v(null),className:"text-xs text-zinc-500 hover:text-zinc-300",children:"Cancel"})]}):e.jsxs("div",{className:"flex items-center gap-3",children:[e.jsx("span",{className:i("text-xs font-medium",N(t.status)),children:x(t.status)}),e.jsx("button",{onClick:()=>T(t),className:"text-xs text-zinc-500 hover:text-indigo-400 px-2 py-1 rounded hover:bg-zinc-800 transition-colors",children:"Edit"})]})]},t.id))})]})]})]})}export{$ as default};
