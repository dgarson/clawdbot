import{r as h,j as e,c}from"./index-BQpNVrtO.js";const M=new Date,l=t=>new Date(M.getTime()-t),r=t=>t*6e4,u=t=>t*36e5,S=[{id:"gateway",name:"Gateway RPC",description:"Core gateway daemon — agent communication, session management",category:"core",status:"healthy",latencyMs:8,uptime99d:99.94,lastChecked:l(r(.3)),detail:"All endpoints nominal. 14 active sessions."},{id:"agent-runtime",name:"Agent Runtime",description:"Agent process management, heartbeat, lifecycle",category:"core",status:"healthy",latencyMs:12,uptime99d:99.87,lastChecked:l(r(.3)),detail:"12 agents active, 2 idle, 0 crashed."},{id:"cron-scheduler",name:"Cron Scheduler",description:"Job scheduler — heartbeats, periodic tasks",category:"core",status:"degraded",latencyMs:340,uptime99d:98.21,lastChecked:l(r(.5)),detail:"data-sync job failing — timeout after 30s. Other jobs healthy."},{id:"session-store",name:"Session Store",description:"Persistent session history and message store",category:"storage",status:"healthy",latencyMs:4,uptime99d:99.99,lastChecked:l(r(.3)),detail:"2.3 GB used. Read/write latency within SLA."},{id:"workspace-fs",name:"Workspace FS",description:"Agent workspace file system — reads, writes, watches",category:"storage",status:"healthy",latencyMs:3,uptime99d:99.98,lastChecked:l(r(.3)),detail:"14.8 GB used across 12 workspaces."},{id:"anthropic-api",name:"Anthropic API",description:"Claude API — claude-opus-4-6, claude-sonnet-4-6",category:"model",status:"healthy",latencyMs:1240,uptime99d:99.71,lastChecked:l(r(1)),detail:"TTFT ~0.8s avg. No rate limits hit."},{id:"openai-api",name:"OpenAI API",description:"OpenAI API — GPT-4o, TTS, embeddings",category:"model",status:"healthy",latencyMs:890,uptime99d:99.62,lastChecked:l(r(1)),detail:"TTS-1-HD healthy. No rate limits."},{id:"slack-integration",name:"Slack Integration",description:"Slack channel messaging, reactions, pins",category:"integration",status:"healthy",latencyMs:210,uptime99d:99.55,lastChecked:l(r(2)),detail:"WebSocket connected. Message delivery nominal."},{id:"github-integration",name:"GitHub Integration",description:"GitHub API — PRs, issues, branches, commits",category:"integration",status:"healthy",latencyMs:180,uptime99d:99.81,lastChecked:l(r(2)),detail:"Authenticated as dgarson. Rate limit: 4,821/5,000 remaining."},{id:"node-relay",name:"Node Relay",description:"Paired device relay — notifications, camera, screen",category:"network",status:"healthy",latencyMs:45,uptime99d:97.4,lastChecked:l(r(.5)),detail:"2 nodes paired: David's MacBook Pro, iPhone 15 Pro."},{id:"browser-relay",name:"Browser Relay",description:"Chrome extension relay — tab attach, page control",category:"network",status:"unknown",latencyMs:null,uptime99d:94.1,lastChecked:l(r(10)),detail:"No attached tab. Extension installed but idle."},{id:"tts-provider",name:"TTS Provider",description:"Text-to-speech — OpenAI TTS-1-HD (shimmer, chris voices)",category:"model",status:"healthy",latencyMs:620,uptime99d:99.5,lastChecked:l(r(1)),detail:"Last synthesis: 14s ago. Avg synthesis time: 620ms."}],k=[{id:"inc-001",title:"Cron job data-sync timing out",severity:"minor",status:"investigating",startedAt:l(u(1)+r(10)),updates:[{timestamp:l(u(1)+r(10)),message:"Incident opened — data-sync job timing out after 30s. Other jobs unaffected."},{timestamp:l(r(45)),message:"Investigating root cause. Likely a dependency call to external API hanging."}]},{id:"inc-002",title:"Gateway restart — planned maintenance",severity:"maintenance",status:"resolved",startedAt:l(u(6)+r(5)),resolvedAt:l(u(6)),updates:[{timestamp:l(u(6)+r(5)),message:"Planned gateway restart for v2.4.1 deployment."},{timestamp:l(u(6)),message:"Restart complete. All services healthy. Uptime reset."}]}],A={healthy:{label:"Healthy",dot:"bg-emerald-500",badge:"bg-emerald-500/15 text-emerald-300 ring-emerald-500/25",text:"text-emerald-400",ring:"ring-emerald-500/30"},degraded:{label:"Degraded",dot:"bg-amber-500",badge:"bg-amber-500/15 text-amber-300 ring-amber-500/25",text:"text-amber-400",ring:"ring-amber-500/30"},down:{label:"Down",dot:"bg-rose-500",badge:"bg-rose-500/15 text-rose-300 ring-rose-500/25",text:"text-rose-400",ring:"ring-rose-500/30"},unknown:{label:"Unknown",dot:"bg-zinc-500",badge:"bg-zinc-500/15 text-zinc-400 ring-zinc-500/25",text:"text-zinc-400",ring:"ring-zinc-500/30"}},I={critical:{label:"Critical",badge:"bg-rose-500/15 text-rose-300 ring-rose-500/25 ring-1"},major:{label:"Major",badge:"bg-orange-500/15 text-orange-300 ring-orange-500/25 ring-1"},minor:{label:"Minor",badge:"bg-amber-500/15 text-amber-300 ring-amber-500/25 ring-1"},maintenance:{label:"Maintenance",badge:"bg-indigo-500/15 text-indigo-300 ring-indigo-500/25 ring-1"}},T={investigating:{label:"Investigating",color:"text-amber-400"},identified:{label:"Identified",color:"text-orange-400"},monitoring:{label:"Monitoring",color:"text-indigo-400"},resolved:{label:"Resolved",color:"text-emerald-400"}},C={core:"Core",integration:"Integration",storage:"Storage",network:"Network",model:"AI Models"};function j(t){const a=Date.now()-t.getTime();return a<6e4?`${Math.floor(a/1e3)}s ago`:a<36e5?`${Math.floor(a/6e4)}m ago`:`${Math.floor(a/36e5)}h ago`}function R(t){return t.toLocaleTimeString("en-US",{hour:"2-digit",minute:"2-digit",second:"2-digit",hour12:!1})}function D({baseLatency:t,color:a}){const d=Array.from({length:20},(y,g)=>{const x=(Math.sin(g*2.7+t)+Math.cos(g*1.3))*.2;return Math.max(0,t*(1+x))}),n=Math.max(...d),i=Math.min(...d),o=n-i||1,m=60,b=20,v=d.map((y,g)=>`${g/(d.length-1)*m},${b-(y-i)/o*(b-2)-1}`).join(" ");return e.jsx("svg",{width:m,height:b,className:"flex-none","aria-hidden":"true",children:e.jsx("polyline",{points:v,fill:"none",stroke:a,strokeWidth:"1.5",strokeLinejoin:"round",strokeLinecap:"round",opacity:.7})})}function L({uptime:t}){const a=Array.from({length:30},(d,n)=>{const i=(100-t)/100,o=Math.sin(n*13.7+t)*.5+.5;return o<i*3?"degraded":o<i*1.5?"down":"healthy"});return e.jsx("div",{className:"flex items-end gap-px","aria-label":`${t.toFixed(2)}% uptime`,children:a.map((d,n)=>e.jsx("div",{className:c("w-1 rounded-sm",d==="healthy"?"bg-emerald-500 h-3":d==="degraded"?"bg-amber-500 h-2":"bg-rose-500 h-1")},n))})}function P({services:t}){const a=t.some(i=>i.status==="down"),d=t.some(i=>i.status==="degraded");return!a&&!d?e.jsxs("div",{className:"flex items-center gap-3 px-5 py-3 rounded-xl bg-emerald-500/10 border border-emerald-500/20",children:[e.jsxs("span",{className:"flex h-3 w-3 relative flex-none",children:[e.jsx("span",{className:"animate-ping absolute inline-flex h-full w-full rounded-full bg-emerald-400 opacity-75"}),e.jsx("span",{className:"relative inline-flex rounded-full h-3 w-3 bg-emerald-500"})]}),e.jsxs("div",{children:[e.jsx("p",{className:"text-sm font-semibold text-emerald-300",children:"All systems operational"}),e.jsx("p",{className:"text-xs text-emerald-600",children:"No active incidents or degradations"})]})]}):a?e.jsxs("div",{className:"flex items-center gap-3 px-5 py-3 rounded-xl bg-rose-500/10 border border-rose-500/20",children:[e.jsx("span",{className:"h-3 w-3 rounded-full bg-rose-500 flex-none"}),e.jsxs("div",{children:[e.jsx("p",{className:"text-sm font-semibold text-rose-300",children:"Service outage detected"}),e.jsx("p",{className:"text-xs text-rose-600",children:"One or more services are down. Check incidents below."})]})]}):e.jsxs("div",{className:"flex items-center gap-3 px-5 py-3 rounded-xl bg-amber-500/10 border border-amber-500/20",children:[e.jsx("span",{className:"h-3 w-3 rounded-full bg-amber-500 flex-none animate-pulse"}),e.jsxs("div",{children:[e.jsx("p",{className:"text-sm font-semibold text-amber-300",children:"Partial service degradation"}),e.jsx("p",{className:"text-xs text-amber-600",children:"Some services are running below normal performance."})]})]})}function E({service:t}){const[a,d]=h.useState(!1),n=A[t.status];return e.jsxs("div",{className:c("rounded-xl bg-zinc-900 border transition-colors",n.ring,"border-zinc-800"),children:[e.jsxs("button",{onClick:()=>d(i=>!i),"aria-expanded":a,"aria-label":`${t.name} — ${n.label}. Click to ${a?"collapse":"expand"}`,className:"w-full flex items-start gap-3 p-4 text-left focus-visible:outline-none focus-visible:ring-2 focus-visible:ring-indigo-500 rounded-xl",children:[e.jsx("div",{className:"flex-none mt-1",children:e.jsx("span",{className:c("block h-2.5 w-2.5 rounded-full",n.dot,t.status==="degraded"&&"animate-pulse")})}),e.jsxs("div",{className:"flex-1 min-w-0",children:[e.jsxs("div",{className:"flex items-center gap-2 flex-wrap",children:[e.jsx("span",{className:"text-sm font-semibold text-white",children:t.name}),e.jsx("span",{className:c("text-xs font-medium px-1.5 py-0.5 rounded-full ring-1",n.badge),children:n.label}),e.jsx("span",{className:"text-xs text-zinc-600",children:C[t.category]})]}),e.jsx("p",{className:"mt-0.5 text-xs text-zinc-500 truncate",children:t.description})]}),e.jsxs("div",{className:"flex-none flex items-center gap-4",children:[t.latencyMs!==null&&e.jsxs("div",{className:"text-right hidden sm:block",children:[e.jsx(D,{baseLatency:t.latencyMs,color:t.status==="healthy"?"#34d399":t.status==="degraded"?"#fbbf24":"#f87171"}),e.jsxs("p",{className:"text-xs text-zinc-500 mt-0.5",children:[t.latencyMs,"ms"]})]}),e.jsxs("div",{className:"text-right hidden md:block",children:[e.jsxs("p",{className:c("text-xs font-semibold tabular-nums",t.uptime99d>=99.9?"text-emerald-400":t.uptime99d>=99?"text-amber-400":"text-rose-400"),children:[t.uptime99d.toFixed(2),"%"]}),e.jsx("p",{className:"text-xs text-zinc-600",children:"30d uptime"})]}),e.jsx("svg",{className:c("h-4 w-4 text-zinc-600 transition-transform flex-none",a&&"rotate-180"),viewBox:"0 0 16 16",fill:"none",stroke:"currentColor",strokeWidth:1.5,children:e.jsx("path",{strokeLinecap:"round",strokeLinejoin:"round",d:"M4 6l4 4 4-4"})})]})]}),a&&e.jsxs("div",{className:"px-4 pb-4 pt-0 border-t border-zinc-800 mt-0",children:[e.jsxs("div",{className:"pt-3 grid grid-cols-2 gap-x-6 gap-y-2 sm:grid-cols-4",children:[e.jsxs("div",{children:[e.jsx("p",{className:"text-xs text-zinc-500",children:"Status"}),e.jsx("p",{className:c("text-xs font-medium mt-0.5",n.text),children:n.label})]}),t.latencyMs!==null&&e.jsxs("div",{children:[e.jsx("p",{className:"text-xs text-zinc-500",children:"Latency"}),e.jsxs("p",{className:"text-xs font-mono font-medium text-zinc-200 mt-0.5",children:[t.latencyMs,"ms"]})]}),e.jsxs("div",{children:[e.jsx("p",{className:"text-xs text-zinc-500",children:"30d Uptime"}),e.jsxs("p",{className:"text-xs font-mono font-medium text-zinc-200 mt-0.5",children:[t.uptime99d.toFixed(2),"%"]})]}),e.jsxs("div",{children:[e.jsx("p",{className:"text-xs text-zinc-500",children:"Last Checked"}),e.jsx("p",{className:"text-xs text-zinc-400 mt-0.5",children:j(t.lastChecked)})]})]}),t.detail&&e.jsx("p",{className:"mt-3 text-xs text-zinc-400 leading-relaxed bg-zinc-950 rounded-lg px-3 py-2 border border-zinc-800",children:t.detail}),e.jsxs("div",{className:"mt-3",children:[e.jsx("p",{className:"text-xs text-zinc-500 mb-1.5",children:"30-day uptime history"}),e.jsx(L,{uptime:t.uptime99d})]})]})]})}function z({incident:t}){const[a,d]=h.useState(!t.resolvedAt),n=I[t.severity],i=T[t.status];return e.jsxs("div",{className:c("rounded-xl bg-zinc-900 border border-zinc-800",!t.resolvedAt&&"border-amber-500/20"),children:[e.jsxs("button",{onClick:()=>d(o=>!o),"aria-expanded":a,"aria-label":`Incident: ${t.title}`,className:"w-full flex items-start gap-3 p-4 text-left focus-visible:outline-none focus-visible:ring-2 focus-visible:ring-indigo-500 rounded-xl",children:[e.jsxs("div",{className:"flex-1 min-w-0",children:[e.jsxs("div",{className:"flex items-center gap-2 flex-wrap",children:[e.jsx("span",{className:c("text-xs font-medium px-2 py-0.5 rounded-full",n.badge),children:n.label}),e.jsx("span",{className:c("text-xs font-medium",i.color),children:i.label})]}),e.jsx("p",{className:"mt-1 text-sm font-semibold text-white",children:t.title}),e.jsxs("p",{className:"mt-0.5 text-xs text-zinc-500",children:["Started ",j(t.startedAt),t.resolvedAt&&` · Resolved ${j(t.resolvedAt)}`]})]}),e.jsx("svg",{className:c("h-4 w-4 text-zinc-600 transition-transform flex-none mt-1",a&&"rotate-180"),viewBox:"0 0 16 16",fill:"none",stroke:"currentColor",strokeWidth:1.5,children:e.jsx("path",{strokeLinecap:"round",strokeLinejoin:"round",d:"M4 6l4 4 4-4"})})]}),a&&e.jsx("div",{className:"px-4 pb-4 pt-0 border-t border-zinc-800",children:e.jsx("div",{className:"pt-3 space-y-3",children:[...t.updates].reverse().map((o,m)=>e.jsxs("div",{className:"flex gap-3",children:[e.jsxs("div",{className:"flex-none flex flex-col items-center",children:[e.jsx("div",{className:"h-1.5 w-1.5 rounded-full bg-zinc-600 mt-1.5"}),m<t.updates.length-1&&e.jsx("div",{className:"w-px flex-1 bg-zinc-800 mt-1"})]}),e.jsxs("div",{className:"flex-1 pb-2",children:[e.jsxs("p",{className:"text-xs text-zinc-500",children:[R(o.timestamp)," · ",j(o.timestamp)]}),e.jsx("p",{className:"text-sm text-zinc-300 mt-0.5 leading-snug",children:o.message})]})]},m))})})]})}function F(){const[t,a]=h.useState(S),[d,n]=h.useState(new Date),[i,o]=h.useState(!1),[m,b]=h.useState("all");h.useEffect(()=>{const s=setInterval(()=>{o(!0),setTimeout(()=>{a(p=>p.map(f=>({...f,latencyMs:f.latencyMs!==null?Math.max(1,f.latencyMs+Math.floor((Math.random()-.5)*20)):null,lastChecked:new Date}))),n(new Date),o(!1)},800)},3e4);return()=>clearInterval(s)},[]);const v=h.useCallback(()=>{o(!0),setTimeout(()=>{a(s=>s.map(p=>({...p,latencyMs:p.latencyMs!==null?Math.max(1,p.latencyMs+Math.floor((Math.random()-.5)*30)):null,lastChecked:new Date}))),n(new Date),o(!1)},600)},[]),y=["all","core","model","integration","storage","network"],g=m==="all"?t:t.filter(s=>s.category===m),x={healthy:t.filter(s=>s.status==="healthy").length,degraded:t.filter(s=>s.status==="degraded").length,down:t.filter(s=>s.status==="down").length,unknown:t.filter(s=>s.status==="unknown").length},N=k.filter(s=>!s.resolvedAt),w=k.filter(s=>!!s.resolvedAt);return e.jsxs("div",{className:"flex flex-col h-full bg-zinc-950 overflow-y-auto",children:[e.jsxs("div",{className:"flex-none px-6 py-4 border-b border-zinc-800",children:[e.jsxs("div",{className:"flex items-center justify-between gap-4 flex-wrap",children:[e.jsxs("div",{children:[e.jsx("h1",{className:"text-lg font-semibold text-white",children:"System Health"}),e.jsx("p",{className:"text-sm text-zinc-500 mt-0.5",children:"Real-time status of all OpenClaw services and integrations"})]}),e.jsxs("div",{className:"flex items-center gap-3",children:[e.jsxs("p",{className:"text-xs text-zinc-600",children:["Updated ",j(d)]}),e.jsxs("button",{onClick:v,disabled:i,"aria-label":"Refresh service status",className:c("flex items-center gap-2 px-3 py-2 text-sm font-medium rounded-lg bg-zinc-800 text-zinc-200 hover:bg-zinc-700 hover:text-white border border-zinc-700 focus-visible:outline-none focus-visible:ring-2 focus-visible:ring-indigo-500 transition-colors",i&&"opacity-50 cursor-not-allowed"),children:[e.jsxs("svg",{className:c("h-4 w-4",i&&"animate-spin"),viewBox:"0 0 16 16",fill:"none",stroke:"currentColor",strokeWidth:1.5,children:[e.jsx("path",{strokeLinecap:"round",strokeLinejoin:"round",d:"M13.5 8A5.5 5.5 0 112.5 8"}),e.jsx("path",{strokeLinecap:"round",d:"M13.5 3v5h-5"})]}),i?"Refreshing…":"Refresh"]})]})]}),e.jsx("div",{className:"flex items-center gap-5 mt-3 flex-wrap",children:[{label:"Healthy",count:x.healthy,color:"text-emerald-400"},{label:"Degraded",count:x.degraded,color:x.degraded>0?"text-amber-400":"text-zinc-600"},{label:"Down",count:x.down,color:x.down>0?"text-rose-400":"text-zinc-600"},{label:"Unknown",count:x.unknown,color:"text-zinc-500"}].map(({label:s,count:p,color:f})=>e.jsxs("div",{className:"flex items-center gap-1.5",children:[e.jsx("span",{className:c("text-sm font-semibold tabular-nums",f),children:p}),e.jsx("span",{className:"text-xs text-zinc-600",children:s})]},s))})]}),e.jsxs("div",{className:"flex-1 px-6 py-5 space-y-8",children:[e.jsx(P,{services:t}),N.length>0&&e.jsxs("section",{"aria-labelledby":"incidents-heading",children:[e.jsxs("h2",{id:"incidents-heading",className:"text-xs font-semibold text-zinc-500 uppercase tracking-wider mb-3 flex items-center gap-2",children:[e.jsx("span",{className:"h-1.5 w-1.5 rounded-full bg-amber-500 animate-pulse"}),"Active Incidents (",N.length,")"]}),e.jsx("div",{className:"space-y-2",children:N.map(s=>e.jsx(z,{incident:s},s.id))})]}),e.jsxs("section",{"aria-labelledby":"services-heading",children:[e.jsxs("div",{className:"flex items-center justify-between gap-3 mb-3 flex-wrap",children:[e.jsxs("h2",{id:"services-heading",className:"text-xs font-semibold text-zinc-500 uppercase tracking-wider",children:["Services (",g.length,")"]}),e.jsx("div",{role:"tablist","aria-label":"Filter by category",className:"flex items-center gap-1 flex-wrap",children:y.map(s=>e.jsx("button",{role:"tab","aria-selected":m===s,onClick:()=>b(s),className:c("px-2.5 py-1 text-xs font-medium rounded-md transition-colors focus-visible:outline-none focus-visible:ring-2 focus-visible:ring-indigo-500",m===s?"bg-indigo-600 text-white":"text-zinc-400 hover:text-zinc-200 hover:bg-zinc-800"),children:s==="all"?"All":C[s]},s))})]}),e.jsx("div",{className:"space-y-2",children:g.map(s=>e.jsx(E,{service:s},s.id))})]}),w.length>0&&e.jsxs("section",{"aria-labelledby":"resolved-heading",children:[e.jsx("h2",{id:"resolved-heading",className:"text-xs font-semibold text-zinc-500 uppercase tracking-wider mb-3",children:"Resolved Incidents"}),e.jsx("div",{className:"space-y-2",children:w.map(s=>e.jsx(z,{incident:s},s.id))})]})]})]})}export{F as default};
