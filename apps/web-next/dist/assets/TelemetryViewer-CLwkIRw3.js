import{r as o,j as e,c as i}from"./index-BWIhEZ8Z.js";const m=[{id:"trace-a1b2c3",rootSpan:"POST /api/agent/run",service:"gateway",startedAt:"2026-02-22T02:00:00.000Z",totalDuration:4280,status:"ok",spanCount:8,errorCount:0,spans:[{traceId:"a1b2c3",spanId:"s1",parentSpanId:null,name:"POST /api/agent/run",service:"gateway",status:"ok",startTime:0,duration:4280,attributes:[{key:"http.method",value:"POST"},{key:"http.status_code",value:"200"},{key:"agent.id",value:"luis"}],events:[]},{traceId:"a1b2c3",spanId:"s2",parentSpanId:"s1",name:"auth.validate",service:"gateway",status:"ok",startTime:12,duration:45,attributes:[{key:"auth.method",value:"token"},{key:"auth.result",value:"valid"}],events:[]},{traceId:"a1b2c3",spanId:"s3",parentSpanId:"s1",name:"llm.chat",service:"model-router",status:"ok",startTime:80,duration:3900,attributes:[{key:"model",value:"anthropic/claude-sonnet-4-6"},{key:"tokens.total",value:"8420"}],events:[{ts:100,name:"request.sent",attrs:[]},{ts:3950,name:"response.received",attrs:[{key:"finish_reason",value:"stop"}]}]},{traceId:"a1b2c3",spanId:"s4",parentSpanId:"s3",name:"tool.exec",service:"tool-runner",status:"ok",startTime:1200,duration:380,attributes:[{key:"tool.name",value:"exec"},{key:"tool.exit_code",value:"0"}],events:[]},{traceId:"a1b2c3",spanId:"s5",parentSpanId:"s3",name:"tool.write",service:"tool-runner",status:"ok",startTime:1800,duration:65,attributes:[{key:"tool.name",value:"write"},{key:"file.bytes",value:"18420"}],events:[]},{traceId:"a1b2c3",spanId:"s6",parentSpanId:"s1",name:"session.save",service:"session-store",status:"ok",startTime:4100,duration:120,attributes:[{key:"session.key",value:"agent:luis:main"},{key:"record.size_kb",value:"84"}],events:[]}]},{id:"trace-d4e5f6",rootSpan:"agent.spawn",service:"session-manager",startedAt:"2026-02-22T01:55:00.000Z",totalDuration:12400,status:"error",spanCount:6,errorCount:1,spans:[{traceId:"d4e5f6",spanId:"t1",parentSpanId:null,name:"agent.spawn",service:"session-manager",status:"error",startTime:0,duration:12400,attributes:[{key:"agent.id",value:"sub-agent-042"},{key:"model",value:"google/gemini-2.5-flash-preview"}],events:[{ts:12350,name:"error.model_not_allowed",attrs:[{key:"model",value:"google/gemini-2.5-flash-preview"}]}]},{traceId:"d4e5f6",spanId:"t2",parentSpanId:"t1",name:"model.validate",service:"model-router",status:"error",startTime:200,duration:80,attributes:[{key:"error",value:"model not allowed: google/gemini-2.5-flash-preview"}],events:[]},{traceId:"d4e5f6",spanId:"t3",parentSpanId:"t1",name:"session.cleanup",service:"session-manager",status:"ok",startTime:400,duration:45,attributes:[{key:"reason",value:"spawn_failed"}],events:[]}]},{id:"trace-g7h8i9",rootSpan:"GET /api/sessions",service:"gateway",startedAt:"2026-02-22T01:50:00.000Z",totalDuration:142,status:"ok",spanCount:3,errorCount:0,spans:[{traceId:"g7h8i9",spanId:"u1",parentSpanId:null,name:"GET /api/sessions",service:"gateway",status:"ok",startTime:0,duration:142,attributes:[{key:"http.method",value:"GET"},{key:"http.status_code",value:"200"},{key:"result.count",value:"47"}],events:[]},{traceId:"g7h8i9",spanId:"u2",parentSpanId:"u1",name:"db.query",service:"session-store",status:"ok",startTime:8,duration:95,attributes:[{key:"db.type",value:"postgres"},{key:"db.rows",value:"47"}],events:[]}]}],v=[{id:"m1",name:"http_requests_total",description:"Total HTTP requests received by the gateway",unit:"count",type:"counter",service:"gateway",labels:{method:"POST",path:"/api/agent/run"},values:[{ts:"00:00",value:1240},{ts:"02:00",value:1180},{ts:"04:00",value:890},{ts:"06:00",value:1450},{ts:"08:00",value:2100},{ts:"10:00",value:2380},{ts:"12:00",value:2280},{ts:"14:00",value:1920}],currentValue:1920},{id:"m2",name:"llm_tokens_consumed",description:"Tokens consumed across all LLM requests",unit:"tokens",type:"counter",service:"model-router",labels:{model:"all"},values:[{ts:"00:00",value:84200},{ts:"02:00",value:72100},{ts:"04:00",value:65e3},{ts:"06:00",value:91e3},{ts:"08:00",value:142e3},{ts:"10:00",value:168e3},{ts:"12:00",value:154e3},{ts:"14:00",value:138e3}],currentValue:138e3},{id:"m3",name:"active_sessions",description:"Number of currently active agent sessions",unit:"sessions",type:"gauge",service:"session-manager",labels:{state:"active"},values:[{ts:"00:00",value:8},{ts:"02:00",value:6},{ts:"04:00",value:5},{ts:"06:00",value:9},{ts:"08:00",value:14},{ts:"10:00",value:18},{ts:"12:00",value:16},{ts:"14:00",value:12}],currentValue:12},{id:"m4",name:"request_duration_ms",description:"Distribution of request durations",unit:"ms",type:"histogram",service:"gateway",labels:{quantile:"p95"},values:[{ts:"00:00",value:1840},{ts:"02:00",value:1620},{ts:"04:00",value:1480},{ts:"06:00",value:2100},{ts:"08:00",value:3200},{ts:"10:00",value:2890},{ts:"12:00",value:2450},{ts:"14:00",value:2180}],currentValue:2180}],p={ok:{label:"OK",color:"text-emerald-400",dot:"bg-emerald-400",bg:"bg-emerald-900/20 border-emerald-700/50"},error:{label:"Error",color:"text-rose-400",dot:"bg-rose-400",bg:"bg-rose-900/20 border-rose-700/50"},unset:{label:"Unset",color:"text-zinc-400",dot:"bg-zinc-400",bg:"bg-zinc-800/50 border-zinc-700"}},h={counter:{label:"Counter",color:"text-blue-400"},gauge:{label:"Gauge",color:"text-emerald-400"},histogram:{label:"Histogram",color:"text-purple-400"},summary:{label:"Summary",color:"text-amber-400"}};function w(){const[c,g]=o.useState("trace"),[l,j]=o.useState(m[0]),[n,d]=o.useState(null),[t,f]=o.useState(v[0]);function N({span:s,maxDuration:a}){const r=s.startTime/a*100,x=Math.max(s.duration/a*100,.5),u=p[s.status],b=(n==null?void 0:n.spanId)===s.spanId;return e.jsxs("button",{onClick:()=>d(b?null:s),className:i("w-full flex items-center gap-3 px-3 py-1.5 hover:bg-zinc-800/30 rounded transition-all text-left",b&&"bg-indigo-900/20"),children:[e.jsxs("div",{className:"w-48 flex-shrink-0 flex items-center gap-2",children:[e.jsx("span",{className:i("w-2 h-2 rounded-full flex-shrink-0",u.dot)}),e.jsx("span",{className:"text-xs text-zinc-300 truncate",children:s.name})]}),e.jsx("div",{className:"flex-1 relative h-5 flex items-center",children:e.jsx("div",{className:"absolute inset-y-0 flex items-center",style:{left:`${r}%`,width:`${x}%`,minWidth:3},children:e.jsx("div",{className:i("h-4 rounded-sm w-full",s.status==="ok"?"bg-indigo-500/70":s.status==="error"?"bg-rose-500/70":"bg-zinc-600")})})}),e.jsxs("div",{className:"w-16 flex-shrink-0 text-right text-xs text-zinc-500",children:[s.duration,"ms"]})]})}return e.jsxs("div",{className:"h-full flex flex-col bg-zinc-950 overflow-hidden",children:[e.jsxs("div",{className:"flex-shrink-0 px-6 py-4 border-b border-zinc-800",children:[e.jsxs("div",{className:"flex items-center justify-between mb-4",children:[e.jsxs("div",{children:[e.jsx("h1",{className:"text-xl font-bold text-white",children:"Telemetry Viewer"}),e.jsx("p",{className:"text-sm text-zinc-400",children:"OpenTelemetry traces, metrics, and logs"})]}),e.jsxs("div",{className:"flex items-center gap-2",children:[e.jsxs("select",{className:"bg-zinc-800 border border-zinc-700 text-white rounded px-3 py-1.5 text-sm",children:[e.jsx("option",{children:"Last 15 minutes"}),e.jsx("option",{children:"Last 1 hour"}),e.jsx("option",{children:"Last 6 hours"}),e.jsx("option",{children:"Last 24 hours"})]}),e.jsx("button",{className:"bg-indigo-600 hover:bg-indigo-500 text-white px-3 py-1.5 rounded text-sm",children:"âŸ³ Refresh"})]})]}),e.jsx("div",{className:"flex gap-0 border-b border-zinc-800 -mb-4",children:["trace","metric","log"].map(s=>e.jsx("button",{onClick:()=>g(s),className:i("px-4 py-2 text-sm capitalize border-b-2 -mb-px transition-colors",c===s?"border-indigo-500 text-white font-medium":"border-transparent text-zinc-500 hover:text-zinc-300"),children:s==="trace"?`Traces (${m.length})`:s==="metric"?`Metrics (${v.length})`:"Logs"},s))})]}),e.jsxs("div",{className:"flex-1 overflow-hidden flex",children:[c==="trace"&&e.jsxs(e.Fragment,{children:[e.jsx("div",{className:"flex-shrink-0 w-72 border-r border-zinc-800 overflow-y-auto",children:e.jsx("div",{className:"p-3 space-y-2",children:m.map(s=>{const a=p[s.status],r=(l==null?void 0:l.id)===s.id;return e.jsxs("button",{onClick:()=>{j(s),d(null)},className:i("w-full text-left p-3 rounded-xl border transition-all",r?"bg-indigo-900/20 border-indigo-600/50":"bg-zinc-900 border-zinc-800 hover:border-zinc-600"),children:[e.jsxs("div",{className:"flex items-center justify-between mb-1.5",children:[e.jsxs("span",{className:i("flex items-center gap-1.5 text-xs",a.color),children:[e.jsx("span",{className:i("w-2 h-2 rounded-full",a.dot)}),a.label]}),e.jsxs("span",{className:"text-xs text-zinc-500",children:[s.totalDuration,"ms"]})]}),e.jsx("div",{className:"text-sm font-medium text-white mb-1 truncate",children:s.rootSpan}),e.jsxs("div",{className:"text-xs text-zinc-500 mb-1.5",children:[s.service," Â· ",s.startedAt.slice(11,19)," UTC"]}),e.jsxs("div",{className:"flex gap-2 text-[10px]",children:[e.jsxs("span",{className:"bg-zinc-800 text-zinc-400 px-1.5 py-0.5 rounded",children:[s.spanCount," spans"]}),s.errorCount>0&&e.jsxs("span",{className:"bg-rose-900/30 text-rose-400 border border-rose-700/50 px-1.5 py-0.5 rounded",children:[s.errorCount," error"]})]})]},s.id)})})}),l&&e.jsxs("div",{className:"flex-1 overflow-hidden flex flex-col",children:[e.jsxs("div",{className:"flex-shrink-0 px-5 py-3 border-b border-zinc-800 bg-zinc-900/30 flex items-center justify-between",children:[e.jsxs("div",{children:[e.jsx("span",{className:"text-sm font-semibold text-white",children:l.rootSpan}),e.jsxs("span",{className:"ml-3 text-xs text-zinc-500",children:["Trace ID: ",l.id]})]}),e.jsxs("div",{className:"flex items-center gap-4 text-xs text-zinc-400",children:[e.jsxs("span",{children:[l.totalDuration,"ms total"]}),e.jsxs("span",{children:[l.spanCount," spans"]})]})]}),e.jsx("div",{className:"flex-1 overflow-y-auto",children:e.jsxs("div",{className:"p-4",children:[e.jsxs("div",{className:"flex items-center gap-3 px-3 mb-2 text-[10px] text-zinc-600 uppercase tracking-wide",children:[e.jsx("div",{className:"w-48 flex-shrink-0",children:"Span"}),e.jsxs("div",{className:"flex-1",children:["Timeline (",l.totalDuration,"ms)"]}),e.jsx("div",{className:"w-16 text-right",children:"Duration"})]}),e.jsx("div",{className:"space-y-0.5",children:l.spans.map(s=>e.jsx(N,{span:s,maxDuration:l.totalDuration},s.spanId))})]})}),n&&e.jsxs("div",{className:"flex-shrink-0 border-t border-zinc-800 bg-zinc-900/50 p-4 max-h-64 overflow-y-auto",children:[e.jsxs("div",{className:"flex items-center justify-between mb-3",children:[e.jsx("h3",{className:"text-sm font-semibold text-white",children:n.name}),e.jsx("button",{onClick:()=>d(null),className:"text-zinc-500 hover:text-white",children:"âœ•"})]}),e.jsxs("div",{className:"grid grid-cols-3 gap-3 text-xs mb-3",children:[e.jsxs("div",{children:[e.jsx("span",{className:"text-zinc-500",children:"Service: "}),e.jsx("span",{className:"text-zinc-300",children:n.service})]}),e.jsxs("div",{children:[e.jsx("span",{className:"text-zinc-500",children:"Duration: "}),e.jsxs("span",{className:"text-indigo-400",children:[n.duration,"ms"]})]}),e.jsxs("div",{children:[e.jsx("span",{className:"text-zinc-500",children:"Status: "}),e.jsx("span",{className:p[n.status].color,children:n.status})]})]}),e.jsxs("div",{className:"space-y-1",children:[e.jsx("div",{className:"text-xs text-zinc-500 font-medium mb-1",children:"Attributes"}),e.jsx("div",{className:"grid grid-cols-2 gap-1",children:n.attributes.map(s=>e.jsxs("div",{className:"bg-zinc-800 rounded px-2 py-1 text-[11px]",children:[e.jsxs("span",{className:"text-zinc-500",children:[s.key,": "]}),e.jsx("span",{className:"text-zinc-300 font-mono",children:s.value})]},s.key))})]}),n.events.length>0&&e.jsxs("div",{className:"mt-3",children:[e.jsx("div",{className:"text-xs text-zinc-500 font-medium mb-1",children:"Events"}),n.events.map((s,a)=>e.jsxs("div",{className:"flex items-center gap-2 text-[11px] text-zinc-400",children:[e.jsxs("span",{className:"text-indigo-400",children:["+",s.ts,"ms"]}),e.jsx("span",{className:"text-zinc-300",children:s.name})]},a))]})]})]})]}),c==="metric"&&e.jsxs(e.Fragment,{children:[e.jsx("div",{className:"flex-shrink-0 w-72 border-r border-zinc-800 overflow-y-auto p-3 space-y-2",children:v.map(s=>{const a=h[s.type],r=(t==null?void 0:t.id)===s.id;return e.jsxs("button",{onClick:()=>f(s),className:i("w-full text-left p-3 rounded-xl border transition-all",r?"bg-indigo-900/20 border-indigo-600/50":"bg-zinc-900 border-zinc-800 hover:border-zinc-600"),children:[e.jsxs("div",{className:"flex items-center justify-between mb-1",children:[e.jsx("span",{className:i("text-xs",a.color),children:a.label}),e.jsx("span",{className:"text-xs text-zinc-500",children:s.service})]}),e.jsx("div",{className:"text-sm font-medium text-white mb-1 font-mono truncate",children:s.name}),e.jsx("div",{className:"text-xs text-zinc-500",children:s.description}),e.jsx("div",{className:"text-lg font-bold text-indigo-400 mt-1",children:s.currentValue.toLocaleString()})]},s.id)})}),t&&e.jsxs("div",{className:"flex-1 overflow-y-auto p-6",children:[e.jsxs("div",{className:"mb-4",children:[e.jsx("h2",{className:"text-lg font-bold text-white font-mono",children:t.name}),e.jsx("p",{className:"text-sm text-zinc-400 mt-1",children:t.description})]}),e.jsxs("div",{className:"flex flex-wrap gap-2 mb-4",children:[Object.entries(t.labels).map(([s,a])=>e.jsxs("span",{className:"text-xs bg-zinc-800 border border-zinc-700 text-zinc-300 px-2 py-0.5 rounded-full font-mono",children:[s,"=",e.jsx("span",{className:"text-indigo-400",children:a})]},s)),e.jsx("span",{className:i("text-xs px-2 py-0.5 rounded-full",h[t.type].color,"bg-zinc-800 border border-zinc-700"),children:h[t.type].label})]}),e.jsxs("div",{className:"bg-zinc-900 rounded-xl border border-zinc-800 p-5",children:[e.jsxs("div",{className:"text-xs text-zinc-500 mb-3",children:["Values over time Â· unit: ",t.unit]}),e.jsx("div",{className:"flex items-end gap-2 h-40",children:t.values.map((s,a)=>{const r=Math.max(...t.values.map(u=>u.value)),x=r>0?s.value/r*100:0;return e.jsxs("div",{className:"flex-1 flex flex-col items-center gap-1",children:[e.jsx("div",{className:"text-[9px] text-zinc-600",children:s.value.toLocaleString()}),e.jsx("div",{className:"w-full flex-1 flex items-end",children:e.jsx("div",{className:"w-full rounded-t bg-indigo-500/50 hover:bg-indigo-500/70 transition-colors",style:{height:`${x}%`,minHeight:2}})}),e.jsx("div",{className:"text-[9px] text-zinc-600",children:s.ts})]},a)})})]}),e.jsx("div",{className:"grid grid-cols-3 gap-3 mt-4",children:[{label:"Current",value:t.currentValue.toLocaleString()},{label:"Max",value:Math.max(...t.values.map(s=>s.value)).toLocaleString()},{label:"Min",value:Math.min(...t.values.map(s=>s.value)).toLocaleString()}].map(s=>e.jsxs("div",{className:"bg-zinc-900 rounded-lg p-3 border border-zinc-800",children:[e.jsx("div",{className:"text-xs text-zinc-500",children:s.label}),e.jsx("div",{className:"text-base font-bold text-indigo-400",children:s.value})]},s.label))})]})]}),c==="log"&&e.jsx("div",{className:"flex-1 flex items-center justify-center",children:e.jsxs("div",{className:"text-center",children:[e.jsx("div",{className:"text-4xl mb-3",children:"ðŸ“‹"}),e.jsx("div",{className:"text-lg font-semibold text-white mb-1",children:"Log stream"}),e.jsx("div",{className:"text-sm text-zinc-500",children:"Switch to the Log Viewer for full log browsing"})]})})]})]})}export{w as default};
