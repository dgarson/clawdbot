import{r as h,j as e,c as n}from"./index-SfRm27bA.js";const b=[{id:"s1",name:"AuthService",tests:42,passed:40,failed:2,skipped:0,duration:28,status:"failed",testCases:[{id:"t1",name:"should authenticate with valid credentials",duration:120,status:"passed"},{id:"t2",name:"should reject invalid password with 401",duration:95,status:"passed"},{id:"t3",name:"should handle token expiry gracefully",duration:210,status:"failed",errorMessage:"Expected token refresh but received 401 Unauthorized after 3000ms timeout"},{id:"t4",name:"should revoke session on explicit logout",duration:88,status:"passed"},{id:"t5",name:"should enforce MFA on sensitive actions",duration:134,status:"failed",errorMessage:"MFA bypass detected: verification step skipped for role=admin on /settings/billing"},{id:"t6",name:"should rate limit login to 5 attempts/min",duration:156,status:"passed"},{id:"t7",name:"should persist session across browser tabs",duration:203,status:"passed"}]},{id:"s2",name:"UserDashboard",tests:67,passed:61,failed:4,skipped:2,duration:51,status:"failed",testCases:[{id:"t8",name:"renders user profile header with avatar",duration:45,status:"passed"},{id:"t9",name:"displays activity feed in reverse-chron order",duration:67,status:"passed"},{id:"t10",name:"shows empty state placeholder when no data",duration:33,status:"passed"},{id:"t11",name:"pagination shows correct items on page 3",duration:189,status:"failed",errorMessage:"Page 3 returns duplicates — offset calculation error (items 40-59 returned twice)"},{id:"t12",name:"combined filter: status:active + role:admin",duration:77,status:"failed",errorMessage:"Filter combination yields 0 results; expected 14 matching users in test dataset"},{id:"t13",name:"CSV export includes all 24 data columns",duration:112,status:"passed"},{id:"t14",name:"realtime updates arrive via WebSocket feed",duration:340,status:"skipped"},{id:"t15",name:"avatar upload rejects non-image MIME types",duration:88,status:"passed"}]},{id:"s3",name:"PaymentGateway",tests:89,passed:82,failed:7,skipped:0,duration:72,status:"failed",testCases:[{id:"t16",name:"processes Stripe charge for valid card",duration:450,status:"passed"},{id:"t17",name:"returns user-friendly error on card decline",duration:380,status:"passed"},{id:"t18",name:"retries payment on transient 503 error",duration:890,status:"failed",errorMessage:"Max retry attempts (3) exceeded — mock returned 5 retry invocations unexpectedly"},{id:"t19",name:"validates Luhn algorithm for card number",duration:55,status:"passed"},{id:"t20",name:"SAVE20 promo reduces order total by 20%",duration:134,status:"failed",errorMessage:"Promo applied but total shows $99.99 instead of expected $79.99"},{id:"t21",name:"payment.completed event emitted after capture",duration:210,status:"passed"},{id:"t22",name:"refund flow completes within 48hr SLA",duration:670,status:"passed"},{id:"t23",name:"all transactions written to audit log",duration:145,status:"passed"}]},{id:"s4",name:"NotificationService",tests:49,passed:36,failed:5,skipped:8,duration:33,status:"partial",testCases:[{id:"t24",name:"sends welcome email within 30s of signup",duration:230,status:"passed"},{id:"t25",name:"batches digest emails to single daily send",duration:180,status:"passed"},{id:"t26",name:"respects marketing opt-out preference",duration:90,status:"failed",errorMessage:"User with marketing_opt_out=true received PROMO-2026-Q1 campaign blast"},{id:"t27",name:"unsubscribe link removes from all lists",duration:110,status:"passed"},{id:"t28",name:"FCM push notification delivered on mobile",duration:440,status:"skipped"},{id:"t29",name:"retries email send on SMTP 421 response",duration:320,status:"passed"},{id:"t30",name:"open tracking pixel endpoint returns 200",duration:78,status:"failed",errorMessage:"GET /track/pixel/open → 404 Not Found (route not registered in express app)"}]}],l={repo:"dgarson/clawdbot",runId:"run-4892",total:247,passed:219,failed:18,skipped:10,duration:184},x=[{id:"f1",name:"retries payment on transient 503 error",suite:"PaymentGateway",flakinessRate:82,recentAttempts:[!1,!0,!1,!1,!0,!1,!0,!1,!1,!0],lastFailure:"Feb 22, 2026",lastPass:"Feb 22, 2026",suggestedAction:"Add deterministic retry mock"},{id:"f2",name:"realtime updates arrive via WebSocket feed",suite:"UserDashboard",flakinessRate:74,recentAttempts:[!0,!1,!0,!1,!1,!0,!1,!1,!0,!1],lastFailure:"Feb 22, 2026",lastPass:"Feb 21, 2026",suggestedAction:"Mock WS server in tests"},{id:"f3",name:"FCM push notification delivered on mobile",suite:"NotificationService",flakinessRate:68,recentAttempts:[!1,!1,!0,!1,!0,!1,!0,!0,!1,!1],lastFailure:"Feb 21, 2026",lastPass:"Feb 21, 2026",suggestedAction:"Stub FCM client entirely"},{id:"f4",name:"should handle token expiry gracefully",suite:"AuthService",flakinessRate:61,recentAttempts:[!0,!1,!0,!0,!1,!1,!0,!1,!0,!1],lastFailure:"Feb 22, 2026",lastPass:"Feb 22, 2026",suggestedAction:"Use fake timers for JWT expiry"},{id:"f5",name:"pagination shows correct items on page 3",suite:"UserDashboard",flakinessRate:55,recentAttempts:[!0,!0,!1,!0,!1,!0,!1,!1,!0,!1],lastFailure:"Feb 22, 2026",lastPass:"Feb 22, 2026",suggestedAction:"Seed deterministic dataset"},{id:"f6",name:"refund flow completes within 48hr SLA",suite:"PaymentGateway",flakinessRate:48,recentAttempts:[!0,!1,!0,!0,!0,!1,!0,!1,!0,!1],lastFailure:"Feb 20, 2026",lastPass:"Feb 22, 2026",suggestedAction:"Mock time assertions with jest.useFakeTimers"},{id:"f7",name:"batches digest emails to single daily send",suite:"NotificationService",flakinessRate:43,recentAttempts:[!0,!0,!1,!0,!0,!0,!1,!0,!1,!0],lastFailure:"Feb 21, 2026",lastPass:"Feb 22, 2026",suggestedAction:"Fix scheduler race condition"},{id:"f8",name:"combined filter: status:active + role:admin",suite:"UserDashboard",flakinessRate:39,recentAttempts:[!0,!0,!0,!1,!0,!1,!0,!0,!1,!0],lastFailure:"Feb 19, 2026",lastPass:"Feb 22, 2026",suggestedAction:"Investigate query planner caching"},{id:"f9",name:"rate limit recovers after 60s window reset",suite:"AuthService",flakinessRate:33,recentAttempts:[!0,!0,!1,!0,!0,!0,!1,!0,!0,!1],lastFailure:"Feb 18, 2026",lastPass:"Feb 22, 2026",suggestedAction:"Use fake timers for window reset"},{id:"f10",name:"Stripe webhook signature verification",suite:"PaymentGateway",flakinessRate:27,recentAttempts:[!0,!0,!0,!1,!0,!0,!0,!1,!0,!0],lastFailure:"Feb 17, 2026",lastPass:"Feb 22, 2026",suggestedAction:"Pin webhook timestamp in fixture"},{id:"f11",name:"unsubscribe removes from all segment lists",suite:"NotificationService",flakinessRate:21,recentAttempts:[!0,!0,!0,!0,!1,!0,!0,!0,!1,!0],lastFailure:"Feb 16, 2026",lastPass:"Feb 22, 2026",suggestedAction:"Await all segment sync promises"},{id:"f12",name:"audit log entry on permission change",suite:"AuthService",flakinessRate:14,recentAttempts:[!0,!0,!0,!0,!0,!1,!0,!0,!0,!0],lastFailure:"Feb 14, 2026",lastPass:"Feb 22, 2026",suggestedAction:"Flush DB transaction before assert"}],I=[{id:"m1",module:"auth/",line:91.4,branch:84.2,func:93.1,statement:90.7,change:2.1},{id:"m2",module:"api/routes/",line:78.9,branch:68.5,func:81.2,statement:79.4,change:-1.3},{id:"m3",module:"components/ui/",line:95.2,branch:89.7,func:96.4,statement:94.8,change:.6},{id:"m4",module:"services/payment/",line:82.7,branch:71.3,func:85,statement:83.1,change:3.4},{id:"m5",module:"services/notifications/",line:69.3,branch:58.1,func:72.8,statement:70.2,change:-2.7},{id:"m6",module:"utils/",line:97.6,branch:94.1,func:98.3,statement:97.2,change:.2}],T=[{build:"#4885",coverage:81.2},{build:"#4886",coverage:80.8},{build:"#4887",coverage:82.4},{build:"#4888",coverage:81.9},{build:"#4889",coverage:83.1},{build:"#4890",coverage:82.7},{build:"#4891",coverage:84.3},{build:"#4892",coverage:85.7}],m=[{id:"h1",runId:"#4892",branch:"feat/horizon-admin",commit:"a3f9c21",started:"Feb 22, 05:04",duration:184,passed:219,failed:18,skipped:10,triggeredBy:"push"},{id:"h2",runId:"#4891",branch:"feat/horizon-admin",commit:"b1e7d44",started:"Feb 21, 23:47",duration:177,passed:224,failed:13,skipped:10,triggeredBy:"push"},{id:"h3",runId:"#4890",branch:"fix/payment-retry",commit:"c9a2f83",started:"Feb 21, 18:22",duration:201,passed:211,failed:26,skipped:10,triggeredBy:"push"},{id:"h4",runId:"#4889",branch:"feat/horizon-admin",commit:"d4b5e19",started:"Feb 21, 14:05",duration:169,passed:231,failed:6,skipped:10,triggeredBy:"schedule"},{id:"h5",runId:"#4888",branch:"main",commit:"e7c3a56",started:"Feb 21, 08:00",duration:182,passed:228,failed:9,skipped:10,triggeredBy:"schedule"},{id:"h6",runId:"#4887",branch:"feat/notif-batching",commit:"f2d8b91",started:"Feb 20, 22:31",duration:195,passed:215,failed:22,skipped:10,triggeredBy:"push"},{id:"h7",runId:"#4886",branch:"main",commit:"g5e1c74",started:"Feb 20, 16:15",duration:174,passed:233,failed:4,skipped:10,triggeredBy:"schedule"},{id:"h8",runId:"#4885",branch:"fix/auth-mfa",commit:"h8f4d02",started:"Feb 20, 10:48",duration:188,passed:209,failed:28,skipped:10,triggeredBy:"push"},{id:"h9",runId:"#4884",branch:"main",commit:"i3b7e65",started:"Feb 20, 08:00",duration:171,passed:236,failed:1,skipped:10,triggeredBy:"schedule"},{id:"h10",runId:"#4883",branch:"feat/user-dashboard",commit:"j6c9f38",started:"Feb 19, 21:03",duration:193,passed:220,failed:17,skipped:10,triggeredBy:"push"}];function f(i){if(i<60)return`${i}s`;const o=Math.floor(i/60),u=i%60;return`${o}m ${u}s`}function B(i){return i<1e3?`${i}ms`:`${(i/1e3).toFixed(1)}s`}function v(i){return i==="passed"||i==="success"?"✓":i==="failed"?"✗":i==="skipped"?"–":i==="partial"?"◐":"?"}function j(i){return i==="passed"||i==="success"?"text-emerald-400":i==="failed"?"text-rose-400":i==="skipped"?"text-zinc-400":i==="partial"?"text-amber-400":"text-zinc-400"}function g(i,o){return i>=o+5||i>=o?"text-emerald-400":i>=o-5?"text-amber-400":"text-rose-400"}function L(){const[i,o]=h.useState("latest"),[u,N]=h.useState(new Set),[y,z]=h.useState(new Set),[k,w]=h.useState("feat/horizon-admin"),F=[{id:"latest",label:"Latest Run"},{id:"flaky",label:"Flaky Tests",badge:x.filter(r=>r.flakinessRate>=50).length},{id:"coverage",label:"Coverage"},{id:"history",label:"History"}];function S(r){N(t=>{const a=new Set(t);return a.has(r)?a.delete(r):a.add(r),a})}function A(r){z(t=>{const a=new Set(t);return a.has(r)?a.delete(r):a.add(r),a})}const M=()=>{const r=(l.passed/l.total*100).toFixed(1),t=l.failed/l.total*100,a=l.passed/l.total*100,c=l.skipped/l.total*100;return e.jsxs("div",{className:"space-y-5",children:[e.jsxs("div",{className:"flex items-center gap-3 flex-wrap",children:[e.jsx("span",{className:"text-zinc-400 text-sm",children:"Branch:"}),e.jsxs("select",{value:k,onChange:s=>w(s.target.value),className:"bg-zinc-800 border border-zinc-700 text-white text-sm rounded-md px-3 py-1.5 outline-none focus:border-indigo-500 transition-colors",children:[e.jsx("option",{value:"feat/horizon-admin",children:"feat/horizon-admin"}),e.jsx("option",{value:"main",children:"main"}),e.jsx("option",{value:"fix/payment-retry",children:"fix/payment-retry"}),e.jsx("option",{value:"fix/auth-mfa",children:"fix/auth-mfa"})]}),e.jsxs("span",{className:"text-zinc-500 text-xs font-mono",children:[l.runId," · ",l.repo]})]}),e.jsx("div",{className:"grid grid-cols-2 sm:grid-cols-3 lg:grid-cols-5 gap-3",children:[{label:"Total Tests",value:String(l.total),color:"text-white",icon:"◎"},{label:"Passed",value:String(l.passed),color:"text-emerald-400",icon:"✓"},{label:"Failed",value:String(l.failed),color:"text-rose-400",icon:"✗"},{label:"Skipped",value:String(l.skipped),color:"text-zinc-400",icon:"–"},{label:"Duration",value:f(l.duration),color:"text-indigo-400",icon:"⏱"}].map(s=>e.jsxs("div",{className:"bg-zinc-900 border border-zinc-700 rounded-lg p-4",children:[e.jsxs("div",{className:"flex items-center gap-1.5 mb-2",children:[e.jsx("span",{className:n("text-xs",s.color),children:s.icon}),e.jsx("span",{className:"text-zinc-400 text-xs",children:s.label})]}),e.jsx("div",{className:n("text-2xl font-bold tabular-nums",s.color),children:s.value})]},s.label))}),e.jsxs("div",{className:"bg-zinc-900 border border-zinc-700 rounded-lg p-4",children:[e.jsxs("div",{className:"flex justify-between text-xs mb-2",children:[e.jsx("span",{className:"text-zinc-400",children:"Pass rate"}),e.jsxs("span",{className:"text-white font-semibold",children:[r,"%"]})]}),e.jsxs("div",{className:"h-2.5 bg-zinc-800 rounded-full overflow-hidden flex",children:[e.jsx("div",{className:"bg-emerald-400 h-full transition-all",style:{width:`${a}%`}}),e.jsx("div",{className:"bg-rose-400 h-full transition-all",style:{width:`${t}%`}}),e.jsx("div",{className:"bg-zinc-600 h-full transition-all",style:{width:`${c}%`}})]}),e.jsx("div",{className:"flex gap-5 mt-2.5 text-xs",children:[{color:"bg-emerald-400",label:`Passed (${l.passed})`},{color:"bg-rose-400",label:`Failed (${l.failed})`},{color:"bg-zinc-600",label:`Skipped (${l.skipped})`}].map(s=>e.jsxs("span",{className:"flex items-center gap-1.5 text-zinc-400",children:[e.jsx("span",{className:n("w-2 h-2 rounded-full inline-block",s.color)}),s.label]},s.label))})]}),e.jsxs("div",{className:"bg-zinc-900 border border-zinc-700 rounded-lg overflow-hidden",children:[e.jsxs("div",{className:"px-4 py-3 border-b border-zinc-700 flex items-center justify-between",children:[e.jsx("h3",{className:"text-white font-medium text-sm",children:"Test Suites"}),e.jsxs("span",{className:"text-zinc-500 text-xs",children:[b.length," suites · click to expand"]})]}),e.jsxs("div",{className:"grid grid-cols-12 px-4 py-2 text-xs text-zinc-500 border-b border-zinc-800",children:[e.jsx("span",{className:"col-span-4",children:"Suite"}),e.jsx("span",{className:"col-span-1 text-right",children:"Tests"}),e.jsx("span",{className:"col-span-2 text-right text-emerald-400/60",children:"Passed"}),e.jsx("span",{className:"col-span-2 text-right text-rose-400/60",children:"Failed"}),e.jsx("span",{className:"col-span-1 text-right",children:"Duration"}),e.jsx("span",{className:"col-span-2 text-right",children:"Status"})]}),e.jsx("div",{className:"divide-y divide-zinc-800",children:b.map(s=>e.jsxs("div",{children:[e.jsxs("button",{onClick:()=>S(s.id),className:"w-full grid grid-cols-12 px-4 py-3.5 text-sm hover:bg-zinc-800/50 transition-colors text-left items-center",children:[e.jsxs("span",{className:"col-span-4 flex items-center gap-2 text-white font-medium",children:[e.jsx("span",{className:"text-zinc-500 text-xs w-3",children:u.has(s.id)?"▼":"▶"}),s.name]}),e.jsx("span",{className:"col-span-1 text-right text-zinc-300 tabular-nums",children:s.tests}),e.jsx("span",{className:"col-span-2 text-right text-emerald-400 tabular-nums",children:s.passed}),e.jsx("span",{className:n("col-span-2 text-right tabular-nums",s.failed>0?"text-rose-400":"text-zinc-500"),children:s.failed}),e.jsx("span",{className:"col-span-1 text-right text-zinc-400 text-xs",children:f(s.duration)}),e.jsxs("span",{className:n("col-span-2 text-right text-xs font-semibold",j(s.status)),children:[v(s.status)," ",s.status]})]}),u.has(s.id)&&e.jsxs("div",{className:"bg-zinc-950/60 border-t border-zinc-800",children:[e.jsxs("div",{className:"grid grid-cols-12 px-8 py-2 text-xs text-zinc-500 border-b border-zinc-800/50",children:[e.jsx("span",{className:"col-span-6",children:"Test Case"}),e.jsx("span",{className:"col-span-2 text-right",children:"Duration"}),e.jsx("span",{className:"col-span-4 text-right",children:"Status"})]}),e.jsx("div",{className:"divide-y divide-zinc-800/40",children:s.testCases.map(d=>e.jsxs("div",{className:"px-8 py-2.5",children:[e.jsxs("div",{className:"grid grid-cols-12 text-xs items-start",children:[e.jsx("span",{className:"col-span-6 text-zinc-300 leading-relaxed pr-2",children:d.name}),e.jsx("span",{className:"col-span-2 text-right text-zinc-500 tabular-nums",children:B(d.duration)}),e.jsxs("span",{className:n("col-span-4 text-right font-semibold",j(d.status)),children:[v(d.status)," ",d.status]})]}),d.errorMessage&&e.jsx("div",{className:"mt-2 bg-rose-950/40 border border-rose-900/50 rounded px-3 py-2 text-xs text-rose-300 font-mono leading-relaxed",children:d.errorMessage})]},d.id))})]})]},s.id))})]})]})},P=()=>{const r=x.filter(a=>a.flakinessRate>=50).length,t=x.filter(a=>a.flakinessRate>=25&&a.flakinessRate<50).length;return e.jsxs("div",{className:"space-y-5",children:[e.jsxs("div",{className:"flex items-center gap-3 flex-wrap",children:[e.jsxs("div",{className:"bg-rose-400/10 border border-rose-400/20 text-rose-400 text-xs px-3 py-1.5 rounded-md",children:["✗ ",r," high severity (≥50%)"]}),e.jsxs("div",{className:"bg-amber-400/10 border border-amber-400/20 text-amber-400 text-xs px-3 py-1.5 rounded-md",children:["⚠ ",t," medium severity (25–49%)"]}),e.jsxs("div",{className:"bg-zinc-800 border border-zinc-700 text-zinc-400 text-xs px-3 py-1.5 rounded-md",children:[x.length-r-t," low severity (<25%)"]}),e.jsx("span",{className:"text-zinc-500 text-xs ml-auto",children:"Sorted by flakiness rate ↓"})]}),e.jsxs("div",{className:"bg-zinc-900 border border-zinc-700 rounded-lg overflow-hidden",children:[e.jsxs("div",{className:"grid grid-cols-12 px-4 py-3 text-xs text-zinc-500 border-b border-zinc-700",children:[e.jsx("span",{className:"col-span-3",children:"Test Name"}),e.jsx("span",{className:"col-span-2",children:"Suite"}),e.jsx("span",{className:"col-span-1 text-right",children:"Flakiness"}),e.jsx("span",{className:"col-span-2 text-center",children:"Last 10 Runs"}),e.jsx("span",{className:"col-span-1 text-right",children:"Last Fail"}),e.jsx("span",{className:"col-span-1 text-right",children:"Last Pass"}),e.jsx("span",{className:"col-span-2 text-right",children:"Suggested Fix"})]}),e.jsx("div",{className:"divide-y divide-zinc-800",children:x.map(a=>{const c=a.flakinessRate>=70?"text-rose-400":a.flakinessRate>=40?"text-amber-400":"text-zinc-300";return e.jsxs("div",{className:"grid grid-cols-12 px-4 py-3.5 text-xs hover:bg-zinc-800/30 transition-colors items-center",children:[e.jsx("span",{className:"col-span-3 text-zinc-300 leading-relaxed pr-2",children:a.name}),e.jsx("span",{className:"col-span-2 text-zinc-400 pr-1",children:a.suite}),e.jsx("div",{className:"col-span-1 flex justify-end",children:e.jsxs("span",{className:n("font-bold text-sm tabular-nums",c),children:[a.flakinessRate,"%"]})}),e.jsx("div",{className:"col-span-2 flex justify-center gap-0.5 flex-wrap",children:a.recentAttempts.map((s,d)=>e.jsx("div",{title:s?"pass":"fail",className:n("w-2.5 h-2.5 rounded-full flex-shrink-0",s?"bg-emerald-400":"bg-rose-400")},d))}),e.jsx("span",{className:"col-span-1 text-right text-zinc-500 tabular-nums",children:a.lastFailure.slice(4,10)}),e.jsx("span",{className:"col-span-1 text-right text-zinc-500 tabular-nums",children:a.lastPass.slice(4,10)}),e.jsx("div",{className:"col-span-2 flex justify-end",children:e.jsx("span",{className:"bg-zinc-800 border border-zinc-700 text-indigo-400 rounded px-2 py-1 text-xs leading-tight text-right",children:a.suggestedAction})})]},a.id)})})]})]})},C=()=>e.jsxs("div",{className:"space-y-5",children:[e.jsx("div",{className:"grid grid-cols-2 lg:grid-cols-4 gap-3",children:[{label:"Overall Coverage",value:`${85.7}%`,threshold:"≥ 80%",passing:!0},{label:"Line Coverage",value:"85.8%",threshold:"≥ 80%",passing:!0},{label:"Branch Coverage",value:"77.7%",threshold:"≥ 75%",passing:!0},{label:"Function Coverage",value:"87.8%",threshold:"≥ 80%",passing:!0}].map(s=>e.jsxs("div",{className:n("bg-zinc-900 rounded-lg p-4 border",s.passing?"border-emerald-700/40":"border-rose-700/40"),children:[e.jsxs("div",{className:"flex items-start justify-between mb-2",children:[e.jsx("span",{className:"text-zinc-400 text-xs leading-tight",children:s.label}),e.jsx("span",{className:n("text-xs font-semibold",s.passing?"text-emerald-400":"text-rose-400"),children:s.passing?"✓ OK":"✗ FAIL"})]}),e.jsx("div",{className:n("text-2xl font-bold tabular-nums",s.passing?"text-emerald-400":"text-rose-400"),children:s.value}),e.jsxs("div",{className:"text-zinc-500 text-xs mt-1",children:["Threshold: ",s.threshold]})]},s.label))}),e.jsxs("div",{className:"bg-zinc-900 border border-zinc-700 rounded-lg p-5",children:[e.jsxs("div",{className:"flex items-center justify-between mb-1",children:[e.jsx("h3",{className:"text-white text-sm font-medium",children:"Coverage Trend — Last 8 Builds"}),e.jsx("span",{className:"text-zinc-500 text-xs",children:"Overall line coverage %"})]}),e.jsxs("div",{className:"text-xs text-zinc-500 mb-3 flex items-center gap-2",children:[e.jsx("span",{className:"w-6 h-px bg-amber-400/50 inline-block"}),e.jsx("span",{className:"text-amber-400/70",children:"80% threshold"})]}),e.jsx("div",{className:"flex items-end gap-2",style:{height:"120px"},children:T.map(s=>{const d=s.build==="#4892",p=(s.coverage-79)/8*100,$=Math.max(p,8);return e.jsxs("div",{className:"flex-1 flex flex-col items-center justify-end h-full gap-1",children:[e.jsxs("span",{className:n("text-xs tabular-nums",d?"text-indigo-400 font-semibold":"text-zinc-500"),children:[s.coverage,"%"]}),e.jsx("div",{className:n("w-full rounded-t transition-all",d?"bg-indigo-500":"bg-indigo-500/30 hover:bg-indigo-500/50"),style:{height:`${$}%`}}),e.jsx("span",{className:n("text-xs truncate w-full text-center",d?"text-indigo-400":"text-zinc-600"),children:s.build})]},s.build)})})]}),e.jsxs("div",{className:"bg-zinc-900 border border-zinc-700 rounded-lg overflow-hidden",children:[e.jsx("div",{className:"px-4 py-3 border-b border-zinc-700",children:e.jsx("h3",{className:"text-white font-medium text-sm",children:"Coverage by Module"})}),e.jsxs("div",{className:"grid grid-cols-12 px-4 py-2 text-xs text-zinc-500 border-b border-zinc-800",children:[e.jsx("span",{className:"col-span-3",children:"Module"}),e.jsx("span",{className:"col-span-2 text-right",children:"Line%"}),e.jsx("span",{className:"col-span-2 text-right",children:"Branch%"}),e.jsx("span",{className:"col-span-2 text-right",children:"Function%"}),e.jsx("span",{className:"col-span-2 text-right",children:"Statement%"}),e.jsx("span",{className:"col-span-1 text-right",children:"Δ"})]}),e.jsx("div",{className:"divide-y divide-zinc-800",children:I.map(s=>e.jsxs("div",{className:"grid grid-cols-12 px-4 py-3 hover:bg-zinc-800/30 transition-colors items-center",children:[e.jsx("span",{className:"col-span-3 font-mono text-zinc-300 text-xs",children:s.module}),e.jsxs("span",{className:n("col-span-2 text-right text-xs tabular-nums font-medium",g(s.line,80)),children:[s.line,"%"]}),e.jsxs("span",{className:n("col-span-2 text-right text-xs tabular-nums font-medium",g(s.branch,75)),children:[s.branch,"%"]}),e.jsxs("span",{className:n("col-span-2 text-right text-xs tabular-nums font-medium",g(s.func,80)),children:[s.func,"%"]}),e.jsxs("span",{className:n("col-span-2 text-right text-xs tabular-nums font-medium",g(s.statement,80)),children:[s.statement,"%"]}),e.jsxs("span",{className:n("col-span-1 text-right text-xs font-semibold tabular-nums",s.change>0?"text-emerald-400":s.change<0?"text-rose-400":"text-zinc-500"),children:[s.change>0?"↑":s.change<0?"↓":"–",s.change!==0?` ${Math.abs(s.change)}%`:""]})]},s.id))})]})]}),R=()=>{const r=Math.max(...m.map(t=>t.passed+t.failed+t.skipped));return e.jsxs("div",{className:"space-y-5",children:[e.jsxs("div",{className:"bg-zinc-900 border border-zinc-700 rounded-lg p-5",children:[e.jsxs("div",{className:"flex items-center justify-between mb-4",children:[e.jsxs("h3",{className:"text-white text-sm font-medium",children:["Run Results — Last ",m.length," Runs"]}),e.jsx("div",{className:"flex gap-4 text-xs",children:[{color:"bg-emerald-500/70",label:"Passed"},{color:"bg-rose-400/70",label:"Failed"},{color:"bg-zinc-600/70",label:"Skipped"}].map(t=>e.jsxs("span",{className:"flex items-center gap-1.5 text-zinc-400",children:[e.jsx("span",{className:n("w-2.5 h-2.5 rounded-sm inline-block",t.color)}),t.label]},t.label))})]}),e.jsx("div",{className:"flex items-end gap-1.5",style:{height:"120px"},children:m.map(t=>{const a=t.passed+t.failed+t.skipped,c=Math.round(a/r*96),s=Math.round(t.passed/a*c),d=Math.round(t.failed/a*c),p=c-s-d;return e.jsxs("div",{className:"flex-1 flex flex-col items-stretch justify-end",style:{height:"112px"},children:[e.jsxs("div",{style:{height:`${c}px`},className:"flex flex-col",children:[p>0&&e.jsx("div",{className:"bg-zinc-600/60 w-full flex-shrink-0",style:{height:`${p}px`},title:`Skip: ${t.skipped}`}),d>0&&e.jsx("div",{className:"bg-rose-400/70 w-full flex-shrink-0",style:{height:`${d}px`},title:`Fail: ${t.failed}`}),s>0&&e.jsx("div",{className:"bg-emerald-500/70 w-full flex-shrink-0",style:{height:`${s}px`},title:`Pass: ${t.passed}`})]}),e.jsx("span",{className:"text-zinc-600 text-xs text-center mt-1 truncate block",children:t.runId})]},t.id)})})]}),e.jsxs("div",{className:"bg-zinc-900 border border-zinc-700 rounded-lg overflow-hidden",children:[e.jsxs("div",{className:"px-4 py-3 border-b border-zinc-700 flex items-center justify-between",children:[e.jsx("h3",{className:"text-white font-medium text-sm",children:"Run History"}),e.jsx("span",{className:"text-zinc-500 text-xs",children:"Click row to view diff"})]}),e.jsxs("div",{className:"grid grid-cols-12 px-4 py-2 text-xs text-zinc-500 border-b border-zinc-800",children:[e.jsx("span",{className:"col-span-1",children:"Run"}),e.jsx("span",{className:"col-span-3",children:"Branch"}),e.jsx("span",{className:"col-span-1",children:"Commit"}),e.jsx("span",{className:"col-span-2",children:"Started"}),e.jsx("span",{className:"col-span-1 text-right",children:"Duration"}),e.jsx("span",{className:"col-span-1 text-right text-emerald-400/60",children:"Pass"}),e.jsx("span",{className:"col-span-1 text-right text-rose-400/60",children:"Fail"}),e.jsx("span",{className:"col-span-1 text-right",children:"Skip"}),e.jsx("span",{className:"col-span-1 text-right",children:"Trigger"})]}),e.jsx("div",{className:"divide-y divide-zinc-800",children:m.map((t,a)=>{const c=m[a+1],s=c?t.failed-c.failed:0;return e.jsxs("div",{children:[e.jsxs("button",{onClick:()=>A(t.id),className:"w-full grid grid-cols-12 px-4 py-3 text-xs hover:bg-zinc-800/40 transition-colors text-left items-center",children:[e.jsx("span",{className:"col-span-1 text-indigo-400 font-mono font-medium",children:t.runId}),e.jsx("span",{className:"col-span-3 text-zinc-300 truncate pr-2",children:t.branch}),e.jsx("span",{className:"col-span-1 font-mono text-zinc-500",children:t.commit}),e.jsx("span",{className:"col-span-2 text-zinc-400",children:t.started}),e.jsx("span",{className:"col-span-1 text-right text-zinc-300 tabular-nums",children:f(t.duration)}),e.jsx("span",{className:"col-span-1 text-right text-emerald-400 tabular-nums",children:t.passed}),e.jsx("span",{className:n("col-span-1 text-right tabular-nums",t.failed>0?"text-rose-400":"text-zinc-500"),children:t.failed}),e.jsx("span",{className:"col-span-1 text-right text-zinc-500 tabular-nums",children:t.skipped}),e.jsx("span",{className:"col-span-1 text-right text-zinc-500",children:t.triggeredBy})]}),y.has(t.id)&&e.jsxs("div",{className:"bg-zinc-950/60 border-t border-zinc-800 px-8 py-4 text-xs space-y-2",children:[e.jsx("div",{className:"text-zinc-300 font-medium",children:"Diff from previous run"}),c?e.jsxs("div",{className:"space-y-1.5",children:[s>0&&e.jsxs("div",{className:"flex items-center gap-2 text-rose-300",children:[e.jsxs("span",{className:"text-rose-400",children:["+",s]}),e.jsxs("span",{children:["new test failures vs ",c.runId]}),e.jsxs("span",{className:"font-mono text-zinc-500",children:["(commit ",c.commit," → ",t.commit,")"]})]}),s<0&&e.jsxs("div",{className:"flex items-center gap-2 text-emerald-300",children:[e.jsx("span",{className:"text-emerald-400",children:s}),e.jsxs("span",{children:["fewer failures vs ",c.runId," — good progress"]})]}),s===0&&e.jsxs("div",{className:"text-zinc-400",children:["No change in failure count vs ",c.runId]}),e.jsxs("div",{className:"text-zinc-500",children:["Pass rate: ",(t.passed/(t.passed+t.failed+t.skipped)*100).toFixed(1),"%"," ","(",t.passed," / ",t.passed+t.failed+t.skipped,") ·"," ","Duration: ",f(t.duration)]})]}):e.jsx("div",{className:"text-zinc-500",children:"No previous run to compare against."})]})]},t.id)})})]})]})};return e.jsxs("div",{className:"min-h-screen bg-zinc-950 p-6",children:[e.jsxs("div",{className:"mb-6",children:[e.jsx("h1",{className:"text-white text-xl font-semibold tracking-tight",children:"Test Results Dashboard"}),e.jsxs("p",{className:"text-zinc-400 text-sm mt-1",children:["CI/CD test results, coverage tracking, and flakiness analysis for ",l.repo]})]}),e.jsx("div",{className:"flex items-end gap-0.5 border-b border-zinc-800 mb-6",children:F.map(r=>e.jsxs("button",{onClick:()=>o(r.id),className:n("relative flex items-center gap-2 px-4 py-2.5 text-sm font-medium border-b-2 -mb-px transition-colors",i===r.id?"border-indigo-500 text-indigo-400":"border-transparent text-zinc-400 hover:text-zinc-300 hover:border-zinc-700"),children:[r.label,r.badge!==void 0&&r.badge>0&&e.jsx("span",{className:n("text-xs px-1.5 py-0.5 rounded-full font-semibold",i===r.id?"bg-indigo-500/20 text-indigo-400":"bg-rose-400/15 text-rose-400"),children:r.badge})]},r.id))}),i==="latest"&&M(),i==="flaky"&&P(),i==="coverage"&&C(),i==="history"&&R()]})}export{L as default};
