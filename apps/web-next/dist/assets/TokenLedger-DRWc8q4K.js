import{r,j as e,c as x}from"./index-CszENDvb.js";const g=[{id:"tl-001",timestamp:"2026-02-22T01:18:00Z",agentId:"luis",agentName:"Luis",modelId:"claude-sonnet-4-6",modelName:"Claude Sonnet 4.6",provider:"anthropic",sessionId:"sess-e61f",inputTokens:42e3,outputTokens:8200,cacheReadTokens:18e4,cacheWriteTokens:0,totalCost:.173,taskType:"view-generation"},{id:"tl-002",timestamp:"2026-02-22T00:55:00Z",agentId:"piper",agentName:"Piper",modelId:"minimax-m2-5",modelName:"MiniMax M2.5",provider:"minimax",sessionId:"sess-piper-1",inputTokens:54e3,outputTokens:10200,cacheReadTokens:0,cacheWriteTokens:0,totalCost:.0643,taskType:"component-build"},{id:"tl-003",timestamp:"2026-02-22T00:48:00Z",agentId:"reed",agentName:"Reed",modelId:"gemini-3-flash",modelName:"Gemini 3 Flash",provider:"google",sessionId:"sess-reed-1",inputTokens:78e3,outputTokens:7900,cacheReadTokens:0,cacheWriteTokens:0,totalCost:.0259,taskType:"data-view"},{id:"tl-004",timestamp:"2026-02-22T00:35:00Z",agentId:"wes",agentName:"Wes",modelId:"glm-5",modelName:"GLM-5",provider:"zai",sessionId:"sess-wes-1",inputTokens:32e3,outputTokens:6100,cacheReadTokens:0,cacheWriteTokens:0,totalCost:.019,taskType:"export-view"},{id:"tl-005",timestamp:"2026-02-22T00:30:00Z",agentId:"xavier",agentName:"Xavier",modelId:"claude-opus-4-6",modelName:"Claude Opus 4.6",provider:"anthropic",sessionId:"sess-xavier-1",inputTokens:12e3,outputTokens:3400,cacheReadTokens:0,cacheWriteTokens:0,totalCost:.231,taskType:"sprint-planning"},{id:"tl-006",timestamp:"2026-02-22T00:15:00Z",agentId:"luis",agentName:"Luis",modelId:"claude-sonnet-4-6",modelName:"Claude Sonnet 4.6",provider:"anthropic",sessionId:"sess-e61f",inputTokens:38e3,outputTokens:7400,cacheReadTokens:16e4,cacheWriteTokens:0,totalCost:.154,taskType:"view-generation"},{id:"tl-007",timestamp:"2026-02-22T00:05:00Z",agentId:"quinn",agentName:"Quinn",modelId:"gemini-3-flash",modelName:"Gemini 3 Flash",provider:"google",sessionId:"sess-quinn-1",inputTokens:122e3,outputTokens:7800,cacheReadTokens:0,cacheWriteTokens:0,totalCost:.033,taskType:"ux-view"},{id:"tl-008",timestamp:"2026-02-21T23:45:00Z",agentId:"tim",agentName:"Tim",modelId:"claude-sonnet-4-6",modelName:"Claude Sonnet 4.6",provider:"anthropic",sessionId:"sess-tim-1",inputTokens:21e3,outputTokens:4200,cacheReadTokens:0,cacheWriteTokens:0,totalCost:.0735,taskType:"pr-review"},{id:"tl-009",timestamp:"2026-02-21T22:30:00Z",agentId:"stephan",agentName:"Stephan",modelId:"gpt-4o",modelName:"GPT-4o",provider:"openai",sessionId:"sess-stephan-1",inputTokens:8900,outputTokens:2100,cacheReadTokens:0,cacheWriteTokens:0,totalCost:.0555,taskType:"brand-review"},{id:"tl-010",timestamp:"2026-02-21T21:00:00Z",agentId:"luis",agentName:"Luis",modelId:"claude-sonnet-4-6",modelName:"Claude Sonnet 4.6",provider:"anthropic",sessionId:"sess-prev",inputTokens:35e3,outputTokens:6800,cacheReadTokens:14e4,cacheWriteTokens:0,totalCost:.1428,taskType:"view-generation"}],b=[{date:"2026-02-22",totalInputTokens:399900,totalOutputTokens:59300,totalCacheRead:48e4,totalCost:.693,byAgent:{luis:.469,piper:.064,reed:.026,wes:.019,xavier:.231,quinn:.033,tim:.074},byModel:{"claude-sonnet-4-6":.47,"claude-opus-4-6":.231,"gemini-3-flash":.059,"minimax-m2-5":.064,"glm-5":.019}},{date:"2026-02-21",totalInputTokens:52e4,totalOutputTokens:78e3,totalCacheRead:82e4,totalCost:1.244,byAgent:{luis:.612,xavier:.298,stephan:.056,tim:.182,piper:.096},byModel:{"claude-sonnet-4-6":.847,"claude-opus-4-6":.298,"gpt-4o":.056,"minimax-m2-5":.043}},{date:"2026-02-20",totalInputTokens:43e4,totalOutputTokens:62e3,totalCacheRead:68e4,totalCost:.987,byAgent:{luis:.498,xavier:.241,tim:.143,piper:.105},byModel:{"claude-sonnet-4-6":.64,"claude-opus-4-6":.241,"minimax-m2-5":.106}},{date:"2026-02-19",totalInputTokens:31e4,totalOutputTokens:47e3,totalCacheRead:42e4,totalCost:.712,byAgent:{luis:.356,xavier:.198,stephan:.074,tim:.084},byModel:{"claude-sonnet-4-6":.44,"claude-opus-4-6":.198,"gpt-4o":.074}},{date:"2026-02-18",totalInputTokens:28e4,totalOutputTokens:42e3,totalCacheRead:38e4,totalCost:.631,byAgent:{luis:.318,xavier:.178,stephan:.068,quinn:.067},byModel:{"claude-sonnet-4-6":.385,"claude-opus-4-6":.178,"gemini-3-flash":.068}},{date:"2026-02-17",totalInputTokens:35e4,totalOutputTokens:53e3,totalCacheRead:52e4,totalCost:.847,byAgent:{luis:.424,xavier:.22,tim:.128,piper:.075},byModel:{"claude-sonnet-4-6":.544,"claude-opus-4-6":.22,"minimax-m2-5":.083}},{date:"2026-02-16",totalInputTokens:41e4,totalOutputTokens:61e3,totalCacheRead:64e4,totalCost:.921,byAgent:{luis:.461,xavier:.259,stephan:.082,tim:.119},byModel:{"claude-sonnet-4-6":.58,"claude-opus-4-6":.259,"gpt-4o":.082}}];function h(s){return`$${s.toFixed(4)}`}function i(s){return s>=1e6?`${(s/1e6).toFixed(2)}M`:s>=1e3?`${(s/1e3).toFixed(0)}K`:String(s)}function T(s){const d=Date.now()-new Date(s).getTime(),n=Math.floor(d/6e4);if(n<1)return"just now";if(n<60)return`${n}m ago`;const l=Math.floor(n/60);return l<24?`${l}h ago`:`${Math.floor(l/24)}d ago`}function k(s,d,n=60){return d===0?0:Math.max(4,s/d*n)}const w={anthropic:"bg-orange-500",openai:"bg-emerald-500",google:"bg-blue-500",minimax:"bg-purple-500",zai:"bg-pink-500",meta:"bg-indigo-500"};function C({summaries:s}){const d=Math.max(...s.map(n=>n.totalCost));return e.jsxs("div",{className:"rounded-xl bg-zinc-900 border border-zinc-800 p-4",children:[e.jsx("h3",{className:"text-sm font-semibold text-white mb-4",children:"Daily Cost — Last 7 Days"}),e.jsx("div",{className:"flex items-end gap-2 h-20",children:[...s].reverse().map(n=>e.jsxs("div",{className:"flex-1 flex flex-col items-center gap-1",children:[e.jsxs("span",{className:"text-[9px] text-zinc-500 font-mono",children:["$",n.totalCost.toFixed(2)]}),e.jsx("div",{className:"w-full bg-indigo-500 rounded-t transition-all",style:{height:`${k(n.totalCost,d)}px`},role:"presentation"}),e.jsx("span",{className:"text-[9px] text-zinc-600",children:new Date(n.date).toLocaleDateString([],{weekday:"short"})})]},n.date))}),e.jsxs("div",{className:"mt-3 flex items-center justify-between text-xs text-zinc-500",children:[e.jsxs("span",{children:["Total 7d: ",e.jsxs("span",{className:"text-white font-mono font-semibold",children:["$",s.reduce((n,l)=>n+l.totalCost,0).toFixed(2)]})]}),e.jsxs("span",{children:["Avg/day: ",e.jsxs("span",{className:"text-white font-mono",children:["$",(s.reduce((n,l)=>n+l.totalCost,0)/s.length).toFixed(2)]})]})]})]})}function I(){const[s,d]=r.useState("ledger"),[n,l]=r.useState("all"),[u,f]=r.useState("all"),j=r.useMemo(()=>{const t=new Set,a=[];for(const o of g)t.has(o.agentId)||(t.add(o.agentId),a.push({id:o.agentId,name:o.agentName}));return a},[]),N=r.useMemo(()=>{const t=new Set,a=[];for(const o of g)t.has(o.modelId)||(t.add(o.modelId),a.push({id:o.modelId,name:o.modelName}));return a},[]),m=r.useMemo(()=>g.filter(t=>!(n!=="all"&&t.agentId!==n||u!=="all"&&t.modelId!==u)),[n,u]),p=r.useMemo(()=>({input:m.reduce((t,a)=>t+a.inputTokens,0),output:m.reduce((t,a)=>t+a.outputTokens,0),cache:m.reduce((t,a)=>t+a.cacheReadTokens,0),cost:m.reduce((t,a)=>t+a.totalCost,0)}),[m]),v=[{id:"ledger",label:"Transaction Ledger"},{id:"summary",label:"7-Day Summary"},{id:"breakdown",label:"Cost Breakdown"}],c=b[0];return e.jsxs("main",{className:"flex flex-col h-full bg-zinc-950 text-white overflow-hidden",role:"main","aria-label":"Token Ledger",children:[e.jsxs("div",{className:"px-6 py-4 border-b border-zinc-800 shrink-0",children:[e.jsxs("div",{className:"flex items-center justify-between mb-3",children:[e.jsxs("div",{children:[e.jsx("h1",{className:"text-lg font-bold text-white",children:"Token Ledger"}),e.jsx("p",{className:"text-xs text-zinc-500 mt-0.5",children:"Full token consumption and cost accounting across agents and models"})]}),e.jsx("div",{className:"flex items-center gap-5 text-xs",children:[{label:"Today cost",value:`$${c.totalCost.toFixed(3)}`,color:"text-white"},{label:"Input tokens",value:i(c.totalInputTokens),color:"text-zinc-300"},{label:"Cache hits",value:i(c.totalCacheRead),color:"text-emerald-400"}].map(t=>e.jsxs("div",{className:"text-center",children:[e.jsx("p",{className:x("text-lg font-bold font-mono",t.color),children:t.value}),e.jsx("p",{className:"text-zinc-500",children:t.label})]},t.label))})]}),e.jsx("div",{className:"flex gap-1",role:"tablist",children:v.map(t=>e.jsx("button",{role:"tab","aria-selected":s===t.id,onClick:()=>d(t.id),className:x("px-4 py-1.5 rounded-lg text-sm transition-colors","focus-visible:ring-2 focus-visible:ring-indigo-500 focus-visible:outline-none",s===t.id?"bg-zinc-800 text-white":"text-zinc-400 hover:text-white"),children:t.label},t.id))})]}),e.jsxs("div",{className:"flex-1 overflow-y-auto p-6",children:[s==="ledger"&&e.jsxs("div",{className:"space-y-4",children:[e.jsxs("div",{className:"flex items-center gap-3",children:[e.jsxs("select",{value:n,onChange:t=>l(t.target.value),"aria-label":"Filter by agent",className:x("bg-zinc-800 border border-zinc-700 rounded-lg px-3 py-1.5 text-sm text-white","focus-visible:ring-2 focus-visible:ring-indigo-500 focus-visible:outline-none"),children:[e.jsx("option",{value:"all",children:"All agents"}),j.map(t=>e.jsx("option",{value:t.id,children:t.name},t.id))]}),e.jsxs("select",{value:u,onChange:t=>f(t.target.value),"aria-label":"Filter by model",className:x("bg-zinc-800 border border-zinc-700 rounded-lg px-3 py-1.5 text-sm text-white","focus-visible:ring-2 focus-visible:ring-indigo-500 focus-visible:outline-none"),children:[e.jsx("option",{value:"all",children:"All models"}),N.map(t=>e.jsx("option",{value:t.id,children:t.name},t.id))]}),e.jsxs("div",{className:"flex items-center gap-4 ml-auto text-xs text-zinc-400",children:[e.jsxs("span",{children:["Input: ",e.jsx("span",{className:"text-white font-mono",children:i(p.input)})]}),e.jsxs("span",{children:["Output: ",e.jsx("span",{className:"text-white font-mono",children:i(p.output)})]}),e.jsxs("span",{children:["Cost: ",e.jsx("span",{className:"text-emerald-400 font-mono font-bold",children:h(p.cost)})]})]})]}),e.jsx("div",{className:"rounded-xl bg-zinc-900 border border-zinc-800 overflow-hidden",children:e.jsx("div",{className:"overflow-x-auto",children:e.jsxs("table",{className:"w-full text-sm",role:"table","aria-label":"Token ledger",children:[e.jsx("thead",{children:e.jsxs("tr",{className:"border-b border-zinc-800 bg-zinc-900/50",children:[e.jsx("th",{className:"text-left p-3 text-zinc-500 font-medium",children:"Time"}),e.jsx("th",{className:"text-left p-3 text-zinc-500 font-medium",children:"Agent"}),e.jsx("th",{className:"text-left p-3 text-zinc-500 font-medium",children:"Model"}),e.jsx("th",{className:"text-left p-3 text-zinc-500 font-medium",children:"Task"}),e.jsx("th",{className:"text-right p-3 text-zinc-500 font-medium",children:"Input"}),e.jsx("th",{className:"text-right p-3 text-zinc-500 font-medium",children:"Output"}),e.jsx("th",{className:"text-right p-3 text-zinc-500 font-medium",children:"Cache"}),e.jsx("th",{className:"text-right p-3 text-zinc-500 font-medium",children:"Cost"})]})}),e.jsx("tbody",{children:m.map(t=>e.jsxs("tr",{className:"border-b border-zinc-800/50 hover:bg-zinc-800/30 transition-colors",children:[e.jsx("td",{className:"p-3 text-xs text-zinc-500 whitespace-nowrap",children:T(t.timestamp)}),e.jsx("td",{className:"p-3 text-white text-xs",children:t.agentName}),e.jsx("td",{className:"p-3",children:e.jsxs("div",{className:"flex items-center gap-1.5",children:[e.jsx("div",{className:x("w-1.5 h-1.5 rounded-full shrink-0",w[t.provider]??"bg-zinc-500"),"aria-hidden":"true"}),e.jsx("span",{className:"text-xs text-zinc-300",children:t.modelName})]})}),e.jsx("td",{className:"p-3 text-xs text-zinc-500",children:t.taskType}),e.jsx("td",{className:"p-3 text-right text-xs font-mono text-zinc-300",children:i(t.inputTokens)}),e.jsx("td",{className:"p-3 text-right text-xs font-mono text-zinc-300",children:i(t.outputTokens)}),e.jsx("td",{className:"p-3 text-right text-xs font-mono text-emerald-500",children:t.cacheReadTokens>0?i(t.cacheReadTokens):"—"}),e.jsx("td",{className:"p-3 text-right text-xs font-mono text-white font-semibold",children:h(t.totalCost)})]},t.id))})]})})})]}),s==="summary"&&e.jsxs("div",{className:"space-y-4 max-w-3xl",children:[e.jsx(C,{summaries:b}),e.jsxs("div",{className:"rounded-xl bg-zinc-900 border border-zinc-800 overflow-hidden",children:[e.jsx("div",{className:"px-4 py-3 border-b border-zinc-800",children:e.jsx("h3",{className:"text-sm font-semibold text-white",children:"Daily Totals"})}),e.jsx("div",{className:"divide-y divide-zinc-800",children:b.map(t=>e.jsxs("div",{className:"px-4 py-3 flex items-center gap-4",children:[e.jsx("span",{className:"text-sm text-zinc-300 w-24 font-mono",children:new Date(t.date).toLocaleDateString([],{month:"short",day:"numeric"})}),e.jsxs("div",{className:"flex-1 flex items-center gap-6 text-xs",children:[e.jsxs("span",{className:"text-zinc-400",children:["In: ",e.jsx("span",{className:"text-white font-mono",children:i(t.totalInputTokens)})]}),e.jsxs("span",{className:"text-zinc-400",children:["Out: ",e.jsx("span",{className:"text-white font-mono",children:i(t.totalOutputTokens)})]}),e.jsxs("span",{className:"text-zinc-400",children:["Cache: ",e.jsx("span",{className:"text-emerald-400 font-mono",children:i(t.totalCacheRead)})]})]}),e.jsxs("span",{className:"text-sm font-bold font-mono text-white",children:["$",t.totalCost.toFixed(3)]})]},t.date))})]})]}),s==="breakdown"&&e.jsxs("div",{className:"grid grid-cols-1 md:grid-cols-2 gap-4 max-w-3xl",children:[e.jsxs("div",{className:"rounded-xl bg-zinc-900 border border-zinc-800 p-4",children:[e.jsx("h3",{className:"text-sm font-semibold text-white mb-4",children:"Cost by Agent (Today)"}),e.jsx("div",{className:"space-y-3",children:Object.entries(c.byAgent).sort(([,t],[,a])=>a-t).map(([t,a])=>{const o=Math.max(...Object.values(c.byAgent));return e.jsxs("div",{children:[e.jsxs("div",{className:"flex items-center justify-between mb-1 text-xs",children:[e.jsx("span",{className:"text-zinc-300 capitalize",children:t}),e.jsx("span",{className:"text-white font-mono",children:h(a)})]}),e.jsx("div",{className:"h-1.5 rounded-full bg-zinc-800 overflow-hidden",children:e.jsx("div",{className:"h-full bg-indigo-500 rounded-full",style:{width:`${a/o*100}%`},role:"presentation"})})]},t)})})]}),e.jsxs("div",{className:"rounded-xl bg-zinc-900 border border-zinc-800 p-4",children:[e.jsx("h3",{className:"text-sm font-semibold text-white mb-4",children:"Cost by Model (Today)"}),e.jsx("div",{className:"space-y-3",children:Object.entries(c.byModel).sort(([,t],[,a])=>a-t).map(([t,a])=>{const o=Math.max(...Object.values(c.byModel));return e.jsxs("div",{children:[e.jsxs("div",{className:"flex items-center justify-between mb-1 text-xs",children:[e.jsx("span",{className:"text-zinc-300",children:t}),e.jsx("span",{className:"text-white font-mono",children:h(a)})]}),e.jsx("div",{className:"h-1.5 rounded-full bg-zinc-800 overflow-hidden",children:e.jsx("div",{className:"h-full bg-emerald-500 rounded-full",style:{width:`${a/o*100}%`},role:"presentation"})})]},t)})})]})]})]})]})}export{I as default};
