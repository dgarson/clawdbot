import{r as N,j as e,c as v,R as P}from"./index-CiPVXHVM.js";const b=[{id:"piper",name:"Piper",model:"claude-3-5-sonnet",totalTokens:284e4,inputTokens:192e4,outputTokens:92e4,sessions:142,cost:8.52,wastePercent:12.4,outputRatio:.323,trend:[18e3,22e3,19500,24e3,21e3,26e3,23500],budget:15,teamId:"product-ui"},{id:"quinn",name:"Quinn",model:"claude-3-5-sonnet",totalTokens:321e4,inputTokens:21e5,outputTokens:111e4,sessions:167,cost:9.63,wastePercent:8.7,outputRatio:.346,trend:[22e3,2e4,25e3,23e3,28e3,26e3,3e4],budget:15,teamId:"product-ui"},{id:"reed",name:"Reed",model:"gpt-4o",totalTokens:194e4,inputTokens:138e4,outputTokens:56e4,sessions:98,cost:14.55,wastePercent:18.2,outputRatio:.289,trend:[14e3,16e3,15e3,19e3,17e3,2e4,18e3],budget:20,teamId:"product-ui"},{id:"wes",name:"Wes",model:"gpt-4o",totalTokens:256e4,inputTokens:178e4,outputTokens:78e4,sessions:124,cost:19.2,wastePercent:22.1,outputRatio:.305,trend:[19e3,21e3,24e3,22e3,26e3,23e3,27e3],budget:25,teamId:"product-ui"},{id:"sam",name:"Sam",model:"gemini-1.5-pro",totalTokens:482e4,inputTokens:344e4,outputTokens:138e4,sessions:203,cost:6.75,wastePercent:9.3,outputRatio:.286,trend:[32e3,35e3,38e3,36e3,42e3,39e3,45e3],budget:10,teamId:"product-ui"},{id:"roman",name:"Roman",model:"claude-3-5-sonnet",totalTokens:564e4,inputTokens:382e4,outputTokens:182e4,sessions:287,cost:16.92,wastePercent:6.8,outputRatio:.323,trend:[4e4,44e3,41e3,48e3,45e3,52e3,49e3],budget:20,teamId:"platform-core"},{id:"claire",name:"Claire",model:"gpt-4o",totalTokens:338e4,inputTokens:234e4,outputTokens:104e4,sessions:156,cost:25.35,wastePercent:15.6,outputRatio:.308,trend:[24e3,26e3,23e3,28e3,25e3,3e4,27e3],budget:30,teamId:"feature-dev"},{id:"xavier",name:"Xavier",model:"claude-3-5-sonnet",totalTokens:182e4,inputTokens:124e4,outputTokens:58e4,sessions:89,cost:5.46,wastePercent:5.2,outputRatio:.319,trend:[12e3,14e3,13e3,16e3,15e3,17e3,16e3],budget:10,teamId:"leadership"},{id:"tim",name:"Tim",model:"gpt-4o",totalTokens:214e4,inputTokens:148e4,outputTokens:66e4,sessions:103,cost:16.05,wastePercent:11.8,outputRatio:.308,trend:[15e3,17e3,16e3,2e4,18e3,21e3,19e3],budget:20,teamId:"leadership"},{id:"amadeus",name:"Amadeus",model:"claude-3-5-sonnet",totalTokens:94e4,inputTokens:64e4,outputTokens:3e5,sessions:47,cost:2.82,wastePercent:3.1,outputRatio:.319,trend:[6e3,7e3,6500,8e3,7500,9e3,8500],budget:5,teamId:"leadership"}],R=[{hour:0,tokens:12e3,label:"12a"},{hour:1,tokens:8500,label:"1a"},{hour:2,tokens:6200,label:"2a"},{hour:3,tokens:5100,label:"3a"},{hour:4,tokens:7300,label:"4a"},{hour:5,tokens:14e3,label:"5a"},{hour:6,tokens:28e3,label:"6a"},{hour:7,tokens:52e3,label:"7a"},{hour:8,tokens:78e3,label:"8a"},{hour:9,tokens:95e3,label:"9a"},{hour:10,tokens:112e3,label:"10a"},{hour:11,tokens:118e3,label:"11a"},{hour:12,tokens:104e3,label:"12p"},{hour:13,tokens:122e3,label:"1p"},{hour:14,tokens:135e3,label:"2p"},{hour:15,tokens:128e3,label:"3p"},{hour:16,tokens:119e3,label:"4p"},{hour:17,tokens:98e3,label:"5p"},{hour:18,tokens:74e3,label:"6p"},{hour:19,tokens:58e3,label:"7p"},{hour:20,tokens:45e3,label:"8p"},{hour:21,tokens:38e3,label:"9p"},{hour:22,tokens:29e3,label:"10p"},{hour:23,tokens:19e3,label:"11p"}],C=[{id:"rec-1",title:"Enable prompt compression for Wes",description:"Wes shows 22% token waste. Applying automatic prompt compression to system prompts could reduce input tokens by ~18% with negligible quality impact.",category:"compression",estimatedSavings:460800,estimatedCostSavings:3.46,effort:"low",agentIds:["wes"]},{id:"rec-2",title:"Prune context window for Reed",description:"Reed's sessions average 19,800 tokens but output ratio is only 28.9%. Truncating stale context after 10 turns could save up to 20% of input tokens.",category:"pruning",estimatedSavings:388e3,estimatedCostSavings:2.91,effort:"medium",agentIds:["reed"]},{id:"rec-3",title:"Route Sam's tasks to Gemini Flash",description:"Sam processes high-volume, lower-complexity tasks on Gemini 1.5 Pro. Routing 60% to Gemini 1.5 Flash could cut costs by 80% on those calls.",category:"routing",estimatedSavings:2892e3,estimatedCostSavings:2.9,effort:"medium",agentIds:["sam"]},{id:"rec-4",title:"Cache repeated system prompts across Product & UI Squad",description:"Piper, Quinn, Reed, Wes, and Sam all load similar base system prompts each session. Shared prompt caching could eliminate ~15% of input tokens squad-wide.",category:"caching",estimatedSavings:2088e3,estimatedCostSavings:7.2,effort:"high",agentIds:["piper","quinn","reed","wes","sam"]},{id:"rec-5",title:"Compress Claire's analysis prompts",description:"Claire's input prompts average 15,000 tokens. Structured data extraction using JSON schemas instead of verbose instructions could reduce prompt length by 30%.",category:"compression",estimatedSavings:702e3,estimatedCostSavings:5.27,effort:"medium",agentIds:["claire"]},{id:"rec-6",title:"Route Xavier's briefings to Claude Haiku",description:"Xavier's sessions are short, high-frequency status briefings. Switching to Claude 3 Haiku for these would maintain quality at 90% cost reduction.",category:"routing",estimatedSavings:1092e3,estimatedCostSavings:4.37,effort:"low",agentIds:["xavier"]},{id:"rec-7",title:"Implement semantic deduplication for Quinn",description:"Quinn's sessions show 12% repeated context across turns. Semantic deduplication of context blocks could reduce input tokens by an estimated 10%.",category:"pruning",estimatedSavings:21e4,estimatedCostSavings:.63,effort:"high",agentIds:["quinn"]},{id:"rec-8",title:"Cache tool definitions across all agents",description:"All agents load identical tool definitions on every call. Tool definition caching would eliminate these tokens entirely—estimated 8-12% of total input tokens.",category:"caching",estimatedSavings:294e4,estimatedCostSavings:10.2,effort:"medium",agentIds:["piper","quinn","reed","wes","sam","roman","claire","xavier","tim","amadeus"]},{id:"rec-9",title:"Batch Tim's architecture reviews",description:"Tim opens many short 1-2 turn sessions for code reviews. Batching these into longer sessions would reduce per-session overhead tokens by ~40%.",category:"pruning",estimatedSavings:385200,estimatedCostSavings:2.89,effort:"low",agentIds:["tim"]},{id:"rec-10",title:"Summarize Roman's long-running sessions",description:"Roman has the highest session count. Periodic mid-session summarization of conversation history would keep context lean for his longest sessions.",category:"compression",estimatedSavings:1128e3,estimatedCostSavings:3.38,effort:"medium",agentIds:["roman"]}];function k(s){return s>=1e6?`${(s/1e6).toFixed(1)}M`:s>=1e3?`${Math.round(s/1e3)}K`:String(s)}function p(s){return`$${s.toFixed(2)}`}function w(s){return`${s.toFixed(1)}%`}function z(s){switch(s){case"claude-3-5-sonnet":return"#6366f1";case"gpt-4o":return"#10b981";case"gemini-1.5-pro":return"#f59e0b"}}function A(s){switch(s){case"low":return"text-emerald-400 bg-emerald-400/10 border-emerald-400/20";case"medium":return"text-amber-400 bg-amber-400/10 border-amber-400/20";case"high":return"text-rose-400 bg-rose-400/10 border-rose-400/20"}}function I(s){switch(s){case"compression":return"⚡";case"pruning":return"✂";case"routing":return"↗";case"caching":return"◈"}}function M(s){switch(s){case"compression":return"text-indigo-400 bg-indigo-400/10 border-indigo-400/20";case"pruning":return"text-amber-400 bg-amber-400/10 border-amber-400/20";case"routing":return"text-emerald-400 bg-emerald-400/10 border-emerald-400/20";case"caching":return"text-sky-400 bg-sky-400/10 border-sky-400/20"}}function T({title:s,value:x,sub:r,trendLabel:d,trendUp:l,valueClass:u="text-white"}){return e.jsxs("div",{className:"bg-zinc-900 border border-zinc-800 rounded-xl p-5 flex flex-col gap-2",children:[e.jsx("span",{className:"text-zinc-400 text-sm font-medium",children:s}),e.jsx("span",{className:v("text-3xl font-bold tracking-tight",u),children:x}),r&&e.jsx("span",{className:"text-zinc-500 text-xs",children:r}),d&&e.jsxs("span",{className:v("text-xs font-medium",l?"text-emerald-400":"text-rose-400"),children:[l?"▲":"▼"," ",d]})]})}function B({data:s,barColor:x,height:r=24}){const d=Math.max(...s),l=Math.min(...s),u=d-l||1;return e.jsx("div",{style:{display:"flex",alignItems:"flex-end",gap:"2px",height:`${r}px`,width:"56px"},children:s.map((y,f)=>{const m=(y-l)/u*100,j=Math.max(3,m/100*r);return e.jsx("div",{style:{flex:1,height:`${j}px`,backgroundColor:x,borderRadius:"2px",opacity:.4+f/(s.length-1)*.6}},f)})})}function O({label:s,value:x,max:r,barColor:d,suffix:l}){const u=r>0?Math.min(100,x/r*100):0;return e.jsxs("div",{style:{display:"flex",alignItems:"center",gap:"12px",marginBottom:"10px"},children:[e.jsx("span",{style:{color:"#a1a1aa",fontSize:"13px",width:"150px",flexShrink:0,overflow:"hidden",textOverflow:"ellipsis",whiteSpace:"nowrap"},children:s}),e.jsx("div",{style:{flex:1,height:"8px",backgroundColor:"#27272a",borderRadius:"4px",overflow:"hidden"},children:e.jsx("div",{style:{width:`${u}%`,height:"100%",backgroundColor:d,borderRadius:"4px"}})}),e.jsx("span",{style:{color:"#e4e4e7",fontSize:"13px",width:"72px",textAlign:"right",flexShrink:0,fontFamily:"monospace"},children:l})]})}function $(){const s=b.reduce((i,a)=>i+a.totalTokens,0),x=b.reduce((i,a)=>i+a.cost,0),r=b.reduce((i,a)=>i+a.sessions,0),d=Math.round(s/r),l=b.reduce((i,a)=>i+a.wastePercent,0)/b.length,u=Math.round(100-l),y=Math.max(...R.map(i=>i.tokens)),f=R.reduce((i,a)=>i+a.tokens,0),m={"claude-3-5-sonnet":0,"gpt-4o":0,"gemini-1.5-pro":0};for(const i of b)m[i.model]+=i.totalTokens;const j=Math.max(...Object.values(m)),h=[...b].sort((i,a)=>a.totalTokens-i.totalTokens).slice(0,5);return e.jsxs("div",{className:"space-y-6",children:[e.jsxs("div",{className:"grid grid-cols-2 lg:grid-cols-4 gap-4",children:[e.jsx(T,{title:"Total Tokens Used",value:k(s),sub:"Last 30 days",trendLabel:"8.3% vs prior period",trendUp:!0}),e.jsx(T,{title:"Total Cost",value:p(x),sub:`${b.length} active agents`,trendLabel:"5.1% vs prior period",trendUp:!1,valueClass:"text-amber-400"}),e.jsx(T,{title:"Avg Tokens / Session",value:k(d),sub:`${r} total sessions`,trendLabel:"2.4% vs prior period",trendUp:!1}),e.jsx(T,{title:"Efficiency Score",value:`${u}/100`,sub:`Avg waste: ${w(l)}`,trendLabel:"1.2pt improvement",trendUp:!0,valueClass:"text-emerald-400"})]}),e.jsxs("div",{className:"bg-zinc-900 border border-zinc-800 rounded-xl p-5",children:[e.jsxs("div",{className:"flex items-center justify-between mb-4",children:[e.jsx("h3",{className:"text-white font-semibold",children:"Token Usage — Last 24 Hours"}),e.jsxs("span",{className:"text-zinc-500 text-xs font-mono",children:[k(f)," total"]})]}),e.jsx("div",{style:{display:"flex",alignItems:"flex-end",gap:"3px",height:"120px",padding:"0 2px"},children:R.map(i=>{const a=i.tokens/y*100,n=i.hour>=9&&i.hour<=17;return e.jsx("div",{title:`${i.label}: ${k(i.tokens)}`,style:{flex:1,display:"flex",flexDirection:"column",alignItems:"center"},children:e.jsx("div",{style:{width:"100%",height:`${Math.max(4,a/100*112)}px`,backgroundColor:n?"#6366f1":"#4338ca",borderRadius:"3px 3px 0 0",opacity:n?1:.55}})},i.hour)})}),e.jsx("div",{style:{display:"flex",gap:"3px",padding:"4px 2px 0"},children:R.map(i=>e.jsx("div",{style:{flex:1,textAlign:"center",fontSize:"9px",color:"#71717a",overflow:"hidden"},children:i.hour%4===0?i.label:""},i.hour))})]}),e.jsxs("div",{className:"grid grid-cols-1 lg:grid-cols-2 gap-4",children:[e.jsxs("div",{className:"bg-zinc-900 border border-zinc-800 rounded-xl p-5",children:[e.jsx("h3",{className:"text-white font-semibold mb-4",children:"Model Breakdown"}),Object.entries(m).map(([i,a])=>e.jsx(O,{label:i,value:a,max:j,barColor:z(i),suffix:k(a)},i)),e.jsx("div",{className:"mt-3 pt-3 border-t border-zinc-800 flex items-center gap-4",children:Object.keys(m).map(i=>e.jsxs("span",{className:"flex items-center gap-1.5 text-xs text-zinc-500",children:[e.jsx("span",{style:{display:"inline-block",width:"8px",height:"8px",borderRadius:"50%",backgroundColor:z(i)}}),w(m[i]/s*100)]},i))})]}),e.jsxs("div",{className:"bg-zinc-900 border border-zinc-800 rounded-xl p-5",children:[e.jsx("h3",{className:"text-white font-semibold mb-4",children:"Top Consumers"}),e.jsx("div",{className:"space-y-3",children:h.map((i,a)=>e.jsxs("div",{className:"flex items-center gap-3",children:[e.jsx("span",{className:"text-zinc-600 font-mono text-xs",style:{width:"16px",textAlign:"right",flexShrink:0},children:a+1}),e.jsx("div",{style:{width:"28px",height:"28px",borderRadius:"50%",backgroundColor:z(i.model),display:"flex",alignItems:"center",justifyContent:"center",flexShrink:0,fontSize:"11px",color:"white",fontWeight:700},children:i.name[0]}),e.jsxs("div",{style:{flex:1},children:[e.jsxs("div",{className:"flex items-center justify-between mb-1",children:[e.jsx("span",{className:"text-white text-sm font-medium",children:i.name}),e.jsx("span",{className:"text-zinc-400 text-sm font-mono",children:k(i.totalTokens)})]}),e.jsx("div",{style:{height:"4px",backgroundColor:"#27272a",borderRadius:"2px",overflow:"hidden"},children:e.jsx("div",{style:{width:`${i.totalTokens/h[0].totalTokens*100}%`,height:"100%",backgroundColor:z(i.model),borderRadius:"2px"}})})]}),e.jsx("span",{className:"text-zinc-500 text-xs font-mono",style:{flexShrink:0,width:"48px",textAlign:"right"},children:p(i.cost)})]},i.id))})]})]})]})}function E(){const[s,x]=N.useState("all"),[r,d]=N.useState("totalTokens"),[l,u]=N.useState("desc"),[y,f]=N.useState(null),m=["claude-3-5-sonnet","gpt-4o","gemini-1.5-pro"],h=[...b.filter(t=>s==="all"||t.model===s)].sort((t,o)=>{if(r==="name")return l==="asc"?t.name.localeCompare(o.name):o.name.localeCompare(t.name);let c=0,g=0;switch(r){case"totalTokens":c=t.totalTokens,g=o.totalTokens;break;case"sessions":c=t.sessions,g=o.sessions;break;case"avgTokensPerSession":c=t.totalTokens/t.sessions,g=o.totalTokens/o.sessions;break;case"outputRatio":c=t.outputRatio,g=o.outputRatio;break;case"wastePercent":c=t.wastePercent,g=o.wastePercent;break;case"cost":c=t.cost,g=o.cost;break;default:c=0,g=0}return l==="asc"?c-g:g-c});function i(t){r===t?u(l==="asc"?"desc":"asc"):(d(t),u("desc"))}function a({field:t,label:o}){const c=r===t;return e.jsxs("button",{onClick:()=>i(t),className:v("text-xs font-medium text-left transition-colors hover:text-white",c?"text-indigo-400":"text-zinc-500"),children:[o," ",c?l==="asc"?"▲":"▼":""]})}const n="160px 110px 70px 120px 110px 85px 60px 60px";return e.jsxs("div",{className:"space-y-4",children:[e.jsxs("div",{className:"flex items-center gap-2 flex-wrap",children:[e.jsx("span",{className:"text-zinc-500 text-sm",children:"Model:"}),e.jsx("button",{onClick:()=>x("all"),className:v("px-3 py-1 rounded-lg text-sm border transition-colors",s==="all"?"bg-indigo-600 border-indigo-500 text-white":"border-zinc-800 text-zinc-400 hover:text-white"),children:"All"}),m.map(t=>e.jsx("button",{onClick:()=>x(t),className:v("px-3 py-1 rounded-lg text-sm border transition-colors",s===t?"bg-indigo-600 border-indigo-500 text-white":"border-zinc-800 text-zinc-400 hover:text-white"),children:t},t))]}),e.jsxs("div",{className:"bg-zinc-900 border border-zinc-800 rounded-xl overflow-hidden",children:[e.jsxs("div",{style:{display:"grid",gridTemplateColumns:n,padding:"10px 16px",borderBottom:"1px solid #27272a",gap:"8px"},children:[e.jsx(a,{field:"name",label:"Agent"}),e.jsx(a,{field:"totalTokens",label:"Total Tokens"}),e.jsx(a,{field:"sessions",label:"Sessions"}),e.jsx(a,{field:"avgTokensPerSession",label:"Avg / Session"}),e.jsx(a,{field:"outputRatio",label:"Output Ratio"}),e.jsx(a,{field:"wastePercent",label:"Waste %"}),e.jsx(a,{field:"cost",label:"Cost"}),e.jsx("span",{className:"text-xs font-medium text-zinc-500",children:"Trend"})]}),h.map(t=>{const o=y===t.id,c=Math.round(t.totalTokens/t.sessions);return e.jsxs(P.Fragment,{children:[e.jsx("button",{onClick:()=>f(o?null:t.id),className:"w-full hover:bg-zinc-800/50 transition-colors text-left",style:{borderBottom:"1px solid #27272a"},children:e.jsxs("div",{style:{display:"grid",gridTemplateColumns:n,padding:"12px 16px",alignItems:"center",gap:"8px"},children:[e.jsxs("div",{className:"flex items-center gap-2 min-w-0",children:[e.jsx("div",{style:{width:"8px",height:"8px",borderRadius:"50%",backgroundColor:z(t.model),flexShrink:0}}),e.jsx("span",{className:"text-white text-sm font-medium truncate",children:t.name})]}),e.jsx("span",{className:"text-zinc-300 text-sm font-mono",children:k(t.totalTokens)}),e.jsx("span",{className:"text-zinc-400 text-sm",children:t.sessions}),e.jsx("span",{className:"text-zinc-300 text-sm font-mono",children:k(c)}),e.jsxs("div",{className:"flex items-center gap-1.5",children:[e.jsx("div",{style:{width:"36px",height:"4px",backgroundColor:"#27272a",borderRadius:"2px",overflow:"hidden"},children:e.jsx("div",{style:{width:`${t.outputRatio*100}%`,height:"100%",backgroundColor:"#6366f1",borderRadius:"2px"}})}),e.jsx("span",{className:"text-zinc-400 text-xs",children:w(t.outputRatio*100)})]}),e.jsx("span",{className:v("text-sm font-mono",t.wastePercent>15?"text-rose-400":t.wastePercent>10?"text-amber-400":"text-emerald-400"),children:w(t.wastePercent)}),e.jsx("span",{className:"text-zinc-400 text-sm font-mono",children:p(t.cost)}),e.jsx(B,{data:t.trend,barColor:z(t.model),height:24})]})}),o&&e.jsxs("div",{style:{padding:"16px 24px 20px",borderBottom:"1px solid #27272a",backgroundColor:"rgba(39,39,42,0.3)"},children:[e.jsxs("div",{className:"grid grid-cols-2 lg:grid-cols-4 gap-4 mb-4",children:[e.jsxs("div",{children:[e.jsx("div",{className:"text-zinc-500 text-xs mb-1",children:"Input Tokens"}),e.jsx("div",{className:"text-white font-mono text-sm",children:k(t.inputTokens)})]}),e.jsxs("div",{children:[e.jsx("div",{className:"text-zinc-500 text-xs mb-1",children:"Output Tokens"}),e.jsx("div",{className:"text-white font-mono text-sm",children:k(t.outputTokens)})]}),e.jsxs("div",{children:[e.jsx("div",{className:"text-zinc-500 text-xs mb-1",children:"Model"}),e.jsx("div",{className:"text-sm font-medium",style:{color:z(t.model)},children:t.model})]}),e.jsxs("div",{children:[e.jsx("div",{className:"text-zinc-500 text-xs mb-1",children:"Team"}),e.jsx("div",{className:"text-zinc-300 text-sm",children:t.teamId})]})]}),e.jsxs("div",{children:[e.jsx("div",{className:"text-zinc-500 text-xs mb-2",children:"Token Split (Input vs Output)"}),e.jsxs("div",{style:{height:"12px",borderRadius:"6px",overflow:"hidden",display:"flex",maxWidth:"360px"},children:[e.jsx("div",{style:{flex:t.inputTokens,backgroundColor:"#6366f1"}}),e.jsx("div",{style:{flex:t.outputTokens,backgroundColor:"#10b981"}})]}),e.jsxs("div",{className:"flex gap-4 mt-1.5",children:[e.jsxs("span",{className:"text-xs text-zinc-500",children:[e.jsx("span",{style:{color:"#6366f1"},children:"●"})," Input ",w(t.inputTokens/t.totalTokens*100)]}),e.jsxs("span",{className:"text-xs text-zinc-500",children:[e.jsx("span",{style:{color:"#10b981"},children:"●"})," Output ",w(t.outputTokens/t.totalTokens*100)]})]})]})]})]},t.id)}),h.length===0&&e.jsx("div",{className:"p-8 text-center text-zinc-500 text-sm",children:"No agents match the current filter."})]})]})}function F(){const[s,x]=N.useState(new Set),[r,d]=N.useState(new Set),[l,u]=N.useState("all"),y=["compression","pruning","routing","caching"],f=C.reduce((t,o)=>t+o.estimatedCostSavings,0),m=C.filter(t=>s.has(t.id)).reduce((t,o)=>t+o.estimatedCostSavings,0),j=C.filter(t=>s.has(t.id)).reduce((t,o)=>t+o.estimatedSavings,0),h=C.filter(t=>!(r.has(t.id)||l!=="all"&&t.category!==l));function i(t){const o=new Set(s);o.add(t),x(o)}function a(t){const o=new Set(s);o.delete(t),x(o)}function n(t){const o=new Set(r);o.add(t),d(o)}return e.jsxs("div",{className:"space-y-4",children:[e.jsxs("div",{className:"bg-zinc-900 border border-zinc-800 rounded-xl p-4",children:[e.jsxs("div",{className:"flex items-center justify-between flex-wrap gap-3",children:[e.jsxs("div",{children:[e.jsx("div",{className:"text-white font-semibold",children:"Optimization Opportunities"}),e.jsxs("div",{className:"text-zinc-400 text-xs mt-0.5",children:[C.length," recommendations · ",p(f),"/mo potential savings"]})]}),e.jsxs("div",{className:"flex items-center gap-6",children:[e.jsxs("div",{children:[e.jsx("div",{className:"text-zinc-500 text-xs",children:"Applied"}),e.jsx("div",{className:"text-emerald-400 font-bold text-lg",children:s.size})]}),e.jsxs("div",{children:[e.jsx("div",{className:"text-zinc-500 text-xs",children:"Savings Locked In"}),e.jsxs("div",{className:"text-white font-bold text-lg",children:[p(m),e.jsx("span",{className:"text-zinc-500 text-xs font-normal",children:"/mo"})]})]})]})]}),s.size>0&&e.jsxs("div",{className:"mt-3 pt-3 border-t border-zinc-800",children:[e.jsxs("div",{className:"flex items-center justify-between mb-1",children:[e.jsx("span",{className:"text-zinc-500 text-xs",children:"Progress toward potential"}),e.jsx("span",{className:"text-zinc-400 text-xs",children:w(m/f*100)})]}),e.jsx("div",{style:{height:"6px",backgroundColor:"#27272a",borderRadius:"3px",overflow:"hidden"},children:e.jsx("div",{style:{width:`${m/f*100}%`,height:"100%",backgroundColor:"#34d399",borderRadius:"3px"}})}),e.jsxs("div",{className:"text-zinc-500 text-xs mt-1",children:[k(j)," tokens / month saved"]})]})]}),e.jsxs("div",{className:"flex items-center gap-2 flex-wrap",children:[e.jsx("button",{onClick:()=>u("all"),className:v("px-3 py-1 rounded-lg text-sm border transition-colors",l==="all"?"bg-indigo-600 border-indigo-500 text-white":"border-zinc-800 text-zinc-400 hover:text-white"),children:"All"}),y.map(t=>e.jsxs("button",{onClick:()=>u(t),className:v("px-3 py-1 rounded-lg text-sm border transition-colors capitalize",l===t?"bg-indigo-600 border-indigo-500 text-white":"border-zinc-800 text-zinc-400 hover:text-white"),children:[I(t)," ",t]},t))]}),e.jsxs("div",{className:"space-y-3",children:[h.map(t=>{const o=s.has(t.id);return e.jsx("div",{className:v("bg-zinc-900 border rounded-xl p-5 transition-colors",o?"border-emerald-400/30":"border-zinc-800"),children:e.jsxs("div",{className:"flex items-start justify-between gap-4",children:[e.jsxs("div",{className:"flex-1 min-w-0",children:[e.jsxs("div",{className:"flex items-center gap-2 mb-2 flex-wrap",children:[e.jsxs("span",{className:v("text-xs px-2 py-0.5 rounded-full border font-medium capitalize",M(t.category)),children:[I(t.category)," ",t.category]}),e.jsxs("span",{className:v("text-xs px-2 py-0.5 rounded-full border font-medium capitalize",A(t.effort)),children:[t.effort," effort"]}),o&&e.jsx("span",{className:"text-xs px-2 py-0.5 rounded-full border bg-emerald-400/10 border-emerald-400/20 text-emerald-400 font-medium",children:"✓ Applied"})]}),e.jsx("h4",{className:"text-white font-semibold text-sm mb-1",children:t.title}),e.jsx("p",{className:"text-zinc-400 text-sm leading-relaxed",children:t.description}),e.jsxs("div",{className:"flex items-center gap-4 mt-2.5 flex-wrap",children:[e.jsxs("span",{className:"text-zinc-500 text-xs",children:["Est. cost savings:"," ",e.jsxs("span",{className:"text-emerald-400 font-semibold",children:[p(t.estimatedCostSavings),"/mo"]})]}),e.jsxs("span",{className:"text-zinc-500 text-xs",children:["Tokens saved:"," ",e.jsx("span",{className:"text-indigo-400 font-semibold",children:k(t.estimatedSavings)})]}),e.jsxs("span",{className:"text-zinc-500 text-xs",children:["Affects:"," ",e.jsxs("span",{className:"text-zinc-300",children:[t.agentIds.length," agent",t.agentIds.length>1?"s":""]})]})]})]}),e.jsx("div",{className:"flex items-center gap-2 flex-shrink-0",children:o?e.jsx("button",{onClick:()=>a(t.id),className:"px-3 py-1.5 border border-zinc-700 hover:border-zinc-600 text-zinc-400 hover:text-white text-sm rounded-lg transition-colors",children:"Undo"}):e.jsxs(e.Fragment,{children:[e.jsx("button",{onClick:()=>i(t.id),className:"px-3 py-1.5 bg-indigo-600 hover:bg-indigo-500 text-white text-sm rounded-lg transition-colors font-medium",children:"Apply"}),e.jsx("button",{onClick:()=>n(t.id),className:"px-2 py-1.5 text-zinc-600 hover:text-zinc-400 text-sm rounded-lg transition-colors",title:"Dismiss","aria-label":"Dismiss recommendation",children:"✕"})]})})]})},t.id)}),h.length===0&&e.jsx("div",{className:"bg-zinc-900 border border-zinc-800 rounded-xl p-8 text-center",children:e.jsx("div",{className:"text-zinc-500 text-sm",children:"No recommendations in this category."})})]}),r.size>0&&e.jsxs("button",{onClick:()=>d(new Set),className:"text-zinc-600 hover:text-zinc-400 text-xs transition-colors",children:[r.size," recommendation",r.size>1?"s":""," dismissed — restore all"]})]})}function U(){const s={};for(const x of b)s[x.id]=x.budget;return s}function W(){const[s,x]=N.useState(U()),[r,d]=N.useState(null),[l,u]=N.useState("");function y(n){d(n),u(String(s[n]))}function f(){if(r!==null){const n=parseFloat(l);!isNaN(n)&&n>=0&&x({...s,[r]:n}),d(null),u("")}}const m=Object.values(s).reduce((n,t)=>n+t,0),j=b.reduce((n,t)=>n+t.cost,0),h=b.filter(n=>n.cost>s[n.id]),i=m>0?j/m*100:0,a=Math.max(...b.map(n=>Math.max(s[n.id]??0,n.cost)));return e.jsxs("div",{className:"space-y-6",children:[e.jsxs("div",{className:"grid grid-cols-1 lg:grid-cols-3 gap-4",children:[e.jsx(T,{title:"Total Budget",value:p(m),sub:"All agents, current period"}),e.jsx(T,{title:"Total Actual Spend",value:p(j),sub:`${w(i)} of total budget utilized`,valueClass:i>90?"text-rose-400":i>75?"text-amber-400":"text-emerald-400"}),e.jsx(T,{title:"Remaining Budget",value:p(m-j),sub:`${h.length} agent${h.length!==1?"s":""} over budget`,valueClass:m-j<0?"text-rose-400":"text-white"})]}),h.length>0&&e.jsxs("div",{className:"bg-rose-400/10 border border-rose-400/20 rounded-xl p-4",children:[e.jsxs("div",{className:"text-rose-400 font-semibold text-sm mb-1",children:[h.length," agent",h.length>1?"s":""," over budget"]}),e.jsx("div",{className:"flex flex-wrap gap-2",children:h.map(n=>e.jsxs("span",{className:"text-xs text-rose-300 bg-rose-400/10 px-2 py-0.5 rounded-full border border-rose-400/20",children:[n.name,": +",p(n.cost-s[n.id])," over"]},n.id))})]}),e.jsxs("div",{className:"bg-zinc-900 border border-zinc-800 rounded-xl p-5",children:[e.jsx("h3",{className:"text-white font-semibold mb-4",children:"Budget vs Actual — Per Agent"}),e.jsx("div",{className:"space-y-4",children:b.map(n=>{const t=s[n.id]??0,o=n.cost>t,c=t>0?Math.min(150,n.cost/t*100):0,g=o?"#f43f5e":c>75?"#f59e0b":"#10b981";return e.jsxs("div",{children:[e.jsxs("div",{className:"flex items-center justify-between mb-1.5",children:[e.jsxs("div",{className:"flex items-center gap-2",children:[e.jsx("div",{style:{width:"8px",height:"8px",borderRadius:"50%",backgroundColor:z(n.model)}}),e.jsx("span",{className:"text-white text-sm font-medium",children:n.name}),o&&e.jsx("span",{className:"text-xs text-rose-400 bg-rose-400/10 border border-rose-400/20 px-1.5 py-0.5 rounded-full",children:"Over"})]}),e.jsxs("div",{className:"flex items-center gap-3",children:[e.jsxs("span",{className:"text-zinc-500 text-xs font-mono",children:[p(n.cost)," ",e.jsx("span",{className:"text-zinc-700",children:"/"})," ",p(t)]}),e.jsx("span",{className:v("text-xs font-mono",o?"text-rose-400":c>75?"text-amber-400":"text-emerald-400"),children:w(n.cost/(t||1)*100)})]})]}),e.jsxs("div",{style:{height:"8px",backgroundColor:"#27272a",borderRadius:"4px",position:"relative",overflow:"visible"},children:[e.jsx("div",{style:{position:"absolute",left:`${t/a*100}%`,top:"-3px",bottom:"-3px",width:"2px",backgroundColor:"#52525b",borderRadius:"1px",zIndex:2}}),e.jsx("div",{style:{width:`${Math.min(100,n.cost/a*100)}%`,height:"100%",backgroundColor:g,borderRadius:"4px"}})]})]},n.id)})}),e.jsxs("div",{className:"flex items-center gap-4 mt-4 flex-wrap",children:[e.jsxs("span",{className:"text-xs text-zinc-500 flex items-center gap-1.5",children:[e.jsx("div",{style:{width:"8px",height:"8px",backgroundColor:"#10b981",borderRadius:"2px"}}),"Under 75%"]}),e.jsxs("span",{className:"text-xs text-zinc-500 flex items-center gap-1.5",children:[e.jsx("div",{style:{width:"8px",height:"8px",backgroundColor:"#f59e0b",borderRadius:"2px"}}),"75–100%"]}),e.jsxs("span",{className:"text-xs text-zinc-500 flex items-center gap-1.5",children:[e.jsx("div",{style:{width:"8px",height:"8px",backgroundColor:"#f43f5e",borderRadius:"2px"}}),"Over budget"]}),e.jsxs("span",{className:"text-xs text-zinc-500 flex items-center gap-1.5",children:[e.jsx("div",{style:{width:"2px",height:"10px",backgroundColor:"#52525b",borderRadius:"1px"}}),"Budget limit"]})]})]}),e.jsxs("div",{className:"bg-zinc-900 border border-zinc-800 rounded-xl p-5",children:[e.jsxs("div",{className:"flex items-center justify-between mb-4",children:[e.jsx("h3",{className:"text-white font-semibold",children:"Budget Allocation Editor"}),e.jsx("span",{className:"text-zinc-500 text-xs",children:"Click any budget to edit"})]}),e.jsx("div",{className:"space-y-2",children:b.map(n=>{const t=s[n.id]??0,o=r===n.id,c=n.cost>t,g=t>0?n.cost/t*100:0;return e.jsxs("div",{className:v("flex items-center gap-4 p-3 rounded-lg border transition-colors",c?"border-rose-400/30 bg-rose-400/5":"border-zinc-800 hover:border-zinc-700"),children:[e.jsx("div",{style:{width:"28px",height:"28px",borderRadius:"50%",backgroundColor:z(n.model),display:"flex",alignItems:"center",justifyContent:"center",flexShrink:0,fontSize:"11px",color:"white",fontWeight:700},children:n.name[0]}),e.jsxs("div",{style:{flex:1,minWidth:0},children:[e.jsxs("div",{className:"flex items-center gap-2",children:[e.jsx("span",{className:"text-white text-sm font-medium",children:n.name}),e.jsx("span",{className:"text-zinc-600 text-xs hidden sm:inline",children:n.model})]}),e.jsxs("div",{className:"flex items-center gap-2 mt-0.5",children:[e.jsx("div",{style:{width:"80px",height:"3px",backgroundColor:"#27272a",borderRadius:"2px",overflow:"hidden"},children:e.jsx("div",{style:{width:`${Math.min(100,g)}%`,height:"100%",backgroundColor:c?"#f43f5e":g>75?"#f59e0b":"#10b981"}})}),e.jsxs("span",{className:"text-zinc-500 text-xs",children:[w(g)," used"]}),c&&e.jsxs("span",{className:"text-rose-400 text-xs",children:["+",p(n.cost-t)," over"]})]})]}),e.jsxs("span",{className:"text-zinc-500 text-xs font-mono hidden md:inline",children:["Actual: ",p(n.cost)]}),o?e.jsxs("div",{className:"flex items-center gap-1",children:[e.jsx("span",{className:"text-zinc-400 text-sm",children:"$"}),e.jsx("input",{type:"number",value:l,onChange:S=>u(S.target.value),onBlur:f,onKeyDown:S=>{S.key==="Enter"&&f(),S.key==="Escape"&&(d(null),u(""))},autoFocus:!0,className:"bg-zinc-800 border border-indigo-500 text-white rounded px-2 py-1 text-sm font-mono w-20 outline-none",min:"0",step:"0.01"}),e.jsx("button",{onClick:f,className:"text-emerald-400 hover:text-emerald-300 text-xs px-1 transition-colors",children:"✓"})]}):e.jsxs("button",{onClick:()=>y(n.id),className:"flex items-center gap-1.5 text-sm font-mono text-zinc-300 hover:text-white border border-zinc-700 hover:border-zinc-600 px-2 py-1 rounded transition-colors",children:[p(t),e.jsx("span",{className:"text-zinc-600 text-xs",children:"✎"})]})]},n.id)})}),e.jsxs("div",{className:"mt-4 pt-4 border-t border-zinc-800 flex items-center justify-between",children:[e.jsx("span",{className:"text-zinc-500 text-sm",children:"Total budget allocation"}),e.jsxs("div",{className:"flex items-center gap-3",children:[e.jsxs("span",{className:"text-zinc-500 text-xs font-mono",children:["Actual: ",p(j)]}),e.jsx("span",{className:"text-white font-semibold font-mono",children:p(m)})]})]})]})]})}function H(){const[s,x]=N.useState("overview"),r=[{id:"overview",label:"Overview"},{id:"analysis",label:"Analysis"},{id:"optimization",label:"Optimization"},{id:"budget",label:"Budget"}];return e.jsx("div",{className:"min-h-screen bg-zinc-950 text-white p-6",children:e.jsxs("div",{className:"max-w-7xl mx-auto space-y-6",children:[e.jsxs("div",{className:"flex items-start justify-between gap-4",children:[e.jsxs("div",{children:[e.jsx("h1",{className:"text-2xl font-bold text-white tracking-tight",children:"Token Usage Optimizer"}),e.jsx("p",{className:"text-zinc-400 text-sm mt-1",children:"Monitor, analyze, and optimize token consumption across all agents"})]}),e.jsxs("div",{className:"flex items-center gap-2 flex-shrink-0",children:[e.jsx("div",{style:{width:"6px",height:"6px",borderRadius:"50%",backgroundColor:"#34d399",boxShadow:"0 0 6px #34d399"}}),e.jsx("span",{className:"text-zinc-500 text-xs font-mono",children:"Live · Updated just now"})]})]}),e.jsx("div",{className:"flex items-center gap-0 border-b border-zinc-800",children:r.map(d=>e.jsx("button",{onClick:()=>x(d.id),className:v("px-4 py-2.5 text-sm font-medium border-b-2 -mb-px transition-colors",s===d.id?"border-indigo-500 text-white":"border-transparent text-zinc-400 hover:text-white hover:border-zinc-700"),children:d.label},d.id))}),s==="overview"&&e.jsx($,{}),s==="analysis"&&e.jsx(E,{}),s==="optimization"&&e.jsx(F,{}),s==="budget"&&e.jsx(W,{})]})})}export{H as default};
