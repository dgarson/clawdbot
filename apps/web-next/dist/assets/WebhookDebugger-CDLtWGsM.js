import{r as c,j as e,c as r}from"./index-D2H6hWpW.js";const l=[{id:"ep1",url:"https://api.acme.com/webhooks/orders",description:"Order processing system",active:!0,events:["order.created","order.updated","payment.succeeded","payment.failed"],secret:"whsec_•••••••••••••",method:"POST",createdAt:"2024-01-15",lastDelivery:"2m ago",successRate:98.4,deliveryCount:14829},{id:"ep2",url:"https://crm.bigco.io/api/v1/events",description:"CRM integration",active:!0,events:["user.created","user.deleted","subscription.renewed"],secret:"whsec_•••••••••••••",method:"POST",createdAt:"2024-02-01",lastDelivery:"8m ago",successRate:99.1,deliveryCount:8271},{id:"ep3",url:"https://analytics.internal/ingest",description:"Analytics pipeline",active:!0,events:["order.created","user.created","payment.succeeded","refund.issued"],secret:"whsec_•••••••••••••",method:"POST",createdAt:"2024-03-10",lastDelivery:"1m ago",successRate:87.3,deliveryCount:22194},{id:"ep4",url:"https://legacy.oldapp.com/notify",description:"Legacy integration — migration in progress",active:!1,events:["payment.succeeded"],secret:"whsec_•••••••••••••",method:"POST",createdAt:"2023-08-20",lastDelivery:"2d ago",successRate:72.1,deliveryCount:3092}],d=[{id:"d1",endpointId:"ep3",eventType:"order.created",eventId:"evt_01HX8K9M4P",status:"failed",attempt:3,maxAttempts:5,responseCode:503,responseTime:4201,sentAt:"10:42:31",nextRetry:"10:52:31",requestBody:JSON.stringify({id:"evt_01HX8K9M4P",type:"order.created",data:{orderId:"ord_001",amount:149.99,currency:"USD",status:"confirmed"}},null,2),responseBody:'{"error": "Service Unavailable", "message": "Database connection timeout"}',requestHeaders:{"Content-Type":"application/json","X-Webhook-Secret":"sha256=abc123...","X-Event-ID":"evt_01HX8K9M4P"}},{id:"d2",endpointId:"ep1",eventType:"payment.succeeded",eventId:"evt_01HX8J7L3Q",status:"delivered",attempt:1,maxAttempts:5,responseCode:200,responseTime:142,sentAt:"10:41:15",nextRetry:null,requestBody:JSON.stringify({id:"evt_01HX8J7L3Q",type:"payment.succeeded",data:{paymentId:"pay_001",amount:299,currency:"USD",method:"card"}},null,2),responseBody:'{"received": true, "processing": "queued"}',requestHeaders:{"Content-Type":"application/json","X-Webhook-Secret":"sha256=def456...","X-Event-ID":"evt_01HX8J7L3Q"}},{id:"d3",endpointId:"ep2",eventType:"user.created",eventId:"evt_01HX8H5K2N",status:"delivered",attempt:1,maxAttempts:5,responseCode:201,responseTime:89,sentAt:"10:39:02",nextRetry:null,requestBody:JSON.stringify({id:"evt_01HX8H5K2N",type:"user.created",data:{userId:"usr_001",email:"new@example.com",plan:"pro"}},null,2),responseBody:'{"status": "created", "contactId": "crm_99821"}',requestHeaders:{"Content-Type":"application/json","X-Webhook-Secret":"sha256=ghi789..."}},{id:"d4",endpointId:"ep3",eventType:"payment.succeeded",eventId:"evt_01HX8G3J1M",status:"retrying",attempt:2,maxAttempts:5,responseCode:500,responseTime:2800,sentAt:"10:38:45",nextRetry:"10:43:45",requestBody:JSON.stringify({id:"evt_01HX8G3J1M",type:"payment.succeeded",data:{paymentId:"pay_002",amount:49.99}},null,2),responseBody:'{"error": "Internal Server Error"}',requestHeaders:{"Content-Type":"application/json","X-Webhook-Secret":"sha256=jkl012..."}},{id:"d5",endpointId:"ep1",eventType:"order.updated",eventId:"evt_01HX8F2H0L",status:"delivered",attempt:1,maxAttempts:5,responseCode:200,responseTime:204,sentAt:"10:35:12",nextRetry:null,requestBody:JSON.stringify({id:"evt_01HX8F2H0L",type:"order.updated",data:{orderId:"ord_002",status:"shipped",trackingId:"1Z999AA10123456784"}},null,2),responseBody:'{"ok": true}',requestHeaders:{"Content-Type":"application/json","X-Webhook-Secret":"sha256=mno345..."}},{id:"d6",endpointId:"ep3",eventType:"user.created",eventId:"evt_01HX8E1G9K",status:"failed",attempt:5,maxAttempts:5,responseCode:404,responseTime:89,sentAt:"10:30:00",nextRetry:null,requestBody:JSON.stringify({id:"evt_01HX8E1G9K",type:"user.created",data:{userId:"usr_002"}},null,2),responseBody:'{"error": "Not Found", "detail": "Ingest endpoint deprecated — use /v2/ingest"}',requestHeaders:{"Content-Type":"application/json","X-Webhook-Secret":"sha256=pqr678..."}}],h={delivered:"bg-emerald-500/15 border-emerald-500/30 text-emerald-400",failed:"bg-rose-500/15 border-rose-500/40 text-rose-400",pending:"bg-zinc-700/50 border-zinc-600 text-zinc-400",retrying:"bg-amber-500/15 border-amber-500/30 text-amber-400"},b={delivered:"bg-emerald-400",failed:"bg-rose-400",pending:"bg-zinc-500",retrying:"bg-amber-400 animate-pulse"},v={"order.created":"text-indigo-400","order.updated":"text-sky-400","payment.succeeded":"text-emerald-400","payment.failed":"text-rose-400","user.created":"text-purple-400","user.deleted":"text-rose-400","subscription.renewed":"text-amber-400","refund.issued":"text-orange-400"},g=i=>i?i>=200&&i<300?"text-emerald-400":i>=400&&i<500?"text-amber-400":i>=500?"text-rose-400":"text-zinc-400":"text-zinc-500",T=["order.created","order.updated","payment.succeeded","payment.failed","user.created","user.deleted","subscription.renewed","refund.issued"];function R(){const[i,f]=c.useState("deliveries"),[s,y]=c.useState(d[0]),[p,j]=c.useState("all"),[a,o]=c.useState({endpointId:"ep1",eventType:"order.created",status:"idle"}),[x,N]=c.useState("request"),z=d.filter(t=>p==="all"||t.status===p),m=d.filter(t=>t.status==="failed"||t.status==="retrying").length,w=()=>{o(t=>({...t,status:"sending"})),setTimeout(()=>{o(t=>({...t,status:"success"}))},1500)};return e.jsxs("div",{className:"flex flex-col h-full bg-zinc-950 text-white",children:[e.jsxs("div",{className:"flex-none px-6 py-4 border-b border-zinc-800",children:[e.jsxs("div",{className:"flex items-center justify-between",children:[e.jsxs("div",{children:[e.jsx("h1",{className:"text-lg font-semibold text-white",children:"Webhook Debugger"}),e.jsxs("p",{className:"text-xs text-zinc-400 mt-0.5",children:[l.filter(t=>t.active).length," active endpoints · ",d.length," recent deliveries"]})]}),e.jsx("div",{className:"flex items-center gap-2",children:m>0&&e.jsxs("div",{className:"flex items-center gap-1.5 px-3 py-1.5 rounded-lg bg-rose-500/10 border border-rose-500/30",children:[e.jsx("div",{className:"w-1.5 h-1.5 rounded-full bg-rose-400 animate-pulse"}),e.jsxs("span",{className:"text-xs text-rose-400",children:[m," failing"]})]})})]}),e.jsx("div",{className:"flex gap-4 mt-3",children:[{label:"Delivered",value:d.filter(t=>t.status==="delivered").length,color:"text-emerald-400"},{label:"Failed",value:d.filter(t=>t.status==="failed").length,color:"text-rose-400"},{label:"Retrying",value:d.filter(t=>t.status==="retrying").length,color:"text-amber-400"},{label:"Total Deliveries",value:l.reduce((t,n)=>t+n.deliveryCount,0).toLocaleString(),color:"text-zinc-300"}].map(t=>e.jsxs("div",{children:[e.jsx("span",{className:r("text-base font-bold",t.color),children:t.value}),e.jsx("span",{className:"text-zinc-500 text-xs ml-1.5",children:t.label})]},t.label))}),e.jsx("div",{className:"flex gap-1 mt-3",children:["deliveries","endpoints","test","logs"].map(t=>e.jsxs("button",{onClick:()=>f(t),className:r("px-3 py-1.5 rounded-lg text-xs font-medium capitalize transition-colors",i===t?"bg-zinc-700 text-white":"text-zinc-400 hover:text-white hover:bg-zinc-800"),children:[t.charAt(0).toUpperCase()+t.slice(1),t==="deliveries"&&m>0&&e.jsx("span",{className:"ml-1.5 px-1.5 py-0.5 rounded-full bg-rose-500 text-[9px] font-bold text-white",children:m})]},t))})]}),e.jsxs("div",{className:"flex-1 overflow-hidden",children:[i==="deliveries"&&e.jsxs("div",{className:"flex h-full",children:[e.jsxs("div",{className:"w-[44%] flex-none border-r border-zinc-800 flex flex-col",children:[e.jsx("div",{className:"flex-none px-4 py-2.5 border-b border-zinc-800 flex items-center gap-1",children:["all","delivered","failed","retrying"].map(t=>e.jsx("button",{onClick:()=>j(t),className:r("px-2 py-0.5 rounded text-xs capitalize transition-colors",p===t?"bg-zinc-700 text-white":"text-zinc-500 hover:text-zinc-300"),children:t},t))}),e.jsx("div",{className:"flex-1 overflow-y-auto",children:z.map(t=>{const n=l.find(u=>u.id===t.endpointId);return e.jsxs("button",{onClick:()=>y(t),className:r("w-full text-left px-4 py-3 border-b border-zinc-800/60 hover:bg-zinc-900 transition-colors",(s==null?void 0:s.id)===t.id&&"bg-zinc-900 border-l-2 border-l-indigo-500"),children:[e.jsxs("div",{className:"flex items-center justify-between gap-2",children:[e.jsxs("div",{className:"flex items-center gap-2 min-w-0",children:[e.jsx("div",{className:r("w-1.5 h-1.5 rounded-full flex-none",b[t.status])}),e.jsx("span",{className:r("text-xs font-medium",v[t.eventType]),children:t.eventType})]}),e.jsxs("div",{className:"flex items-center gap-2 flex-none",children:[e.jsx("span",{className:r("px-1.5 py-0.5 rounded border text-[10px]",h[t.status]),children:t.status}),t.responseCode&&e.jsx("span",{className:r("text-xs font-mono font-semibold",g(t.responseCode)),children:t.responseCode})]})]}),e.jsxs("div",{className:"flex items-center gap-2 mt-1 pl-3.5 text-[10px] text-zinc-600",children:[e.jsx("span",{className:"font-mono text-zinc-500 truncate",children:n==null?void 0:n.url.replace("https://","").slice(0,32)}),t.responseTime&&e.jsxs("span",{children:[t.responseTime,"ms"]}),e.jsxs("span",{children:["att. ",t.attempt,"/",t.maxAttempts]}),e.jsx("span",{className:"ml-auto",children:t.sentAt})]})]},t.id)})})]}),e.jsx("div",{className:"flex-1 overflow-y-auto p-5",children:s&&e.jsxs("div",{className:"space-y-4",children:[e.jsxs("div",{children:[e.jsxs("div",{className:"flex items-center gap-2",children:[e.jsx("div",{className:r("w-2 h-2 rounded-full",b[s.status])}),e.jsx("span",{className:r("font-medium",v[s.eventType]),children:s.eventType}),e.jsx("span",{className:r("px-2 py-0.5 rounded border text-xs",h[s.status]),children:s.status})]}),e.jsx("div",{className:"font-mono text-xs text-zinc-500 mt-1",children:s.eventId})]}),e.jsxs("div",{className:"grid grid-cols-2 gap-2 text-xs",children:[e.jsxs("div",{className:"bg-zinc-900 rounded-lg p-3 border border-zinc-800",children:[e.jsx("div",{className:"text-zinc-500",children:"Response Code"}),e.jsx("div",{className:r("text-lg font-bold mt-0.5",g(s.responseCode)),children:s.responseCode??"—"})]}),e.jsxs("div",{className:"bg-zinc-900 rounded-lg p-3 border border-zinc-800",children:[e.jsx("div",{className:"text-zinc-500",children:"Response Time"}),e.jsx("div",{className:r("text-lg font-bold mt-0.5",s.responseTime&&s.responseTime>2e3?"text-rose-400":"text-white"),children:s.responseTime?`${s.responseTime}ms`:"—"})]}),e.jsxs("div",{className:"bg-zinc-900 rounded-lg p-3 border border-zinc-800",children:[e.jsx("div",{className:"text-zinc-500",children:"Attempt"}),e.jsxs("div",{className:"text-lg font-bold text-white mt-0.5",children:[s.attempt," / ",s.maxAttempts]})]}),e.jsxs("div",{className:"bg-zinc-900 rounded-lg p-3 border border-zinc-800",children:[e.jsx("div",{className:"text-zinc-500",children:"Sent At"}),e.jsx("div",{className:"text-sm font-medium text-zinc-300 mt-0.5",children:s.sentAt})]})]}),s.nextRetry&&e.jsxs("div",{className:"flex items-center gap-2 px-3 py-2 rounded-lg bg-amber-500/10 border border-amber-500/30",children:[e.jsx("div",{className:"w-1.5 h-1.5 rounded-full bg-amber-400 animate-pulse"}),e.jsxs("span",{className:"text-xs text-amber-400",children:["Next retry at ",s.nextRetry]}),e.jsx("button",{className:"ml-auto px-2 py-0.5 rounded text-xs bg-amber-500/20 text-amber-400 hover:bg-amber-500/30 transition-colors",children:"Retry Now"})]}),e.jsxs("div",{children:[e.jsx("div",{className:"flex gap-1 mb-2",children:["request","response","headers"].map(t=>e.jsx("button",{onClick:()=>N(t),className:r("px-2.5 py-1 rounded text-xs font-medium capitalize transition-colors",x===t?"bg-zinc-700 text-white":"text-zinc-500 hover:text-zinc-300"),children:t},t))}),e.jsx("div",{className:"bg-zinc-900 rounded-xl border border-zinc-800 overflow-hidden",children:e.jsxs("pre",{className:"text-[11px] font-mono text-zinc-300 p-4 overflow-x-auto max-h-64 leading-relaxed",children:[x==="request"&&s.requestBody,x==="response"&&s.responseBody,x==="headers"&&JSON.stringify(s.requestHeaders,null,2)]})})]})]})})]}),i==="endpoints"&&e.jsx("div",{className:"overflow-y-auto h-full p-5",children:e.jsx("div",{className:"space-y-4",children:l.map(t=>e.jsxs("div",{className:r("bg-zinc-900 rounded-xl p-5 border",t.active?"border-zinc-800":"border-zinc-800/40 opacity-60"),children:[e.jsxs("div",{className:"flex items-start justify-between gap-4",children:[e.jsxs("div",{className:"flex-1 min-w-0",children:[e.jsxs("div",{className:"flex items-center gap-2",children:[e.jsx("div",{className:r("w-2 h-2 rounded-full",t.active?"bg-emerald-400":"bg-zinc-600")}),e.jsx("span",{className:"font-mono text-sm text-white truncate",children:t.url})]}),e.jsx("p",{className:"text-xs text-zinc-500 mt-1 pl-4",children:t.description})]}),e.jsxs("div",{className:"flex items-center gap-3 flex-none",children:[e.jsxs("div",{className:"text-right text-xs",children:[e.jsxs("div",{className:r("font-bold",t.successRate>=95?"text-emerald-400":t.successRate>=80?"text-amber-400":"text-rose-400"),children:[t.successRate,"%"]}),e.jsx("div",{className:"text-zinc-600",children:"success rate"})]}),e.jsxs("div",{className:"text-right text-xs",children:[e.jsx("div",{className:"text-white font-semibold",children:t.deliveryCount.toLocaleString()}),e.jsx("div",{className:"text-zinc-600",children:"deliveries"})]}),e.jsx("button",{className:"px-2.5 py-1 rounded text-xs bg-zinc-800 hover:bg-zinc-700 text-zinc-300 transition-colors",children:"Edit"})]})]}),e.jsx("div",{className:"mt-3 flex flex-wrap gap-1.5 pl-4",children:t.events.map(n=>e.jsx("span",{className:r("px-2 py-0.5 rounded bg-zinc-800 text-[10px] font-mono",v[n]),children:n},n))}),e.jsxs("div",{className:"flex items-center gap-3 mt-2 pl-4 text-[10px] text-zinc-600",children:[e.jsxs("span",{children:["Method: ",t.method]}),e.jsx("span",{children:"·"}),e.jsxs("span",{children:["Last delivery: ",t.lastDelivery]}),e.jsx("span",{children:"·"}),e.jsxs("span",{children:["Created: ",t.createdAt]})]})]},t.id))})}),i==="test"&&e.jsx("div",{className:"overflow-y-auto h-full p-5",children:e.jsx("div",{className:"max-w-xl",children:e.jsxs("div",{className:"bg-zinc-900 rounded-xl p-5 border border-zinc-800 space-y-4",children:[e.jsx("h2",{className:"text-sm font-semibold text-white",children:"Send Test Webhook"}),e.jsxs("div",{children:[e.jsx("label",{className:"text-xs text-zinc-500 mb-1.5 block",children:"Endpoint"}),e.jsx("select",{value:a.endpointId,onChange:t=>o(n=>({...n,endpointId:t.target.value})),className:"w-full bg-zinc-800 border border-zinc-700 rounded-lg px-3 py-2 text-sm text-zinc-300 focus:outline-none focus:border-indigo-500",children:l.filter(t=>t.active).map(t=>e.jsx("option",{value:t.id,children:t.url},t.id))})]}),e.jsxs("div",{children:[e.jsx("label",{className:"text-xs text-zinc-500 mb-1.5 block",children:"Event Type"}),e.jsx("select",{value:a.eventType,onChange:t=>o(n=>({...n,eventType:t.target.value})),className:"w-full bg-zinc-800 border border-zinc-700 rounded-lg px-3 py-2 text-sm text-zinc-300 focus:outline-none focus:border-indigo-500",children:T.map(t=>e.jsx("option",{value:t,children:t},t))})]}),e.jsxs("div",{children:[e.jsx("label",{className:"text-xs text-zinc-500 mb-1.5 block",children:"Sample Payload"}),e.jsx("div",{className:"bg-zinc-950 rounded-lg border border-zinc-800 p-3 font-mono text-[11px] text-zinc-400",children:JSON.stringify({id:"evt_test_001",type:a.eventType,created:Date.now(),data:{test:!0}},null,2)})]}),e.jsx("button",{onClick:w,disabled:a.status==="sending",className:r("w-full py-2.5 rounded-lg text-sm font-medium transition-colors",a.status==="sending"?"bg-zinc-700 text-zinc-400 cursor-wait":a.status==="success"?"bg-emerald-600 text-white":a.status==="error"?"bg-rose-600 text-white":"bg-indigo-600 hover:bg-indigo-500 text-white"),children:a.status==="sending"?"Sending...":a.status==="success"?"✓ Delivered Successfully":a.status==="error"?"✗ Delivery Failed":"Send Test Webhook"}),a.status==="success"&&e.jsxs("div",{className:"bg-emerald-500/10 rounded-lg border border-emerald-500/30 p-3 text-xs",children:[e.jsx("div",{className:"text-emerald-400 font-semibold mb-1",children:"Test delivery successful"}),e.jsxs("div",{className:"text-zinc-400",children:["Response: 200 OK · 124ms · ",e.jsx("span",{className:"font-mono",children:"{ received: true }"})]})]})]})})}),i==="logs"&&e.jsx("div",{className:"overflow-y-auto h-full p-5",children:e.jsx("div",{className:"font-mono text-[11px] space-y-1.5",children:d.flatMap(t=>{var n;return[{time:t.sentAt,level:"INFO",msg:`Dispatching ${t.eventType} → ${(n=l.find(u=>u.id===t.endpointId))==null?void 0:n.url}`,id:t.id+"-a"},{time:t.sentAt,level:t.status==="delivered"?"INFO":"ERROR",msg:`${t.status==="delivered"?"✓":"✗"} Response ${t.responseCode??"timeout"} (${t.responseTime??"—"}ms) — ${t.status}`,id:t.id+"-b"},...t.nextRetry?[{time:t.nextRetry,level:"WARN",msg:`Scheduled retry ${t.attempt+1}/${t.maxAttempts} for ${t.eventId}`,id:t.id+"-c"}]:[]]}).map(t=>e.jsxs("div",{className:r("flex items-start gap-3 px-3 py-1.5 rounded",t.level==="ERROR"?"bg-rose-500/5 border-l-2 border-rose-500/40":t.level==="WARN"?"bg-amber-500/5 border-l-2 border-amber-500/30":"bg-zinc-900/50"),children:[e.jsx("span",{className:"text-zinc-600 flex-none",children:t.time}),e.jsxs("span",{className:r("flex-none font-bold",t.level==="ERROR"?"text-rose-400":t.level==="WARN"?"text-amber-400":"text-sky-400"),children:["[",t.level,"]"]}),e.jsx("span",{className:t.level==="ERROR"?"text-rose-300":t.level==="WARN"?"text-amber-300":"text-zinc-400",children:t.msg})]},t.id))})})]})]})}export{R as default};
