(self.webpackChunk_N_E=self.webpackChunk_N_E||[]).push([[595],{8815:(e,s,a)=>{"use strict";a.d(s,{A:()=>t});let t=(0,a(53573).A)("file-text",[["path",{d:"M15 2H6a2 2 0 0 0-2 2v16a2 2 0 0 0 2 2h12a2 2 0 0 0 2-2V7Z",key:"1rqfz7"}],["path",{d:"M14 2v4a2 2 0 0 0 2 2h4",key:"tnqrlb"}],["path",{d:"M10 9H8",key:"b1mrlr"}],["path",{d:"M16 13H8",key:"t4e002"}],["path",{d:"M16 17H8",key:"z1uh3a"}]])},12583:(e,s,a)=>{"use strict";a.r(s),a.d(s,{default:()=>b});var t=a(80534),l=a(74166),n=a(99197),i=a(28968),r=a.n(i),c=a(29068),d=a(19611),m=a(74765),x=a(86719),u=a(75968),o=a(45253),h=a(71216),f=a(38468),v=a(8118),p=a(8815),g=a(40267),j=a(88431),N=a(44105),y=a(18842),w=a(20432);function b(){var e,s,a;let i=(0,n.useParams)(),b=(0,n.useRouter)(),k=i.agentId,A=(0,c.z)(e=>e.connected),M=(0,c.z)(e=>e.request),{level:S,isAtLeast:z}=(0,d.B)(),[C,E]=l.useState(null),[H,_]=l.useState(null),[q,F]=l.useState(!0),[R,T]=l.useState(null),[Z,$]=l.useState({}),[P,V]=l.useState({}),[W,B]=l.useState(!1),[L,O]=l.useState(!1),[I,Y]=l.useState(null);l.useEffect(()=>{A&&k&&(async()=>{try{let[e,s]=await Promise.all([M("agent.identity.get",{agentId:k}),M("agents.files.list",{agentId:k})]);E(e),_(s);let a={};for(let e of s.files)if(!e.missing)try{let s=await M("agents.files.get",{agentId:k,name:e.name});void 0!==s.file.content&&(a[e.name]=s.file.content)}catch(e){}$(a),V({...a});let t=s.files.find(e=>!e.missing);t&&T(t.name)}catch(e){Y("Failed to load agent details")}finally{F(!1)}})()},[A,M,k]);let D=async e=>{if(A&&!W){B(!0),Y(null),O(!1);try{var s;await M("agents.files.set",{agentId:k,name:e,content:null!=(s=P[e])?s:""}),$(s=>{var a;return{...s,[e]:null!=(a=P[e])?a:""}}),O(!0),setTimeout(()=>O(!1),2e3)}catch(e){Y(e instanceof Error?e.message:"Failed to save file")}finally{B(!1)}}},G=!!R&&P[R]!==Z[R],J=null!=(e=null==C?void 0:C.emoji)?e:"\uD83E\uDD16",K=null!=(s=null==C?void 0:C.name)?s:k;return q?(0,t.jsx)("div",{className:"p-6 max-w-6xl mx-auto",children:(0,t.jsxs)("div",{className:"animate-pulse space-y-4",children:[(0,t.jsx)("div",{className:"h-8 w-48 bg-muted rounded"}),(0,t.jsx)("div",{className:"h-4 w-32 bg-muted rounded"}),(0,t.jsx)("div",{className:"h-96 bg-muted rounded-xl"})]})}):(0,t.jsxs)("div",{className:"p-6 max-w-6xl mx-auto space-y-6",children:[(0,t.jsxs)("div",{className:"flex items-center justify-between",children:[(0,t.jsxs)("div",{className:"flex items-center gap-4",children:[(0,t.jsx)(x.$,{variant:"ghost",size:"icon-sm",onClick:()=>b.push("/agents"),children:(0,t.jsx)(f.A,{className:"h-5 w-5"})}),(0,t.jsxs)("div",{className:"flex items-center gap-3",children:[(0,t.jsx)("div",{className:"flex h-12 w-12 items-center justify-center rounded-xl bg-accent text-2xl",children:J}),(0,t.jsxs)("div",{children:[(0,t.jsx)("h1",{className:"text-xl font-bold tracking-tight",children:K}),(0,t.jsx)("p",{className:"text-sm text-muted-foreground",children:k})]})]})]}),(0,t.jsx)("div",{className:"flex items-center gap-2",children:(0,t.jsx)(x.$,{variant:"outline",asChild:!0,children:(0,t.jsxs)(r(),{href:"/chat?agent=".concat(k),children:[(0,t.jsx)(v.A,{className:"h-4 w-4 mr-2"}),"Chat"]})})})]}),(0,t.jsxs)("div",{className:"flex gap-4 min-h-[500px]",children:[(0,t.jsx)("div",{className:"w-48 shrink-0",children:(0,t.jsxs)(m.Zp,{className:"h-full",children:[(0,t.jsx)(m.aR,{className:"p-3",children:(0,t.jsx)(m.ZB,{className:"text-xs font-medium text-muted-foreground uppercase tracking-wider",children:(0,t.jsx)(h.v,{beginner:"Files",standard:"Agent Files",expert:"Workspace Files"})})}),(0,t.jsx)(m.Wu,{className:"p-2 pt-0",children:(0,t.jsx)("div",{className:"space-y-0.5",children:null==H?void 0:H.files.map(e=>(0,t.jsxs)("button",{onClick:()=>T(e.name),className:"w-full text-left px-2.5 py-1.5 rounded-md text-xs font-medium transition-colors flex items-center gap-2 ".concat(R===e.name?"bg-accent text-accent-foreground":e.missing?"text-muted-foreground/50 hover:bg-accent/50":"text-muted-foreground hover:bg-accent/50"),children:[(0,t.jsx)(p.A,{className:"h-3 w-3 shrink-0"}),(0,t.jsx)("span",{className:"truncate",children:e.name}),P[e.name]!==Z[e.name]&&(0,t.jsx)("span",{className:"h-1.5 w-1.5 rounded-full bg-warning shrink-0"})]},e.name))})})]})}),(0,t.jsx)("div",{className:"flex-1 min-w-0",children:(0,t.jsxs)(m.Zp,{className:"h-full flex flex-col",children:[(0,t.jsxs)(m.aR,{className:"p-3 flex-row items-center justify-between space-y-0",children:[(0,t.jsxs)("div",{className:"flex items-center gap-2",children:[(0,t.jsx)(u.E,{variant:"outline",className:"text-xs font-mono",children:null!=R?R:"No file selected"}),G&&(0,t.jsx)(u.E,{variant:"warning",className:"text-[10px]",children:"Modified"})]}),R&&(0,t.jsxs)("div",{className:"flex items-center gap-1",children:[(0,t.jsxs)(x.$,{variant:"outline",size:"sm",onClick:()=>{R&&void 0!==Z[R]&&V(e=>({...e,[R]:Z[R]}))},disabled:!G,className:"h-7 text-xs",children:[(0,t.jsx)(g.A,{className:"h-3 w-3 mr-1"}),"Revert"]}),(0,t.jsxs)(x.$,{size:"sm",onClick:()=>R&&D(R),disabled:!G||W,className:"h-7 text-xs",children:[W?(0,t.jsx)(j.A,{className:"h-3 w-3 mr-1 animate-spin"}):L?(0,t.jsx)(N.A,{className:"h-3 w-3 mr-1"}):(0,t.jsx)(y.A,{className:"h-3 w-3 mr-1"}),W?"Saving...":L?"Saved!":"Save"]})]})]}),(0,t.jsx)(m.Wu,{className:"flex-1 p-0",children:R?(0,t.jsx)(o.T,{value:null!=(a=P[R])?a:"",onChange:e=>V(s=>({...s,[R]:e.target.value})),className:"h-full min-h-[400px] rounded-none border-0 font-mono text-sm resize-none focus-visible:ring-0",placeholder:"Edit ".concat(R,"...")}):(0,t.jsx)("div",{className:"flex items-center justify-center h-full text-muted-foreground text-sm",children:"Select a file to edit"})})]})})]}),I&&(0,t.jsxs)("div",{className:"flex items-center gap-2 p-3 bg-destructive/10 text-destructive rounded-lg text-sm",children:[(0,t.jsx)(w.A,{className:"h-4 w-4 shrink-0"}),I]})]})}},18842:(e,s,a)=>{"use strict";a.d(s,{A:()=>t});let t=(0,a(53573).A)("save",[["path",{d:"M15.2 3a2 2 0 0 1 1.4.6l3.8 3.8a2 2 0 0 1 .6 1.4V19a2 2 0 0 1-2 2H5a2 2 0 0 1-2-2V5a2 2 0 0 1 2-2z",key:"1c8476"}],["path",{d:"M17 21v-7a1 1 0 0 0-1-1H8a1 1 0 0 0-1 1v7",key:"1ydtos"}],["path",{d:"M7 3v4a1 1 0 0 0 1 1h7",key:"t51u73"}]])},20432:(e,s,a)=>{"use strict";a.d(s,{A:()=>t});let t=(0,a(53573).A)("circle-alert",[["circle",{cx:"12",cy:"12",r:"10",key:"1mglay"}],["line",{x1:"12",x2:"12",y1:"8",y2:"12",key:"1pkeuh"}],["line",{x1:"12",x2:"12.01",y1:"16",y2:"16",key:"4dfq90"}]])},40267:(e,s,a)=>{"use strict";a.d(s,{A:()=>t});let t=(0,a(53573).A)("refresh-cw",[["path",{d:"M3 12a9 9 0 0 1 9-9 9.75 9.75 0 0 1 6.74 2.74L21 8",key:"v9h5vc"}],["path",{d:"M21 3v5h-5",key:"1q7to0"}],["path",{d:"M21 12a9 9 0 0 1-9 9 9.75 9.75 0 0 1-6.74-2.74L3 16",key:"3uifl3"}],["path",{d:"M8 16H3v5",key:"1cv678"}]])},45253:(e,s,a)=>{"use strict";a.d(s,{T:()=>i});var t=a(80534),l=a(74166),n=a(32824);let i=l.forwardRef((e,s)=>{let{className:a,...l}=e;return(0,t.jsx)("textarea",{className:(0,n.cn)("flex min-h-[60px] w-full rounded-lg border border-input bg-transparent px-3 py-2 text-sm shadow-sm placeholder:text-muted-foreground focus-visible:outline-none focus-visible:ring-2 focus-visible:ring-ring disabled:cursor-not-allowed disabled:opacity-50",a),ref:s,...l})});i.displayName="Textarea"},55354:(e,s,a)=>{Promise.resolve().then(a.bind(a,12583))},71216:(e,s,a)=>{"use strict";a.d(s,{v:()=>n});var t=a(80534),l=a(19611);function n(e){let{beginner:s,standard:a,expert:n,className:i}=e,r=(0,l.Y)(e=>e.level);return(0,t.jsx)("span",{className:i,children:{beginner:s,standard:a,expert:n}[r]})}}},e=>{e.O(0,[329,787,572,705,522,358],()=>e(e.s=55354)),_N_E=e.O()}]);