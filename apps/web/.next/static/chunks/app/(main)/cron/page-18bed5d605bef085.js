(self.webpackChunk_N_E=self.webpackChunk_N_E||[]).push([[608],{5554:(e,t,s)=>{"use strict";s.r(t),s.d(t,{default:()=>S});var a=s(80534),n=s(74166),r=s(29068),l=s(19611),c=s(74765),i=s(86719),d=s(75968),o=s(57477),u=s(94517),m=s(71216),x=s(60155),h=s(53573);let y=(0,h.A)("calendar-clock",[["path",{d:"M21 7.5V6a2 2 0 0 0-2-2H5a2 2 0 0 0-2 2v14a2 2 0 0 0 2 2h3.5",key:"1osxxc"}],["path",{d:"M16 2v4",key:"4m81vk"}],["path",{d:"M8 2v4",key:"1cmpym"}],["path",{d:"M3 10h5",key:"r794hk"}],["path",{d:"M17.5 17.5 16 16.3V14",key:"akvzfd"}],["circle",{cx:"16",cy:"16",r:"6",key:"qoo3c4"}]]);var p=s(74350),g=s(62907);let j=(0,h.A)("timer",[["line",{x1:"10",x2:"14",y1:"2",y2:"2",key:"14vaq8"}],["line",{x1:"12",x2:"15",y1:"14",y2:"11",key:"17fdiu"}],["circle",{cx:"12",cy:"14",r:"8",key:"1e1u0o"}]]);var f=s(89214),v=s(20432),N=s(88431),k=s(6021);let b=(0,h.A)("pencil",[["path",{d:"M21.174 6.812a1 1 0 0 0-3.986-3.987L3.842 16.174a2 2 0 0 0-.5.83l-1.321 4.352a.5.5 0 0 0 .623.622l4.353-1.32a2 2 0 0 0 .83-.497z",key:"1a8usu"}],["path",{d:"m15 5 4 4",key:"1mk7zo"}]]);var w=s(83608),A=s(77527);function M(e){let t=Date.now()-e;return t<6e4?"just now":t<36e5?"".concat(Math.floor(t/6e4),"m ago"):t<864e5?"".concat(Math.floor(t/36e5),"h ago"):"".concat(Math.floor(t/864e5),"d ago")}function S(){let e=(0,r.z)(e=>e.connected),t=(0,r.z)(e=>e.request),{isAtLeast:s}=(0,l.B)(),[h,S]=n.useState([]),[E,C]=n.useState(!0),[R,z]=n.useState(new Set),[_,$]=n.useState(new Set),O=n.useCallback(async()=>{if(e)try{var s;let e=await t("cron.list",{});S(null!=(s=e.jobs)?s:[])}catch(e){console.error("Failed to load cron jobs:",e)}finally{C(!1)}},[e,t]);n.useEffect(()=>{O()},[O]);let L=async e=>{z(t=>new Set(t).add(e));try{await t("cron.run",{jobId:e}),await O()}catch(e){console.error("Failed to run job:",e)}finally{z(t=>{let s=new Set(t);return s.delete(e),s})}},D=async e=>{$(t=>new Set(t).add(e.id));try{await t("cron.update",{jobId:e.id,enabled:!e.enabled}),S(t=>t.map(t=>t.id===e.id?{...t,enabled:!t.enabled}:t))}catch(e){console.error("Failed to toggle job:",e)}finally{$(t=>{let s=new Set(t);return s.delete(e.id),s})}};return(0,a.jsxs)("div",{className:"p-6 max-w-7xl mx-auto space-y-6",children:[(0,a.jsxs)("div",{className:"flex items-center justify-between",children:[(0,a.jsxs)("div",{children:[(0,a.jsx)("h1",{className:"text-2xl font-bold tracking-tight",children:(0,a.jsx)(m.v,{beginner:"Automations",standard:"Automations",expert:"Cron Jobs"})}),(0,a.jsx)("p",{className:"text-sm text-muted-foreground mt-1",children:(0,a.jsx)(m.v,{beginner:"Set up tasks that run automatically on a schedule",standard:"Schedule recurring agent tasks and automations",expert:"Manage cron-scheduled agent invocations"})})]}),(0,a.jsxs)(i.$,{children:[(0,a.jsx)(x.A,{className:"h-4 w-4 mr-2"}),(0,a.jsx)(m.v,{beginner:"New Automation",standard:"New Automation",expert:"New Job"})]})]}),(0,a.jsx)(o.w,{}),E?(0,a.jsx)("div",{className:"grid grid-cols-1 md:grid-cols-2 xl:grid-cols-3 gap-4",children:[1,2,3].map(e=>(0,a.jsxs)(c.Zp,{className:"animate-pulse",children:[(0,a.jsxs)(c.aR,{children:[(0,a.jsx)("div",{className:"h-5 w-40 bg-muted rounded"}),(0,a.jsx)("div",{className:"h-3 w-28 bg-muted rounded mt-2"})]}),(0,a.jsx)(c.Wu,{children:(0,a.jsxs)("div",{className:"space-y-2",children:[(0,a.jsx)("div",{className:"h-3 w-full bg-muted rounded"}),(0,a.jsx)("div",{className:"h-3 w-3/4 bg-muted rounded"})]})}),(0,a.jsx)(c.wL,{children:(0,a.jsx)("div",{className:"h-8 w-20 bg-muted rounded"})})]},e))}):0===h.length?(0,a.jsx)(c.Zp,{className:"border-dashed",children:(0,a.jsxs)(c.Wu,{className:"flex flex-col items-center justify-center py-16 text-center",children:[(0,a.jsx)("div",{className:"rounded-full bg-accent p-4 mb-4",children:(0,a.jsx)(y,{className:"h-8 w-8 text-muted-foreground"})}),(0,a.jsx)("h3",{className:"text-lg font-semibold mb-1",children:(0,a.jsx)(m.v,{beginner:"No automations yet",standard:"No automations configured",expert:"No cron jobs"})}),(0,a.jsx)("p",{className:"text-sm text-muted-foreground max-w-sm",children:(0,a.jsx)(m.v,{beginner:"Create your first automation to have your agents work on a schedule â€” like sending daily summaries or checking for updates.",standard:"Create scheduled tasks that run your agents automatically.",expert:"No cron jobs registered. Create one to schedule agent invocations."})}),(0,a.jsxs)(i.$,{className:"mt-6",children:[(0,a.jsx)(x.A,{className:"h-4 w-4 mr-2"}),(0,a.jsx)(m.v,{beginner:"Create Automation",standard:"New Automation",expert:"New Job"})]})]})}):(0,a.jsx)("div",{className:"grid grid-cols-1 md:grid-cols-2 xl:grid-cols-3 gap-4",children:h.map(e=>{var t,n,r;let l=R.has(e.id),o=_.has(e.id);return(0,a.jsxs)(c.Zp,{className:e.enabled?void 0:"opacity-60",children:[(0,a.jsxs)(c.aR,{className:"pb-3",children:[(0,a.jsxs)("div",{className:"flex items-start justify-between gap-2",children:[(0,a.jsxs)("div",{className:"flex items-center gap-2 min-w-0",children:[(0,a.jsx)("div",{className:"shrink-0 rounded-md bg-accent p-1.5",children:e.enabled?(0,a.jsx)(p.A,{className:"h-4 w-4 text-primary"}):(0,a.jsx)(g.A,{className:"h-4 w-4 text-muted-foreground"})}),(0,a.jsx)(c.ZB,{className:"text-base truncate",children:e.name||e.id})]}),(0,a.jsx)(d.E,{variant:e.enabled?"success":"secondary",children:e.enabled?"Active":"Paused"})]}),e.description&&(0,a.jsx)(c.BT,{className:"mt-1.5",children:e.description})]}),(0,a.jsxs)(c.Wu,{className:"pb-3 space-y-2 text-sm",children:[(0,a.jsxs)("div",{className:"flex items-center gap-2 text-muted-foreground",children:[(0,a.jsx)(j,{className:"h-3.5 w-3.5 shrink-0"}),(0,a.jsx)("span",{children:s("expert")?"cron"===(r=e.schedule).kind?r.expr+(r.tz?" (".concat(r.tz,")"):""):"every"===r.kind?"every ".concat(r.everyMs,"ms"):"at"===r.kind?"at ".concat(r.at):JSON.stringify(r):function(e){if("every"===e.kind){let t=Math.round(e.everyMs/6e4);if(t<60)return"Every ".concat(t," minute").concat(1===t?"":"s");let s=Math.round(t/60);if(s<24)return"Every ".concat(s," hour").concat(1===s?"":"s");let a=Math.round(s/24);return"Every ".concat(a," day").concat(1===a?"":"s")}if("at"===e.kind)try{let t=new Date(e.at);return"Once at ".concat(t.toLocaleString())}catch(t){return"Once at ".concat(e.at)}return"cron"===e.kind?function(e){let t=e.trim().split(/\s+/);if(t.length<5)return e;let[s,a,n,,r]=t;if("*"===n&&"*"===r&&!s.includes(",")&&!a.includes(",")){let e=parseInt(a,10),t=parseInt(s,10);if(!isNaN(e)&&!isNaN(t)){let s=t.toString().padStart(2,"0");return"Every day at ".concat(0===e?12:e>12?e-12:e,":").concat(s," ").concat(e>=12?"PM":"AM")}}if(s.startsWith("*/")){let e=parseInt(s.slice(2),10);if(!isNaN(e))return"Every ".concat(e," minute").concat(1===e?"":"s")}return"Cron: ".concat(e)}(e.expr):"Custom schedule"}(e.schedule)})]}),e.state.lastRunAtMs&&(0,a.jsxs)("div",{className:"flex items-center gap-2 text-muted-foreground",children:["ok"===e.state.lastStatus?(0,a.jsx)(f.A,{className:"h-3.5 w-3.5 shrink-0 text-success"}):"error"===e.state.lastStatus?(0,a.jsx)(v.A,{className:"h-3.5 w-3.5 shrink-0 text-destructive"}):(0,a.jsx)(g.A,{className:"h-3.5 w-3.5 shrink-0"}),(0,a.jsx)("span",{children:(0,a.jsx)(m.v,{beginner:"Last ran ".concat(M(e.state.lastRunAtMs)),standard:"Last run: ".concat(M(e.state.lastRunAtMs)),expert:"Last: ".concat(M(e.state.lastRunAtMs)," (").concat(null!=(t=e.state.lastStatus)?t:"unknown").concat(e.state.lastDurationMs?", ".concat(e.state.lastDurationMs,"ms"):"",")")})})]}),(0,a.jsx)(u.g,{level:"standard",children:e.state.nextRunAtMs&&(0,a.jsxs)("div",{className:"flex items-center gap-2 text-muted-foreground",children:[(0,a.jsx)(y,{className:"h-3.5 w-3.5 shrink-0"}),(0,a.jsxs)("span",{children:["Next: ","just now"===M(e.state.nextRunAtMs).replace("ago","").trim()?"imminent":new Date(e.state.nextRunAtMs).toLocaleString()]})]})}),(0,a.jsxs)(u.g,{level:"expert",children:[e.state.lastError&&(0,a.jsx)("div",{className:"text-xs text-destructive bg-destructive/10 rounded p-2 mt-1",children:e.state.lastError}),(null!=(n=e.state.consecutiveErrors)?n:0)>0&&(0,a.jsxs)(d.E,{variant:"destructive",className:"text-xs",children:[e.state.consecutiveErrors," consecutive errors"]})]}),(0,a.jsx)(u.g,{level:"expert",children:(0,a.jsxs)("div",{className:"flex flex-wrap gap-1.5 mt-1",children:[e.agentId&&(0,a.jsxs)(d.E,{variant:"outline",className:"text-xs font-mono",children:["agent:",e.agentId]}),(0,a.jsx)(d.E,{variant:"outline",className:"text-xs font-mono",children:e.sessionTarget})]})})]}),(0,a.jsxs)(c.wL,{className:"pt-0 gap-2",children:[(0,a.jsxs)(i.$,{variant:"outline",size:"sm",disabled:l||!e.enabled,onClick:()=>L(e.id),children:[l?(0,a.jsx)(N.A,{className:"h-3.5 w-3.5 mr-1.5 animate-spin"}):(0,a.jsx)(k.A,{className:"h-3.5 w-3.5 mr-1.5"}),"Run Now"]}),(0,a.jsxs)(i.$,{variant:"ghost",size:"sm",children:[(0,a.jsx)(b,{className:"h-3.5 w-3.5 mr-1.5"}),"Edit"]}),(0,a.jsx)(i.$,{variant:"ghost",size:"sm",disabled:o,onClick:()=>D(e),className:"ml-auto",children:o?(0,a.jsx)(N.A,{className:"h-3.5 w-3.5 animate-spin"}):e.enabled?(0,a.jsx)(w.A,{className:"h-4 w-4 text-success"}):(0,a.jsx)(A.A,{className:"h-4 w-4 text-muted-foreground"})})]})]},e.id)})})]})}},6021:(e,t,s)=>{"use strict";s.d(t,{A:()=>a});let a=(0,s(53573).A)("play",[["polygon",{points:"6 3 20 12 6 21 6 3",key:"1oa8hb"}]])},20432:(e,t,s)=>{"use strict";s.d(t,{A:()=>a});let a=(0,s(53573).A)("circle-alert",[["circle",{cx:"12",cy:"12",r:"10",key:"1mglay"}],["line",{x1:"12",x2:"12",y1:"8",y2:"12",key:"1pkeuh"}],["line",{x1:"12",x2:"12.01",y1:"16",y2:"16",key:"4dfq90"}]])},25588:(e,t,s)=>{"use strict";s.d(t,{DX:()=>u,TL:()=>o});var a,n=s(74166),r=s(92983),l=s(80534),c=Symbol.for("react.lazy"),i=(a||(a=s.t(n,2)))[" use ".trim().toString()];function d(e){var t;return null!=e&&"object"==typeof e&&"$$typeof"in e&&e.$$typeof===c&&"_payload"in e&&"object"==typeof(t=e._payload)&&null!==t&&"then"in t}function o(e){let t=function(e){let t=n.forwardRef((e,t)=>{let{children:s,...a}=e;if(d(s)&&"function"==typeof i&&(s=i(s._payload)),n.isValidElement(s)){var l;let e,c,i=(l=s,(c=(e=Object.getOwnPropertyDescriptor(l.props,"ref")?.get)&&"isReactWarning"in e&&e.isReactWarning)?l.ref:(c=(e=Object.getOwnPropertyDescriptor(l,"ref")?.get)&&"isReactWarning"in e&&e.isReactWarning)?l.props.ref:l.props.ref||l.ref),d=function(e,t){let s={...t};for(let a in t){let n=e[a],r=t[a];/^on[A-Z]/.test(a)?n&&r?s[a]=(...e)=>{let t=r(...e);return n(...e),t}:n&&(s[a]=n):"style"===a?s[a]={...n,...r}:"className"===a&&(s[a]=[n,r].filter(Boolean).join(" "))}return{...e,...s}}(a,s.props);return s.type!==n.Fragment&&(d.ref=t?(0,r.t)(t,i):i),n.cloneElement(s,d)}return n.Children.count(s)>1?n.Children.only(null):null});return t.displayName=`${e}.SlotClone`,t}(e),s=n.forwardRef((e,s)=>{let{children:a,...r}=e;d(a)&&"function"==typeof i&&(a=i(a._payload));let c=n.Children.toArray(a),o=c.find(x);if(o){let e=o.props.children,a=c.map(t=>t!==o?t:n.Children.count(e)>1?n.Children.only(null):n.isValidElement(e)?e.props.children:null);return(0,l.jsx)(t,{...r,ref:s,children:n.isValidElement(e)?n.cloneElement(e,void 0,a):null})}return(0,l.jsx)(t,{...r,ref:s,children:a})});return s.displayName=`${e}.Slot`,s}var u=o("Slot"),m=Symbol("radix.slottable");function x(e){return n.isValidElement(e)&&"function"==typeof e.type&&"__radixId"in e.type&&e.type.__radixId===m}},60155:(e,t,s)=>{"use strict";s.d(t,{A:()=>a});let a=(0,s(53573).A)("plus",[["path",{d:"M5 12h14",key:"1ays0h"}],["path",{d:"M12 5v14",key:"s699le"}]])},62907:(e,t,s)=>{"use strict";s.d(t,{A:()=>a});let a=(0,s(53573).A)("clock",[["circle",{cx:"12",cy:"12",r:"10",key:"1mglay"}],["polyline",{points:"12 6 12 12 16 14",key:"68esgv"}]])},71712:(e,t,s)=>{"use strict";s.d(t,{F:()=>l});var a=s(66862);let n=e=>"boolean"==typeof e?`${e}`:0===e?"0":e,r=a.$,l=(e,t)=>s=>{var a;if((null==t?void 0:t.variants)==null)return r(e,null==s?void 0:s.class,null==s?void 0:s.className);let{variants:l,defaultVariants:c}=t,i=Object.keys(l).map(e=>{let t=null==s?void 0:s[e],a=null==c?void 0:c[e];if(null===t)return null;let r=n(t)||n(a);return l[e][r]}),d=s&&Object.entries(s).reduce((e,t)=>{let[s,a]=t;return void 0===a||(e[s]=a),e},{});return r(e,i,null==t||null==(a=t.compoundVariants)?void 0:a.reduce((e,t)=>{let{class:s,className:a,...n}=t;return Object.entries(n).every(e=>{let[t,s]=e;return Array.isArray(s)?s.includes({...c,...d}[t]):({...c,...d})[t]===s})?[...e,s,a]:e},[]),null==s?void 0:s.class,null==s?void 0:s.className)}},74350:(e,t,s)=>{"use strict";s.d(t,{A:()=>a});let a=(0,s(53573).A)("zap",[["path",{d:"M4 14a1 1 0 0 1-.78-1.63l9.9-10.2a.5.5 0 0 1 .86.46l-1.92 6.02A1 1 0 0 0 13 10h7a1 1 0 0 1 .78 1.63l-9.9 10.2a.5.5 0 0 1-.86-.46l1.92-6.02A1 1 0 0 0 11 14z",key:"1xq2db"}]])},77527:(e,t,s)=>{"use strict";s.d(t,{A:()=>a});let a=(0,s(53573).A)("toggle-left",[["circle",{cx:"9",cy:"12",r:"3",key:"u3jwor"}],["rect",{width:"20",height:"14",x:"2",y:"5",rx:"7",key:"g7kal2"}]])},79861:(e,t,s)=>{Promise.resolve().then(s.bind(s,5554))},83608:(e,t,s)=>{"use strict";s.d(t,{A:()=>a});let a=(0,s(53573).A)("toggle-right",[["circle",{cx:"15",cy:"12",r:"3",key:"1afu0r"}],["rect",{width:"20",height:"14",x:"2",y:"5",rx:"7",key:"g7kal2"}]])},89214:(e,t,s)=>{"use strict";s.d(t,{A:()=>a});let a=(0,s(53573).A)("circle-check",[["circle",{cx:"12",cy:"12",r:"10",key:"1mglay"}],["path",{d:"m9 12 2 2 4-4",key:"dzmm74"}]])},94517:(e,t,s)=>{"use strict";s.d(t,{g:()=>r});var a=s(80534);s(74166);var n=s(19611);function r(e){let{level:t,children:s,fallback:r=null}=e,{isAtLeast:l}=(0,n.B)();return l(t)?(0,a.jsx)(a.Fragment,{children:s}):(0,a.jsx)(a.Fragment,{children:r})}}},e=>{e.O(0,[329,298,705,522,358],()=>e(e.s=79861)),_N_E=e.O()}]);