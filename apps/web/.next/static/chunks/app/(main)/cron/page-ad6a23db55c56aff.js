(self.webpackChunk_N_E=self.webpackChunk_N_E||[]).push([[608],{5554:(e,t,a)=>{"use strict";a.r(t),a.d(t,{default:()=>S});var s=a(80534),r=a(74166),n=a(29068),l=a(19611),i=a(74765),c=a(86719),o=a(75968),d=a(89764),u=a(94517),m=a(71216),x=a(60155),h=a(53573);let p=(0,h.A)("calendar-clock",[["path",{d:"M21 7.5V6a2 2 0 0 0-2-2H5a2 2 0 0 0-2 2v14a2 2 0 0 0 2 2h3.5",key:"1osxxc"}],["path",{d:"M16 2v4",key:"4m81vk"}],["path",{d:"M8 2v4",key:"1cmpym"}],["path",{d:"M3 10h5",key:"r794hk"}],["path",{d:"M17.5 17.5 16 16.3V14",key:"akvzfd"}],["circle",{cx:"16",cy:"16",r:"6",key:"qoo3c4"}]]);var y=a(74350),f=a(62907);let v=(0,h.A)("timer",[["line",{x1:"10",x2:"14",y1:"2",y2:"2",key:"14vaq8"}],["line",{x1:"12",x2:"15",y1:"14",y2:"11",key:"17fdiu"}],["circle",{cx:"12",cy:"14",r:"8",key:"1e1u0o"}]]);var g=a(89214),j=a(20432),N=a(88431),b=a(6021);let w=(0,h.A)("pencil",[["path",{d:"M21.174 6.812a1 1 0 0 0-3.986-3.987L3.842 16.174a2 2 0 0 0-.5.83l-1.321 4.352a.5.5 0 0 0 .623.622l4.353-1.32a2 2 0 0 0 .83-.497z",key:"1a8usu"}],["path",{d:"m15 5 4 4",key:"1mk7zo"}]]);var k=a(83608),A=a(77527);function M(e){let t=Date.now()-e;return t<6e4?"just now":t<36e5?"".concat(Math.floor(t/6e4),"m ago"):t<864e5?"".concat(Math.floor(t/36e5),"h ago"):"".concat(Math.floor(t/864e5),"d ago")}function S(){let e=(0,n.z)(e=>e.connected),t=(0,n.z)(e=>e.request),{isAtLeast:a}=(0,l.B)(),[h,S]=r.useState([]),[E,C]=r.useState(!0),[R,z]=r.useState(new Set),[$,_]=r.useState(new Set),O=r.useCallback(async()=>{if(e)try{var a;let e=await t("cron.list",{});S(null!=(a=e.jobs)?a:[])}catch(e){console.error("Failed to load cron jobs:",e)}finally{C(!1)}},[e,t]);r.useEffect(()=>{O()},[O]);let L=async e=>{z(t=>new Set(t).add(e));try{await t("cron.run",{jobId:e}),await O()}catch(e){console.error("Failed to run job:",e)}finally{z(t=>{let a=new Set(t);return a.delete(e),a})}},D=async e=>{_(t=>new Set(t).add(e.id));try{await t("cron.update",{jobId:e.id,enabled:!e.enabled}),S(t=>t.map(t=>t.id===e.id?{...t,enabled:!t.enabled}:t))}catch(e){console.error("Failed to toggle job:",e)}finally{_(t=>{let a=new Set(t);return a.delete(e.id),a})}};return(0,s.jsxs)("div",{className:"p-6 max-w-7xl mx-auto space-y-6",children:[(0,s.jsxs)("div",{className:"flex items-center justify-between",children:[(0,s.jsxs)("div",{children:[(0,s.jsx)("h1",{className:"text-2xl font-bold tracking-tight",children:(0,s.jsx)(m.v,{beginner:"Automations",standard:"Automations",expert:"Cron Jobs"})}),(0,s.jsx)("p",{className:"text-sm text-muted-foreground mt-1",children:(0,s.jsx)(m.v,{beginner:"Set up tasks that run automatically on a schedule",standard:"Schedule recurring agent tasks and automations",expert:"Manage cron-scheduled agent invocations"})})]}),(0,s.jsxs)(c.$,{children:[(0,s.jsx)(x.A,{className:"h-4 w-4 mr-2"}),(0,s.jsx)(m.v,{beginner:"New Automation",standard:"New Automation",expert:"New Job"})]})]}),(0,s.jsx)(d.w,{}),E?(0,s.jsx)("div",{className:"grid grid-cols-1 md:grid-cols-2 xl:grid-cols-3 gap-4",children:[1,2,3].map(e=>(0,s.jsxs)(i.Zp,{className:"animate-pulse",children:[(0,s.jsxs)(i.aR,{children:[(0,s.jsx)("div",{className:"h-5 w-40 bg-muted rounded"}),(0,s.jsx)("div",{className:"h-3 w-28 bg-muted rounded mt-2"})]}),(0,s.jsx)(i.Wu,{children:(0,s.jsxs)("div",{className:"space-y-2",children:[(0,s.jsx)("div",{className:"h-3 w-full bg-muted rounded"}),(0,s.jsx)("div",{className:"h-3 w-3/4 bg-muted rounded"})]})}),(0,s.jsx)(i.wL,{children:(0,s.jsx)("div",{className:"h-8 w-20 bg-muted rounded"})})]},e))}):0===h.length?(0,s.jsx)(i.Zp,{className:"border-dashed",children:(0,s.jsxs)(i.Wu,{className:"flex flex-col items-center justify-center py-16 text-center",children:[(0,s.jsx)("div",{className:"rounded-full bg-accent p-4 mb-4",children:(0,s.jsx)(p,{className:"h-8 w-8 text-muted-foreground"})}),(0,s.jsx)("h3",{className:"text-lg font-semibold mb-1",children:(0,s.jsx)(m.v,{beginner:"No automations yet",standard:"No automations configured",expert:"No cron jobs"})}),(0,s.jsx)("p",{className:"text-sm text-muted-foreground max-w-sm",children:(0,s.jsx)(m.v,{beginner:"Create your first automation to have your agents work on a schedule â€” like sending daily summaries or checking for updates.",standard:"Create scheduled tasks that run your agents automatically.",expert:"No cron jobs registered. Create one to schedule agent invocations."})}),(0,s.jsxs)(c.$,{className:"mt-6",children:[(0,s.jsx)(x.A,{className:"h-4 w-4 mr-2"}),(0,s.jsx)(m.v,{beginner:"Create Automation",standard:"New Automation",expert:"New Job"})]})]})}):(0,s.jsx)("div",{className:"grid grid-cols-1 md:grid-cols-2 xl:grid-cols-3 gap-4",children:h.map(e=>{var t,r,n;let l=R.has(e.id),d=$.has(e.id);return(0,s.jsxs)(i.Zp,{className:e.enabled?void 0:"opacity-60",children:[(0,s.jsxs)(i.aR,{className:"pb-3",children:[(0,s.jsxs)("div",{className:"flex items-start justify-between gap-2",children:[(0,s.jsxs)("div",{className:"flex items-center gap-2 min-w-0",children:[(0,s.jsx)("div",{className:"shrink-0 rounded-md bg-accent p-1.5",children:e.enabled?(0,s.jsx)(y.A,{className:"h-4 w-4 text-primary"}):(0,s.jsx)(f.A,{className:"h-4 w-4 text-muted-foreground"})}),(0,s.jsx)(i.ZB,{className:"text-base truncate",children:e.name||e.id})]}),(0,s.jsx)(o.E,{variant:e.enabled?"success":"secondary",children:e.enabled?"Active":"Paused"})]}),e.description&&(0,s.jsx)(i.BT,{className:"mt-1.5",children:e.description})]}),(0,s.jsxs)(i.Wu,{className:"pb-3 space-y-2 text-sm",children:[(0,s.jsxs)("div",{className:"flex items-center gap-2 text-muted-foreground",children:[(0,s.jsx)(v,{className:"h-3.5 w-3.5 shrink-0"}),(0,s.jsx)("span",{children:a("expert")?"cron"===(n=e.schedule).kind?n.expr+(n.tz?" (".concat(n.tz,")"):""):"every"===n.kind?"every ".concat(n.everyMs,"ms"):"at"===n.kind?"at ".concat(n.at):JSON.stringify(n):function(e){if("every"===e.kind){let t=Math.round(e.everyMs/6e4);if(t<60)return"Every ".concat(t," minute").concat(1===t?"":"s");let a=Math.round(t/60);if(a<24)return"Every ".concat(a," hour").concat(1===a?"":"s");let s=Math.round(a/24);return"Every ".concat(s," day").concat(1===s?"":"s")}if("at"===e.kind)try{let t=new Date(e.at);return"Once at ".concat(t.toLocaleString())}catch(t){return"Once at ".concat(e.at)}return"cron"===e.kind?function(e){let t=e.trim().split(/\s+/);if(t.length<5)return e;let[a,s,r,,n]=t;if("*"===r&&"*"===n&&!a.includes(",")&&!s.includes(",")){let e=parseInt(s,10),t=parseInt(a,10);if(!isNaN(e)&&!isNaN(t)){let a=t.toString().padStart(2,"0");return"Every day at ".concat(0===e?12:e>12?e-12:e,":").concat(a," ").concat(e>=12?"PM":"AM")}}if(a.startsWith("*/")){let e=parseInt(a.slice(2),10);if(!isNaN(e))return"Every ".concat(e," minute").concat(1===e?"":"s")}return"Cron: ".concat(e)}(e.expr):"Custom schedule"}(e.schedule)})]}),e.state.lastRunAtMs&&(0,s.jsxs)("div",{className:"flex items-center gap-2 text-muted-foreground",children:["ok"===e.state.lastStatus?(0,s.jsx)(g.A,{className:"h-3.5 w-3.5 shrink-0 text-success"}):"error"===e.state.lastStatus?(0,s.jsx)(j.A,{className:"h-3.5 w-3.5 shrink-0 text-destructive"}):(0,s.jsx)(f.A,{className:"h-3.5 w-3.5 shrink-0"}),(0,s.jsx)("span",{children:(0,s.jsx)(m.v,{beginner:"Last ran ".concat(M(e.state.lastRunAtMs)),standard:"Last run: ".concat(M(e.state.lastRunAtMs)),expert:"Last: ".concat(M(e.state.lastRunAtMs)," (").concat(null!=(t=e.state.lastStatus)?t:"unknown").concat(e.state.lastDurationMs?", ".concat(e.state.lastDurationMs,"ms"):"",")")})})]}),(0,s.jsx)(u.g,{level:"standard",children:e.state.nextRunAtMs&&(0,s.jsxs)("div",{className:"flex items-center gap-2 text-muted-foreground",children:[(0,s.jsx)(p,{className:"h-3.5 w-3.5 shrink-0"}),(0,s.jsxs)("span",{children:["Next: ","just now"===M(e.state.nextRunAtMs).replace("ago","").trim()?"imminent":new Date(e.state.nextRunAtMs).toLocaleString()]})]})}),(0,s.jsxs)(u.g,{level:"expert",children:[e.state.lastError&&(0,s.jsx)("div",{className:"text-xs text-destructive bg-destructive/10 rounded p-2 mt-1",children:e.state.lastError}),(null!=(r=e.state.consecutiveErrors)?r:0)>0&&(0,s.jsxs)(o.E,{variant:"destructive",className:"text-xs",children:[e.state.consecutiveErrors," consecutive errors"]})]}),(0,s.jsx)(u.g,{level:"expert",children:(0,s.jsxs)("div",{className:"flex flex-wrap gap-1.5 mt-1",children:[e.agentId&&(0,s.jsxs)(o.E,{variant:"outline",className:"text-xs font-mono",children:["agent:",e.agentId]}),(0,s.jsx)(o.E,{variant:"outline",className:"text-xs font-mono",children:e.sessionTarget})]})})]}),(0,s.jsxs)(i.wL,{className:"pt-0 gap-2",children:[(0,s.jsxs)(c.$,{variant:"outline",size:"sm",disabled:l||!e.enabled,onClick:()=>L(e.id),children:[l?(0,s.jsx)(N.A,{className:"h-3.5 w-3.5 mr-1.5 animate-spin"}):(0,s.jsx)(b.A,{className:"h-3.5 w-3.5 mr-1.5"}),"Run Now"]}),(0,s.jsxs)(c.$,{variant:"ghost",size:"sm",children:[(0,s.jsx)(w,{className:"h-3.5 w-3.5 mr-1.5"}),"Edit"]}),(0,s.jsx)(c.$,{variant:"ghost",size:"sm",disabled:d,onClick:()=>D(e),className:"ml-auto",children:d?(0,s.jsx)(N.A,{className:"h-3.5 w-3.5 animate-spin"}):e.enabled?(0,s.jsx)(k.A,{className:"h-4 w-4 text-success"}):(0,s.jsx)(A.A,{className:"h-4 w-4 text-muted-foreground"})})]})]},e.id)})})]})}},6021:(e,t,a)=>{"use strict";a.d(t,{A:()=>s});let s=(0,a(53573).A)("play",[["polygon",{points:"6 3 20 12 6 21 6 3",key:"1oa8hb"}]])},20432:(e,t,a)=>{"use strict";a.d(t,{A:()=>s});let s=(0,a(53573).A)("circle-alert",[["circle",{cx:"12",cy:"12",r:"10",key:"1mglay"}],["line",{x1:"12",x2:"12",y1:"8",y2:"12",key:"1pkeuh"}],["line",{x1:"12",x2:"12.01",y1:"16",y2:"16",key:"4dfq90"}]])},25588:(e,t,a)=>{"use strict";a.d(t,{DX:()=>u,TL:()=>d});var s,r=a(74166),n=a(92983),l=a(80534),i=Symbol.for("react.lazy"),c=(s||(s=a.t(r,2)))[" use ".trim().toString()];function o(e){var t;return null!=e&&"object"==typeof e&&"$$typeof"in e&&e.$$typeof===i&&"_payload"in e&&"object"==typeof(t=e._payload)&&null!==t&&"then"in t}function d(e){let t=function(e){let t=r.forwardRef((e,t)=>{let{children:a,...s}=e;if(o(a)&&"function"==typeof c&&(a=c(a._payload)),r.isValidElement(a)){var l;let e,i,c=(l=a,(i=(e=Object.getOwnPropertyDescriptor(l.props,"ref")?.get)&&"isReactWarning"in e&&e.isReactWarning)?l.ref:(i=(e=Object.getOwnPropertyDescriptor(l,"ref")?.get)&&"isReactWarning"in e&&e.isReactWarning)?l.props.ref:l.props.ref||l.ref),o=function(e,t){let a={...t};for(let s in t){let r=e[s],n=t[s];/^on[A-Z]/.test(s)?r&&n?a[s]=(...e)=>{let t=n(...e);return r(...e),t}:r&&(a[s]=r):"style"===s?a[s]={...r,...n}:"className"===s&&(a[s]=[r,n].filter(Boolean).join(" "))}return{...e,...a}}(s,a.props);return a.type!==r.Fragment&&(o.ref=t?(0,n.t)(t,c):c),r.cloneElement(a,o)}return r.Children.count(a)>1?r.Children.only(null):null});return t.displayName=`${e}.SlotClone`,t}(e),a=r.forwardRef((e,a)=>{let{children:s,...n}=e;o(s)&&"function"==typeof c&&(s=c(s._payload));let i=r.Children.toArray(s),d=i.find(x);if(d){let e=d.props.children,s=i.map(t=>t!==d?t:r.Children.count(e)>1?r.Children.only(null):r.isValidElement(e)?e.props.children:null);return(0,l.jsx)(t,{...n,ref:a,children:r.isValidElement(e)?r.cloneElement(e,void 0,s):null})}return(0,l.jsx)(t,{...n,ref:a,children:s})});return a.displayName=`${e}.Slot`,a}var u=d("Slot"),m=Symbol("radix.slottable");function x(e){return r.isValidElement(e)&&"function"==typeof e.type&&"__radixId"in e.type&&e.type.__radixId===m}},60155:(e,t,a)=>{"use strict";a.d(t,{A:()=>s});let s=(0,a(53573).A)("plus",[["path",{d:"M5 12h14",key:"1ays0h"}],["path",{d:"M12 5v14",key:"s699le"}]])},62907:(e,t,a)=>{"use strict";a.d(t,{A:()=>s});let s=(0,a(53573).A)("clock",[["circle",{cx:"12",cy:"12",r:"10",key:"1mglay"}],["polyline",{points:"12 6 12 12 16 14",key:"68esgv"}]])},71712:(e,t,a)=>{"use strict";a.d(t,{F:()=>l});var s=a(66862);let r=e=>"boolean"==typeof e?`${e}`:0===e?"0":e,n=s.$,l=(e,t)=>a=>{var s;if((null==t?void 0:t.variants)==null)return n(e,null==a?void 0:a.class,null==a?void 0:a.className);let{variants:l,defaultVariants:i}=t,c=Object.keys(l).map(e=>{let t=null==a?void 0:a[e],s=null==i?void 0:i[e];if(null===t)return null;let n=r(t)||r(s);return l[e][n]}),o=a&&Object.entries(a).reduce((e,t)=>{let[a,s]=t;return void 0===s||(e[a]=s),e},{});return n(e,c,null==t||null==(s=t.compoundVariants)?void 0:s.reduce((e,t)=>{let{class:a,className:s,...r}=t;return Object.entries(r).every(e=>{let[t,a]=e;return Array.isArray(a)?a.includes({...i,...o}[t]):({...i,...o})[t]===a})?[...e,a,s]:e},[]),null==a?void 0:a.class,null==a?void 0:a.className)}},74350:(e,t,a)=>{"use strict";a.d(t,{A:()=>s});let s=(0,a(53573).A)("zap",[["path",{d:"M4 14a1 1 0 0 1-.78-1.63l9.9-10.2a.5.5 0 0 1 .86.46l-1.92 6.02A1 1 0 0 0 13 10h7a1 1 0 0 1 .78 1.63l-9.9 10.2a.5.5 0 0 1-.86-.46l1.92-6.02A1 1 0 0 0 11 14z",key:"1xq2db"}]])},77527:(e,t,a)=>{"use strict";a.d(t,{A:()=>s});let s=(0,a(53573).A)("toggle-left",[["circle",{cx:"9",cy:"12",r:"3",key:"u3jwor"}],["rect",{width:"20",height:"14",x:"2",y:"5",rx:"7",key:"g7kal2"}]])},79861:(e,t,a)=>{Promise.resolve().then(a.bind(a,5554))},83608:(e,t,a)=>{"use strict";a.d(t,{A:()=>s});let s=(0,a(53573).A)("toggle-right",[["circle",{cx:"15",cy:"12",r:"3",key:"1afu0r"}],["rect",{width:"20",height:"14",x:"2",y:"5",rx:"7",key:"g7kal2"}]])},88431:(e,t,a)=>{"use strict";a.d(t,{A:()=>s});let s=(0,a(53573).A)("loader-circle",[["path",{d:"M21 12a9 9 0 1 1-6.219-8.56",key:"13zald"}]])},89214:(e,t,a)=>{"use strict";a.d(t,{A:()=>s});let s=(0,a(53573).A)("circle-check",[["circle",{cx:"12",cy:"12",r:"10",key:"1mglay"}],["path",{d:"m9 12 2 2 4-4",key:"dzmm74"}]])},94517:(e,t,a)=>{"use strict";a.d(t,{g:()=>n});var s=a(80534);a(74166);var r=a(19611);function n(e){let{level:t,children:a,fallback:n=null}=e,{isAtLeast:l}=(0,r.B)();return l(t)?(0,s.jsx)(s.Fragment,{children:a}):(0,s.jsx)(s.Fragment,{children:n})}},95859:(e,t,a)=>{"use strict";a.d(t,{b:()=>d});var s=a(74166);a(17763);var r=a(25588),n=a(80534),l=["a","button","div","form","h2","h3","img","input","label","li","nav","ol","p","select","span","svg","ul"].reduce((e,t)=>{let a=(0,r.TL)(`Primitive.${t}`),l=s.forwardRef((e,s)=>{let{asChild:r,...l}=e;return"undefined"!=typeof window&&(window[Symbol.for("radix-ui")]=!0),(0,n.jsx)(r?a:t,{...l,ref:s})});return l.displayName=`Primitive.${t}`,{...e,[t]:l}},{}),i="horizontal",c=["horizontal","vertical"],o=s.forwardRef((e,t)=>{var a;let{decorative:s,orientation:r=i,...o}=e,d=(a=r,c.includes(a))?r:i;return(0,n.jsx)(l.div,{"data-orientation":d,...s?{role:"none"}:{"aria-orientation":"vertical"===d?d:void 0,role:"separator"},...o,ref:t})});o.displayName="Separator";var d=o}},e=>{e.O(0,[329,273,705,522,358],()=>e(e.s=79861)),_N_E=e.O()}]);