(self.webpackChunk_N_E=self.webpackChunk_N_E||[]).push([[177],{483:(e,t,n)=>{"use strict";n.d(t,{A:()=>r});let r=(0,n(53573).A)("info",[["circle",{cx:"12",cy:"12",r:"10",key:"1mglay"}],["path",{d:"M12 16v-4",key:"1dtifu"}],["path",{d:"M12 8h.01",key:"e9boi3"}]])},609:(e,t,n)=>{"use strict";n.d(t,{A:()=>r});let r=(0,n(53573).A)("x",[["path",{d:"M18 6 6 18",key:"1bl5f8"}],["path",{d:"m6 6 12 12",key:"d8bk6v"}]])},11914:(e,t,n)=>{Promise.resolve().then(n.bind(n,27699)),Promise.resolve().then(n.bind(n,90184)),Promise.resolve().then(n.bind(n,64168)),Promise.resolve().then(n.bind(n,21200)),Promise.resolve().then(n.t.bind(n,85615,23))},21200:(e,t,n)=>{"use strict";n.d(t,{TooltipProvider:()=>l,ZI:()=>d,k$:()=>c,m_:()=>a});var r=n(80534),s=n(74166),o=n(42812),i=n(32824);let l=o.Kq,a=o.bL,c=o.l9,d=s.forwardRef((e,t)=>{let{className:n,sideOffset:s=4,...l}=e;return(0,r.jsx)(o.ZL,{children:(0,r.jsx)(o.UC,{ref:t,sideOffset:s,className:(0,i.cn)("z-50 overflow-hidden rounded-md bg-foreground px-3 py-1.5 text-xs text-background animate-in fade-in-0 zoom-in-95",n),...l})})});d.displayName="TooltipContent"},27699:(e,t,n)=>{"use strict";n.d(t,{GatewayProvider:()=>i});var r=n(80534),s=n(74166),o=n(29068);function i(e){let{children:t}=e,n=(0,o.z)(e=>e.connect),i=(0,o.z)(e=>e.connected);return s.useEffect(()=>{i||n(function(){let e="https:"===window.location.protocol?"wss:":"ws:",t=window.location.host;return"".concat(e,"//").concat(t)}())},[]),(0,r.jsx)(r.Fragment,{children:t})}},29068:(e,t,n)=>{"use strict";n.d(t,{z:()=>o});var r=n(81180);class s{start(){this.closed=!1,this.connect()}stop(){var e,t,n;this.closed=!0,this.reconnectTimer&&(clearTimeout(this.reconnectTimer),this.reconnectTimer=null),this.connectTimer&&(clearTimeout(this.connectTimer),this.connectTimer=null),null==(e=this.ws)||e.close(),this.ws=null,this.flushPending(Error("gateway client stopped")),null==(t=(n=this.opts).onConnectionChange)||t.call(n,!1)}get connected(){var e;return(null==(e=this.ws)?void 0:e.readyState)===WebSocket.OPEN}connect(){if(!this.closed){try{this.ws=new WebSocket(this.opts.url)}catch(e){this.scheduleReconnect();return}this.ws.addEventListener("open",()=>this.queueConnect()),this.ws.addEventListener("message",e=>{var t;return this.handleMessage(String(null!=(t=e.data)?t:""))}),this.ws.addEventListener("close",e=>{var t,n,r,s,o;let i=String(null!=(o=e.reason)?o:"");this.ws=null,this.flushPending(Error("gateway closed (".concat(e.code,"): ").concat(i))),null==(t=(n=this.opts).onClose)||t.call(n,{code:e.code,reason:i}),null==(r=(s=this.opts).onConnectionChange)||r.call(s,!1),this.scheduleReconnect()}),this.ws.addEventListener("error",()=>{})}}scheduleReconnect(){if(this.closed)return;let e=this.backoffMs;this.backoffMs=Math.min(1.7*this.backoffMs,15e3),this.reconnectTimer=setTimeout(()=>this.connect(),e)}flushPending(e){for(let[,t]of this.pending)t.timeoutId&&clearTimeout(t.timeoutId),t.reject(e);this.pending.clear()}sendConnect(){var e;if(this.connectSent)return;this.connectSent=!0,null!==this.connectTimer&&(clearTimeout(this.connectTimer),this.connectTimer=null);let t=this.opts.token||this.opts.password?{token:this.opts.token,password:this.opts.password}:void 0,n={minProtocol:3,maxProtocol:3,client:{id:"control-ui-horizon",version:"0.1.0",platform:"undefined"!=typeof navigator&&null!=(e=navigator.platform)?e:"web",mode:"webchat",instanceId:this.opts.instanceId},role:"operator",scopes:["operator.admin","operator.approvals","operator.pairing"],caps:["tool-events"],auth:t,locale:"undefined"!=typeof navigator?navigator.language:"en",userAgent:"undefined"!=typeof navigator?navigator.userAgent:""};this.request("connect",n).then(e=>{var t,n,r,s;this.backoffMs=800,null==(t=(n=this.opts).onConnectionChange)||t.call(n,!0),null==(r=(s=this.opts).onHello)||r.call(s,e)}).catch(()=>{var e;null==(e=this.ws)||e.close(4008,"connect failed")})}handleMessage(e){var t,n,r,s,o,i,l,a;let c;try{c=JSON.parse(e)}catch(e){return}let d=c;if("event"===d.type){let e=c;if("connect.challenge"===e.event){let t=e.payload,n=t&&"string"==typeof t.nonce?t.nonce:null;n&&(this.connectNonce=n,this.sendConnect());return}let o="number"==typeof e.seq?e.seq:null;null!==o&&(null!==this.lastSeq&&o>this.lastSeq+1&&(null==(t=(n=this.opts).onGap)||t.call(n,{expected:this.lastSeq+1,received:o})),this.lastSeq=o);try{null==(r=(s=this.opts).onEvent)||r.call(s,e)}catch(e){console.error("[gateway] event handler error:",e)}return}if("res"===d.type){let e=c,t=this.pending.get(e.id);if(!t)return;if(this.pending.delete(e.id),t.timeoutId&&clearTimeout(t.timeoutId),e.ok)t.resolve(e.payload);else{let n=Error(null!=(a=null==(o=e.error)?void 0:o.message)?a:"request failed");n.code=null==(i=e.error)?void 0:i.code,n.details=null==(l=e.error)?void 0:l.details,t.reject(n)}return}}request(e,t){var n,r,s;let o=arguments.length>2&&void 0!==arguments[2]?arguments[2]:3e4;if(!this.ws||this.ws.readyState!==WebSocket.OPEN)return Promise.reject(Error("gateway not connected"));let i=null!=(s=null==(n=(r=crypto).randomUUID)?void 0:n.call(r))?s:Math.random().toString(36).slice(2,10),l=new Promise((t,n)=>{let r=setTimeout(()=>{this.pending.delete(i),n(Error("request '".concat(e,"' timed out after ").concat(o,"ms")))},o);this.pending.set(i,{resolve:e=>t(e),reject:n,timeoutId:r})});return this.ws.send(JSON.stringify({type:"req",id:i,method:e,params:t})),l}queueConnect(){this.connectNonce=null,this.connectSent=!1,null!==this.connectTimer&&clearTimeout(this.connectTimer),this.connectTimer=setTimeout(()=>{this.sendConnect()},750)}constructor(e){this.opts=e,this.ws=null,this.pending=new Map,this.closed=!1,this.lastSeq=null,this.connectNonce=null,this.connectSent=!1,this.connectTimer=null,this.backoffMs=800,this.reconnectTimer=null}}let o=(0,r.v)((e,t)=>({connected:!1,connecting:!1,error:null,client:null,hello:null,snapshot:null,eventListeners:new Map,connect:(n,r)=>{let o=t().client;o&&o.stop(),e({connecting:!0,error:null});let i=new s({url:n,token:null==r?void 0:r.token,password:null==r?void 0:r.password,instanceId:null==r?void 0:r.instanceId,onHello:t=>{var n;e({connected:!0,connecting:!1,hello:t,snapshot:null!=(n=t.snapshot)?n:null,error:null})},onEvent:e=>{let n=t().eventListeners.get(e.event);if(n)for(let t of n)try{t(e.payload)}catch(t){console.error("[gateway] event handler error for ".concat(e.event,":"),t)}let r=t().eventListeners.get("*");if(r)for(let t of r)try{t(e)}catch(e){console.error("[gateway] wildcard handler error:",e)}},onClose:()=>{e({connected:!1})},onConnectionChange:t=>{e({connected:t,connecting:!1})}});e({client:i}),i.start()},disconnect:()=>{let n=t().client;n&&(n.stop(),e({client:null,connected:!1,connecting:!1,hello:null,snapshot:null}))},request:async(e,n)=>{let r=t().client;if(!r)throw Error("Gateway not connected");return r.request(e,n)},addEventListener:(n,r)=>{let s=t().eventListeners;return s.has(n)||s.set(n,new Set),s.get(n).add(r),e({eventListeners:new Map(s)}),()=>{var s;let o=t().eventListeners;null==(s=o.get(n))||s.delete(r),e({eventListeners:new Map(o)})}}}))},32824:(e,t,n)=>{"use strict";n.d(t,{cn:()=>o});var r=n(66862),s=n(7589);function o(){for(var e=arguments.length,t=Array(e),n=0;n<e;n++)t[n]=arguments[n];return(0,s.QP)((0,r.$)(t))}},64168:(e,t,n)=>{"use strict";n.d(t,{ToastViewport:()=>b});var r=n(80534),s=n(74166),o=n(32824),i=n(483),l=n(89214),a=n(20432),c=n(88092),d=n(609),h=n(81180);let u=0,m=(0,h.v)(e=>({toasts:[],add:t=>{var n,r;let s="toast-".concat(++u),o={id:s,title:t.title,description:t.description,variant:null!=(n=t.variant)?n:"default",duration:null!=(r=t.duration)?r:4e3,createdAt:Date.now()};return e(e=>({toasts:[...e.toasts,o]})),setTimeout(()=>{e(e=>({toasts:e.toasts.filter(e=>e.id!==s)}))},o.duration),s},dismiss:t=>{e(e=>({toasts:e.toasts.filter(e=>e.id!==t)}))},clear:()=>e({toasts:[]})})),p={default:"bg-card border-border",success:"bg-card border-l-4 border-l-success border-border",error:"bg-card border-l-4 border-l-destructive border-border",warning:"bg-card border-l-4 border-l-warning border-border",info:"bg-card border-l-4 border-l-primary border-border"},v={default:i.A,success:l.A,error:a.A,warning:c.A,info:i.A},f={default:"text-muted-foreground",success:"text-success",error:"text-destructive",warning:"text-warning",info:"text-primary"};function g(e){let{toast:t,onDismiss:n}=e,i=v[t.variant],[l,a]=s.useState(!1);return(0,r.jsxs)("div",{className:(0,o.cn)("relative flex items-start gap-3 rounded-lg border p-4 shadow-lg transition-all duration-200",p[t.variant],l?"opacity-0 translate-x-4":"opacity-100 translate-x-0 animate-in slide-in-from-right-full fade-in-0"),children:[(0,r.jsx)(i,{className:(0,o.cn)("h-5 w-5 shrink-0 mt-0.5",f[t.variant])}),(0,r.jsxs)("div",{className:"flex-1 min-w-0",children:[(0,r.jsx)("p",{className:"text-sm font-medium text-foreground",children:t.title}),t.description&&(0,r.jsx)("p",{className:"text-xs text-muted-foreground mt-0.5",children:t.description})]}),(0,r.jsx)("button",{onClick:()=>{a(!0),setTimeout(n,200)},className:"shrink-0 rounded-md p-1 text-muted-foreground hover:text-foreground hover:bg-accent transition-colors","aria-label":"Dismiss",children:(0,r.jsx)(d.A,{className:"h-3.5 w-3.5"})})]})}function b(){let e=m(e=>e.toasts),t=m(e=>e.dismiss);return 0===e.length?null:(0,r.jsx)("div",{className:"fixed bottom-4 right-4 z-[100] flex flex-col gap-2 w-80 max-h-[50vh] overflow-hidden pointer-events-none lg:bottom-6 lg:right-6",children:e.slice(-5).map(e=>(0,r.jsx)("div",{className:"pointer-events-auto",children:(0,r.jsx)(g,{toast:e,onDismiss:()=>t(e.id)})},e.id))})}},69824:(e,t,n)=>{"use strict";n.d(t,{n:()=>o});var r=n(81180),s=n(4825);let o=(0,r.v)()((0,s.Zr)(e=>({theme:"system",resolvedTheme:"dark",sidebarCollapsed:!1,sidebarMobileOpen:!1,commandPaletteOpen:!1,setTheme:t=>e({theme:t}),setResolvedTheme:t=>e({resolvedTheme:t}),toggleSidebar:()=>e(e=>({sidebarCollapsed:!e.sidebarCollapsed})),setSidebarCollapsed:t=>e({sidebarCollapsed:t}),setSidebarMobileOpen:t=>e({sidebarMobileOpen:t}),setCommandPaletteOpen:t=>e({commandPaletteOpen:t})}),{name:"openclaw-ui",partialize:e=>({theme:e.theme,sidebarCollapsed:e.sidebarCollapsed})}))},85615:()=>{},88092:(e,t,n)=>{"use strict";n.d(t,{A:()=>r});let r=(0,n(53573).A)("triangle-alert",[["path",{d:"m21.73 18-8-14a2 2 0 0 0-3.48 0l-8 14A2 2 0 0 0 4 21h16a2 2 0 0 0 1.73-3",key:"wmoenq"}],["path",{d:"M12 9v4",key:"juzpu7"}],["path",{d:"M12 17h.01",key:"p32p05"}]])},89214:(e,t,n)=>{"use strict";n.d(t,{A:()=>r});let r=(0,n(53573).A)("circle-check",[["circle",{cx:"12",cy:"12",r:"10",key:"1mglay"}],["path",{d:"m9 12 2 2 4-4",key:"dzmm74"}]])},90184:(e,t,n)=>{"use strict";n.d(t,{ThemeProvider:()=>i});var r=n(80534),s=n(74166),o=n(69824);function i(e){let{children:t}=e,n=(0,o.n)(e=>e.theme),i=(0,o.n)(e=>e.setResolvedTheme);return s.useEffect(()=>{let e=document.documentElement,t=window.matchMedia("(prefers-color-scheme: dark)");function r(){let r="system"===n?t.matches?"dark":"light":n;e.classList.toggle("dark","dark"===r),i(r)}return r(),t.addEventListener("change",r),()=>t.removeEventListener("change",r)},[n,i]),(0,r.jsx)(r.Fragment,{children:t})}}},e=>{e.O(0,[476,329,583,705,522,358],()=>e(e.s=11914)),_N_E=e.O()}]);